!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2),s=(i=o)&&i.__esModule?i:{default:i};var l="undefined"!=typeof window&&window||t,a=l.voPlayer;a||(a=l.voPlayer={}),a.voFCCStylePlugin=s.default,e.default=a}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context_=e,this.Constants=e.SubtitleConstants,this.video_=null,this.ttmlRenderingDiv_=null,this.subtitleStyles_={},this.LastBoundingBoxSetByUser_={},this.LastBoundingBoxEleUsed_={},this.clearPreviewText_=this.clearPreviewText.bind(this)}return i(t,null,[{key:"voName",get:function(){return"voFCCStylePlugin"}}]),i(t,[{key:"setConfig",value:function(t,e){this.video_=t,this.ttmlRenderingDiv_=e}},{key:"setSubtitleStyles",value:function(t){var e=!1;t&&t.hasOwnProperty("enable")?(this.subtitleStyles_.enable=t.enable,t.fontBackgroundColor&&(this.subtitleStyles_.fontBackgroundColor=t.fontBackgroundColor),t.fontBackgroundOpacity&&(this.subtitleStyles_.fontBackgroundOpacity=t.fontBackgroundOpacity),t.fontColor&&(this.subtitleStyles_.fontColor=t.fontColor),t.fontOpacity&&(this.subtitleStyles_.fontOpacity=t.fontOpacity),t.fontFamily&&(this.subtitleStyles_.fontFamily=t.fontFamily),t.fontEdgeType&&(this.subtitleStyles_.fontEdgeType=t.fontEdgeType),t.fontEdgeColor&&(this.subtitleStyles_.fontEdgeColor=t.fontEdgeColor),t.fontEdgeOpacity&&(this.subtitleStyles_.fontEdgeOpacity=t.fontEdgeOpacity),t.fontSize&&(this.subtitleStyles_.fontSize=t.fontSize),t.fontBold&&(this.subtitleStyles_.fontBold=t.fontBold),t.fontUnderline&&(this.subtitleStyles_.fontUnderline=t.fontUnderline),t.fontItalic&&(this.subtitleStyles_.fontItalic=t.fontItalic),t.windowColor&&(this.subtitleStyles_.windowColor=t.windowColor),t.windowOpacity&&(this.subtitleStyles_.windowOpacity=t.windowOpacity),t.boundingBox&&(this.subtitleStyles_.boundingBox=t.boundingBox),t.fontHorzPosition&&(this.subtitleStyles_.fontHorzPosition=t.fontHorzPosition),t.fontVertPosition&&(this.subtitleStyles_.fontVertPosition=t.fontVertPosition),t.subtitleTrim&&(this.subtitleStyles_.subtitleTrim=t.subtitleTrim),t.enableAutoAdjustment&&(this.subtitleStyles_.enableAutoAdjustment=t.enableAutoAdjustment),t.previewSubtitleText&&(this.subtitleStyles_.previewSubtitleText=t.previewSubtitleText)):(this.subtitleStyles_={},this.LastBoundingBoxSetByUser_={},this.LastBoundingBoxEleUsed_={},e=!0),e||this.setPreviewText()}},{key:"getDefaultSubtitleStyles",value:function(){var t={enable:!1,fontSize:{enable:!1,value:"50%"},fontFamily:{enable:!1,value:"Arial"},fontColor:{enable:!1,value:"white"},fontOpacity:{enable:!1,value:1},fontBackgroundColor:{enable:!1,value:"black"},fontBackgroundOpacity:{enable:!1,value:1},windowColor:{enable:!1,value:"black"},windowOpacity:{enable:!1,value:1},fontBold:{enable:!1,value:!1},fontUnderline:{enable:!1,value:!1},fontItalic:{enable:!1,value:!1},fontEdgeType:{enable:!1,value:"none"},fontEdgeColor:{enable:!1,value:"blue"},fontEdgeOpacity:{enable:!1,value:1},boundingBox:{enable:!1,value:{left:"10%",right:"84%",top:"90%",bottom:"92%"}},fontHorzPosition:{enable:!1,value:"center"},fontVertPosition:{enable:!1,value:"center"},enableAutoAdjustment:!1};return t}},{key:"setFontPosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!this.subtitleStyles_||!this.subtitleStyles_.enable)return e;if(this.subtitleStyles_.fontHorzPosition&&this.subtitleStyles_.fontHorzPosition.enable){if(n&&e.match("width: [0-9]+([.]{1}[0-9]+){0,1}%; (.*)height: [0-9]+([.]{1}[0-9]+){0,1}%;")){var i="100%";e=t.updateAttri(e,this.Constants.BBOX_REGEXP.WIDTH,i,this.Constants.BBOX.WIDTH)}e=t.updateAttri(e,this.Constants.TEXT_ALIGN_REGEXP,this.subtitleStyles_.fontHorzPosition.value,this.Constants.TEXTALIGN)}return e}},{key:"setFontEdge",value:function(e){if(!e)return e;if(!this.subtitleStyles_.fontEdgeType||!this.subtitleStyles_.fontEdgeType.enable)return e;var n="Blue",i=1;this.subtitleStyles_.fontEdgeColor&&this.subtitleStyles_.fontEdgeColor.enable&&(n=this.subtitleStyles_.fontEdgeColor.value),this.subtitleStyles_.fontEdgeOpacity&&this.subtitleStyles_.fontEdgeOpacity.enable&&(i=this.subtitleStyles_.fontEdgeOpacity.value);var s=(0,o.createRGBA)(n,i),l="text-shadow: "+s+" ";switch(this.subtitleStyles_.fontEdgeType.value){case this.Constants.EDGE_STYLE.NONE:l="text-shadow: none";break;case this.Constants.EDGE_STYLE.RAISED:l+="1px 0";break;case this.Constants.EDGE_STYLE.DEPRESSED:l+="-1px -1px";break;case this.Constants.EDGE_STYLE.UNIFORM:l="text-shadow: "+s+" -1px -1px, "+s+" 1px 1px";break;case this.Constants.EDGE_STYLE.LEFTDROP_SHADOW:l+="-1px 1px";break;case this.Constants.EDGE_STYLE.RIGHTDROP_SHADOW:l+="1px 1px";break;default:return e}return t.updateAttri2(e,l,this.Constants.TEXTSHADOW)}},{key:"setFontStyles",value:function(e){var n=this;if(this.subtitleStyles_&&this.subtitleStyles_.enable&&e&&e.style&&e.style.cssText){var i=e.style.cssText,o=function(){return n.subtitleStyles_.fontBackgroundColor&&n.subtitleStyles_.fontBackgroundColor.enable&&(i=t.setColor(i,n.Constants.BGCOLOR_REGEXP,n.subtitleStyles_.fontBackgroundColor.value,n.Constants.BGCOLOR)),i},s=function(){return n.subtitleStyles_.fontBackgroundOpacity&&n.subtitleStyles_.fontBackgroundOpacity.enable&&(i=t.setOpacity(i,n.Constants.BGCOLOR_REGEXP,n.subtitleStyles_.fontBackgroundOpacity.value)),i},l=function(){var e=n;if(!i)return i;if(n.subtitleStyles_.fontSize&&n.subtitleStyles_.fontSize.enable){var l=function(t){switch(t){case e.Constants.FTSIZE.FTSIZE_1:return"8px";case e.Constants.FTSIZE.FTSIZE_2:return"12px";case e.Constants.FTSIZE.FTSIZE_3:return"16px";case e.Constants.FTSIZE.FTSIZE_4:return"20px";case e.Constants.FTSIZE.FTSIZE_5:return"24px";case e.Constants.FTSIZE.FTSIZE_6:return"28px";case e.Constants.FTSIZE.FTSIZE_7:return"32px";default:return"16px"}}(n.subtitleStyles_.fontSize.value);if(parseInt(l)<=12){var a="scale("+parseInt(l)/12+")";i=t.updateAttri(i,n.Constants.TRANSFORM_REGEXP,a,n.Constants.TRANSFORM),i=t.updateAttri(i,n.Constants.DISPLAY_REGEXP,"inline-block",n.Constants.DISPLAY)}i=t.updateAttri(i,n.Constants.FS_REGEXP,l,n.Constants.FS)}if(n.subtitleStyles_.fontBold&&n.subtitleStyles_.fontBold.enable){var r=n.subtitleStyles_.fontBold.value?"bold":"normal";i=t.updateAttri(i,n.Constants.FW_REGEXP,r,n.Constants.FW)}if(n.subtitleStyles_.fontUnderline&&n.subtitleStyles_.fontUnderline.enable){var u=n.subtitleStyles_.fontUnderline.value?"underline":"none";i=t.updateAttri(i,n.Constants.TD_REGEXP,u,n.Constants.TD)}if(n.subtitleStyles_.fontItalic&&n.subtitleStyles_.fontItalic.enable){var d=n.subtitleStyles_.fontItalic.value?"italic":"normal";i=t.updateAttri(i,n.Constants.FONTSTYLE_REGEXP,d,n.Constants.FONTSTYLE)}if(n.subtitleStyles_.fontFamily&&n.subtitleStyles_.fontFamily.enable){var c="font-family: "+n.subtitleStyles_.fontFamily.value;i=t.updateAttri2(i,c,n.Constants.FF)}return n.subtitleStyles_.fontColor&&n.subtitleStyles_.fontColor.enable&&(i=t.setColor(i,n.Constants.COLOR_REGEXP,n.subtitleStyles_.fontColor.value,n.Constants.FONTCOLOR)),n.subtitleStyles_.fontOpacity&&n.subtitleStyles_.fontOpacity.enable&&(i=t.setOpacity(i,n.Constants.COLOR_REGEXP,n.subtitleStyles_.fontOpacity.value)),i=o(),i=s(),i=n.setFontEdge(i),i=n.setFontPosition(i)};i.match(this.Constants.BGCOLOR_REGEXP)&&(i=this.setWindowColor(i)),e.style.cssText=this.setFontPosition(i,!0),"SPAN"===e.tagName&&(e.style.cssText=o(),e.style.cssText=s());for(var a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];r.style&&r.style.cssText?this.setFontStyles(r):e.style.cssText=l()}}}},{key:"setWindowColor",value:function(e){return e&&this.subtitleStyles_&&this.subtitleStyles_.enable?(this.subtitleStyles_.windowColor&&this.subtitleStyles_.windowColor.enable&&(e=t.setColor(e,this.Constants.BGCOLOR_REGEXP,this.subtitleStyles_.windowColor.value,this.Constants.BGCOLOR)),this.subtitleStyles_.windowOpacity&&this.subtitleStyles_.windowOpacity.enable&&(e=t.setOpacity(e,this.Constants.BGCOLOR_REGEXP,this.subtitleStyles_.windowOpacity.value)),e):e}},{key:"setBoundingBox",value:function(t){t&&t.style&&(this.subtitleStyles_.boundingBox&&this.subtitleStyles_.boundingBox.enable&&(null!=this.LastBoundingBoxSetByUser_&&null!=this.LastBoundingBoxSetByUser_.value||(this.LastBoundingBoxSetByUser_=this.subtitleStyles_.boundingBox),null!=this.LastBoundingBoxEleUsed_&&null!=this.LastBoundingBoxEleUsed_.left||(this.LastBoundingBoxEleUsed_=this.subtitleStyles_.boundingBox),t.style.positon="absolute",t.style.left=""!=this.subtitleStyles_.boundingBox.value.left?this.LastBoundingBoxEleUsed_.left:"",t.style.right=""!=this.subtitleStyles_.boundingBox.value.right?this.LastBoundingBoxEleUsed_.right:"",t.style.top=""!=this.subtitleStyles_.boundingBox.value.top?this.LastBoundingBoxEleUsed_.top:"",t.style.bottom=""!=this.subtitleStyles_.boundingBox.value.bottom?this.LastBoundingBoxEleUsed_.bottom:"",this.LastBoundingBoxSetByUser_.value.left!=this.subtitleStyles_.boundingBox.value.left&&this.LastBoundingBoxSetByUser_.value.right==this.subtitleStyles_.boundingBox.value.right&&(t.style.left=this.subtitleStyles_.boundingBox.value.left,t.style.right="",this.LastBoundingBoxEleUsed_.left=this.subtitleStyles_.boundingBox.value.left,this.LastBoundingBoxEleUsed_.value.right=""),this.LastBoundingBoxSetByUser_.value.right!=this.subtitleStyles_.boundingBox.value.right&&this.LastBoundingBoxSetByUser_.value.left==this.subtitleStyles_.boundingBox.value.left&&(t.style.right=this.subtitleStyles_.boundingBox.value.right,t.style.left="",this.LastBoundingBoxEleUsed_.right=this.subtitleStyles_.boundingBox.value.right,this.LastBoundingBoxEleUsed_.left=""),this.LastBoundingBoxSetByUser_.value.top!=this.subtitleStyles_.boundingBox.value.top&&this.LastBoundingBoxSetByUser_.value.bottom==this.subtitleStyles_.boundingBox.value.bottom&&(t.style.top=this.subtitleStyles_.boundingBox.value.top,t.style.bottom="",this.LastBoundingBoxEleUsed_.top=this.subtitleStyles_.boundingBox.value.top,this.LastBoundingBoxEleUsed_.bottom=""),this.LastBoundingBoxSetByUser_.value.bottom!=this.subtitleStyles_.boundingBox.value.bottom&&this.LastBoundingBoxSetByUser_.value.top==this.subtitleStyles_.boundingBox.value.top&&(t.style.bottom=this.subtitleStyles_.boundingBox.value.bottom,t.style.top="",this.LastBoundingBoxEleUsed_.bottom=this.subtitleStyles_.boundingBox.value.bottom,this.LastBoundingBoxEleUsed_.top="")),this.LastBoundingBoxSetByUser_=this.subtitleStyles_.boundingBox)}},{key:"autoAdjustment",value:function(t){this.subtitleStyles_.enableAutoAdjustment&&(t.positon="absolute",t.left="10%",t.top="80%",t.width="80%",t.height="20%")}},{key:"setCueStyles",value:function(t){if(this.subtitleStyles_&&this.subtitleStyles_.enable&&t&&t.style&&t.style.cssText){this.setBoundingBox(t),this.autoAdjustment(t.style);var e=t.style.cssText;e=this.setFontPosition(e,!0),t.style.cssText=this.setWindowColor(e),this.setFontStyles(t)}}},{key:"setPreviewText",value:function(){this.video_&&this.video_.parentNode&&this.subtitleStyles_&&this.subtitleStyles_.enable&&(this.ttmlRenderingDiv_&&this.ttmlRenderingDiv_.childNodes&&this.ttmlRenderingDiv_.childNodes.length>0||(this.previewContainer&&document.getElementsByClassName("previewText").length||(this.previewContainer=this.video_.parentNode.appendChild(document.createElement("div")),this.previewContainer.id="previewText",this.previewContainer.className="previewText",this.previewContainer.style.cssText="position: absolute; bottom: 20%; text-align: center; color: rgba(255, 255, 255, 1); padding-left: 10px; padding-right: 10px;",this.previewContainer.appendChild(document.createElement("span"))),this.previewContainer.childNodes[0]&&(this.previewContainer.childNodes[0].textContent=this.subtitleStyles_.previewSubtitleText?this.subtitleStyles_.previewSubtitleText:"FCC Subtitle Sample",this.previewContainer.childNodes[0].style.cssText="background-color: rgba(0, 0, 0, 1); font-size: 100%; display: inline-block;",this.previewContainer.style.width=this.previewContainer.childNodes[0].textContent.length+4+"%",this.previewContainer.style.left=50-(this.previewContainer.childNodes[0].textContent.length+4)/2+"%",this.previewContainer.style.height="6%"),this.setCueStyles(this.previewContainer),clearTimeout(this.previewTimeout),this.previewTimeout=setTimeout(this.clearPreviewText_,1e3)))}},{key:"clearPreviewText",value:function(){this.video_&&this.video_.parentNode&&this.previewContainer&&document.getElementsByClassName("previewText").length&&(clearTimeout(this.previewTimeout),this.video_.parentNode.removeChild(this.previewContainer),this.previewContainer=null)}}],[{key:"setColor",value:function(t,e,n,i){return t&&e?t.match(e)?t.replace(e,"$1"+(0,o.createRGBA)(n)):t+(i+": ")+(0,o.createRGBA)(n)+";":t}},{key:"setOpacity",value:function(t,e,n){if(!t||!e)return t;var i=t.match(e)?t.match(e)[0]:null;return i&&(i=i.match(/rgba/)?i.replace(/((\d*\.)?\d*)?\)/gi,n+")"):i.match(/rgb/)?i.replace(/rgb/,"rgba").replace(/\)$/gi,", "+n+")"):null)?t.replace(e,i):t}},{key:"updateAttri",value:function(t,e,n,i){return t&&e?t.match(e)?t.replace(e,"$1"+n):t+" "+i+": "+n+";":t}},{key:"updateAttri2",value:function(t,e,n){if(!t)return t;var i=t.indexOf(n);if(0>i)return t+" "+e+";";var o=t.slice(0,i),s=t.slice(i);return o+e+(s=s.slice(s.indexOf(";")))}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertHTMLCaptions=void 0,e.createRGBA=u,e.getStyle=d;var i,o=n(4),s=(i=o)&&i.__esModule?i:{default:i};function l(t){for(var e="",n=0;n<t.length;++n){e+=t[n].uchar}return e.length-e.replace(/^\s+/,"").length}function a(t,e,n){if(n){var i=n(t.y1,t.y1,t.x,t.x2);return{left:i.Left+"%",top:i.Top+"%",width:(e>0?e+4:100-i.Left)+"%",height:Math.max(i.Bottom-i.Top,6.66*(t.y2-1-t.y1))+"%"}}return{left:3.125*t.x+"%",top:6.66*t.y1+"%",width:(e>0?e+4:100-3.125*t.x)+"%",height:6.66*Math.max(t.y2-1-t.y1,1)+"%"}}function r(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t)return t;switch(t.toLowerCase()){case s.default.COLOR.RED:return"rgba(255, 0, 0, "+e+")";case s.default.COLOR.GREEN:return"rgba(0, 255, 0, "+e+")";case s.default.COLOR.BLUE:return"rgba(0, 0, 255, "+e+")";case s.default.COLOR.CYAN:return"rgba(0, 255, 255, "+e+")";case s.default.COLOR.MAGENTA:return"rgba(255, 0, 255, "+e+")";case s.default.COLOR.YELLOW:return"rgba(255, 255, 0, "+e+")";case s.default.COLOR.WHITE:return"rgba(255, 255, 255, "+e+")";case s.default.COLOR.BLACK:return"rgba(0, 0, 0, "+e+")";default:return t}}function d(t,e,n,i){var o=(t.clientWidth>0?t.clientWidth:t.parentNode.clientWidth)/15;e&&n&&(o=e.FontInfo.FontSize);var s=["font-size: "+o+"px;","font-family: Menlo, Consolas, 'Cutive Mono', monospace;","display: inline-block;","white-space: pre;"].join(" ");e?s+=n?["color: "+("rgba("+e.FontInfo.FontColor.Red+", "+e.FontInfo.FontColor.Green+", "+e.FontInfo.FontColor.Blue+", 1)")+";","font-style: "+(e.FontEffectInfo.Italic?"italic":"normal")+";","text-decoration: "+(e.FontEffectInfo.Underline?"underline":"none")+";","background-color: "+(i.fillColor?i.fillColor:"transparent")+";","text-shadow:none;"].join(" "):["color: "+(e.foreground?u(e.foreground):"rgba(255, 255, 255, 1)")+";","font-style: "+(e.italics?"italic":"normal")+";","text-decoration: "+(e.underline?"underline":"none")+";","background-color: "+(e.background?u(e.background):"rgba(0, 0, 0, 1)")+";"].join(" "):s+=["justify-content: flex-start;","text-align: left;","color: rgba(255, 255, 255, 1);","font-style: normal;","line-height: normal;","font-weight: normal;","text-decoration: none;","width: 100%;"].join(" ");return s}function c(t){return t.replace(/^\s+/g,"")}function h(t){return t.replace(/\s+$/g,"")}function f(t,e,n){var i,o,l,a,r,u;t&&e&&(t.left=(i=t.left,o=e.left,s.default.EMPTYSTRING===i?o:Math.min(parseFloat(i),parseFloat(o))+"%"),t.width=(l=t.width,a=e.width,s.default.EMPTYSTRING===l?a:Math.max(parseFloat(l),parseFloat(a))+"%"),t.top=(r=t.top,u=e.top,s.default.EMPTYSTRING===r?u:Math.min(parseFloat(r),parseFloat(u))+"%"),t.height=function(t,e,n){return n?s.default.EMPTYSTRING===t?e:parseFloat(t)+parseFloat(e)+"%":s.default.EMPTYSTRING===t?e:Math.max(parseFloat(t),parseFloat(e))+"%"}(t.height,e.height,n))}function p(t,e){t&&e&&(t.cssText+="align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;",t.left=e.left)}e.convertHTMLCaptions={createHTMLCaptionsFromScreen:function(t,e,n,i,o){var s=null,u=!1,y=-1,g={start:e,end:n,spans:[]},b="style_cea608_white_black",v={},_={},S=[],E=void 0,m=void 0;if(i.is708cc)return this.createHTMLCaptionsFrom708Screen(t,e,n,i,o);for(E=0;E<15;++E){var x=i.rows[E],T="",C=null;if(!1===x.isEmpty()){var B=l(x.chars);null===s&&(s={x:B,y1:E,y2:E+1,p:[]}),B!==y&&u&&(s.p.push(g),g={start:e,end:n,spans:[]},s.y2=E,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===v.hasOwnProperty(s.name)?(S.push(s),v[s.name]=s):v[s.name].p.concat(s.p),s={x:B,y1:E,y2:E+1,p:[]});for(var w=0;w<x.chars.length;++w){var O=x.chars[w],F=O.penState;if(null===C||!F.equals(C)){T.trim().length>0&&(g.spans.push({name:b,line:T,row:E}),T="");var R="style_cea608_"+F.foreground+"_"+F.background;F.underline&&(R+="_underline"),F.italics&&(R+="_italics"),_.hasOwnProperty(R)||(_[R]=JSON.parse(JSON.stringify(F))),C=F,b=R}T+=O.uchar}T.trim().length>0&&g.spans.push({name:b,line:T,row:E}),u=!0,y=B}else u=!1,y=-1,s&&(s.p.push(g),g={start:e,end:n,spans:[]},s.y2=E,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===v.hasOwnProperty(s.name)?(S.push(s),v[s.name]=s):v[s.name].p.concat(s.p),s=null)}s&&(s.p.push(g),s.y2=E+1,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===v.hasOwnProperty(s.name)?(S.push(s),v[s.name]=s):v[s.name].p.concat(s.p),s=null);var I=[],L=document.createElement("div");L.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none; padding-left: 10px; padding-right: 10px; justify-content: flex-start;";var P=document.createElement("div");P.className="paragraph bodyStyle",P.style.cssText=d(t);var N=document.createElement("div");N.className="cueUniWrapper",N.style.cssText="unicode-bidi: normal; direction: ltr;";var G=0,k=!0;for(E=0;E<S.length;++E)for(var A=S[E],D=0;D<A.p.length;++D){var H=A.p[D];for(m=0;m<H.spans.length;++m){var M=H.spans[m];if(M.line.length>0){if(!k&&G!==M.row){var U=document.createElement("br");U.className="lineBreak",N.appendChild(U),0}var X=!1;G===M.row&&(X=!0),G=M.row,k=!1;var W=_[M.name],j=document.createElement("span");j.className="span "+M.name+" customSpanColor",j.style.cssText+=d(t,W),0!==m&&X?m===H.spans.length-1?j.textContent=h(M.line):j.textContent=M.line:0===m&&H.spans.length>1&&M.row===H.spans[1].row?j.textContent=c(M.line):j.textContent=M.line.trim(),j.textContent.length,f(L.style,a(A,j.textContent.length),!X),p(j.style,a(A,j.textContent.length)),N.appendChild(j)}}}P.appendChild(N),L.appendChild(P),L.id="sub_cea608_"+r(e)+r(n)+r(L.textContent);var z={bodyStyle:["%",90]};for(m in _)_.hasOwnProperty(m)&&(z[m]=["%",90]);return I.push({type:"html",start:e,end:n,cueHTMLElement:L,cueID:L.id,cellResolution:[32,15],isFromHTMLCaptions:!0,regions:S,videoHeight:t.clientHeight,videoWidth:t.clientWidth,fontSize:z,lineHeight:{},linePadding:{}}),I},createHTMLCaptionsFrom708Screen:function(t,e,n,i,o){var s,u,y=null,g=!1,b=-1,v={start:e,end:n,spans:[]},_="style_cea708_white_black",S={},E={},m=[],x=[],T=void 0,C=void 0,B=void 0,w=[];for(T=0;T<i.captionArray.length;T++){var O=i.captionArray[T];if(!O)return w;if(e=O.cueStartTime,n=O.cueEndTime,e&&n&&e!=n){var F="rgb("+O.rectInfo.RectFillColor.Red+", "+O.rectInfo.RectFillColor.Green+", "+O.rectInfo.RectFillColor.Blue+")",R="rgb("+O.rectInfo.RectBorderColor.Red+", "+O.rectInfo.RectBorderColor.Green+", "+O.rectInfo.RectBorderColor.Blue+")";x={windID:T,rect:{top:O.rectInfo.Rect.Top,left:O.rectInfo.Rect.Left,bottom:O.rectInfo.Rect.Bottom,right:O.rectInfo.Rect.Right},borderType:O.rectInfo.RectBorderType,borderColor:R,fillColor:F,effectDirection:O.rectInfo.RectDisplayEffect.EffectDirection,effectSpeed:O.rectInfo.RectDisplayEffect.EffectSpeed,effectType:O.rectInfo.RectDisplayEffect.EffectType};var I=(s=O.rectInfo.Rect.Left,(u=void 0===(u=void 0)||u)&&(s-=10),0===s?0:parseInt(10*s/25)+(0===parseInt(10*s%25)?0:1)+1);for(C=0;C<O.rowCnt;C++){var L=O.rowTextInfos[C],P="",N=null;if(!1===L.isEmpty()){var G=l(L.text);null===y&&(y={x:G+I,y1:C,y2:C+1,x2:G+L.pos-1,p:[]}),G!==b&&g&&(y.p.push(v),v={start:e,end:n,spans:[]},y.y2=C,y.name="region_"+y.x+"_"+y.y1+"_"+y.y2,!1===S.hasOwnProperty(y.name)?(m.push(y),S[y.name]=y):S[y.name].p.concat(y.p),y={x:G+I,y1:C,y2:C+1,x2:G+L.pos-1,p:[]});for(var k=0;k<L.text.length;++k){var A=L.text[k],D=A.CharInfo;if(null===N||!D.equals(N)){P.trim().length>0&&(v.spans.push({name:_,line:P,row:C}),P="");var H="rgb("+D.FontInfo.FontColor.Red+", "+D.FontInfo.FontColor.Green+", "+D.FontInfo.FontColor.Blue+")",M="rgb("+D.FontEffectInfo.EdgeColor.Red+", "+D.FontEffectInfo.EdgeColor.Green+", "+D.FontEffectInfo.EdgeColor.Blue+")",U="style_cea708_fontColor_"+H+"_"+D.FontInfo.FontStyle+"_"+D.FontInfo.FontSize+"_fontEdgeColor_"+M+"_"+D.FontEffectInfo.EdgeType+"_background_"+F+"_"+D.FontEffectInfo.OffSet+"_"+D.FontEffectInfo.TextTag;D.FontEffectInfo.Underline&&(U+="_underline"),D.FontEffectInfo.Italic&&(U+="_italics"),E.hasOwnProperty(U)||(E[U]=JSON.parse(JSON.stringify(D))),N=D,_=U}P+=A.uchar}P.trim().length>0&&v.spans.push({name:_,line:P,row:C}),g=!0,b=G}else g=!1,b=-1,y&&(y.p.push(v),v={start:e,end:n,spans:[]},y.y2=C,y.name="region_"+y.x+"_"+y.y1+"_"+y.y2,!1===S.hasOwnProperty(y.name)?(m.push(y),S[y.name]=y):S[y.name].p.concat(y.p),y=null)}y&&(y.p.push(v),y.y2=C+1,y.name="region_"+y.x+"_"+y.y1+"_"+y.y2,!1===S.hasOwnProperty(y.name)?(m.push(y),S[y.name]=y):S[y.name].p.concat(y.p),y=null);var X=document.createElement("div");X.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none; padding-left: 10px; padding-right: 10px;";var W=document.createElement("div");W.className="paragraph bodyStyle",W.style.cssText+=d(t);var j=document.createElement("div");j.className="cueUniWrapper",j.style.cssText="unicode-bidi: normal; direction: "+(x.effectDirection?x.effectDirection:"ltr")+"; white-space:nowrap;";var z=0,Y=!0,Z=0;for(C=0;C<m.length;++C)for(var V=m[C],J=0;J<V.p.length;++J){var $=V.p[J];for(B=0;B<$.spans.length;++B){var K=$.spans[B];if(K.line.length>0){if(!Y&&z!==K.row){var q=document.createElement("br");q.className="lineBreak",j.appendChild(q),Z=0}var Q=!1;z===K.row&&(Q=!0),z=K.row,Y=!1;var tt=E[K.name],et=document.createElement("span");et.className="span "+K.name+" customSpanColor",et.style.cssText+=d(t,tt,!0,x),0!==B&&Q?B===$.spans.length-1?et.textContent=h(K.line):et.textContent=K.line:0===B&&$.spans.length>1&&K.row===$.spans[1].row?et.textContent=c(K.line):et.textContent=K.line.trim(),Z+=et.textContent.length,f(X.style,a(V,Z,o),!Q),p(et.style,a(V,Z,o)),j.appendChild(et)}}}W.appendChild(j),X.appendChild(W),X.id="sub_cea708_"+r(e)+r(n)+r(X.textContent);var nt={bodyStyle:["%",50]};for(B in E)E.hasOwnProperty(B)&&(nt[B]=["%",50]);return w.push({type:"html",start:e,end:n,cueHTMLElement:X,cueID:X.id,cellResolution:[32,15],isFromHTMLCaptions:!0,regions:{windRegion:x,regions:m},videoHeight:t.clientHeight,videoWidth:t.clientWidth,fontSize:nt||{defaultFontSize:"100"},lineHeight:{},linePadding:{}}),w}}},createHTMLCaptionsFromVTT:function(t,e){if(!t||!e)return null;var n=isFinite(e.line)?100-parseInt(e.line):0,i=e.position;"auto"===i&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50);var o=isFinite(i)?parseInt(i):0;o=o>90?90:o;var s="center";"start"===e.align||"left"===e.align?s="left":"end"!==e.align&&"right"!==e.align||(s="right");var l=e.size?e.size+"%":"16px",a=["position: absolute;","left: 0%;","bottom: "+n+"%;","height: 6.66%;","width: 100%;","align-items: flex-start;","overflow: visible;","text-align: "+s+";","padding-left: 10px;","padding-right: 10px;","-webkit-writing-mode: horizontal-tb;"].join(" "),u=["font-family: Menlo, Consolas, 'Cutive Mono', monospace;","justify-content: flex-start;","color: rgba(255, 255, 255, 1);","font-style: normal;","white-space: pre;","line-height: normal;","font-weight: normal;","text-decoration: none;","text-align: "+s+";","padding-left: 10px;","padding-right: 10px;","display: inline-block;","background-color: rgba(0, 0, 0, 1);","line-height: normal;","white-space:normal;","word-wrap:break-word;","word-break:normal;"].join(" "),d=document.createElement("div");d.id=e.id?e.id:r(e.startTime)+r(e.endTime)+r(e.text),d.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none; "+a;var c=function(t,e,n){if(!t||!t.length)return null;var i=document.createElement("div");i.className="cueUniWrapper",i.style.cssText=["unicode-bidi: normal;","direction: ltr;","position: absolute;","width: 100%;","bottom:0%;"].join(" ");var o=[],s=0,l=!1,a=!1,r=!1,u=!1,d=0,c=0,h=function(t,n,i,o,s,l){if(t&&n&&n.length){var a=document.createElement("span");a.style.cssText+=e,a.textContent=n,a.style.fontWeight=i?"bold":"normal",a.style.fontStyle=o?"italic":"normal",a.style.textDecoration=s?"underline":"none",a.style.fontSize=l,t.appendChild(a)}},f=function(t){if(!t||!t.length)return null;-1!==t.indexOf("\n")&&(t=t.split("\n").join(""));for(var e=t.indexOf("<");-1!==e;){var n=t.indexOf(">");-1!==n&&n>e&&(t=t.slice(0,e)+t.slice(n+1)),e=t.indexOf("<")}return t},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(t&&t.length)for(var n=t.indexOf("\n");-1!==n&&!(e>=0&&n>e);)o.push(t.slice(n)),n=(t=t.slice(n+1)).indexOf("\n")};o.push(t),-1!==t.indexOf("<")?function(t){for(var e=t.indexOf("<");-1!==e;)p(t,e),o.push(t.slice(e)),e=(t=t.slice(e+1)).indexOf("<");p(t)}(t):p(t),s=0;for(var y,g="";s<o.length;){for(;!o[s];)s++;if("\n"===o[s][0]){if(1===o[s].length)break;o[s]=o[s].slice(1),u=!0}else"<"===o[s][0]&&("/"===o[s][1]?"b"===o[s][2]?a=!1:"i"===o[s][2]?l=!1:"u"===o[s][2]&&(r=!1):"b"===o[s][1]?a=!0:"i"===o[s][1]?l=!0:"u"===o[s][1]&&(r=!0));u&&(c++,y=void 0,(y=document.createElement("br")).className="lineBreak",i.appendChild(y),u=!1),d=s===o.length-1?o[s].length:o[s].length-o[s+1].length,g=f(g=o[s].slice(0,d)),h(i,g,a,l,r,n),s++}return{cueUniWrapper:i,lineNum:c+1}}(e.text,u,l);return c&&(d.style.height=6.66*c.lineNum+"%",parseFloat(d.style.bottom)+parseFloat(d.style.height)>=100&&(d.style.bottom="",d.style.top="0%",c.cueUniWrapper.style.bottom="",c.cueUniWrapper.style.top="0%"),d.appendChild(c.cueUniWrapper)),{type:"html",start:e.startTime,end:e.endTime,cueHTMLElement:d,cueID:d.id,cellResolution:[32,15],videoHeight:t.clientHeight,videoWidth:t.clientWidth,lineHeight:{},linePadding:{},isFromHTMLCaptions:!0}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}return i(t,[{key:"init",value:function(){this.COLOR_REGEXP=/((\s|;|^)color\s*:\s*)[\w]+\(([\d]{1,3}(.?){1,2}){3}((\d*\.)?\d*)?\)/gi,this.BGCOLOR_REGEXP=/(\s*background-color\s*:\s*)[\w]+\(([\d]{1,3}(.?){1,2}){3}((\d*\.)?\d*)?\)/gi,this.FS_REGEXP=/(font-size\s*:\s*)[\d.,]+\s*\S*\s*(?=\s*;)/gi,this.FF_REGEXP=/(font-family\s*:\s*)[\w.,]+(?=\s*;)/gi,this.FONTSTYLE_REGEXP=/(font-style\s*:\s*)[\w]+/gi,this.TD_REGEXP=/(text-decoration\s*:\s*)[\w]+/gi,this.FW_REGEXP=/(font-weight\s*:\s*)[\w]+/gi,this.BBOX_REGEXP={LEFT:/((\s|;|^)left\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,TOP:/((\s|;|^)top\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,RIGHT:/((\s|;|^)right\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,BOTTOM:/((\s|;|^)bottom\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,WIDTH:/((\s|;|^)width\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,HEIGHT:/((\s|;|^)height\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi},this.TEXT_ALIGN_REGEXP=/(text-align\s*:\s*)[\w.]+%?(?=\s*;)/gi,this.VERTICAL_ALIGN_REGEXP=/(vertical-align\s*:\s*)[\w.]+%?(?=\s*;)/gi,this.TRANSFORM_REGEXP=/(-webkit-transform\s*:\s*)[\S]+(?=;)/gi,this.DISPLAY_REGEXP=/((\s|;|^)diplay\s*:\s*)\s*\S*\s*(?=;)/gi,this.BG_OBJECT={COLOR:"color",OPACITY:"opacity"},this.EDGE_STYLE={NONE:"none",RAISED:"raised",DEPRESSED:"depressed",UNIFORM:"uniform",LEFTDROP_SHADOW:"leftDropShadow",RIGHTDROP_SHADOW:"rightDropShadow"},this.COLOR={RED:"red",GREEN:"green",BLUE:"blue",CYAN:"cyan",MAGENTA:"magenta",YELLOW:"yellow",WHITE:"white",BLACK:"black"},this.VERPOSITION={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},this.HORPOSITION={LEFT:"left",CENTER:"center",RIGHT:"right"},this.BBOX={LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height"},this.FTSIZE={FTSIZE_1:"50%",FTSIZE_2:"75%",FTSIZE_3:"100%",FTSIZE_4:"150%",FTSIZE_5:"200%",FTSIZE_6:"300%",FTSIZE_7:"400%"},this.BGCOLOR="background-color",this.FF="font-family",this.FS="font-size",this.FW="font-weight",this.TD="text-decoration",this.FONTSTYLE="font-style",this.FONTCOLOR="color",this.TEXTSHADOW="text-shadow",this.TEXTALIGN="text-align",this.VERTICALALIGN="vertical-align",this.TRANSFORM="-webkit-transform",this.DISPLAY="display",this.EMPTYSTRING="",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.TEXT_KIND="subtitles",this.TEXT_EXTERNAL="external",this.TEXT_RENDER_TYPE="html",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.WEBVTT="WEBVTT",this.XML="xml",this.SRT="srt",this.CAPTIONS="captions",this.VTTBOX="vttbox",this.UTF8="utf-8"}}]),t}());e.default=o}]);