!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){};a.GENERIC_MESSAGE_NAMESPACE="urn:x-cast:com.google.cast.media",a.VISUALON_MESSAGE_NAMESPACE="urn:x-cast:com.google.visualon",a.unpackTimeRanges_=function(e){for(var t={__type__:"TimeRanges",length:e.length,start:[],end:[]},i=0;i<e.length;++i)t.start.push(e.start(i)),t.end.push(e.end(i));return t},a.unpackUint8Array_=function(e){return{__type__:"Uint8Array",entries:Array.from(e)}},a.simulateTimeRanges_=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}},a.serialize=function(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t)return t instanceof window.TimeRanges?a.unpackTimeRanges_(t):t instanceof Uint8Array?a.unpackUint8Array_(t):"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t}))},a.deserialize=function(e){return JSON.parse(e,(function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==(void 0===t?"undefined":n(t))&&"TimeRanges"==t.__type__?a.prototype.simulateTimeRanges_(t):t}))},t.default=a},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(3),s=(n=a)&&n.__esModule?n:{default:n};var o="undefined"!=typeof window&&window||e,u=o.voPlayer;u||(u=o.voPlayer={}),u.voCastSenderPlugin=s.default,t.default=u}).call(this,i(2))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=u(i(0)),o=u(i(4));function u(e){return e&&e.__esModule?e:{default:e}}var r=void 0,l=void 0,c=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context_=t,r=this.context_.commonUtil,l=this.context_.voEvents,this.receiverAppId_=i,this.debug_=this.context_.debug,this.eventDelegate_=this.context_.eventDelegate,this.eventBus_=this.context_.eventBus,this.castContext_,this.session_,this.castPlayer_,this.isConnected_=!1,this.castState_="NO_DEVICES_AVAILABLE",this.initializationCast_=this.initializationCast.bind(this),this.onCastStateChanged_=this.onCastStateChanged.bind(this),this.onSessionStateChanged_=this.onSessionStateChanged.bind(this),this.onMessageReceived_=this.onMessageReceived.bind(this),r.isChrome()&&window.chrome&&window.chrome.cast&&window.chrome.cast.isAvailable?this.initializationCast_(!0):window.__onGCastApiAvailable=this.initializationCast_}return a(e,null,[{key:"voName",get:function(){return"voCastSenderPlugin"}}]),a(e,[{key:"initializationCast",value:function(){if(this.debug_.log("+voCastSenderPlugin, initializationCast, id: "+this.receiverAppId_),cast){var e={};e.receiverApplicationId=this.receiverAppId_,this.castContext_=cast.framework.CastContext.getInstance(),this.castContext_.setOptions(e),this.castContext_.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.onCastStateChanged_),this.castContext_.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,this.onSessionStateChanged_)}this.debug_.log("-voCastSenderPlugin, initializationCast")}},{key:"onCastStateChanged",value:function(e){this.castState_=e.castState,this.isCastAvailable()?this.eventBus_.trigger(l.VO_OSMP_CB_CAST_AVAILABLE,{receiverAvailable:!0}):this.eventBus_.trigger(l.VO_OSMP_CB_CAST_AVAILABLE,{receiverAvailable:!1})}},{key:"onSessionStateChanged",value:function(e){switch(this.debug_.log("cast, sessionState: "+e.sessionState),e.sessionState){case cast.framework.SessionState.SESSION_STARTED:this.onSessionInitiated();break;case cast.framework.SessionState.SESSION_RESUMED:this.onSessionResumed();break;case cast.framework.SessionState.SESSION_ENDED:this.onSessionEnded()}}},{key:"onSessionInitiated",value:function(){this.isConnected_=!0,this.session_=cast.framework.CastContext.getInstance().getCurrentSession(),this.session_?this.session_.addMessageListener(s.default.VISUALON_MESSAGE_NAMESPACE,this.onMessageReceived_):printLog("cast, this.session_ is null"),this.castPlayer_=new o.default(this.context_,this.session_);var e=this.session_.getCastDevice();this.eventDelegate_&&this.eventDelegate_.onCastConnected({deviceName:e.friendlyName})}},{key:"onSessionResumed",value:function(){this.onSessionInitiated(),this.castPlayer_.castResume()}},{key:"onSessionEnded",value:function(){this.isConnected_=!1,this.eventDelegate_&&this.eventDelegate_.onCastDisconnected(),this.castPlayer_=null}},{key:"onMessageReceived",value:function(e,t){var i="object"===(void 0===t?"undefined":n(t))?t:s.default.deserialize(t);this.castPlayer_.onMessageReceived(i)}},{key:"isConnected",value:function(){return this.isConnected_}},{key:"getPlayer",value:function(){return this.castPlayer_}},{key:"isCastAvailable",value:function(){return"NO_DEVICES_AVAILABLE"!==this.castState_}},{key:"isCasting",value:function(){return"CONNECTING"===this.castState_}},{key:"startCast",value:function(){this.castContext_?this.castContext_.requestSession():console.warn("cast, you should call init first.")}},{key:"stopCast",value:function(){this.castContext_&&this.castContext_.endCurrentSession(!0)}}]),e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),o=(n=s)&&n.__esModule?n:{default:n};var u=void 0,r=void 0,l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context_=t,this.session_=i,u=this.context_.voEvents,r=this.context_.voInternalEvents,this.debug_=this.context_.debug,this.eventBus_=this.context_.eventBus,this.eventDelegate_=this.context_.eventDelegate,this.position_=0,this.duration_=0,this.seekableRange_=0,this.streamSeekableRange_=0,this.streamPosition_=0,this.paused_=!0,this.ended_=!1,this.openFinished_=!1,this.volume_=1,this.muted_=!1,this.live_=!1,this.qualityLevels_=[],this.audioTracks_=[],this.subtitleTracks_=[],this.currQualityLevelId_="",this.currAudioTrackId_="",this.currSubtitleTrackId_=""}return a(e,[{key:"init",value:function(e){var t={type:"call",methodName:"init",data:{cfg:e}};this.sendMessage(t)}},{key:"open",value:function(e){this.ended_=!1,this.openFinished_=!1,this.streamPosition_=e.links[0].currentTime;var t={type:"call",methodName:"open",data:{mediaCfg:e}};this.sendMessage(t)}},{key:"openedOnRemote",value:function(){return this.openFinished_}},{key:"play",value:function(){this.paused_=!1;this.sendMessage({type:"call",methodName:"play"})}},{key:"pause",value:function(){this.paused_=!0;this.sendMessage({type:"call",methodName:"pause"})}},{key:"isPaused",value:function(){return this.paused_}},{key:"isEnded",value:function(){return this.ended_}},{key:"stop",value:function(){this.sendMessage({type:"call",methodName:"stop"})}},{key:"close",value:function(){this.sendMessage({type:"call",methodName:"close"})}},{key:"setPosition",value:function(e){this.position_=e;var t={type:"call",methodName:"setPosition",data:{position:this.position_}};this.sendMessage(t)}},{key:"getPosition",value:function(){return this.position_}},{key:"getStreamPosition",value:function(){return this.streamPosition_}},{key:"getDuration",value:function(){return this.duration_}},{key:"getSeekableRange",value:function(){return this.seekableRange_||{}}},{key:"getStreamSeekableRange",value:function(){return this.streamSeekableRange_||{}}},{key:"isLive",value:function(){return this.live_}},{key:"mute",value:function(){this.muted_=!0;this.sendMessage({type:"call",methodName:"mute"})}},{key:"unmute",value:function(){this.muted_=!1;this.sendMessage({type:"call",methodName:"unmute"})}},{key:"isMuted",value:function(){return this.muted_}},{key:"setVolume",value:function(e){this.volume_=e;var t={type:"call",methodName:"setVolume",data:{volume:this.volume_}};this.sendMessage(t)}},{key:"getVolume",value:function(){return this.volume_}},{key:"getQualityLevels",value:function(){return this.qualityLevels_||[]}},{key:"getAudioTracks",value:function(){return this.audioTracks_||[]}},{key:"getSubtitleTracks",value:function(){return this.subtitleTracks_||[]}},{key:"selectQualityLevel",value:function(e){this.currQualityLevelId_=e;var t={type:"call",methodName:"selectQualityLevel",data:{id:this.currQualityLevelId_}};this.sendMessage(t)}},{key:"selectAudioTrack",value:function(e){this.currAudioTrackId_=e;var t={type:"call",methodName:"selectAudioTrack",data:{id:this.currAudioTrackId_}};this.sendMessage(t)}},{key:"selectSubtitleTrack",value:function(e){this.currSubtitleTrackId_=e;var t={type:"call",methodName:"selectSubtitleTrack",data:{id:this.currSubtitleTrackId_}};this.sendMessage(t)}},{key:"getCurrentQualityLevel",value:function(){var e=null;if(this.qualityLevels_)for(var t=0;t<this.qualityLevels_.length;t++){var i=this.qualityLevels_[t];if(i.id===this.currQualityLevelId_){e=i;break}}return e||{}}},{key:"getCurrentAudioTrack",value:function(){var e=null;if(this.audioTracks_)for(var t=0;t<this.audioTracks_.length;t++){var i=this.audioTracks_[t];if(i.id===this.currAudioTrackId_){e=i;break}}return e||{}}},{key:"getCurrentSubtitleTrack",value:function(){var e=null;if(this.subtitleTracks_)for(var t=0;t<this.subtitleTracks_.length;t++){var i=this.subtitleTracks_[t];if(i.id===this.currSubtitleTrackId_){e=i;break}}return e||{}}},{key:"setSubtitleStyles",value:function(e){var t={type:"call",methodName:"setSubtitleStyles",data:{subStyles:e}};this.sendMessage(t)}},{key:"getDefaultSubtitleStyles",value:function(){var e={enable:!1,fontSize:{enable:!1,value:"50%"},fontFamily:{enable:!1,value:"Arial"},fontColor:{enable:!1,value:"white"},fontOpacity:{enable:!1,value:1},fontBackgroundColor:{enable:!1,value:"black"},fontBackgroundOpacity:{enable:!1,value:1},windowColor:{enable:!1,value:"black"},windowOpacity:{enable:!1,value:1},fontBold:{enable:!1,value:!1},fontUnderline:{enable:!1,value:!1},fontItalic:{enable:!1,value:!1},fontEdgeType:{enable:!1,value:"none"},fontEdgeColor:{enable:!1,value:"blue"},fontEdgeOpacity:{enable:!1,value:1},boundingBox:{enable:!1,value:{left:"10%",right:"84%",top:"90%",bottom:"92%"}},fontHorzPosition:{enable:!1,value:"center"},fontVertPosition:{enable:!1,value:"center"},enableAutoAdjustment:!1};return e}},{key:"setAudioPlaybackSpeed",value:function(e){var t={type:"call",methodName:"setAudioPlaybackSpeed",data:{speed:e}};this.sendMessage(t)}},{key:"setExternalSubtitle",value:function(e){var t={type:"call",methodName:"setExternalSubtitle",data:{subtitle:e}};this.sendMessage(t)}},{key:"onMessageReceived",value:function(e){var t=e.type,i=e.eventName,n=e.data||{};if("event"===t)switch(i){case u.VO_OSMP_SRC_CB_OPEN:this.eventDelegate_.onOpenStart();break;case u.VO_OSMP_CB_PLAY_STARTED:this.paused_=!1,this.ended_=!1,this.eventDelegate_.onPlayStarted();break;case u.VO_OSMP_CB_ERROR_EVENTS:this.eventDelegate_.onError(n.code,n.message);break;case u.VO_OSMP_CB_PLAY_PAUSED:this.paused_=!0,this.eventDelegate_.onPlayPaused();break;case u.VO_OSMP_CB_PLAY_WAITING:this.eventDelegate_.onPlayWaiting();break;case u.VO_OSMP_CB_PLAY_CANPLAY:this.eventDelegate_.onCanPlay();break;case u.VO_OSMP_CB_PLAY_PLAYING:this.eventDelegate_.onPlayPlaying();break;case u.VO_OSMP_CB_PLAY_VOLUME_CHANGED:this.volume_=n.volume,this.muted_=n.isMuted,this.eventDelegate_.onPlayVolumeChanged();break;case u.VO_OSMP_CB_PLAY_TIME_UPDATED:this.position_=n.position,this.duration_=n.duration,this.live_=n.live,this.seekableRange_=n.seekableRange,!0!==n.isAds&&(this.streamSeekableRange_=n.seekableRange,this.streamPosition_=n.position),this.eventDelegate_.onPlayTimeUpdated(n);break;case u.VO_OSMP_CB_PLAY_PROGRESS:this.eventDelegate_.onPlayProgress(n);break;case u.VO_OSMP_CB_SEEK_COMPLETE:this.eventDelegate_.onSeekComplete();break;case u.VO_OSMP_SRC_CB_OPEN_FINISHED:this.ended_=!1,this.openFinished_=!0,this.recordReceiverStates(n),this.eventDelegate_.onOpenComplete();break;case u.VO_OSMP_CB_PLAY_COMPLETE:this.ended_=!0,this.eventDelegate_.onPlayCompleted();break;case u.VO_OSMP_SRC_ADAPTIVE_STREAMING_INFO_EVENT_BITRATE_CHANGE:this.qualityLevels_=n.qualityLevels,this.audioTracks_=n.audioTracks,this.currQualityLevelId_=n.currQualityLevelId,this.currAudioTrackId_=n.currAudioTrackId,this.eventDelegate_.onQualityChanged({mediaType:n.mediaType,oldQuality:n.oldQuality,newQuality:n.newQuality,bandwidth:n.bandwidth});break;case u.VO_OSMP_SRC_CB_PROGRAM_CHANGED:this.subtitleTracks_=n.subtitleTracks,this.currSubtitleTrackId_=n.currSubtitleTrackId,this.eventDelegate_.onProgramChanged();break;case r.VO_INTERNAL_RECEIVER_RESUME:this.recordReceiverStates(n),this.eventBus_.trigger(r.VO_INTERNAL_SENDER_RESUME,{mediaCfg:n.mediaCfg});break;case u.VO_OSMP_AD_BREAK_STARTED:this.eventBus_.trigger(u.VO_OSMP_AD_BREAK_STARTED,n);break;case u.VO_OSMP_AD_BREAK_COMPLETE:this.eventBus_.trigger(u.VO_OSMP_AD_BREAK_COMPLETE,n);break;case u.VO_OSMP_AD_STARTED:this.eventBus_.trigger(u.VO_OSMP_AD_STARTED,n);break;case u.VO_OSMP_AD_COMPLETE:this.eventBus_.trigger(u.VO_OSMP_AD_COMPLETE,n);break;case u.VO_OSMP_HDCP_POLICY:this.eventDelegate_.onHdcpPolicy(n)}}},{key:"castResume",value:function(){this.sendMessage({type:"call",methodName:"resume"})}},{key:"resumeFromRemotePlayer",value:function(){var e={position:this.position_,duration:this.duration_,seekableRange:this.seekableRange_,live:this.live_,paused:this.paused_};this.eventDelegate_.onPlayTimeUpdated(e),this.paused_&&this.eventDelegate_.onPlayPaused()}},{key:"sendMessage",value:function(e){var t=o.default.serialize(e);this.debug_.log("send msg: "+t),this.session_.sendMessage(o.default.VISUALON_MESSAGE_NAMESPACE,t,(function(){}),(function(){}))}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}},{key:"resize",value:function(){}},{key:"getValidBufferDuration",value:function(){}},{key:"getVersion",value:function(){}},{key:"getThumbnail",value:function(e,t){t(null)}},{key:"isPipSupported",value:function(){}},{key:"isInPipMode",value:function(){}},{key:"setPipPresentation",value:function(){}},{key:"isAirplaySupported",value:function(){}},{key:"showPlaybackTargetPicker",value:function(){}},{key:"getAnalyticsInfo",value:function(){}},{key:"recordReceiverStates",value:function(e){this.position_=e.position,this.duration_=e.duration,this.seekableRange_=e.seekableRange,this.volume_=e.volume,this.muted_=e.muted,this.live_=e.live,this.paused_=e.paused,this.qualityLevels_=e.qualityLevels,this.audioTracks_=e.audioTracks,this.subtitleTracks_=e.subtitleTracks,this.currQualityLevelId_=e.currQualityLevelId,this.currAudioTrackId_=e.currAudioTrackId,this.currSubtitleTrackId_=e.currSubtitleTrackId,console.log("voCastPlayer, this.qualityLevels_: ",this.qualityLevels_),console.log("voCastPlayer, this.audioTracks_: ",this.audioTracks_),console.log("voCastPlayer, this.subtitleTracks_: ",this.subtitleTracks_),console.log("voCastPlayer, this.currQualityLevelId_: ",this.currQualityLevelId_),console.log("voCastPlayer, this.currAudioTrackId_: ",this.currAudioTrackId_),console.log("voCastPlayer, this.currSubtitleTrackId_: ",this.currSubtitleTrackId_)}}]),e}();t.default=l}]);