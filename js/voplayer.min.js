!function(){function a(e,n,l){function E(i,t){if(!n[i]){if(!e[i]){var r="function"==typeof require&&require;if(!t&&r)return r(i,!0);if(o)return o(i,!0);var b=new Error("Cannot find module '"+i+"'");throw b['code']="MODULE_NOT_FOUND",b}var d=n[i]={'exports':{}};e[i][0]['call'](d.exports,function(a){var n=e[i][1][a];return E(n||a)},d,d.exports,a,e,n,l)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<l.length;i++)E(l[i]);return E}return a}()({'1':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'NONE':"none",'DASH':"dash",'HLS':"hls",'PROGRESSIVE':"progressive",'AWSMEDIATAILOR':"awsmediatailor",'CLEARKEY':"clearkey",'WIDEVINE':"widevine",'PLAYREADY':"playready",'FAIRPLAY':"fairplay",'ONCASTCONNECTED':"onCastConnected",'ONCASTDISCONNECTED':"onCastDisconnected",'ONERROR':"onError",'PRELOAD_METADATA':"metadata",'PRELOAD_AUTO':"auto"};n["default"]=l},{}],'2':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'VO_TRACK_SELECTINFO':{'TRACK_SELECTABLE':0,'TRACK_SELECTED':1,'TRACK_DISABLED':2},'VO_ASPECT_RATIO':{'VO_RATIO_AUTO':0,'VO_RATIO_11':1,'VO_RATIO_43':2,'VO_RATIO_169':3,'VO_RATIO_21':4,'VO_RATIO_2331':5}};n["default"]=l},{}],'3':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l=function(){function a(a){var e=arguments;return function(n){return void 0===n&&(n={}),{'create':function(){return a['apply']({'context':n},e)}}}}function e(a){var e=arguments;return function(l){var o=void 0;return void 0===l&&(l={}),{'getInstance':function(){return o||(o=n(l,a.className)),o||(o=a['apply']({'context':l},e),E['push']({'name':a.className,'context':l,'instance':o})),o}}}}function n(a,e){var n=null;return E['some'](function(l){return l['context']===a&&l['name']===e?(n=l.instance,!0):!1}),n}var l=void 0,E=[];return l={'getClassFactory':a,'getSingletonFactory':e}}();n["default"]=l},{}],'4':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a),this['xhrs_']=[]}return E(a,[{'key':"load",'value':function(a){var e=this;if(a.url){var n=new XMLHttpRequest,l=function(){-1!==e['xhrs_']['indexOf'](n)&&e['xhrs_']['splice'](e['xhrs_']['indexOf'](n),1),n.status>=200&&n.status<=299?a.success&&a['success'](n.response,n.statusText):a.error&&a['error']({'id':n.status,'text':n.statusText})},E=function(){-1!==e['xhrs_']['indexOf'](n)&&(e['xhrs_']['splice'](e['xhrs_']['indexOf'](n),1),a.error&&a['error'](n.statusText)),a.complete&&a['complete'](n)};try{n['open']("GET",a.url,!0),a['manifestWithCredentials']===!0&&(n['withCredentials']=!0),n['onload']=l,n['onloadend']=E,n['onerror']=E,n['onabort']=E,this['xhrs_']['push'](n),n['send']()}catch(o){n['onerror']()}}}},{'key':"abort",'value':function(){this['xhrs_']['forEach'](function(a){a['onloadend']=a['onerror']=a['onprogress']=void 0,a['abort']()}),this['xhrs_']=[]}}]),a}();n["default"]=o},{}],'5':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0}),n['PlayerFactory']=void 0;var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(1),t=l(i),r=a(8),b=l(r),d=a(319),c=l(d),p=a(324),w=l(p),x=a(328),v=l(x),y=a(313),h=l(y),s=void 0;n['PlayerFactory']=function(){function a(e){E(this,a),this['context_']=e,s=this.context_.commonUtil,this['dashPlayer_']=null,this['hlsPlayer_']=null,this['pdPlayer_']=null,this['tizenPlayer_']=null,this['castMediaPlayer_']=null}return o(a,[{'key':"createPlayer",'value':function(a){var e=this,n={'instance':null,'linkInfo':a,'mediaType':"",'error':null},l=void 0;if(s['isSamsung2016']())this.tizenPlayer_||(this['tizenPlayer_']=function(){return e.context_.voTizenPlayerPlugin?new e['context_']['voTizenPlayerPlugin'](e.context_).instance:null}()),l=this.tizenPlayer_;else if(s['isChromecastCAF']())"undefined"!=typeof h["default"]&&(this.castMediaPlayer_||(this['castMediaPlayer_']=h["default"](this.context_)['create']()),l=this.castMediaPlayer_);else switch(a.type){case t["default"].DASH:"undefined"!=typeof c["default"]&&(this.dashPlayer_||(this['dashPlayer_']=c["default"](this.context_)['create']()),l=this.dashPlayer_);break;case t["default"].HLS:s['isSafari']()?"undefined"!=typeof v["default"]&&(this.pdPlayer_||(this['pdPlayer_']=v["default"](this.context_)['create']()),l=this.pdPlayer_):"undefined"!=typeof w["default"]&&(this.hlsPlayer_||(this['hlsPlayer_']=w["default"](this.context_)['create']()),l=this.hlsPlayer_);break;case t["default"].PROGRESSIVE:"undefined"!=typeof v["default"]&&"undefined"!=typeof v["default"]&&(this.pdPlayer_||(this['pdPlayer_']=v["default"](this.context_)['create']()),l=this.pdPlayer_)}switch(a.type){case t["default"].DASH:n['mediaType']="application/dash+xml";break;case t["default"].HLS:n['mediaType']="application/x-mpegurl";break;case t["default"].PROGRESSIVE:n['mediaType']="progressive"}return l?n['instance']=this.context_['gkEngine']['obfuscatePlayer'](l):n['error']={'id':b["default"].VO_OSMP_SRC_ERR_FORMAT_UNSUPPORT,'text':"The stream format is not supported"},n}}]),a}()},{'1':1,'313':313,'319':319,'324':324,'328':328,'8':8}],'6':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){"undefined"!=typeof window&&window.console&&(C[r]=e(window.console.error),C[b]=e(window.console.error),C[d]=e(window.console.warn),C[c]=e(window.console.info),C[p]=e(window.console.debug))}function e(a){return a&&a.bind?a['bind'](window.console):window['console']['log']['bind'](window.console)}function n(a){f=a}function l(){return f}function E(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];y['apply'](void 0,[r]['concat'](e))}function o(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];y['apply'](void 0,[b]['concat'](e))}function i(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];y['apply'](void 0,[d]['concat'](e))}function w(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];y['apply'](void 0,[c]['concat'](e))}function x(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];y['apply'](void 0,[p]['concat'](e))}function v(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];y['apply'](void 0,[p]['concat'](e))}function y(a){if(!(f==t||a>f)){var e="",n=null;g&&(n=new Date,e+="["+("0"+(n['getMonth']()+1))['slice'](-2)+"-"+("0"+n['getDate']())['slice'](-2)+" "+("0"+n['getHours']())['slice'](-2)+":"+("0"+n['getMinutes']())['slice'](-2)+":"+("0"+n['getSeconds']())['slice'](-2)+"."+("0"+n['getMilliseconds']())['slice'](-3)+"]"),e.length>0&&(e+=" ");for(var l=arguments.length,E=Array(l>1?l-1:0),o=1;l>o;o++)E[o-1]=arguments[o];Array['apply'](null,E)['forEach'](function(a){e+=a+" "}),k&&C[a](e),P['onLogAdded']({'message':e,'level':a})}}function h(){return g}function s(a){g=a}function D(){return k}function m(a){k=a}var C=[],f=p,g=!0,k=!0,M=this.context,P=M.eventDelegate,T={'fatal':E,'error':o,'warn':i,'debug':x,'info':w,'log':v,'doLog':y,'getShowTimeStamp':h,'setShowTimeStamp':s,'getLogToConsole':D,'setLogToConsole':m,'setLogLevel':n,'getLogLevel':l};return a(),T}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=0,r=1,b=2,d=3,c=4,p=5;E['className']="voDebug",n["default"]=i["default"]['getSingletonFactory'](E)},{'3':3}],'7':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});n['DefaultSettings']={'DEFAULT_SEGMENT_DOWNLOAD_RETRY_COUNT':4,'DEFAULT_SEGMENT_DOWNLOAD_RETRY_DELAY':1e3,'DEFAULT_MAX_LICENSE_REQUEST_RETRIES':0,'DEFAULT_LICENSE_REQUEST_RETRY_DELAY':100}},{}],'8':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'VO_OSMP_SRC_ERR_FORMAT_UNSUPPORT':"0x81000001",'VO_OSMP_SRC_ERR_CODEC_UNSUPPORT':"0x81000002",'VO_OSMP_SRC_ERR_BROWSER_UNSUPPORT_MSE':"0x81000003",'VO_OSMP_SRC_ERR_MANIFEST_DOWNLOAD_FAIL':"0x81000004",'VO_OSMP_SRC_ERR_MANIFEST_PARSE_FAIL':"0x81000005",'VO_OSMP_SRC_ERR_CONTENT_DOWNLOAD_FAIL':"0x81000006",'VO_OSMP_SRC_ERR_CONTENT_PARSE_FAIL':"0x81000007",'VO_OSMP_SRC_ERR_TEXT_TRACK_PARSE_FAIL':"0x81000008",'VO_OSMP_SRC_ERR_SOURCE_BUFFER_ERROR':"0x81000009",'VO_OSMP_SRC_ERR_OUTMEMORY':"0x8100000A",'VO_OSMP_SRC_ERR_UNKNOWN':"0x8100000B",'VO_OSMP_DRM_ERR_BROWSER_UNSUPPORT':"0x8100000C",'VO_OSMP_DRM_ERR_KEY_FAIL':"0x8100000D",'VO_OSMP_DRM_ERR_KEY_SESSION_FAIL':"0x8100000E",'VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL':"0x8100000F",'VO_OSMP_DRM_ERR_SELECT_KEY_SYSTEM_FAIL':"0x81000010",'VO_OSMP_DRM_ERR_DECRYPT_FAIL':"0x81000011",'VO_OSMP_LICENSE_FAIL':"0x81000012"};n["default"]=l},{}],'9':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e,n){if(a&&e&&"function"==typeof e&&!(E(a,e,n)>=0)){b[a]=b[a]||[];var l={'callback':e,'scope':n};b[a]['push'](l)}}function e(a,e,n){if(a&&e&&b[a]){var l=E(a,e,n);0>l||(b[a][l]=null)}}function n(a,e){a&&b[a]&&(e=e||{},e['type']=a,o(a)||(t||(t=r["default"](i)['getInstance']()),a!==d["default"].VO_OSMP_ANALYTICS_EXPORT&&t['log'](a)),b[a]=b[a]['filter'](function(a){return a}),b[a]['forEach'](function(n){if(n)if(a['indexOf']("VO_OSMP")>=0){var l=i['commonUtil']['cloneObject'](e);n['callback']['call'](n.scope,l)}else n['callback']['call'](n.scope,e)}))}function l(){b={}}function E(a,e,n){var l=-1;return b[a]?(b[a]['some'](function(a,E){return!a||a.callback!==e||n&&n!==a.scope?!1:(l=E,!0)}),l):l}function o(a){var e=!1;if((a===d["default"].VO_OSMP_CB_LOG_ADDED||a===d["default"].VO_OSMP_CB_PLAY_TIME_UPDATED||a===x["default"].VO_OSMP_CB_CAST_TIME_UPDATE||a===p["default"].VO_INTERNAL_MEDIA_TIMEUPDATE)&&(e=!0),!e)for(var n in p["default"])if(n===a){e=!0;break}return e}var i=this.context,t=void 0,b={},c={'on':a,'off':e,'trigger':n,'reset':l,'getHandlerIndex':E};return c}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(6),r=l(t),b=a(11),d=l(b),c=a(12),p=l(c),w=a(329),x=l(w);E['className']="voEventBus",n["default"]=i["default"]['getSingletonFactory'](E)},{'11':11,'12':12,'3':3,'329':329,'6':6}],'10':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=void 0,i=void 0,t=.3;n['voEventDelegate']=function(){function a(e){l(this,a),this['context_']=e,o=this.context_.voEvents,i=this.context_.voInternalEvents,this['eventBus_']=this.context_.eventBus,this['isPaused']=!1,this['isWaiting']=!1,this['isOpened']=!1,this['isPlaying']=!1}return E(a,[{'key':"reset",'value':function(){this['isPaused']=!1,this['isWaiting']=!1,this['isOpened']=!1,this['isPlaying']=!1}},{'key':"onOpenStart",'value':function(a){this['openTimeStamp']=Date['now'](),this['rendered']=!1,this['reset'](),this['eventBus_']['trigger'](o.VO_OSMP_SRC_CB_OPEN,a)}},{'key':"onOpenComplete",'value':function(a){this.isOpened||(this['isOpened']=!0,this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_OPENED,a),this['eventBus_']['trigger'](o.VO_OSMP_SRC_CB_OPEN_FINISHED,a))}},{'key':"onCloseCompleted",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_SRC_CB_CLOSED)}},{'key':"onPlayStarted",'value':function(a){this['isPaused']=!1,this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_STARTED,a),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_PLAY),this.isWaiting&&(this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_WAITING),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_WAITING))}},{'key':"onPlayPaused",'value':function(a){this.isPaused||(this['isPaused']=!0,this['isPlaying']=!1,this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_PAUSED,a),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_PAUSED))}},{'key':"onPlayWaiting",'value':function(){this.isWaiting||(this['isWaiting']=!0,this['isPlaying']=!1,this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_WAITING),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_WAITING))}},{'key':"onCanPlay",'value':function(){var a=this;if(this.isWaiting){this['isWaiting']=!1,this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_CANPLAY);var e=function(){a.isPaused||a['onPlayPlaying']()};setTimeout(e['bind'](this),100)}}},{'key':"onPlayPlaying",'value':function(){if(this['rendered']===!1){this['rendered']=!0;var a={'time':Date['now']()-this.openTimeStamp};this['eventBus_']['trigger'](o.VO_OSMP_SRC_CB_RENDERED,a)}this.isPlaying||(this['isPlaying']=!0,this['isPaused']=!1,this['isWaiting']=!1,this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_PLAYING),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_PLAYING))}},{'key':"onPlayCompleted",'value':function(a){this['isPlaying']=!1,this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_COMPLETE,a),this['eventBus_']['trigger'](i.VO_INTERNAL_STREAM_ENDED,{'endCause':"END_OF_ASSET"})}},{'key':"onPlayVolumeChanged",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_VOLUME_CHANGED),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_VOLUME_CHANGED)}},{'key':"onPlayProgress",'value':function(a){this.isOpened&&this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_PROGRESS,a),this.isWaiting&&a.validBufferLength>=t&&this['onCanPlay']()}},{'key':"onPlayTimeUpdated",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_PLAY_TIME_UPDATED,a),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_TIMEUPDATE)}},{'key':"onSeekStart",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_CB_SEEK_START),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_SEEKING)}},{'key':"onSeekComplete",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_SEEK_COMPLETE,a),this['eventBus_']['trigger'](i.VO_INTERNAL_MEDIA_SEEKED)}},{'key':"onLogAdded",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_LOG_ADDED,a)}},{'key':"onProgramChanged",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_SRC_CB_PROGRAM_CHANGED,a)}},{'key':"onError",'value':function(a,e){a=parseInt(a),this['eventBus_']['trigger'](o.VO_OSMP_CB_ERROR_EVENTS,{'code':a,'message':e})}},{'key':"onCastConnected",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_CAST_CONNECTED,a)}},{'key':"onCastDisconnected",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_CAST_DISCONNECTED,a)}},{'key':"onPipModeChanged",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_CB_PIP_MODE_CHANGED)}},{'key':"onAirplayChanged",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_AIRPLAY_AVAILABILITY_CHANGED,{'changedevent':a})}},{'key':"onAdAllAdsCompleted",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_AD_ALL_ADS_COMPLETED,{})}},{'key':"onAdCompanion",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_AD_COMPANION,a)}},{'key':"onAdError",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_AD_ERROR,a)}},{'key':"onAdBreakStarted",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_AD_BREAK_STARTED)}},{'key':"onAdBreakComplete",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_AD_BREAK_COMPLETE)}},{'key':"onAdStarted",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_AD_STARTED,a)}},{'key':"onAdComplete",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_AD_COMPLETE,a)}},{'key':"onQualityChanged",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_SRC_ADAPTIVE_STREAMING_INFO_EVENT_BITRATE_CHANGE,a)}},{'key':"onCustomerTag",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_SRC_CB_CUSTOMER_TAG,a)}},{'key':"onTrickPlayrateChanged",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_TRICK_PLAY_RATE_CHANGED,a)}},{'key':"onVideoEnhanceLevelChanged",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_LOW_BACKLIGHT_ENHANCE_LEVEL_CHANGED,a)}},{'key':"onFullscreenChange",'value':function(){this['eventBus_']['trigger'](o.VO_OSMP_FULLSCREEN_CHANGE)}},{'key':"onAnalyticsExport",'value':function(a){o.VO_OSMP_ANALYTICS_EXPORT&&this['eventBus_']['trigger'](o.VO_OSMP_ANALYTICS_EXPORT,a)}},{'key':"onManifestInfoUpdated",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_CB_MANIFEST_INFO_UPDATED,a)}},{'key':"onSegmentDownloaded",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_SEGMENT_DOWNLOADED,a)}},{'key':"onHdcpPolicy",'value':function(a){this['eventBus_']['trigger'](o.VO_OSMP_HDCP_POLICY,a)}}]),a}()},{}],'11':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function i(){l(this,i),this['VO_OSMP_SRC_CB_OPEN']="VO_OSMP_SRC_CB_OPEN",this['VO_OSMP_SRC_CB_RENDERED']="VO_OSMP_SRC_CB_RENDERED",this['VO_OSMP_SRC_CB_OPEN_FINISHED']="VO_OSMP_SRC_CB_OPEN_FINISHED",this['VO_OSMP_SRC_CB_CLOSED']="VO_OSMP_SRC_CB_CLOSED",this['VO_OSMP_CB_PLAY_STARTED']="VO_OSMP_CB_PLAY_STARTED",this['VO_OSMP_CB_PLAY_PAUSED']="VO_OSMP_CB_PLAY_PAUSED",this['VO_OSMP_CB_PLAY_WAITING']="VO_OSMP_CB_PLAY_WAITING",this['VO_OSMP_CB_PLAY_CANPLAY']="VO_OSMP_CB_PLAY_CANPLAY",this['VO_OSMP_CB_PLAY_PLAYING']="VO_OSMP_CB_PLAY_PLAYING",this['VO_OSMP_CB_PLAY_COMPLETE']="VO_OSMP_CB_PLAY_COMPLETE",this['VO_OSMP_CB_PLAY_VOLUME_CHANGED']="VO_OSMP_CB_PLAY_VOLUME_CHANGED",this['VO_OSMP_CB_PLAY_TIME_UPDATED']="VO_OSMP_CB_PLAY_TIME_UPDATED",this['VO_OSMP_CB_PLAY_PROGRESS']="VO_OSMP_CB_PLAY_PROGRESS",this['VO_OSMP_CB_SEEK_START']="VO_OSMP_CB_SEEK_START",this['VO_OSMP_CB_SEEK_COMPLETE']="VO_OSMP_CB_SEEK_COMPLETE",this['VO_OSMP_CB_LOG_ADDED']="VO_OSMP_CB_LOG_ADDED",this['VO_OSMP_SRC_CB_PROGRAM_CHANGED']="VO_OSMP_SRC_CB_PROGRAM_CHANGED",this['VO_OSMP_CB_ERROR_EVENTS']="VO_OSMP_CB_ERROR_EVENTS",this['VO_OSMP_CB_CAST_CONNECTED']="VO_OSMP_CB_CAST_CONNECTED",this['VO_OSMP_CB_CAST_DISCONNECTED']="VO_OSMP_CB_CAST_DISCONNECTED",this['VO_OSMP_CB_CAST_AVAILABLE']="VO_OSMP_CB_CAST_AVAILABLE",this['VO_OSMP_CB_PIP_MODE_CHANGED']="VO_OSMP_CB_PIP_MODE_CHANGED",this['VO_OSMP_SRC_ADAPTIVE_STREAMING_INFO_EVENT_BITRATE_CHANGE']="VO_OSMP_SRC_ADAPTIVE_STREAMING_INFO_EVENT_BITRATE_CHANGE",this['VO_OSMP_SRC_CB_CUSTOMER_TAG']="VO_OSMP_SRC_CB_CUSTOMER_TAG",this['VO_OSMP_CB_AIRPLAY_AVAILABILITY_CHANGED']="VO_OSMP_CB_AIRPLAY_AVAILABILITY_CHANGED",this['VO_OSMP_AD_ALL_ADS_COMPLETED']="VO_OSMP_AD_ALL_ADS_COMPLETED",this['VO_OSMP_AD_COMPANION']="VO_OSMP_AD_COMPANION",this['VO_OSMP_AD_ERROR']="VO_OSMP_AD_ERROR",this['VO_OSMP_AD_BREAK_STARTED']="VO_OSMP_AD_BREAK_STARTED",this['VO_OSMP_AD_BREAK_COMPLETE']="VO_OSMP_AD_BREAK_COMPLETE",this['VO_OSMP_AD_STARTED']="VO_OSMP_AD_STARTED",this['VO_OSMP_AD_COMPLETE']="VO_OSMP_AD_COMPLETE",this['VO_OSMP_TRICK_PLAY_RATE_CHANGED']="VO_OSMP_TRICK_PLAY_RATE_CHANGED",this['VO_OSMP_LOW_BACKLIGHT_ENHANCE_LEVEL_CHANGED']="VO_OSMP_LOW_BACKLIGHT_ENHANCE_LEVEL_CHANGED",this['VO_OSMP_FULLSCREEN_CHANGE']="VO_OSMP_FULLSCREEN_CHANGE",this['VO_OSMP_CB_MANIFEST_INFO_UPDATED']="VO_OSMP_CB_MANIFEST_INFO_UPDATED",this['VO_OSMP_SEGMENT_DOWNLOADED']="VO_OSMP_SEGMENT_DOWNLOADED",this['VO_OSMP_HDCP_POLICY']="VO_OSMP_HDCP_POLICY"},o=new E;n["default"]=o},{}],'12':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function i(){l(this,i),this['VO_INTERNAL_MEDIA_SELECTED']="VO_INTERNAL_MEDIA_SELECTED",this['VO_INTERNAL_CERTIFICATE_LOADED']="VO_INTERNAL_CERTIFICATE_LOADED",this['AD_CONTENT_PAUSE_REQUESTED']="AD_CONTENT_PAUSE_REQUESTED",this['AD_CONTENT_RESUME_REQUESTED']="AD_CONTENT_RESUME_REQUESTED",this['VO_INTERNAL_MEDIA_OPENED']="VO_MEDIA_OPENED",this['VO_INTERNAL_MEDIA_PLAYING']="VO_MEDIA_PLAYING",this['VO_INTERNAL_MEDIA_PLAY']="VO_MEDIA_PLAY",this['VO_INTERNAL_MEDIA_PAUSED']="VO_MEDIA_PAUSED",this['VO_INTERNAL_MEDIA_ENDED']="VO_MEDIA_ENDED",this['VO_INTERNAL_MEDIA_LOADEDDATA']="VO_MEDIA_LOADEDDATA",this['VO_INTERNAL_MEDIA_LOADSTART']="VO_MEDIA_LOADSTART",this['VO_INTERNAL_MEDIA_RATECHANGE']="VO_MEDIA_RATECHANGE",this['VO_INTERNAL_MEDIA_SEEKING']="VO_MEDIA_SEEKING",this['VO_INTERNAL_MEDIA_SEEKED']="VO_MEDIA_SEEKED",this['VO_INTERNAL_MEDIA_VOLUME_CHANGED']="VO_MEDIA_VOLUME_CHANGED",this['VO_INTERNAL_MEDIA_TIMEUPDATE']="VO_MEDIA_TIMEUPDATE",this['VO_INTERNAL_MEDIA_WAITING']="VO_MEDIA_WAITING",this['VO_INTERNAL_MEDIASOURCE_CLOSED']="VO_MEDIASOURCE_CLOSED",this['VO_INTERNAL_STREAM_ENDED']="VO_STREAM_ENDED",this['VO_INTERNAL_ID3_METADATA']="VO_ID3_METADATA",this['VO_INTERNAL_QUALITY_LEVEL_CHANGED']="VO_QUALITY_LEVEL_CHANGED",this['VO_INTERNAL_AUDIO_TRACK_CHANGED']="VO_AUDIO_TRACK_CHANGED",this['VO_INTERNAL_ERROR']="VO_INTERNAL_ERROR",this['VO_INTERNAL_PROGRAM_CHANGED']="VO_PROGRAM_CHANGED",this['VO_INTERNAL_TEXT_TRACKS_ADDED']="VO_TEXT_TRACKS_ADDED",this['VO_INTERNAL_TEXT_TRACK_ADDED']="VO_TEXT_TRACK_ADDED",this['VO_INTERNAL_TEXT_TRACK_DEFAULT_FOUND']="VO_TEXT_TRACK_DEFAULT_FOUND",this['VO_INTERNAL_TEXT_TRACKS_DELETED']="VO_TEXT_TRACKS_DELETED",this['VO_INTERNAL_TEXT_TRACKS_CHANGED']="TEXT_TRACKS_CHANGED",this['VO_INTERNAL_TEXT_SWITCH_DEFAULT_TRACK']="TEXT_SWITCH_DEFAULT_TRACK",this['VO_INTERNAL_LOG']="VO_LOG",this['VO_INTERNAL_TRICK_MODE_CHANGED']="VO_TRICK_MODE_CHANGED",this['VO_INTERNAL_REPORT_DROPPED_BYTES']="VO_REPORT_DROPPED_BYTES",this['VO_INTERNAL_REPORT_MANIFEST_INFO']="VO_REPORT_MANIFEST_INFO",this['VO_INTERNAL_REPORT_STREAM_BITRATE']="VO_REPORT_STREAM_BITRATE",this['VO_INTERNAL_REPORT_DOWNLOADED_INFO']="VO_REPORT_DOWNLOADED_INFO",this['VO_INTERNAL_REPORT_DRM_TYPE']="VO_REPORT_DRM_TYPE",this['VO_INTERNAL_REPORT_STREAM_TYPE']="VO_REPORT_STREAM_TYPE",this['VO_INTERNAL_VS_STOPPED_REQUEST']="VO_VS_STOPPED_REQUEST",this['VO_INTERNAL_VS_APPLICATION_STATUS']="VO_VS_APPLICATION_STATUS",this['VO_INTERNAL_SENDER_RESUME']="VO_SENDER_RESUME",this['VO_INTERNAL_RECEIVER_RESUME']="VO_RECEIVER_RESUME"},o=new E;n["default"]=o},{}],'13':[function(a,e,n){"use strict";function l(a){for(var e=!1,n=!1,l=0;l<a.activeSourceBuffers.length;l++){var E=a['activeSourceBuffers'][l];"audio"!==E.voTrackType?"video"!==E.voTrackType||(n=!0):e=!0}return{'audioTrackDetected':e,'videoTrackDetected':n}}Object['defineProperty'](n,"__esModule",{'value':!0}),n['voDetectStreamType']=l},{}],'14':[function(e,n,l){"use strict";var E={};E['encode']=function(a){for(var e=[],n=0;n<a.length;++n){var l=a['charCodeAt'](n);128>l?e['push'](l):2048>l?(e['push'](192|l>>6),e['push'](128|63&l)):65536>l?(e['push'](224|l>>12),e['push'](128|63&l>>6),e['push'](128|63&l)):(e['push'](240|l>>18),e['push'](128|63&l>>12),e['push'](128|63&l>>6),e['push'](128|63&l))}return e},E['decode']=function(a){for(var e=[],n=0;n<a.length;){var l=a[n++];128>l||(224>l?(l=(31&l)<<6,l|=63&a[n++]):240>l?(l=(15&l)<<12,l|=(63&a[n++])<<6,l|=63&a[n++]):(l=(7&l)<<18,l|=(63&a[n++])<<12,l|=(63&a[n++])<<6,l|=63&a[n++])),e['push'](String['fromCharCode'](l))}return e['join']("")};var o={};!function(e){var n=function(a){for(var n=0,l=[],E=0|a.length/3;0<E--;){var o=(a[n]<<16)+(a[n+1]<<8)+a[n+2];n+=3,l['push'](e['charAt'](63&o>>18)),l['push'](e['charAt'](63&o>>12)),l['push'](e['charAt'](63&o>>6)),l['push'](e['charAt'](63&o))}if(2==a.length-n){var o=(a[n]<<16)+(a[n+1]<<8);l['push'](e['charAt'](63&o>>18)),l['push'](e['charAt'](63&o>>12)),l['push'](e['charAt'](63&o>>6)),l['push']("=")}else if(1==a.length-n){var o=a[n]<<16;l['push'](e['charAt'](63&o>>18)),l['push'](e['charAt'](63&o>>12)),l['push']("==")}return l['join']("")},l=function(){for(var a=[],n=0;n<e.length;++n)a[e['charCodeAt'](n)]=n;return a["="['charCodeAt'](0)]=0,a}(),i=function(a){for(var e=0,n=[],E=0|a.length/4;0<E--;){var o=(l[a['charCodeAt'](e)]<<18)+(l[a['charCodeAt'](e+1)]<<12)+(l[a['charCodeAt'](e+2)]<<6)+l[a['charCodeAt'](e+3)];n['push'](255&o>>16),n['push'](255&o>>8),n['push'](255&o),e+=4}return n&&("="==a['charAt'](e-2)?(n['pop'](),n['pop']()):"="==a['charAt'](e-1)&&n['pop']()),n},t={};t['encode']=function(a){for(var e=[],n=0;n<a.length;++n)e['push'](a['charCodeAt'](n));return e},t['decode']=function(e){for(var n=0;n<s.length;++n)a[n]=String['fromCharCode'](a[n]);return a['join']("")},o['decodeArray']=function(a){var e=i(a);return new Uint8Array(e)},o['encodeASCII']=function(a){var e=t['encode'](a);return n(e)},o['decodeASCII']=function(a){var e=i(a);return t['decode'](e)},o['encode']=function(a){var e=E['encode'](a);return n(e)},o['decode']=function(a){var e=i(a);return E['decode'](e)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),"undefined"!=typeof l&&(l['decode']=o.decode,l['decodeArray']=o.decodeArray,l['encode']=o.encode,l['encodeASCII']=o.encodeASCII)},{}],'15':[function(a,e,n){"use strict";!function(a){var e={'42':225,'92':233,'94':237,'95':243,'96':250,'123':231,'124':247,'125':209,'126':241,'127':9608,'128':174,'129':176,'130':189,'131':191,'132':8482,'133':162,'134':163,'135':9834,'136':224,'137':32,'138':232,'139':226,'140':234,'141':238,'142':244,'143':251,'144':193,'145':201,'146':211,'147':218,'148':220,'149':252,'150':8216,'151':161,'152':42,'153':8217,'154':9473,'155':169,'156':8480,'157':8226,'158':8220,'159':8221,'160':192,'161':194,'162':199,'163':200,'164':202,'165':203,'166':235,'167':206,'168':207,'169':239,'170':212,'171':217,'172':249,'173':219,'174':171,'175':187,'176':195,'177':227,'178':205,'179':204,'180':236,'181':210,'182':242,'183':213,'184':245,'185':123,'186':125,'187':92,'188':94,'189':95,'190':124,'191':8764,'192':196,'193':228,'194':214,'195':246,'196':223,'197':165,'198':164,'199':9475,'200':197,'201':229,'202':216,'203':248,'204':9487,'205':9491,'206':9495,'207':9499},n=function(a){var n=a;return e['hasOwnProperty'](a)&&(n=e[a]),String['fromCharCode'](n)},l=15,E=32,o={'17':1,'18':3,'21':5,'22':7,'23':9,'16':11,'19':12,'20':14},i={'17':2,'18':4,'21':6,'22':8,'23':10,'19':13,'20':15},t={'25':1,'26':3,'29':5,'30':7,'31':9,'24':11,'27':12,'28':14},r={'25':2,'26':4,'29':6,'30':8,'31':10,'27':13,'28':15},b=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={'verboseFilter':{'DATA':3,'DEBUG':3,'INFO':2,'WARNING':2,'TEXT':1,'ERROR':0},'time':null,'verboseLevel':0,'setTime':function(a){this['time']=a},'log':function(a,e){var n=this['verboseFilter'][a];this.verboseLevel>=n&&console['log'](this.time+" ["+a+"] "+e)}},c=function(a){for(var e=[],n=0;n<a.length;n++)e['push'](a[n]['toString'](16));return e},p=function(a,e,n,l,E){this['foreground']=a||"white",this['underline']=e||!1,this['italics']=n||!1,this['background']=l||"black",this['flash']=E||!1};p['prototype']={'reset':function(){this['foreground']="white",this['underline']=!1,this['italics']=!1,this['background']="black",this['flash']=!1},'setStyles':function(a){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var l=e[n];a['hasOwnProperty'](l)&&(this[l]=a[l])}},'isDefault':function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},'equals':function(a){return this['foreground']===a.foreground&&this['underline']===a.underline&&this['italics']===a.italics&&this['background']===a.background&&this['flash']===a.flash},'copy':function(a){this['foreground']=a.foreground,this['underline']=a.underline,this['italics']=a.italics,this['background']=a.background,this['flash']=a.flash},'toString':function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var w=function(a,e,n,l,E,o){this['uchar']=a||" ",this['penState']=new p(e,n,l,E,o)};w['prototype']={'reset':function(){this['uchar']=" ",this['penState']['reset']()},'setChar':function(a,e){this['uchar']=a,this['penState']['copy'](e)},'setPenState':function(a){this['penState']['copy'](a)},'equals':function(a){return this['uchar']===a.uchar&&this['penState']['equals'](a.penState)},'copy':function(a){this['uchar']=a.uchar,this['penState']['copy'](a.penState)},'isEmpty':function(){return" "===this.uchar&&this['penState']['isDefault']()}};var x=function(){this['chars']=[];for(var a=0;E>a;a++)this['chars']['push'](new w);this['pos']=0,this['currPenState']=new p};x['prototype']={'equals':function(a){for(var e=!0,n=0;E>n;n++)if(!this['chars'][n]['equals'](a['chars'][n])){e=!1;break}return e},'copy':function(a){for(var e=0;E>e;e++)this['chars'][e]['copy'](a['chars'][e])},'isEmpty':function(){for(var a=!0,e=0;E>e;e++)if(!this['chars'][e]['isEmpty']()){a=!1;break}return a},'setCursor':function(a){this.pos!==a&&(this['pos']=a),this.pos<0?(d['log']("ERROR","Negative cursor position "+this.pos),this['pos']=0):this.pos>E&&(d['log']("ERROR","Too large cursor position "+this.pos),this['pos']=E)},'moveCursor':function(a){var e=this.pos+a;if(a>1)for(var n=this.pos+1;e+1>n;n++)this['chars'][n]['setPenState'](this.currPenState);this['setCursor'](e)},'backSpace':function(){this['moveCursor'](-1),this['chars'][this.pos]['setChar'](" ",this.currPenState)},'insertChar':function(a){a>=144&&this['backSpace']();var e=n(a);return this.pos>=E?void d['log']("ERROR","Cannot insert "+a['toString'](16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this['chars'][this.pos]['setChar'](e,this.currPenState),void this['moveCursor'](1))},'clearFromPos':function(a){var e;for(e=a;E>e;e++)this['chars'][e]['reset']()},'clear':function(){this['clearFromPos'](0),this['pos']=0,this['currPenState']['reset']()},'clearToEndOfRow':function(){this['clearFromPos'](this.pos)},'getTextString':function(){for(var a=[],e=!0,n=0;E>n;n++){var l=this['chars'][n].uchar;" "!==l&&(e=!1),a['push'](l)}return e?"":a['join']("")},'setPenStyles':function(a){this['currPenState']['setStyles'](a);var e=this['chars'][this.pos];e['setPenState'](this.currPenState)}};var v=function(){this['rows']=[];for(var a=0;l>a;a++)this['rows']['push'](new x);this['currRow']=l-1,this['nrRollUpRows']=null,this['reset']()};v['prototype']={'reset':function(){for(var a=0;l>a;a++)this['rows'][a]['clear']();this['currRow']=l-1},'equals':function(a){for(var e=!0,n=0;l>n;n++)if(!this['rows'][n]['equals'](a['rows'][n])){e=!1;break}return e},'copy':function(a){for(var e=0;l>e;e++)this['rows'][e]['copy'](a['rows'][e])},'isEmpty':function(){for(var a=!0,e=0;l>e;e++)if(!this['rows'][e]['isEmpty']()){a=!1;break}return a},'backSpace':function(){var a=this['rows'][this.currRow];a['backSpace']()},'clearToEndOfRow':function(){var a=this['rows'][this.currRow];a['clearToEndOfRow']()},'insertChar':function(a){var e=this['rows'][this.currRow];e['insertChar'](a)},'setPen':function(a){var e=this['rows'][this.currRow];e['setPenStyles'](a)},'moveCursor':function(a){var e=this['rows'][this.currRow];e['moveCursor'](a)},'setCursor':function(a){d['log']("INFO","setCursor: "+a);var e=this['rows'][this.currRow];e['setCursor'](a)},'setPAC':function(a){d['log']("INFO","pacData = "+JSON['stringify'](a));var e=a.row-1;this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this['currRow']=e;var n=this['rows'][this.currRow];if(null!==a.indent){var l=a.indent,E=Math['max'](l-1,0);n['setCursor'](a.indent),a['color']=n['chars'][E].penState.foreground}var o={'foreground':a.color,'underline':a.underline,'italics':a.italics,background:"black",'flash':!1};this['setPen'](o)},'setBkgData':function(a){d['log']("INFO","bkgData = "+JSON['stringify'](a)),this['backSpace'](),this['setPen'](a),this['insertChar'](32)},'setRollUpRows':function(a){this['nrRollUpRows']=a},'rollUp':function(){if(null===this.nrRollUpRows)return void d['log']("DEBUG","roll_up but nrRollUpRows not set yet");d['log']("TEXT",this['getDisplayText']());var a=this.currRow+1-this.nrRollUpRows,e=this['rows']['splice'](a,1)[0];e['clear'](),this['rows']['splice'](this.currRow,0,e),d['log']("INFO","Rolling up")},'getDisplayText':function(a){a=a||!1;for(var e=[],n="",E=-1,o=0;l>o;o++){var i=this['rows'][o]['getTextString']();i&&(E=o+1,a?e['push']("Row "+E+': "'+i+'"'):e['push'](i['trim']()))}return e.length>0&&(n=a?"["+e['join'](" | ")+"]":e['join']("\n")),n},'getTextAndFormat':function(){return this.rows}};var y=function(a,e){this['chNr']=a,this['outputFilter']=e,this['mode']=null,this['verbose']=0,this['displayedMemory']=new v,this['nonDisplayedMemory']=new v,this['lastOutputScreen']=new v,this['currRollUpRow']=this['displayedMemory']['rows'][l-1],this['writeScreen']=this.displayedMemory,this['mode']=null,this['cueStartTime']=null};y['prototype']={'modes':["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],'reset':function(){this['mode']=null,this['displayedMemory']['reset'](),this['nonDisplayedMemory']['reset'](),this['lastOutputScreen']['reset'](),this['currRollUpRow']=this['displayedMemory']['rows'][l-1],this['writeScreen']=this.displayedMemory,this['mode']=null,this['cueStartTime']=null,this['lastCueEndTime']=null},'getHandler':function(){return this.outputFilter},'setHandler':function(a){this['outputFilter']=a},'setPAC':function(a){this['writeScreen']['setPAC'](a)},'setBkgData':function(a){this['writeScreen']['setBkgData'](a)},'setMode':function(a){a!==this.mode&&(this['mode']=a,d['log']("INFO","MODE="+a),"MODE_POP-ON"==this.mode?this['writeScreen']=this.nonDisplayedMemory:(this['writeScreen']=this.displayedMemory,this['writeScreen']['reset']()),"MODE_ROLL-UP"!==this.mode&&(this['displayedMemory']['nrRollUpRows']=null,this['nonDisplayedMemory']['nrRollUpRows']=null),this['mode']=a)},'insertChars':function(a){for(var e=0;e<a.length;e++)this['writeScreen']['insertChar'](a[e]);var n=this['writeScreen']===this.displayedMemory?"DISP":"NON_DISP";d['log']("INFO",n+": "+this['writeScreen']['getDisplayText'](!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(d['log']("TEXT","DISPLAYED: "+this['displayedMemory']['getDisplayText'](!0)),this['outputDataUpdate']())},'cc_RCL':function(){d['log']("INFO","RCL - Resume Caption Loading"),this['setMode']("MODE_POP-ON")},'cc_BS':function(){d['log']("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this['writeScreen']['backSpace'](),this['writeScreen']===this.displayedMemory&&this['outputDataUpdate']())},'cc_AOF':function(){},'cc_AON':function(){},'cc_DER':function(){d['log']("INFO","DER- Delete to End of Row"),this['writeScreen']['clearToEndOfRow'](),this['outputDataUpdate']()},'cc_RU':function(a){d['log']("INFO","RU("+a+") - Roll Up"),
this['writeScreen']=this.displayedMemory,this['setMode']("MODE_ROLL-UP"),this['writeScreen']['setRollUpRows'](a)},'cc_FON':function(){d['log']("INFO","FON - Flash On"),this['writeScreen']['setPen']({'flash':!0})},'cc_RDC':function(){d['log']("INFO","RDC - Resume Direct Captioning"),this['setMode']("MODE_PAINT-ON")},'cc_TR':function(){d['log']("INFO","TR"),this['setMode']("MODE_TEXT")},'cc_RTD':function(){d['log']("INFO","RTD"),this['setMode']("MODE_TEXT")},'cc_EDM':function(){d['log']("INFO","EDM - Erase Displayed Memory"),this['displayedMemory']['reset'](),this['outputDataUpdate']()},'cc_CR':function(){d['log']("CR - Carriage Return"),this['writeScreen']['rollUp'](),this['outputDataUpdate']()},'cc_ENM':function(){d['log']("INFO","ENM - Erase Non-displayed Memory"),this['nonDisplayedMemory']['reset']()},'cc_EOC':function(){if(d['log']("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var a=this.displayedMemory;this['displayedMemory']=this.nonDisplayedMemory,this['nonDisplayedMemory']=a,this['writeScreen']=this.nonDisplayedMemory,d['log']("TEXT","DISP: "+this['displayedMemory']['getDisplayText']())}this['outputDataUpdate']()},'cc_TO':function(a){d['log']("INFO","TO("+a+") - Tab Offset"),this['writeScreen']['moveCursor'](a)},'cc_MIDROW':function(a){var e={'flash':!1};if(e['underline']=a%2===1,e['italics']=a>=46,e.italics)e['foreground']="white";else{var n=Math['floor'](a/2)-16,l=["white","green","blue","cyan","red","yellow","magenta"];e['foreground']=l[n]}d['log']("INFO","MIDROW: "+JSON['stringify'](e)),this['writeScreen']['setPen'](e)},'outputDataUpdate':function(){var a=d.time;null!==a&&this.outputFilter&&(this.outputFilter.updateData&&this['outputFilter']['updateData'](a,this.displayedMemory),null!==this.cueStartTime||this['displayedMemory']['isEmpty']()?this['displayedMemory']['equals'](this.lastOutputScreen)||(this.outputFilter.newCue&&this['outputFilter']['newCue'](this.cueStartTime,a,this.lastOutputScreen),this['cueStartTime']=this['displayedMemory']['isEmpty']()?null:a):this['cueStartTime']=a,this['lastOutputScreen']['copy'](this.displayedMemory))},'cueSplitAtTime':function(a){this.outputFilter&&(this['displayedMemory']['isEmpty']()||(this.outputFilter.newCue&&this['outputFilter']['newCue'](this.cueStartTime,a,this.displayedMemory),this['cueStartTime']=a))}};var h=function(a,e,n){this['field']=a||1,this['outputs']=[e,n],this['channels']=[new y(1,e),new y(2,n)],this['currChNr']=-1,this['lastCmdA']=null,this['lastCmdB']=null,this['bufferedData']=[],this['startTime']=null,this['lastTime']=null,this['dataCounters']={'padding':0,"char":0,'cmd':0,'other':0}};h['prototype']={'getHandler':function(a){return this['channels'][a]['getHandler']()},'setHandler':function(a,e){this['channels'][a]['setHandler'](e)},'addData':function(a,e){var n,l,E,o=!1;this['lastTime']=a,d['setTime'](a);for(var i=0;i<e.length;i+=2)if(l=127&e[i],E=127&e[i+1],l>=16&&31>=l&&l===this.lastCmdA&&E===this.lastCmdB)this['lastCmdA']=null,this['lastCmdB']=null,d['log']("DEBUG","Repeated command ("+c([l,E])+") is dropped");else if(0!==l||0!==E){if(d['log']("DATA","["+c([e[i],e[i+1]])+"] -> ("+c([l,E])+")"),n=this['parseCmd'](l,E),n||(n=this['parseMidrow'](l,E)),n||(n=this['parsePAC'](l,E)),n||(n=this['parseBackgroundAttributes'](l,E)),!n&&(o=this['parseChars'](l,E)))if(this.currChNr&&this.currChNr>=0){var t=this['channels'][this.currChNr-1];t['insertChars'](o)}else d['log']("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this['dataCounters']["char"]+=2:(this.dataCounters.other+=2,d['log']("WARNING","Couldn't parse cleaned data "+c([l,E])+" orig: "+c([e[i],e[i+1]])))}else this.dataCounters.padding+=2},'parseCmd':function(a,e){var n=null,l=(20===a||21===a||28===a||29===a)&&e>=32&&47>=e,E=(23===a||31===a)&&e>=33&&35>=e;if(!l&&!E)return!1;n=20===a||21===a||23===a?1:2;var o=this['channels'][n-1];return 20===a||21===a||28===a||29===a?32===e?o['cc_RCL']():33===e?o['cc_BS']():34===e?o['cc_AOF']():35===e?o['cc_AON']():36===e?o['cc_DER']():37===e?o['cc_RU'](2):38===e?o['cc_RU'](3):39===e?o['cc_RU'](4):40===e?o['cc_FON']():41===e?o['cc_RDC']():42===e?o['cc_TR']():43===e?o['cc_RTD']():44===e?o['cc_EDM']():45===e?o['cc_CR']():46===e?o['cc_ENM']():47===e&&o['cc_EOC']():o['cc_TO'](e-32),this['lastCmdA']=a,this['lastCmdB']=e,this['currChNr']=n,!0},'parseMidrow':function(a,e){var n=null;if((17===a||25===a)&&e>=32&&47>=e){if(n=17===a?1:2,n!==this.currChNr)return d['log']("ERROR","Mismatch channel in midrow parsing"),!1;var l=this['channels'][n-1];return l['insertChars']([32]),l['cc_MIDROW'](e),d['log']("DEBUG","MIDROW ("+c([a,e])+")"),this['lastCmdA']=a,this['lastCmdB']=e,!0}return!1},'parsePAC':function(a,e){var n=null,l=null,E=(a>=17&&23>=a||a>=25&&31>=a)&&e>=64&&127>=e,b=(16===a||24===a)&&e>=64&&95>=e;if(!E&&!b)return!1;n=23>=a?1:2,l=e>=64&&95>=e?1===n?o[a]:t[a]:1===n?i[a]:r[a];var d=this['interpretPAC'](l,e),c=this['channels'][n-1];return c['setPAC'](d),this['lastCmdA']=a,this['lastCmdB']=e,this['currChNr']=n,!0},'interpretPAC':function(a,e){var n=e,l={'color':null,'italics':!1,'indent':null,'underline':!1,'row':a};return n=e>95?e-96:e-64,l['underline']=1===(1&n),13>=n?l['color']=["white","green","blue","cyan","red","yellow","magenta","white"][Math['floor'](n/2)]:15>=n?(l['italics']=!0,l['color']="white"):l['indent']=4*Math['floor']((n-16)/2),l},'parseChars':function(a,e){var l=null,E=null,o=null;if(a>=25?(l=2,o=a-8):(l=1,o=a),o>=17&&19>=o){var i=e;i=17===o?e+80:18===o?e+112:e+144,d['log']("INFO","Special char '"+n(i)+"' in channel "+l),E=[i],this['lastCmdA']=a,this['lastCmdB']=e}else a>=32&&127>=a&&(E=0===e?[a]:[a,e],this['lastCmdA']=null,this['lastCmdB']=null);if(E){var t=c(E);d['log']("DEBUG","Char codes =  "+t['join'](","))}return E},'parseBackgroundAttributes':function(a,e){var n,l,E,o,i=(16===a||24===a)&&e>=32&&47>=e,t=(23===a||31===a)&&e>=45&&47>=e;return i||t?(n={},16===a||24===a?(l=Math['floor']((e-32)/2),n['background']=b[l],e%2===1&&(n['background']=n.background+"_semi")):45===e?n['background']="transparent":(n['foreground']="black",47===e&&(n['underline']=!0)),E=24>a?1:2,o=this['channels'][E-1],o['setBkgData'](n),this['lastCmdA']=a,this['lastCmdB']=e,!0):!1},'reset':function(){for(var a=0;a<this.channels.length;a++)this['channels'][a]&&this['channels'][a]['reset']();this['lastCmdA']=null,this['lastCmdB']=null},'cueSplitAtTime':function(a){for(var e=0;e<this.channels.length;e++)this['channels'][e]&&this['channels'][e]['cueSplitAtTime'](a)}};var s=function(a,e,n){for(var l=0,E=e,o=0,i=[],t=function(a,e,n,l){if(4!==a||8>e)return null;var E=n['getUint8'](l),o=n['getUint16'](l+1),i=n['getUint32'](l+3),t=n['getUint8'](l+7);return 181==E&&49==o&&1195456820==i&&3==t};e+n>E;){if(l=a['getUint32'](E),o=31&a['getUint8'](E+4),6===o)for(var r=E+5,b=-1;E+4+l-1>r;){b=0;for(var d=255;255===d;)d=a['getUint8'](r),b+=d,r++;var c=0;for(d=255;255===d;)d=a['getUint8'](r),c+=d,r++;t(b,c,a,r)&&i['push']([r,c]),r+=c}E+=l+4}return i},D=function(a,e){var n=e[0],l=[[],[]];n+=8;var E=31&a['getUint8'](n);n+=2;for(var o=0;E>o;o++){var i=a['getUint8'](n),t=4&i,r=3&i;n++;var b=a['getUint8'](n);n++;var d=a['getUint8'](n);n++,t&&(127&b)+(127&d)!==0&&(0===r?(l[0]['push'](b),l[0]['push'](d)):1===r&&(l[1]['push'](b),l[1]['push'](d)))}return l};a['logger']=d,a['PenState']=p,a['CaptionScreen']=v,a['Cea608Parser']=h,a['findCea608Nalus']=s,a['extractCea608DataFromRange']=D}("undefined"==typeof n?(void 0)['cea608parser']={}:n)},{}],'16':[function(a,e,n){"use strict";function l(a){function e(){void 0===a.escapeMode&&(a['escapeMode']=!0),void 0===a.attributePrefix&&(a['attributePrefix']="_"),a['arrayAccessForm']=a.arrayAccessForm||"none",a['emptyNodeForm']=a.emptyNodeForm||"text",void 0===a.enableToStringFunc&&(a['enableToStringFunc']=!0),a['arrayAccessFormPaths']=a.arrayAccessFormPaths||[],void 0===a.skipEmptyTextNodesForObj&&(a['skipEmptyTextNodesForObj']=!0),void 0===a.stripWhitespaces&&(a['stripWhitespaces']=!0),a['datetimeAccessFormPaths']=a.datetimeAccessFormPaths||[],void 0===a.useDoubleQuotes&&(a['useDoubleQuotes']=!1),a['xmlElementsFilter']=a.xmlElementsFilter||[],a['jsonPropertiesFilter']=a.jsonPropertiesFilter||[],void 0===a.keepCData&&(a['keepCData']=!1),void 0===a.ignoreRoot&&(a['ignoreRoot']=!1)}function n(){}function l(a){var e=a.localName;return null==e&&(e=a.baseName),(null==e||""==e)&&(e=a.nodeName),e}function E(a){return a.prefix}function o(a){return"string"==typeof a?a['replace'](/&/g,"&amp;")['replace'](/</g,"&lt;")['replace'](/>/g,"&gt;")['replace'](/"/g,"&quot;")['replace'](/'/g,"&apos;"):a}function i(a,e,n,l){for(var E=0;E<a.length;E++){var o=a[E];if("string"==typeof o){if(o==l)break}else if(o instanceof RegExp){if(o['test'](l))break}else if("function"==typeof o&&o(e,n,l))break}return E!=a.length}function t(e,n,l){switch(a.arrayAccessForm){case"property":e[n]instanceof Array?e[n+"_asArray"]=e[n]:e[n+"_asArray"]=[e[n]]}!(e[n]instanceof Array)&&a.arrayAccessFormPaths.length>0&&i(a.arrayAccessFormPaths,e,n,l)&&(e[n]=[e[n]])}function r(a){var e=a['split'](/[-T:+Z]/g),n=new Date(e[0],e[1]-1,e[2]),l=e[5]['split'](".");if(n['setHours'](e[3],e[4],l[0]),l.length>1&&n['setMilliseconds'](l[1]),e[6]&&e[7]){var E=60*e[6]+Number(e[7]),o=/\d\d-\d\d:\d\d$/['test'](a)?"-":"+";E=0+("-"==o?-1*E:E),n['setMinutes'](n['getMinutes']()-E-n['getTimezoneOffset']())}else-1!==a['indexOf']("Z",a.length-1)&&(n=new Date(Date['UTC'](n['getFullYear'](),n['getMonth'](),n['getDate'](),n['getHours'](),n['getMinutes'](),n['getSeconds'](),n['getMilliseconds']())));return n}function b(e,n,l){if(a.datetimeAccessFormPaths.length>0){var E=l['split'](".#")[0];return i(a.datetimeAccessFormPaths,e,n,E)?r(e):e}return e}function d(e,n,l,E){return n==P.ELEMENT_NODE&&a.xmlElementsFilter.length>0?i(a.xmlElementsFilter,e,l,E):!0}function c(e,n){if(e['nodeType']==P.ELEMENT_NODE){for(var E=new Object,o=[],i=e.childNodes,r=0;r<i.length;r++){var b=i[r],d=l(b);if(b['nodeType']==P.ELEMENT_NODE&&b.nodeType!=P.COMMENT_NODE){var c=n+"."+d;if(null==E[d]){var p=new Object;p['__children']=[];for(var w=0;w<b.attributes.length;w++){var x=b['attributes'][w],v=x.value,y=a['matchers'][2];v=y['converter'](x.value),p[a.attributePrefix+x.name]=v}if("#text"!=d||/[^\s]/['test'](p)){var h={};h[d]=p,o['push'](h)}E[d]=p,t(E,d,c)}else{null!=E[d]&&(E[d]instanceof Array||(E[d]=[E[d]],t(E,d,c)));var p=new Object;p['__children']=[];for(var w=0;w<b.attributes.length;w++){var x=b['attributes'][w],v=x.value,y=a['matchers'][2];v=y['converter'](x.value),p[a.attributePrefix+x.name]=v}if("#text"!=d||/[^\s]/['test'](p)){var h={};h[d]=p,o['push'](h)}E[d][E[d].length]=p}}}return E['__children']=o,E}return e['nodeType']==P.TEXT_NODE||e['nodeType']==P.CDATA_SECTION_NODE?e.nodeValue:void 0}function p(e,n){if(e['nodeType']==P.DOCUMENT_NODE){for(var o=new Object,i=e.childNodes,r=0;r<i.length;r++){var w=i[r];if(w['nodeType']==P.ELEMENT_NODE)if(a.ignoreRoot)o=p(w);else{o={};var x=l(w);o[x]=p(w)}}return o}if(e['nodeType']==P.ELEMENT_NODE){var o=new Object;o['__cnt']=0;for(var v=[],i=e.childNodes,r=0;r<i.length;r++){var w=i[r],x=l(w);if(w.nodeType!=P.COMMENT_NODE){var y=n+"."+x;if(d(o,w.nodeType,x,y))if(o.__cnt++,null==o[x]){var h;if(h="SegmentTimeline"===x?c(w,y):p(w,y),"#text"!=x||/[^\s]/['test'](h)){var s={};s[x]=h,v['push'](s)}o[x]=h,t(o,x,y)}else{null!=o[x]&&(o[x]instanceof Array||(o[x]=[o[x]],t(o,x,y)));var h=p(w,y);if("#text"!=x||/[^\s]/['test'](h)){var s={};s[x]=h,v['push'](s)}o[x][o[x].length]=h}}}o['__children']=v;for(var D=l(e),m=0;m<e.attributes.length;m++){var C=e['attributes'][m];o.__cnt++;for(var f=C.value,g=0,k=a.matchers.length;k>g;g++){var M=a['matchers'][g];M['test'](C,D)&&(f=M['converter'](C.value))}o[a.attributePrefix+C.name]=f}var T=E(e);return null!=T&&""!=T&&(o.__cnt++,o['__prefix']=T),null!=o["#text"]&&(o['__text']=o["#text"],o.__text instanceof Array&&(o['__text']=o['__text']['join']("\n")),a.stripWhitespaces&&(o['__text']=o['__text']['trim']()),delete o["#text"],"property"==a.arrayAccessForm&&delete o["#text_asArray"],o['__text']=b(o.__text,x,n+"."+x)),null!=o["#cdata-section"]&&(o['__cdata']=o["#cdata-section"],delete o["#cdata-section"],"property"==a.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==a.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||a.keepCData?o.__cnt>1&&null!=o.__text&&a.skipEmptyTextNodesForObj&&(a.stripWhitespaces&&""==o.__text||""==o['__text']['trim']())&&delete o.__text:o=o.__cdata,delete o.__cnt,!a.enableToStringFunc||null==o.__text&&null==o.__cdata||(o['toString']=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}return e['nodeType']==P.TEXT_NODE||e['nodeType']==P.CDATA_SECTION_NODE?e.nodeValue:void 0}function w(e,n,l,E){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+n;if(null!=l)for(var t=0;t<l.length;t++){var r=l[t],b=e[r];a.escapeMode&&(b=o(b)),i+=" "+r['substr'](a.attributePrefix.length)+"=",i+=a.useDoubleQuotes?'"'+b+'"':"'"+b+"'"}return i+=E?"/>":">"}function x(a,e){return"</"+(null!=a.__prefix?a.__prefix+":":"")+e+">"}function v(a,e){return-1!==a['indexOf'](e,a.length-e.length)}function y(e,n){return"property"==a.arrayAccessForm&&v(n['toString'](),"_asArray")||0==n['toString']()['indexOf'](a.attributePrefix)||0==n['toString']()['indexOf']("__")||e[n]instanceof Function?!0:!1}function h(a){var e=0;if(a instanceof Object)for(var n in a)y(a,n)||e++;return e}function s(e,n,l){return 0==a.jsonPropertiesFilter.length||""==l||i(a.jsonPropertiesFilter,e,n,l)}function D(e){var n=[];if(e instanceof Object)for(var l in e)-1==l['toString']()['indexOf']("__")&&0==l['toString']()['indexOf'](a.attributePrefix)&&n['push'](l);return n}function m(e){var n="";return null!=e.__cdata&&(n+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(n+=a.escapeMode?o(e.__text):e.__text),n}function C(e){var n="";return e instanceof Object?n+=m(e):null!=e&&(n+=a.escapeMode?o(e):e),n}function f(a,e){return""===a?e:a+"."+e}function g(a,e,n,l){var E="";if(0==a.length)E+=w(a,e,n,!0);else for(var o=0;o<a.length;o++)E+=w(a[o],e,D(a[o]),!1),E+=k(a[o],f(l,e)),E+=x(a[o],e);return E}function k(a,e){var n="",l=h(a);if(l>0)for(var E in a)if(!y(a,E)&&(""==e||s(a,E,f(e,E)))){var o=a[E],i=D(o);if(null==o||void 0==o)n+=w(o,E,i,!0);else if(o instanceof Object)if(o instanceof Array)n+=g(o,E,i,e);else if(o instanceof Date)n+=w(o,E,i,!1),n+=o['toISOString'](),n+=x(o,E);else{var t=h(o);t>0||null!=o.__text||null!=o.__cdata?(n+=w(o,E,i,!1),n+=k(o,f(e,E)),n+=x(o,E)):n+=w(o,E,i,!0)}else n+=w(o,E,i,!1),n+=C(o),n+=x(o,E)}return n+=C(a)}var M="1.2.0";a=a||{},e(),n();var P={'ELEMENT_NODE':1,'TEXT_NODE':3,'CDATA_SECTION_NODE':4,'COMMENT_NODE':8,'DOCUMENT_NODE':9};this['parseXmlString']=function(a){window.ActiveXObject||"ActiveXObject"in window;if(void 0===a)return null;var e;if(window.DOMParser){var n=new window.DOMParser;try{e=n['parseFromString'](a,"text/xml"),e['getElementsByTagNameNS']("*","parsererror").length>0&&(e=null)}catch(l){e=null}}else 0==a['indexOf']("<?")&&(a=a['substr'](a['indexOf']("?>")+2)),e=new ActiveXObject("Microsoft.XMLDOM"),e['async']="false",e['loadXML'](a);return e},this['asArray']=function(a){return void 0===a||null==a?[]:a instanceof Array?a:[a]},this['toXmlDateTime']=function(a){return a instanceof Date?a['toISOString']():"number"==typeof a?new Date(a)['toISOString']():null},this['asDateTime']=function(a){return"string"==typeof a?r(a):a},this['xml2json']=function(a){return p(a)},this['xml_str2json']=function(a){var e=this['parseXmlString'](a);return null!=e?this['xml2json'](e):null},this['json2xml_str']=function(a){return k(a,"")},this['json2xml']=function(a){var e=this['json2xml_str'](a);return this['parseXmlString'](e)},this['getVersion']=function(){return M}}Object['defineProperty'](n,"__esModule",{'value':!0}),n["default"]=l},{}],'17':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){T=!0,u=!1,R=x,A=(new Date)['getTime'](),"undefined"!=typeof window&&window.console&&(M[p]=e(window.console.error),M[w]=e(window.console.error),M[x]=e(window.console.warn),M[v]=e(window.console.info),M[y]=e(window.console.debug))}function e(a){return a&&a.bind?a['bind'](window.console):window['console']['log']['bind'](window.console)}function n(a){return{'fatal':h['bind'](a),'error':s['bind'](a),'warn':D['bind'](a),'info':m['bind'](a),'debug':C['bind'](a)}}function l(a){R=a}function E(){return R}function o(a){T=a}function t(a){u=a}function b(a){R=a?y:c}function d(){return R!==c}function h(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];f['apply'](void 0,[p,this]['concat'](e))}function s(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];f['apply'](void 0,[w,this]['concat'](e))}function D(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];f['apply'](void 0,[x,this]['concat'](e))}function m(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];f['apply'](void 0,[v,this]['concat'](e))}function C(){for(var a=arguments.length,e=Array(a),n=0;a>n;n++)e[n]=arguments[n];f['apply'](void 0,[y,this]['concat'](e))}function f(a,e){var n="",l=null;T&&(l=(new Date)['getTime'](),n+="["+(l-A)+"]"),u&&e&&e.getClassName&&(n+="["+e['getClassName']()+"]",e.getType&&(n+="["+e['getType']()+"]")),n.length>0&&(n+=" ");for(var E=arguments.length,o=Array(E>2?E-2:0),i=2;E>i;i++)o[i-2]=arguments[i];Array['apply'](null,o)['forEach'](function(a){n+=a+" "}),M[a]&&R>=a&&M[a](n),k['trigger'](r["default"].LOG,{'message':n,'level':a})}var g=this.context,k=i["default"](g)['getInstance'](),M=[],P=void 0,T=void 0,u=void 0,A=void 0,R=void 0;return P={'getLogger':n,'setLogTimestampVisible':o,'setCalleeNameVisible':t,'setLogToBrowserConsole':b,'getLogToBrowserConsole':d,'setLogLevel':l,'getLogLevel':E},a(),P}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(18),i=l(o),t=a(24),r=l(t),b=a(19),d=l(b),c=0,p=1,w=2,x=3,v=4,y=5;E['__visualon_factory_name']="Debug";var h=d["default"]['getSingletonFactory'](E);h['LOG_LEVEL_NONE']=c,h['LOG_LEVEL_FATAL']=p,h['LOG_LEVEL_ERROR']=w,h['LOG_LEVEL_WARNING']=x,h['LOG_LEVEL_INFO']=v,h['LOG_LEVEL_DEBUG']=y,d["default"]['updateSingletonFactory'](E.__visualon_factory_name,h),n["default"]=h},{'18':18,'19':19,'24':24}],'18':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e,n){var E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;if(!a)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);if(!(l(a,e,n)>=0)){o[a]=o[a]||[];var i={'callback':e,'scope':n,'priority':E},r=o[a]['some'](function(e,n){return e&&E>e.priority?(o[a]['splice'](n,0,i),!0):void 0});r||o[a]['push'](i)}}function e(a,e,n){if(a&&e&&o[a]){var E=l(a,e,n);0>E||(o[a][E]=null)}}function n(a,e){if(a&&o[a]){if(e=e||{},e['hasOwnProperty']("type"))throw new Error("'type' is a reserved word for event dispatching");e['type']=a,o[a]=o[a]['filter'](function(a){return a}),o[a]['forEach'](function(a){return a&&a['callback']['call'](a.scope,e)})}}function l(a,e,n){var l=-1;return o[a]?(o[a]['some'](function(a,E){return!a||a.callback!==e||n&&n!==a.scope?void 0:(l=E,!0)}),l):l}function E(){o={}}var o={},i={'on':a,'off':e,'trigger':n,'reset':E};return i}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=0,r=5e3;E['__visualon_factory_name']="EventBus";var b=i["default"]['getSingletonFactory'](E);b['EVENT_PRIORITY_LOW']=t,b['EVENT_PRIORITY_HIGH']=r,i["default"]['updateSingletonFactory'](E.__visualon_factory_name,b),n["default"]=b},{'19':19}],'19':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l=function(){function a(a,e,n,l){!l[a]&&e&&(l[a]={'instance':e,'override':n})}function e(a,e){for(var n in w){var l=w[n];if(l['context']===a&&l['name']===e)return l.instance}return null}function n(a,e,n){for(var l in w){var E=w[l];if(E['context']===a&&E['name']===e)return void(w[l]['instance']=n)}w['push']({'name':e,'context':a,'instance':n})}function l(a,e){return e[a]}function E(a,e,n){a in n&&(n[a]=e)}function o(a,e){E(a,e,v)}function i(a){return l(a,v)}function t(a){var e=l(a.__visualon_factory_name,v);return e||(e=function(e){return void 0===e&&(e={}),{'create':function(){return c(a,e,arguments)}}},v[a.__visualon_factory_name]=e),e}function r(a,e){E(a,e,x)}function b(a){return l(a,x)}function d(a){var n=l(a.__visualon_factory_name,x);return n||(n=function(n){var l=void 0;return void 0===n&&(n={}),{'getInstance':function(){return l||(l=e(n,a.__visualon_factory_name)),l||(l=c(a,n,arguments),w['push']({'name':a.__visualon_factory_name,'context':n,'instance':l})),l}}},x[a.__visualon_factory_name]=n),n}function c(a,e,n){var l=void 0,E=a.__visualon_factory_name,o=e[E];if(o){var i=o.instance;if(!o.override)return i['apply']({'context':e,'factory':p},n);l=a['apply']({'context':e},n),i=i['apply']({'context':e,'factory':p,'parent':l},n);for(var t in i)l['hasOwnProperty'](t)&&(l[t]=i[t])}else l=a['apply']({'context':e},n);return l['getClassName']=function(){return E},l}var p=void 0,w=[],x={},v={};return p={'extend':a,'getSingletonInstance':e,'setSingletonInstance':n,'getSingletonFactory':d,'getSingletonFactoryByName':b,'updateSingletonFactory':r,'getClassFactory':t,'getClassFactoryByName':i,'updateClassFactory':o}}();n["default"]=l},{}],'20':[function(a,e,n){"use strict";function l(){return E}Object['defineProperty'](n,"__esModule",{'value':!0}),n['getVersionString']=l;var E="2.9.2"},{}],'21':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(22),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE']=10,a['MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE']=11,a['XLINK_LOADER_LOADING_FAILURE_ERROR_CODE']=12,a['SEGMENTS_UPDATE_FAILED_ERROR_CODE']=13,a['SEGMENTS_UNAVAILABLE_ERROR_CODE']=14,a['SEGMENT_BASE_LOADER_ERROR_CODE']=15,a['TIME_SYNC_FAILED_ERROR_CODE']=16,a['FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE']=17,a['FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE']=18,a['URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE']=19,a['APPEND_ERROR_CODE']=20,a['REMOVE_ERROR_CODE']=21,a['DATA_UPDATE_FAILED_ERROR_CODE']=22,a['CAPABILITY_MEDIASOURCE_ERROR_CODE']=23,a['CAPABILITY_MEDIAKEYS_ERROR_CODE']=24,a['DOWNLOAD_ERROR_ID_MANIFEST_CODE']=25,a['DOWNLOAD_ERROR_ID_MANIFEST']="manifest",a['DOWNLOAD_ERROR_ID_SIDX_CODE']=26,a['DOWNLOAD_ERROR_ID_CONTENT_CODE']=27,a['DOWNLOAD_ERROR_ID_CONTENT']="content",a['DOWNLOAD_ERROR_ID_INITIALIZATION_CODE']=28,a['DOWNLOAD_ERROR_ID_INITIALIZATION']="initialization",a['DOWNLOAD_ERROR_ID_XLINK_CODE']=29,a['DOWNLOAD_ERROR_ID_XLINK']="xlink",a['MANIFEST_ERROR_ID_CODEC_CODE']=30,a['MANIFEST_ERROR_ID_PARSE_CODE']=31,a['MANIFEST_ERROR_ID_NOSTREAMS_CODE']=32,a['TIMED_TEXT_ERROR_ID_PARSE_CODE']=33,a['MANIFEST_ERROR_ID_MULTIPLEXED_CODE']=34,a['MEDIASOURCE_TYPE_UNSUPPORTED_CODE']=35,a['MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE']="parsing failed for ",a['MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE']="Failed loading manifest: ",a['XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE']="Failed loading Xlink element: ",a['SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE']="Segments update failed",a['SEGMENTS_UNAVAILABLE_ERROR_MESSAGE']="no segments are available yet",a['SEGMENT_BASE_LOADER_ERROR_MESSAGE']="error loading segments",a['TIME_SYNC_FAILED_ERROR_MESSAGE']="Failed to synchronize time",a['FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE']="request is null",a['URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE']="Failed to resolve a valid URL",a['APPEND_ERROR_MESSAGE']="chunk is not defined",a['REMOVE_ERROR_MESSAGE']="buffer is not defined",a['DATA_UPDATE_FAILED_ERROR_MESSAGE']="Data update failed",a['CAPABILITY_MEDIASOURCE_ERROR_MESSAGE']="mediasource is not supported",a['CAPABILITY_MEDIAKEYS_ERROR_MESSAGE']="mediakeys is not supported",a['TIMED_TEXT_ERROR_MESSAGE_PARSE']="parsing error :",a['MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE']="Error creating source buffer of type : ",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'22':22}],'22':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a)}return E(a,[{'key':"extend",'value':function(a,e){if(a){var n=e?e.override:!1,l=e?e.publicOnly:!1;for(var E in a)!a['hasOwnProperty'](E)||this[E]&&!n||l&&-1===a[E]['indexOf']("public_")||(this[E]=a[E])}}}]),a}();n["default"]=o},{}],'23':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(25),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['BUFFERING_COMPLETED']="bufferingCompleted",a['BUFFER_CLEARED']="bufferCleared",a['BUFFER_LEVEL_UPDATED']="bufferLevelUpdated",a['BYTES_APPENDED']="bytesAppended",a['BYTES_APPENDED_END_FRAGMENT']="bytesAppendedEndFragment",a['CHECK_FOR_EXISTENCE_COMPLETED']="checkForExistenceCompleted",a['CURRENT_TRACK_CHANGED']="currentTrackChanged",a['DATA_UPDATE_COMPLETED']="dataUpdateCompleted",a['DATA_UPDATE_STARTED']="dataUpdateStarted",a['INITIALIZATION_LOADED']="initializationLoaded",a['INIT_FRAGMENT_LOADED']="initFragmentLoaded",a['INIT_REQUESTED']="initRequested",a['INTERNAL_MANIFEST_LOADED']="internalManifestLoaded",a['ORIGINAL_MANIFEST_LOADED']="originalManifestLoaded",a['LIVE_EDGE_SEARCH_COMPLETED']="liveEdgeSearchCompleted",a['LOADING_COMPLETED']="loadingCompleted",a['LOADING_PROGRESS']="loadingProgress",a['LOADING_DATA_PROGRESS']="loadingDataProgress",a['LOADING_ABANDONED']="loadingAborted",a['MANIFEST_UPDATED']="manifestUpdated",a['MEDIA_FRAGMENT_LOADED']="mediaFragmentLoaded",a['QUOTA_EXCEEDED']="quotaExceeded",a['REPRESENTATION_UPDATED']="representationUpdated",a['SEGMENTS_LOADED']="segmentsLoaded",a['SERVICE_LOCATION_BLACKLIST_ADD']="serviceLocationBlacklistAdd",a['SERVICE_LOCATION_BLACKLIST_CHANGED']="serviceLocationBlacklistChanged",a['SOURCEBUFFER_REMOVE_COMPLETED']="sourceBufferRemoveCompleted",a['STREAMS_COMPOSED']="streamsComposed",a['STREAM_BUFFERING_COMPLETED']="streamBufferingCompleted",a['STREAM_COMPLETED']="streamCompleted",a['TEXT_TRACKS_QUEUE_INITIALIZED']="textTracksQueueInitialized",a['TIMED_TEXT_REQUESTED']="timedTextRequested",a['TIME_SYNCHRONIZATION_COMPLETED']="timeSynchronizationComplete",a['URL_RESOLUTION_FAILED']="urlResolutionFailed",a['VIDEO_CHUNK_RECEIVED']="videoChunkReceived",a['WALLCLOCK_TIME_UPDATED']="wallclockTimeUpdated",a['XLINK_ELEMENT_LOADED']="xlinkElementLoaded",a['XLINK_READY']="xlinkReady",a}return i(e,a),e}(r["default"]);n["default"]=b},{'25':25}],'24':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(23),r=l(t),b=function(a){function e(){return E(this,e),o(this,(e.__proto__||Object['getPrototypeOf'](e))['apply'](this,arguments))}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'23':23}],'25':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a)}return E(a,[{'key':"extend",'value':function(a,e){if(a){var n=e?e.override:!1,l=e?e.publicOnly:!1;for(var E in a)!a['hasOwnProperty'](E)||this[E]&&!n||l&&-1===a[E]['indexOf']("public_")||(this[E]=a[E])}}}]),a}();n["default"]=o},{}],'26':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){O()}function e(a){a&&a.dashManifestModel&&(q=a.dashManifestModel)}function n(a,e){return e&&a?e['getRepresentationForQuality'](a.quality):null}function l(a){return a&&a.streamInfo&&void 0!==a.streamInfo.id&&B[a.streamInfo.id]?B[a.streamInfo.id]['filter'](function(e){return e['index']===a.index})[0]:null}function E(a,e){for(var n=e.length,l=0;n>l;l++){var E=e[l];if(a['id']===E.id)return E}return null}function o(a){var e=new r["default"],n=a.adaptation.period.mpd['manifest']['Period_asArray'][a.adaptation.period.index]['AdaptationSet_asArray'][a.adaptation.index],l=q['getRepresentationFor'](a.index,n);return e['id']=a.id,e['quality']=a.index,e['bandwidth']=q['getBandwidth'](l),e['DVRWindow']=a.segmentAvailabilityRange,e['fragmentDuration']=a.segmentDuration||(a.segments&&a.segments.length>0?a['segments'][0].duration:NaN),e['MSETimeOffset']=a.MSETimeOffset,e['useCalculatedLiveEdgeTime']=a.useCalculatedLiveEdgeTime,e['mediaInfo']=t(a.adaptation),e}function t(a){var e=new d["default"],n=a.period.mpd['manifest']['Period_asArray'][a.period.index]['AdaptationSet_asArray'][a.index],l=void 0;return e['id']=a.id,e['index']=a.index,e['type']=a.type,e['streamInfo']=c(a.period),e['representationCount']=q['getRepresentationCount'](n),e['lang']=q['getLanguageForAdaptation'](n),l=q['getViewpointForAdaptation'](n),e['viewpoint']=l?l.value:void 0,e['accessibility']=q['getAccessibilityForAdaptation'](n)['map'](function(a){var n=a.value,l=n;return a.schemeIdUri&&a['schemeIdUri']['search']("cea-608")>=0&&"undefined"!=typeof m["default"]&&(l=n?"cea-608:"+n:"cea-608",e['embeddedCaptions']=!0),l}),e['audioChannelConfiguration']=q['getAudioChannelConfigurationForAdaptation'](n)['map'](function(a){return a.value}),e['roles']=q['getRolesForAdaptation'](n)['map'](function(a){return a.value}),e['codec']=q['getCodec'](n),e['mimeType']=q['getMimeType'](n),e['contentProtection']=q['getContentProtectionData'](n),e['bitrateList']=q['getBitrateListForAdaptation'](n),e.contentProtection&&e['contentProtection']['forEach'](function(a){a['KID']=q['getKID'](a)}),e['isText']=q['getIsTextTrack'](e.mimeType),e['supplementalProperties']=q['getSupplementalPropperties'](n),e}function b(a){a['type']=i["default"].IMAGE}function c(a){var e=new p["default"],n=1;return e['id']=a.id,e['index']=a.index,e['start']=a.start,e['duration']=a.duration,e['manifestInfo']=w(a.mpd),e['isLast']=1===a.mpd.manifest.Period_asArray.length||Math['abs'](e.start+e.duration-e.manifestInfo.duration)<n,e}function w(a){var e=new x["default"];return e['DVRWindowSize']=a.timeShiftBufferDepth,e['loadedTime']=a.manifest.loadedTime,e['availableFrom']=a.availabilityStartTime,e['minBufferTime']=a.manifest.minBufferTime,e['maxFragmentDuration']=a.maxSegmentDuration,e['duration']=q['getDuration'](a.manifest),e['isDynamic']=q['getIsDynamic'](a.manifest),e['serviceDescriptions']=q['getServiceDescriptions'](a.manifest),e}function v(a,e){if(0===z.length)return null;var n=z[0].mpd.manifest,l=q['getAdaptationForType'](n,a.index,e,a);if(!l)return null;var o=E(a,z),i=o.id,r=q['getIndexForAdaptation'](l,n,a.index);return B[i]=B[i]||q['getAdaptationsForPeriod'](o),t(B[i][r])}function h(a,e,n){var l=z,o=n,r=[],d=void 0,c=void 0,p=void 0,w=void 0,x=void 0;if(o){s();var v=q['getMpd'](o);l=q['getRegularPeriods'](v)}else{if(!(z.length>0))return r;o=z[0].mpd.manifest}var y=E(a,l);if(!y)return r;var h=y.id,D=q['getAdaptationsForType'](o,a.index,e!==i["default"].EMBEDDED_TEXT?e:i["default"].VIDEO);if(!D)return r;for(B[h]=B[h]||q['getAdaptationsForPeriod'](y),w=0,x=D.length;x>w;w++)d=D[w],p=q['getIndexForAdaptation'](d,o,a.index),c=t(B[h][p]),e===i["default"].IMAGE?(b(c),r['push'](c),c=null):c&&r['push'](c);return r}function s(){if(!q||!q['hasOwnProperty']("getMpd")||!q['hasOwnProperty']("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function D(a){if(!a)return null;s();var e=q['getMpd'](a);z=q['getRegularPeriods'](e),B={}}function f(a,e){var n=[],l=z;if(a){s();var E=q['getMpd'](a);l=q['getRegularPeriods'](E)}e||(e=l.length);
for(var o=0;e>o;o++)n['push'](c(l[o]));return n}function g(a){if(!(a&&a['hasOwnProperty']("getRepresentationController")&&a['hasOwnProperty']("getIndexHandler")&&a['hasOwnProperty']("getMediaInfo")&&a['hasOwnProperty']("getType")&&a['hasOwnProperty']("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function k(a){if(!a||!a['hasOwnProperty']("getRepresentationForQuality")||!a['hasOwnProperty']("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function M(a,e){var n=void 0,l=void 0,E=void 0;return g(a),C['checkInteger'](e),n=a['getRepresentationController'](),E=a['getIndexHandler'](),l=n?n['getRepresentationForQuality'](e):null,E?E['getInitRequest'](l):null}function P(a,e,l,E){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1,i=void 0,t=void 0,r=void 0,b=null;return g(a),i=a['getRepresentationController'](),t=n(e,i),r=a['getIndexHandler'](),r&&(b=void 0!==l&&void 0!==E?r['getSegmentRequestForTime'](t,l,E):r['getNextSegmentRequest'](t,o)),b}function T(a){g(a);var e=a['getIndexHandler']();return e?e['getCurrentTime']():NaN}function u(a,e){g(a);var n=a['getIndexHandler']();n&&n['setCurrentTime'](e)}function A(a){g(a);var e=a['getIndexHandler']();e&&e['resetIndex']()}function R(a){g(a);var e=E(a['getStreamInfo'](),z),n=a['getMediaInfo'](),o=l(n),i=a['getType'](),t=void 0,r=void 0;t=n?n.id:null,z.length>0&&(r=t?q['getAdaptationForId'](t,z[0].mpd.manifest,e.index):q['getAdaptationForIndex'](n.index,z[0].mpd.manifest,e.index),a['getRepresentationController']()['updateData'](r,o,i))}function S(a,e){k(a);var n=void 0;return void 0!==e?(C['checkInteger'](e),n=a['getRepresentationForQuality'](e)):n=a['getCurrentRepresentation'](),n?o(n):null}function U(a,e,n){if(!a||!e)return null;var l=new y["default"],E=a.scheme_id_uri,o=a.value,i=a.timescale,t=a.presentation_time_delta,r=a.event_duration,b=a.id,d=a.message_data,c=n*i+t;return e[E]?(l['eventStream']=e[E],l['eventStream']['value']=o,l['eventStream']['timescale']=i,l['duration']=r,l['id']=b,l['presentationTime']=c,l['messageData']=d,l['presentationTimeDelta']=t,l):null}function I(a,e){var o=[];if(0===z.length)return o;var i=z[0].mpd.manifest;return a instanceof p["default"]?o=q['getEventsForPeriod'](E(a,z)):a instanceof d["default"]?o=q['getEventStreamForAdaptationSet'](i,l(a)):a instanceof r["default"]&&(o=q['getEventStreamForRepresentation'](i,n(a,e['getRepresentationController']()))),o}function J(a){return a?a:z.length>0?z[0].mpd.manifest:null}function L(a){var e=J(a);return q['getIsDynamic'](e)}function N(a){var e=void 0,n=l(a);return e=q['getRepresentationsForAdaptation'](n)}function O(){z=[],B={}}function V(a,e){var n=a['getRepresentationController']();if(!e||!n)return 0;var l=n['getRepresentationForQuality'](e.quality);return l?a['getIndexHandler']()['findMinDurForSegments'](l.segments):0}var j=void 0,q=void 0,z=void 0,B=void 0;return j={'convertDataToRepresentationInfo':o,'getDataForMedia':l,'getStreamsInfo':f,'getMediaInfoForType':v,'getAllMediaInfoForType':h,'getRepresentationInfo':S,'getIsDynamic':L,'getVoRepresentations':N,'updateData':R,'getInitRequest':M,'getFragmentRequest':P,'getIndexHandlerTime':T,'setIndexHandlerTime':u,'getEventsFor':I,'getEvent':U,'setConfig':e,'updatePeriods':D,'reset':O,'resetIndexHandler':A,'findMinDurForSegments':V},a(),j}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(203),r=l(t),b=a(201),d=l(b),c=a(204),p=l(c),w=a(200),x=l(w),v=a(54),y=l(v),h=a(19),s=l(h),D=a(15),m=l(D),C=a(189);E['__visualon_factory_name']="DashAdapter",n["default"]=s["default"]['getSingletonFactory'](E)},{'15':15,'189':189,'19':19,'200':200,'201':201,'203':203,'204':204,'54':54,'79':79}],'27':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){la=g["default"](K)['getInstance']()['getLogger'](na),C(),H(a.mimeType),Q['on'](v["default"].INITIALIZATION_LOADED,F,na),Q['on'](v["default"].SEGMENTS_LOADED,G,na)}function n(a){if(a){var e=a['split']("/")[1];return"webm"===e['toLowerCase']()}return!1}function l(e,n){ta=e,ra=n,da=R["default"](K)['create'](a,o())}function E(){return ta?ta['getType']():null}function o(){var a=ta?ta['getStreamInfo']():null;return a?a.manifestInfo.isDynamic:ra}function t(){return ta?ta['getMediaInfo']():null}function b(){return ta}function c(a){ia=a}function x(){return ia}function y(a){Ea=a}function s(){return Ea}function m(){Ea=-1}function C(){m(),ia=0,oa=null,ta=null,da=null,ba=null}function f(){C(),Q['off'](v["default"].INITIALIZATION_LOADED,F,na),Q['off'](v["default"].SEGMENTS_LOADED,G,na)}function k(a,e,n){var l=ea['resolve'](n.path),E=void 0,o=void 0;return l&&e!==l.url&&W['isRelative'](e)?(E=l.url,o=l.serviceLocation,e&&(E=W['resolve'](e,E))):E=e,W['isRelative'](E)?!1:(a['url']=E,a['serviceLocation']=o,!0)}function P(a,e){var n=new d["default"],l=a.adaptation.period,E=l.start,i=o();return n['mediaType']=e,n['type']=w.HTTPRequest.INIT_SEGMENT_TYPE,n['range']=a.range,n['availabilityStartTime']=Y['calcAvailabilityStartTimeFromPresentationTime'](E,l.mpd,i),n['availabilityEndTime']=Y['calcAvailabilityEndTimeFromPresentationTime'](E+l.duration,l.mpd,i),n['quality']=a.index,n['mediaInfo']=t(),n['representationId']=a.id,k(n,a.initialization,a)?n:void 0}function A(a){if(!a)return null;var e=P(a,E());return e}function S(a){var e=!1,n=o();if(n||Ea!==a.availableSegmentsNumber){var l=u['getSegmentByIndex'](Ea,a);if(l){var E=parseFloat((l.presentationStartTime-a.adaptation.period.start)['toFixed'](5)),i=a.adaptation.period.duration;la['debug'](a.segmentInfoType+": "+E+" / "+i),e=a['segmentInfoType']===r["default"].SEGMENT_TIMELINE&&n?!1:E>=i}else la['debug']("isMediaFinished - no segment found")}else e=!0;return e}function I(a,e){e?da['getSegments'](a,null,-1,L):da['getSegments'](a,oa,Ea,L)}function L(a,e){var n=a.segments?!1:!0;if(a['segments']=e,e&&e.length>0&&o()){var l=e[e.length-1],E=l.presentationStartTime,t=$['getMetricsFor'](i["default"].STREAM);if(n&&E!==Y['getExpectedLiveEdge']()&&(Y['setExpectedLiveEdge'](E),a.segmentAvailabilityRange&&a.useCalculatedLiveEdgeTime)){var r=E>a.segmentAvailabilityRange.start?E:a.segmentAvailabilityRange.end,b=r?r-a.segmentAvailabilityRange.end:0;la['info']("[DashHandler: onSegmentListUpdated] offset: "+b),Y['setLiveEdgeTimeOffset'](b)}$['updateManifestUpdateInfo'](Z['getCurrentManifestUpdate'](t),{'presentationStartTime':E})}}function N(a){if(!a)throw new Error("no representation");a['segments']=null,I(a,a['segmentInfoType']===r["default"].SEGMENT_TIMELINE&&o())}function O(a,e){var n=T["default"]['hasInitialization'](a),l=T["default"]['hasSegments'](a),i=void 0;return a.segmentDuration||a.segments||N(a),a['segmentAvailabilityRange']=Y['calcSegmentAvailabilityRange'](a,o()),a.segmentAvailabilityRange.end<a.segmentAvailabilityRange.start&&!a.useCalculatedLiveEdgeTime?(i=new p["default"](D["default"].SEGMENTS_UNAVAILABLE_ERROR_CODE,D["default"].SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{'availabilityDelay':a.segmentAvailabilityRange.start-a.segmentAvailabilityRange.end}),void Q['trigger'](v["default"].REPRESENTATION_UPDATED,{'sender':this,'representation':a,'error':i})):(e||m(),a.segmentDuration&&N(a),n||X['loadInitialization'](a),l||X['loadSegments'](a,E(),a.indexRange),void(n&&l&&Q['trigger'](v["default"].REPRESENTATION_UPDATED,{'sender':this,'representation':a})))}function V(a){if(!a||0===a.length)return 0;for(var e=a[0].duration,n=0;n<a.length;n++)a[n].duration<e&&(e=a[n].duration);return e}function j(a,e,n){var l=e.segments,E=l?l.length:null,i=-1,t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=function(){return!o()&&r.availabilityIdx+1===e.availableSegmentsNumber&&a+t>=b&&a-t<Math['ceil'](b+d)?!0:!1};if(l&&E>0){var w=V(l);for(c=E-1;c>=0;c--)if(r=l[c],r&&(b=r.presentationStartTime,d=r.duration,t=void 0===n||null===n?w/2:n,a+t>=b&&b+d>a-t||p())){if(c>0){var x=l[c-1];x.presentationStartTime<=a&&a<x.presentationStartTime+x.duration&&(i=x.availabilityIdx)}-1===i&&(i=r.availabilityIdx);break}}return i}function q(a){if(null===a||void 0===a)return null;var e=new d["default"],n=a.representation,l=n.adaptation.period.mpd['manifest']['Period_asArray'][n.adaptation.period.index]['AdaptationSet_asArray'][n.adaptation.index]['Representation_asArray'][n.index].bandwidth,o=a.media;return o=u['replaceTokenForTemplate'](o,"Number",a.replacementNumber),o=u['replaceTokenForTemplate'](o,"Time",a.replacementTime),o=u['replaceTokenForTemplate'](o,"Bandwidth",l),o=u['replaceTokenForTemplate'](o,"Index",Ea),o=u['replaceIDForTemplate'](o,n.id),o=u['unescapeDollarsInTemplate'](o),e['mediaType']=E(),e['type']=w.HTTPRequest.MEDIA_SEGMENT_TYPE,e['range']=a.mediaRange,e['startTime']=a.presentationStartTime,e['duration']=a.duration,e['timescale']=n.timescale,e['availabilityStartTime']=a.availabilityStartTime,e['availabilityEndTime']=a.availabilityEndTime,e['wallStartTime']=a.wallStartTime,e['quality']=n.index,e['index']=a.availabilityIdx,e['mediaInfo']=t(),e['adaptationIndex']=n.adaptation.index,e['representationId']=n.id,k(e,o,n)?e:void 0}function z(a,e,n){var l=void 0,i=void 0,b=void 0;if(!a)return null;var c=E(),p=Ea,w=n?n.keepIdx:!1,x=n?n.timeThreshold:null,v=n&&n.ignoreIsFinished?!0:!1;return oa!==e&&(oa=e,la['debug']("Getting the request for "+c+" time : "+e)),I(a),Ea=j(e,a,x),0>Ea&&(I(a),Ea=j(e,a,x)),Ea>0&&(p=Ea,la['debug']("Index for "+c+" time "+e+" is "+Ea)),b=v?!1:S(a),b?(l=new d["default"],l['action']=d["default"].ACTION_COMPLETE,l['index']=Ea,l['mediaType']=c,l['mediaInfo']=t(),la['debug']("Signal complete in getSegmentRequestForTime -",c)):(i=u['getSegmentByIndex'](Ea,a),l=q(i)),w&&p>=0&&(Ea=a['segmentInfoType']===r["default"].SEGMENT_TIMELINE&&o()?Ea:p),l}function B(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=void 0,l=void 0,i=void 0;if(!a)return null;var r=E(),b=o();if(oa=null,e?Ea--:Ea++,-1!==Ea){la['debug']("Getting the next request at index: "+Ea+", type: "+r);var c=u['getSegmentByIndex'](Ea,a);return!c&&b?(la['debug']("No segment found at index: "+Ea+". Wait for next loop"),I(a),e?Ea++:Ea--,null):(i=S(a),i?(n=new d["default"],n['action']=d["default"].ACTION_COMPLETE,n['index']=Ea,n['mediaType']=r,n['mediaInfo']=t(),la['debug']("Signal complete -",r)):(I(a),l=u['getSegmentByIndex'](Ea,a),n=q(l),!l&&b&&Ea--),n)}}function F(a){var e=a.representation;e.segments&&Q['trigger'](v["default"].REPRESENTATION_UPDATED,{'sender':this,'representation':e})}function G(a){if(!a.error&&E()===a.mediaType){var e=a.segments,n=a.representation,l=[],i=0,t=void 0,r=void 0,b=void 0,d=void 0;for(t=0,r=e.length;r>t;t++)b=e[t],d=u['getTimeBasedSegment'](Y,o(),n,b.startTime,b.duration,b.timescale,b.media,b.mediaRange,i),l['push'](d),d=null,i++;n['segmentAvailabilityRange']={'start':l[0].presentationStartTime,'end':l[r-1].presentationStartTime},n['availableSegmentsNumber']=r,n['segments']=null,L(n,l),T["default"]['hasInitialization'](n)&&Q['trigger'](v["default"].REPRESENTATION_UPDATED,{'sender':this,'representation':n})}}function H(a){X&&a===ba||(X&&(X=null),ba=a,X=n(a)?J["default"](K)['getInstance']():U["default"](K)['getInstance'](),X['setConfig']({'baseURLController':ea,'metricsModel':$,'mediaPlayerModel':_,'errHandler':aa,'errors':D["default"],'dashMetrics':Z,'constants':i["default"],'dashConstants':r["default"],'urlUtils':W}),X['initialize']())}a=a||{};var K=this.context,Q=h["default"](K)['getInstance'](),W=M["default"](K)['getInstance'](),X=void 0,Y=a.timelineConverter,Z=a.dashMetrics,$=a.metricsModel,_=a.mediaPlayerModel,aa=a.errHandler,ea=a.baseURLController,na=void 0,la=void 0,Ea=void 0,oa=void 0,ia=void 0,ta=void 0,ra=void 0,ba=void 0,da=void 0;return na={'initialize':l,'getStreamProcessor':b,'getInitRequest':A,'getSegmentRequestForTime':z,'getNextSegmentRequest':B,'updateRepresentation':O,'updateSegmentList':N,'setCurrentTime':c,'getCurrentTime':x,'setCurrentIndex':y,'getCurrentIndex':s,'reset':f,'resetIndex':m,'findMinDurForSegments':V,'updateSegmentBaseLoader':H},e(),na}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(31),r=l(t),b=a(196),d=l(b),c=a(194),p=l(c),w=a(214),x=a(24),v=l(x),y=a(18),h=l(y),s=a(21),D=l(s),m=a(19),C=l(m),f=a(17),g=l(f),k=a(190),M=l(k),P=a(58),T=l(P),u=a(48),A=a(47),R=l(A),S=a(29),U=l(S),I=a(30),J=l(I);E['__visualon_factory_name']="DashHandler",n["default"]=C["default"]['getClassFactory'](E)},{'17':17,'18':18,'19':19,'190':190,'194':194,'196':196,'21':21,'214':214,'24':24,'29':29,'30':30,'31':31,'47':47,'48':48,'58':58,'79':79}],'28':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e){var n=void 0,l=u['getValue'](),E=l['Period_asArray'][e];return n=g(E,a),null===n?null:n.bandwidth}function n(a,e){var n=void 0,l=u['getValue'](),E=l['Period_asArray'][e];return n=f(E,a)}function l(a,e){var n=void 0,l=u['getValue']();if(!l)return-1;var E=l['Period_asArray'][e];return n=M(E,a)}function E(a){return x(a,b["default"].TRACK_SWITCH)}function i(a){return x(a,b["default"].BUFFER_LEVEL)}function t(a){var e=i(a);return e?c["default"]['round10'](e.level/1e3,-3):0}function r(a){if(!a)return NaN;var e=5,n=1.3,l=1.3,E=function(a){var E=e;if(a)if(E>=a.length)E=a.length;else for(var o=1;E>o;++o){var i=a[o]/a[o-1];if((i>=l||1/n>=i)&&(E+=1,E===a.length))break}else E=0;return E},o=a[b["default"].BUFFER_LEVEL],i=E(o);if(0===i||!o||0===o.length)return NaN;var t=o['slice'](-i);return t['reduce'](function(a,e){return a+c["default"]['round10'](e.level/1e3,-3)},0)/t.length}function d(a){return a?a.RequestsQueue:null}function p(a){if(!a)return null;var e=a.HttpList,n=null,l=void 0,E=void 0;if(!e||e.length<=0)return null;for(l=e.length,E=l-1;E>=0;){if(e[E].responsecode){n=e[E];break}E--}return n}function w(a){return a&&a.HttpList?a.HttpList:[]}function x(a,e){if(!a)return null;var n=a[e];if(!n)return null;var l=n.length;return 0>=l?null:n[l-1]}function v(a){return x(a,b["default"].DROPPED_FRAMES)}function y(a){return x(a,b["default"].SCHEDULING_INFO)}function h(a){return x(a,b["default"].MANIFEST_UPDATE)}function s(a){return x(a,b["default"].DVR_INFO)}function D(a,e){var n={},l=void 0,E=void 0,i=void 0;for(l=w(a),i=l.length-1;i>=0;i--)if(E=l[i],E['type']===o.HTTPRequest.MPD_TYPE){n=C(E._responseHeaders);break}return void 0===n[e]?null:n[e]}function m(a,e){var n={},l=p(a);return l&&(n=C(l._responseHeaders)),void 0===n[e]?null:n[e]}function C(a){var e={};if(!a)return e;for(var n=a['trim']()['split']("\r\n"),l=0,E=n.length;E>l;l++){var o=n[l],i=o['indexOf'](": ");i>0&&(e[o['substring'](0,i)]=o['substring'](i+2))}return e}function f(a,e){var n=g(a,e,!0);return null!==n?n:-1}function g(a,e,n){var l=void 0,E=void 0,o=void 0,i=void 0,t=void 0,r=void 0;if(a)for(E=a.AdaptationSet_asArray,t=0;t<E.length;t+=1)for(l=E[t],i=l.Representation_asArray,r=0;r<i.length;r+=1)if(o=i[r],e===o.id)return n?r:o;return null}function k(a,e){return T['getIsTypeOf'](a,e)}function M(a,e){var n=void 0,l=void 0,E=void 0,o=void 0;if(!a||!e)return-1;for(l=a.AdaptationSet_asArray,o=0;o<l.length;o+=1)if(n=l[o],E=n.Representation_asArray,k(n,e))return E.length;return-1}a=a||{};var P=void 0,T=a.dashManifestModel,u=a.manifestModel;return P={'getBandwidthForRepresentation':e,'getIndexForRepresentation':n,'getMaxIndexForBufferType':l,'getCurrentRepresentationSwitch':E,'getLatestBufferLevelVO':i,'getCurrentBufferLevel':t,'getAverageBufferLevel':r,'getCurrentHttpRequest':p,'getHttpRequests':w,'getCurrentDroppedFrames':v,'getCurrentSchedulingInfo':y,'getCurrentDVRInfo':s,'getCurrentManifestUpdate':h,'getLatestFragmentRequestHeaderValueByID':m,'getLatestMPDRequestHeaderValueByID':D,'getRequestsQueue':d}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(214),i=a(19),t=l(i),r=a(80),b=l(r),d=a(46),c=l(d);E['__visualon_factory_name']="DashMetrics",n["default"]=t["default"]['getSingletonFactory'](E)},{'19':19,'214':214,'46':46,'80':80}],'29':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){f=m["default"](v)['getInstance']()['getLogger'](s)}function e(){P=y["default"](v)['getInstance'](),u=i["default"](v)['getInstance'](),S=M["default"](v)['create']({'errHandler':D.errHandler,'errors':T["default"],'dashMetrics':D.dashMetrics,'metricsModel':A,'mediaPlayerModel':D.mediaPlayerModel,'requestModifier':u,'boxParser':P,'useFetch':D['mediaPlayerModel']['getUseFetch'](),'urlUtils':D.urlUtils,'constants':D.constants,'dashConstants':D.dashConstants})}function n(a){D=a,a.baseURLController&&(U=a.baseURLController),a.metricsModel&&(A=a.metricsModel),a.mediaPlayerModel&&(R=a.mediaPlayerModel),a.errHandler&&(k=a.errHandler)}function l(){if(!U||!U['hasOwnProperty']("resolve"))throw new Error("setConfig function has to be called previously")}function E(a,e){l();var n=null,o=U['resolve'](a.path),i=e||{'init':!0,'url':o?o.url:void 0,'range':{'start':0,'end':1500},'searching':!1,'bytesLoaded':0,'bytesToLoad':1500};f['debug']("Start searching for initialization.");var t=c(i),r=function(e){i['bytesLoaded']=i.range.end,n=P['findInitRange'](e),n?(a['range']=n,h['trigger'](p["default"].INITIALIZATION_LOADED,{'representation':a})):(i['range']['end']=i.bytesLoaded+i.bytesToLoad,E(a,i))},b=function(){h['trigger'](p["default"].INITIALIZATION_LOADED,{'representation':a})};S['load']({'request':t,'success':r,'error':b}),f['debug']("Perform init search: "+i.url)}function o(a,e,n,E,i){if(l(),n&&(void 0===n.start||void 0===n.end)){var t=n?n['toString']()['split']("-"):null;n=t?{'start':parseFloat(t[0]),'end':parseFloat(t[1])}:null}i=i?i:w;var r=null,d=null,p=!!n,x=U['resolve'](a.path),v={'init':!1,'url':x?x.url:void 0,'range':p?n:{'start':0,'end':1500},'searching':!p,'bytesLoaded':E?E.bytesLoaded:0,'bytesToLoad':1500},y=c(v),h=function(n){var l=v.bytesToLoad,E=n.byteLength;if(v['bytesLoaded']=v.range.end-v.range.start,r=P['parse'](n),d=r['getBox']("sidx"),d&&d.isComplete){var t=d.references,c=void 0,p=void 0;if(null!==t&&void 0!==t&&t.length>0&&(c=1===t[0].reference_type),c){f['debug']("Initiate multiple SIDX load."),v['range']['end']=v.range.start+d.size;var w=void 0,x=void 0,y=void 0,h=void 0,s=void 0,D=[],m=0,C=(d.offset||v.range.start)+d.size,g=function(n){n?(D=D['concat'](n),m++,m>=x&&i(D,a,e)):i(null,a,e)};for(w=0,x=t.length;x>w;w++)y=C,h=C+t[w].referenced_size-1,C+=t[w].referenced_size,s={'start':y,'end':h},o(a,null,s,v,g)}else f['debug']("Parsing segments from SIDX."),p=b(d,v),i(p,a,e)}else{if(d)v['range']['start']=d.offset||v.range.start,v['range']['end']=v.range.start+(d.size||l);else{if(E<v.bytesLoaded)return void i(null,a,e);var k=r['getLastBox']();k&&k.size?(v['range']['start']=k.offset+k.size,v['range']['end']=v.range.start+l):v.range.end+=l}o(a,e,v.range,v,i)}},s=function(){i(null,a,e)};S['load']({'request':y,'success':h,'error':s}),f['debug']("Perform SIDX load: "+v.url)}function t(){S['abort'](),S=null,k=null,P=null,u=null}function b(a,e){for(var n=a.references,l=n.length,E=a.timescale,o=a.earliest_presentation_time,i=e.range.start+a.offset+a.first_offset+a.size,t=[],b=void 0,d=void 0,c=void 0,p=void 0,w=0;l>w;w++)c=n[w].subsegment_duration,p=n[w].referenced_size,b=new r["default"],b['duration']=c,b['startTime']=o,b['timescale']=E,d=i+p-1,b['mediaRange']=i+"-"+d,t['push'](b),o+=c,i+=p;return t}function c(a){if(a.url){var e=new g["default"];return e['type']=a.init?C.HTTPRequest.INIT_SEGMENT_TYPE:C.HTTPRequest.MEDIA_SEGMENT_TYPE,e['url']=a.url,e['range']=a.range.start+"-"+a.range.end,e}}function w(a,e,n){a?h['trigger'](p["default"].SEGMENTS_LOADED,{'segments':a,'representation':e,'mediaType':n}):h['trigger'](p["default"].SEGMENTS_LOADED,{'segments':null,'representation':e,'mediaType':n,'error':new d["default"](T["default"].SEGMENT_BASE_LOADER_ERROR_CODE,T["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}var v=this.context,h=x["default"](v)['getInstance'](),s=void 0,D=void 0,f=void 0,k=void 0,P=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=void 0;return s={'setConfig':n,'initialize':e,'loadInitialization':E,'loadSegments':o,'reset':t},a(),s}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(188),i=l(o),t=a(59),r=l(t),b=a(194),d=l(b),c=a(24),p=l(c),w=a(18),x=l(w),v=a(177),y=l(v),h=a(19),s=l(h),D=a(17),m=l(D),C=a(214),f=a(196),g=l(f),k=a(128),M=l(k),P=a(21),T=l(P);E['__visualon_factory_name']="SegmentBaseLoader",n["default"]=s["default"]['getSingletonFactory'](E)},{'128':128,'17':17,'177':177,'18':18,'188':188,'19':19,'194':194,'196':196,'21':21,'214':214,'24':24,'59':59}],'30':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){k=y["default"](h)['getInstance']()['getLogger'](f),P={'EBML':{'tag':440786851,'required':!0},'Segment':{'tag':408125543,'required':!0,'SeekHead':{'tag':290298740,'required':!0},'Info':{'tag':357149030,'required':!0,'TimecodeScale':{'tag':2807729,'required':!0,'parse':"getMatroskaUint"},'Duration':{'tag':17545,'required':!0,'parse':"getMatroskaFloat"}},'Tracks':{'tag':374648427,'required':!0},'Cues':{'tag':475249515,'required':!0,'CuePoint':{'tag':187,'required':!0,'CueTime':{'tag':179,'required':!0,'parse':"getMatroskaUint"},'CueTrackPositions':{'tag':183,'required':!0,'CueTrack':{'tag':247,'required':!0,'parse':"getMatroskaUint"},'CueClusterPosition':{'tag':241,'required':!0,'parse':"getMatroskaUint"}}}}},'Void':{'tag':236,'required':!0}}}function e(){R=s["default"](h)['getInstance'](),I=M["default"](h)['create']({'errHandler':u,'metricsModel':S,'mediaPlayerModel':U,'requestModifier':R,'errors':A["default"]})}function n(a){if(!(a.baseURLController&&a.metricsModel&&a.mediaPlayerModel&&a.errHandler))throw new Error(p["default"].MISSING_CONFIG_ERROR);J=a.baseURLController,S=a.metricsModel,U=a.mediaPlayerModel,u=a.errHandler}function l(a){var e=[],n=void 0,l=void 0,E=d["default"](h)['create']({'data':a});for(E['consumeTagAndSize'](P.Segment.Cues);E['moreData']()&&E['consumeTagAndSize'](P.Segment.Cues.CuePoint,!0);){for(n={},n['CueTime']=E['parseTag'](P.Segment.Cues.CuePoint.CueTime),n['CueTracks']=[];E['moreData']()&&E['consumeTag'](P.Segment.Cues.CuePoint.CueTrackPositions,!0);){var o=E['getMatroskaCodedNum'](),i=E['getPos']();if(l={},l['Track']=E['parseTag'](P.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===l.Track)throw new Error("Cue track cannot be 0");l['ClusterPosition']=E['parseTag'](P.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n['CueTracks']['push'](l),E['setPos'](i+o)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");e['push'](n)}if(0===e.length)throw new Error("mandatory cuepoint not found");return e}function E(a,e,n,E){var o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=void 0;for(i=l(a),t=[],b=0,d=i.length;d>b;b+=1)r=new m["default"],o=0,o=b<i.length-1?i[b+1].CueTime-i[b].CueTime:E-i[b].CueTime,r['duration']=o,r['startTime']=i[b].CueTime,r['timescale']=1e3,c=i[b]['CueTracks'][0].ClusterPosition+e,p=b<i.length-1?i[b+1]['CueTracks'][0].ClusterPosition+e-1:n-1,r['mediaRange']=c+"-"+p,t['push'](r);return k['debug']("Parsed cues: "+t.length+" cues."),t}function o(a,e,n,l){var o=d["default"](h)['create']({'data':a}),i=void 0,t=void 0,r=n['split']("-"),b=null,c={'url':e,'range':{'start':parseFloat(r[0]),'end':parseFloat(r[1])},'request':b},p=void 0,w=void 0;for(k['debug']("Parse EBML header: "+c.url),o['skipOverElement'](P.EBML),o['consumeTag'](P.Segment),p=o['getMatroskaCodedNum'](),p+=o['getPos'](),w=o['getPos']();o['moreData']()&&!o['consumeTagAndSize'](P.Segment.Info,!0);)if(!(o['skipOverElement'](P.Segment.SeekHead,!0)||o['skipOverElement'](P.Segment.Tracks,!0)||o['skipOverElement'](P.Segment.Cues,!0)||o['skipOverElement'](P.Void,!0)))throw new Error("no valid top level element found");for(;void 0===i;){var v=o['getMatroskaCodedNum'](!0),y=o['getMatroskaCodedNum']();switch(v){case P.Segment.Info.Duration.tag:i=o[P.Segment.Info.Duration.parse](y);break;default:o['setPos'](o['getPos']()+y)}}b=x(c);var s=function(a){t=E(a,w,p,i),l(t)},D=function(){k['error']("Download Error: Cues "+c.url),l(null)};I['load']({'request':b,'success':s,'error':D}),k['debug']("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}function t(){if(!J||!J['hasOwnProperty']("resolve"))throw new Error("setConfig function has to be called previously")}function b(a,e){t();var n=null,l=J['resolve'](a.path),E=l?l.url:void 0,o=a['range']['split']("-"),r=e||{'range':{'start':parseFloat(o[0]),'end':parseFloat(o[1])},'request':n,'url':E,'init':!0};k['info']("Start loading initialization."),n=x(r);var b=function(){D['trigger'](i["default"].INITIALIZATION_LOADED,{'representation':a})},d=function(){D['trigger'](i["default"].INITIALIZATION_LOADED,{'representation':a})};I['load']({'request':n,'success':b,'error':d}),k['debug']("Perform init load: "+r.url)}function c(a,e,n,l){t();var E=null,i=J['resolve'](a.path),r=i?i.url:void 0,b=8192,d={'bytesLoaded':0,'bytesToLoad':b,'range':{'start':0,'end':b},'request':E,'url':r,'init':!1};l=l?l:w,E=x(d),k['debug']("Parsing ebml header");var c=function(E){o(E,r,n,function(n){l(n,a,e)})},p=function(){l(null,a,e)};I['load']({'request':E,'success':c,'error':p})}function w(a,e,n){a?D['trigger'](i["default"].SEGMENTS_LOADED,{'segments':a,'representation':e,'mediaType':n}):D['trigger'](i["default"].SEGMENTS_LOADED,{'segments':null,'representation':e,'mediaType':n,'error':new T["default"](A["default"].SEGMENT_BASE_LOADER_ERROR_CODE,A["default"].SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function x(a){var e=new g["default"];return e['type']=a.init?C.HTTPRequest.INIT_SEGMENT_TYPE:C.HTTPRequest.MEDIA_SEGMENT_TYPE,e['url']=a.url,e['range']=a.range.start+"-"+a.range.end,e}function v(){u=null,R=null}var h=this.context,D=r["default"](h)['getInstance'](),f=void 0,k=void 0,P=void 0,u=void 0,R=void 0,S=void 0,U=void 0,I=void 0,J=void 0;return f={'setConfig':n,'initialize':e,'loadInitialization':b,'loadSegments':c,'reset':v},a(),f}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(24),i=l(o),t=a(18),r=l(t),b=a(182),d=l(b),c=a(79),p=l(c),w=a(19),x=l(w),v=a(17),y=l(v),h=a(188),s=l(h),D=a(59),m=l(D),C=a(214),f=a(196),g=l(f),k=a(128),M=l(k),P=a(194),T=l(P),u=a(21),A=l(u);E['__visualon_factory_name']="WebmSegmentBaseLoader",n["default"]=x["default"]['getSingletonFactory'](E)},{'128':128,'17':17,'18':18,'182':182,'188':188,'19':19,'194':194,'196':196,'21':21,'214':214,'24':24,'59':59,'79':79}],'31':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a),this['init']()}return E(a,[{'key':"init",'value':function(){this['BASE_URL']="BaseURL",this['SEGMENT_BASE']="SegmentBase",this['SEGMENT_TEMPLATE']="SegmentTemplate",this['SEGMENT_LIST']="SegmentList",this['SEGMENT_URL']="SegmentURL",this['SEGMENT_TIMELINE']="SegmentTimeline",this['SEGMENT_PROFILES']="segmentProfiles",this['ADAPTATION_SET']="AdaptationSet",this['REPRESENTATION']="Representation",this['REPRESENTATION_INDEX']="RepresentationIndex",this['SUB_REPRESENTATION']="SubRepresentation",this['INITIALIZATION']="Initialization",this['INITIALIZATION_MINUS']="initialization",this['MPD']="MPD",this['PERIOD']="Period",this['ASSET_IDENTIFIER']="AssetIdentifier",this['EVENT_STREAM']="EventStream",this['ID']="id",this['PROFILES']="profiles",this['SERVICE_LOCATION']="serviceLocation",this['RANGE']="range",this['INDEX']="index",this['MEDIA']="media",this['BYTE_RANGE']="byteRange",this['INDEX_RANGE']="indexRange",this['MEDIA_RANGE']="mediaRange",this['VALUE']="value",this['CONTENT_TYPE']="contentType",this['MIME_TYPE']="mimeType",this['BITSTREAM_SWITCHING']="BitstreamSwitching",this['BITSTREAM_SWITCHING_MINUS']="bitstreamSwitching",this['CODECS']="codecs",this['DEPENDENCY_ID']="dependencyId",this['MEDIA_STREAM_STRUCTURE_ID']="mediaStreamStructureId",this['METRICS']="Metrics",this['METRICS_MINUS']="metrics",this['REPORTING']="Reporting",this['WIDTH']="width",this['HEIGHT']="height",this['SAR']="sar",this['FRAMERATE']="frameRate",this['AUDIO_SAMPLING_RATE']="audioSamplingRate",this['MAXIMUM_SAP_PERIOD']="maximumSAPPeriod",this['START_WITH_SAP']="startWithSAP",this['MAX_PLAYOUT_RATE']="maxPlayoutRate",this['CODING_DEPENDENCY']="codingDependency",this['SCAN_TYPE']="scanType",this['FRAME_PACKING']="FramePacking",this['AUDIO_CHANNEL_CONFIGURATION']="AudioChannelConfiguration",this['CONTENT_PROTECTION']="ContentProtection",this['ESSENTIAL_PROPERTY']="EssentialProperty",this['SUPPLEMENTAL_PROPERTY']="SupplementalProperty",this['INBAND_EVENT_STREAM']="InbandEventStream",this['ACCESSIBILITY']="Accessibility",this['ROLE']="Role",this['RATING']="Rating",this['CONTENT_COMPONENT']="ContentComponent",this['SUBSET']="Subset",this['LANG']="lang",this['VIEWPOINT']="Viewpoint",this['ROLE_ASARRAY']="Role_asArray",this['ACCESSIBILITY_ASARRAY']="Accessibility_asArray",this['AUDIOCHANNELCONFIGURATION_ASARRAY']="AudioChannelConfiguration_asArray",this['CONTENTPROTECTION_ASARRAY']="ContentProtection_asArray",this['MAIN']="main",this['DYNAMIC']="dynamic",this['MEDIA_PRESENTATION_DURATION']="mediaPresentationDuration",this['MINIMUM_UPDATE_PERIOD']="minimumUpdatePeriod",this['CODEC_PRIVATE_DATA']="codecPrivateData",this['BANDWITH']="bandwidth",this['SOURCE_URL']="sourceURL",this['TIMESCALE']="timescale",this['DURATION']="duration",this['START_NUMBER']="startNumber",this['PRESENTATION_TIME_OFFSET']="presentationTimeOffset",this['AVAILABILITY_START_TIME']="availabilityStartTime",this['AVAILABILITY_END_TIME']="availabilityEndTime",this['TIMESHIFT_BUFFER_DEPTH']="timeShiftBufferDepth",this['MAX_SEGMENT_DURATION']="maxSegmentDuration",this['PRESENTATION_TIME']="presentationTime",this['MIN_BUFFER_TIME']="minBufferTime",this['MAX_SUBSEGMENT_DURATION']="maxSubsegmentDuration",this['START']="start",this['AVAILABILITY_TIME_OFFSET']="availabilityTimeOffset",this['AVAILABILITY_TIME_COMPLETE']="availabilityTimeComplete",this['CENC_DEFAULT_KID']="cenc:default_KID",this['DVB_PRIORITY']="dvb:priority",this['DVB_WEIGHT']="dvb:weight",this['SUGGESTED_PRESENTATION_DELAY']="suggestedPresentationDelay",this['SERVICE_DESCRIPTION']="ServiceDescription",this['SERVICE_DESCRIPTION_SCOPE']="Scope",this['SERVICE_DESCRIPTION_LATENCY']="Latency",this['SERVICE_DESCRIPTION_PLAYBACK_RATE']="PlaybackRate"}}]),a}(),i=new o;n["default"]=i},{}],'32':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){v(),V['on'](y["default"].QUALITY_CHANGE_REQUESTED,J,j),V['on'](y["default"].REPRESENTATION_UPDATED,S,j),V['on'](y["default"].WALLCLOCK_TIME_UPDATED,U,j),V['on'](y["default"].BUFFER_LEVEL_UPDATED,I,j),V['on'](y["default"].MANIFEST_VALIDITY_CHANGED,L,j),V['on'](y["default"].VO_DASH_TRICK_MODE_CHANGING,P,j)}function e(a){a.abrController&&(K=a.abrController),a.domStorage&&(Y=a.domStorage),a.metricsModel&&(X=a.metricsModel),a.dashMetrics&&(_=a.dashMetrics),a.dashManifestModel&&($=a.dashManifestModel),a.playbackController&&(W=a.playbackController),a.timelineConverter&&(Z=a.timelineConverter),a.manifestModel&&(ea=a.manifestModel),a.streamProcessor&&(aa=a.streamProcessor),a.type&&(na=a.type),a.streamId&&(la=a.streamId)}function n(){return na}function l(){return la}function E(){Q=aa['getIndexHandler']()}function o(){return aa}function t(){return q}function b(){return z}function c(){return B}function w(){return G}function v(){q=null,z=-1,B=!0,F=[],K=null,W=null,X=null,Y=null,Z=null,$=null,_=null,Ea=!1}function h(){V['off'](y["default"].QUALITY_CHANGE_REQUESTED,J,j),V['off'](y["default"].REPRESENTATION_UPDATED,S,j),V['off'](y["default"].WALLCLOCK_TIME_UPDATED,U,j),V['off'](y["default"].BUFFER_LEVEL_UPDATED,I,j),V['off'](y["default"].MANIFEST_VALIDITY_CHANGED,L,j),V['off'](y["default"].VO_DASH_TRICK_MODE_CHANGING,P,j),v()}function s(a,e,n,l){var E=aa['getStreamInfo'](),o=K['getTopQualityIndexFor'](n,E.id),t=K['getMinAllowedIndexFor'](n);if(B=!0,V['trigger'](y["default"].DATA_UPDATE_STARTED,{'sender':this}),F=M(e),"undefined"==typeof l){var r=void 0,b=null;null!==q&&q['id']==a.id||n===i["default"].FRAGMENTED_TEXT?l=K['getQualityFor'](n):(r=K['getThroughputHistory']()['getAverageThroughput'](n),r||isNaN(N())||K['isUseInitialBitrateByPortal']()?l=K['getStartupQualityFor'](n,aa['getMediaInfo']()):(b=N(),l=K['getQualityForBitrate'](aa['getMediaInfo'](),b))),void 0!==t&&t>l&&(l=t),l>o&&(l=o)}if(G=f(l),q=a,n!==i["default"].VIDEO&&n!==i["default"].AUDIO&&n!==i["default"].FRAGMENTED_TEXT&&n!==i["default"].MUXED)return B=!1,void V['trigger'](y["default"].DATA_UPDATE_COMPLETED,{'sender':this,'data':q,'currentRepresentation':G});for(var d=0;d<F.length;d++)Q['updateRepresentation'](F[d],!0),F[d].trickModeRep&&Q['updateRepresentation'](F[d].trickModeRep,!0)}function D(){var a=new Date,e=w(),n=1e3*W['getTime']();X['addRepresentationSwitch'](e.adaptation.type,a,n,e.id)}function C(){var a=aa['getStreamInfo'](),e=a?a.manifestInfo:null,n=e?e.isDynamic:null,l=Z['calcSegmentAvailabilityRange'](G,n);X['addDVRInfo'](aa['getType'](),W['getTime'](),e,l),"video"===aa['getType']()&&W['checkIfExceedDVRWindow'](l)}function f(a){return null===a||void 0===a||a>=F.length?null:"video"===aa['getType']()&&Ea&&F[a].trickModeRep?F[a].trickModeRep:F[a]}function g(a){return F['indexOf'](a)}function k(){for(var a=0,e=F.length;e>a;a++){var n=F[a].segmentInfoType;if(null===F[a].segmentAvailabilityRange||!m["default"]['hasInitialization'](F[a])||(n===d["default"].SEGMENT_BASE||n===d["default"].BASE_URL)&&!F[a].segments)return!1}return!0}function M(a){var e=void 0;if(z=$['getIndexForAdaptation'](q,a.period.mpd.manifest,a.period.index),e=$['getRepresentationsForAdaptation'](a),a.trickModeSet){var n=$['getRepresentationsForAdaptation'](a.trickModeSet);e['forEach'](function(a){var e=a.height,l=a.width;a['trickModeRep']=n[0],
n['forEach'](function(n){0!=n.height&&0!=n.width&&n['height']==e&&n['width']==l&&(a['trickModeRep']=n)})})}return e}function P(a){aa['getType']()===i["default"].VIDEO&&(Ea=a.mode,a.mode?!T():G=H?H:G,V['trigger'](y["default"].VO_DASH_TRICK_MODE_CHANGED,{'mode':a.mode}))}function T(){return G.trickModeRep?(H=G,G=H.trickModeRep,!0):!1}function u(a){for(var e=void 0,n=0,l=F.length;l>n;n++)e=F[n],e['segmentAvailabilityRange']=Z['calcSegmentAvailabilityRange'](e,a),e.trickModeRep&&(e['trickModeRep']['segmentAvailabilityRange']=Z['calcSegmentAvailabilityRange'](e.trickModeRep,a),e['trickModeRep']===G)?W['checkIfExceedDVRWindow'](e.trickModeRep.segmentAvailabilityRange):e===G&&W['checkIfExceedDVRWindow'](e.segmentAvailabilityRange);C()}function A(){F['forEach'](function(a){a['segmentAvailabilityRange']=null,a.trickModeRep&&(a['trickModeRep']['segmentAvailabilityRange']=null)})}function R(a){var e=a,n=function(){if(!c()){B=!0,V['trigger'](y["default"].DATA_UPDATE_STARTED,{'sender':j}),A();for(var a=0;a<F.length;a++)Q['updateRepresentation'](F[a],!0)}};B=!1,V['trigger'](y["default"].AST_IN_FUTURE,{'delay':e}),setTimeout(n,e)}function S(a){if(a['sender']['getStreamProcessor']()===aa&&c()){var e=a.representation,n=X['getMetricsFor'](i["default"].STREAM),l=X['getMetricsFor'](w().adaptation.type),E=_['getCurrentManifestUpdate'](n),o=!1,t=0,b=void 0,x=void 0,v=void 0;if(e.adaptation.period.mpd['manifest']['type']===d["default"].DYNAMIC&&!e.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var h=e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start,s=W['computeLiveDelay'](G.segmentDuration,aa['getStreamInfo']().manifestInfo.DVRWindowSize);t=1e3*(s-h)}if(t>0)return C(),R(t),x=new p["default"](r["default"].SEGMENTS_UPDATE_FAILED_ERROR_CODE,r["default"].SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void V['trigger'](y["default"].DATA_UPDATE_COMPLETED,{'sender':this,'data':q,'currentRepresentation':G,'error':x});if(E){for(var m=0;m<E.representationInfo.length;m++)if(b=E['representationInfo'][m],b['index']===e.index&&b['mediaType']===aa['getType']()){o=!0;break}o||X['addManifestUpdateRepresentationInfo'](E,e.id,e.index,e.adaptation.period.index,aa['getType'](),e.presentationTimeOffset,e.startNumber,e.segmentInfoType)}k()&&(B=!1,K['setPlaybackQuality'](aa['getType'](),aa['getStreamInfo'](),g(G)),X['updateManifestUpdateInfo'](E,{'latency':G.segmentAvailabilityRange.end-W['getTime']()}),v=_['getCurrentRepresentationSwitch'](l),v||D(),V['trigger'](y["default"].DATA_UPDATE_COMPLETED,{'sender':this,'data':q,'currentRepresentation':G}))}}function U(a){a.isDynamic&&u(a.isDynamic)}function I(a){if(a['sender']['getStreamProcessor']()===aa){var e=ea['getValue']();e.doNotUpdateDVRWindowOnBufferUpdated||C()}}function J(a){if(a['mediaType']===aa['getType']()&&aa['getStreamInfo']()['id']===a.streamInfo.id&&a.oldQuality!==a.newQuality){G=f(a.newQuality);var e=K['getThroughputHistory']()['getAverageThroughput'](a.mediaType);isNaN(e)||Y['setSavedBitrateSettings'](a.mediaType,e),D()}}function L(a){if(a.newDuration){var e=w();if(e&&e.adaptation.period){var n=e.adaptation.period;n['duration']=a.newDuration}}}function N(){return aa['getMediaInfo']()&&aa['getMediaInfo']().bitrateList?aa['getMediaInfo']()['bitrateList'][0].bandwidth/1e3:NAN}var O=this.context,V=x["default"](O)['getInstance'](),j=void 0,q=void 0,z=void 0,B=void 0,F=void 0,G=void 0,H=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ea=void 0,na=void 0,la=void 0,Ea=void 0;return j={'initialize':E,'setConfig':e,'getData':t,'getDataIndex':b,'isUpdating':c,'updateData':s,'getStreamProcessor':o,'getCurrentRepresentation':w,'getRepresentationForQuality':f,'getType':n,'getStreamId':l,'reset':h},a(),j}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(21),r=l(t),b=a(31),d=l(b),c=a(194),p=l(c),w=a(18),x=l(w),v=a(24),y=l(v),h=a(19),s=l(h),D=a(58),m=l(D);E['__visualon_factory_name']="RepresentationController",n["default"]=s["default"]['getClassFactory'](E)},{'18':18,'19':19,'194':194,'21':21,'24':24,'31':31,'58':58,'79':79}],'33':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){Ca=U["default"](fa)['getInstance']()['getLogger'](ma)}function n(a,e){var n=void 0,l=void 0,E=void 0,o=void 0,t=void 0,b=void 0,d=!1,c=!1;if(!a)throw new Error("adaptation is not defined");if(!e)throw new Error("type is not defined");if(a['hasOwnProperty']("ContentComponent_asArray")&&(o=a.ContentComponent_asArray),t=e!==i["default"].TEXT?new RegExp(e):new RegExp("(vtt|ttml)"),a.Representation_asArray&&a.Representation_asArray.length&&a.Representation_asArray.length>0){var p=_(a['Representation_asArray'][0]);if(p&&p.length>0&&j['THUMBNAILS_SCHEME_ID_URIS']['indexOf'](p[0].schemeIdUri)>=0)return e===i["default"].IMAGE;if(a['Representation_asArray'][0]['hasOwnProperty'](r["default"].CODECS)){if(b=a['Representation_asArray'][0].codecs,0===b['search'](i["default"].STPP)||0===b['search'](i["default"].WVTT))return e===i["default"].FRAGMENTED_TEXT;if(!o&&b['search'](",")>0)return e===i["default"].MUXED}}if(o){if(o.length>1)return e===i["default"].MUXED;o[0]&&o[0]['contentType']===e&&(d=!0,c=!0)}if(a['hasOwnProperty'](r["default"].MIME_TYPE)&&(d=t['test'](a.mimeType),c=!0),!c)for(n=0,l=a.Representation_asArray&&a.Representation_asArray.length?a.Representation_asArray.length:0;!c&&l>n;)E=a['Representation_asArray'][n],E['hasOwnProperty'](r["default"].MIME_TYPE)&&(d=t['test'](E.mimeType),c=!0),n++;return d}function l(a){return n(a,i["default"].AUDIO)}function E(a){return n(a,i["default"].VIDEO)}function o(a){return n(a,i["default"].FRAGMENTED_TEXT)}function t(a){return n(a,i["default"].MUXED)}function b(a){return n(a,i["default"].IMAGE)}function c(a){return"text/vtt"===a||"application/ttml+xml"===a}function w(a){var e="";return a&&a['hasOwnProperty'](r["default"].LANG)&&(e=a['lang']['replace'](/[^A-Za-z0-9-]/g,"")),e}function v(a){return a&&a['hasOwnProperty'](r["default"].VIEWPOINT)?a.Viewpoint:null}function h(a){return a&&a['hasOwnProperty'](r["default"].ROLE_ASARRAY)?a.Role_asArray:[]}function D(a){return a&&a['hasOwnProperty'](r["default"].ACCESSIBILITY_ASARRAY)?a.Accessibility_asArray:[]}function C(a){return a&&a['hasOwnProperty'](r["default"].AUDIOCHANNELCONFIGURATION_ASARRAY)?a.AudioChannelConfiguration_asArray:[]}function g(a){return h(a)['filter'](function(a){return a['value']===r["default"].MAIN})[0]}function M(){return function(a,e){return a.bandwidth-e.bandwidth}}function T(a){return a&&void 0!==a.Representation_asArray&&null!==a.Representation_asArray&&a['Representation_asArray']['sort'](M()),a}function A(a,e){return a&&a.Period_asArray&&Ra(e)&&a['Period_asArray'][e]&&a['Period_asArray'][e].AdaptationSet_asArray?a['Period_asArray'][e].AdaptationSet_asArray:[]}function R(a,e){for(var n=A(a,e),l=[],E=0;E<n.length;E++){var o=Da(n[E]);null===o&&l['push'](T(n[E]))}return l}function S(a,e,n){var l=A(e,n),E=void 0,o=void 0;for(E=0,o=l.length;o>E;E++)if(l[E]['hasOwnProperty'](r["default"].ID)&&l[E]['id']===a)return l[E];return null}function I(a,e,n){var l=A(e,n);return l.length>0&&Ra(a)?l[a]:null}function L(a,e,n){var l=R(e,n),E=l.length;if(a)for(var o=0;E>o;o++){var i=P["default"](fa)['getInstance']();if(i['areEqual'](l[o],a))return o}return-1}function O(a,e,l){var E=R(a,e),o=void 0,i=void 0,t=[];for(o=0,i=E.length;i>o;o++)n(E[o],l)&&t['push'](T(E[o]));return t}function q(a,e,n,l){var E=O(a,e,n);if(!E||0===E.length)return null;if(E.length>1&&l){var o=ka['getCurrentTrackFor'](n,l),i=Pa['getAllMediaInfoForType'](l,n);if(o)for(var t=0,r=E.length;r>t;t++)if(ka['isTracksEqual'](o,i[t]))return E[t];for(var b=0,d=E.length;d>b;b++)if(g(E[b]))return E[b]}return E[0]}function z(a,e,n){var l=null;if(a&&a.Representation_asArray&&a.Representation_asArray.length>0){var E=Ra(e)&&e>=0&&e<a.Representation_asArray.length?a['Representation_asArray'][e]:a['Representation_asArray'][0];E&&(l=E.mimeType+';codecs="'+E.codecs+'"',n&&void 0!==E.width&&(l+=';width="'+E.width+'";height="'+E.height+'"'))}return l}function B(a){return a&&a.Representation_asArray&&a.Representation_asArray.length>0?a['Representation_asArray'][0].mimeType:null}function F(a){return a&&a['hasOwnProperty'](r["default"].CENC_DEFAULT_KID)?a[r["default"].CENC_DEFAULT_KID]:null}function G(a){return a&&a['hasOwnProperty'](r["default"].CONTENTPROTECTION_ASARRAY)&&0!==a.ContentProtection_asArray.length?a.ContentProtection_asArray:null}function H(a){var e=!1;return a&&a['hasOwnProperty']("type")&&(e=a['type']===r["default"].DYNAMIC),e}function K(a,e){var n=!1;return a&&a.profiles&&a.profiles.length>0&&(n=-1!==a['profiles']['indexOf'](e)),n}function Q(a){return K(a,Aa)}function W(a){var e=void 0;return e=a&&a['hasOwnProperty'](r["default"].MEDIA_PRESENTATION_DURATION)?a.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE}function X(a){return a&&a.bandwidth?a.bandwidth:NaN}function Y(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return a&&a['hasOwnProperty'](r["default"].MINIMUM_UPDATE_PERIOD)&&(n=a.minimumUpdatePeriod),isNaN(n)?n:Math['max'](n-e,1)}function Z(a){return a&&a.Representation_asArray&&a.Representation_asArray.length?a.Representation_asArray.length:0}function $(a){if(!a||!a.Representation_asArray||!a.Representation_asArray.length)return null;var e=T(a),n=e.Representation_asArray;return n['map'](function(a){return{'id':a.id,'bandwidth':a.bandwidth,'width':a.width||0,'height':a.height||0,'scanType':a.scanType||null}})}function _(a){return a&&a.EssentialProperty_asArray&&a.EssentialProperty_asArray.length?a['EssentialProperty_asArray']['map'](function(a){return{'schemeIdUri':a.schemeIdUri,'value':a.value}}):null}function aa(a,e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0&&Ra(a)?e['Representation_asArray'][a]:null}function ea(a){if(a&&a.period&&Ra(a.period.index)){var e=a.period.mpd['manifest']['Period_asArray'][a.period.index];if(e&&e.AdaptationSet_asArray&&Ra(a.index))return T(e['AdaptationSet_asArray'][a.index])}}function na(a){var e=a['S_asArray'][a.S_asArray.length-1];return!e['hasOwnProperty']("r")||e.r>=0}function la(a){var e=ea(a)['Representation_asArray'][0],n=void 0;return e['hasOwnProperty'](r["default"].SEGMENT_LIST)?(n=e.SegmentList,n['hasOwnProperty'](r["default"].SEGMENT_TIMELINE)?na(n.SegmentTimeline):!0):e['hasOwnProperty'](r["default"].SEGMENT_TEMPLATE)&&(n=e.SegmentTemplate,n['hasOwnProperty'](r["default"].SEGMENT_TIMELINE))?na(n.SegmentTimeline):!1}function Ea(a){var e=[],n=ea(a),l=void 0,E=void 0;if(a&&a.period&&Ra(a.period.index)){var o=va(a.period.mpd.manifest);o&&(E=o[0])}if(n&&n.Representation_asArray)for(var i=0,t=n.Representation_asArray.length;t>i;++i){var b=n['Representation_asArray'][i],p=new d["default"];if(p['index']=i,p['adaptation']=a,p['width']=b.width,p['height']=b.height,b['hasOwnProperty'](r["default"].ID)&&(p['id']=b.id),b['hasOwnProperty'](r["default"].CODECS)&&(p['codecs']=b.codecs),b['hasOwnProperty'](r["default"].CODEC_PRIVATE_DATA)&&(p['codecPrivateData']=b.codecPrivateData),b['hasOwnProperty'](r["default"].BANDWITH)&&(p['bandwidth']=b.bandwidth),b['hasOwnProperty'](r["default"].WIDTH)&&(p['width']=b.width),b['hasOwnProperty'](r["default"].HEIGHT)&&(p['height']=b.height),b['hasOwnProperty'](r["default"].SCAN_TYPE)&&(p['scanType']=b.scanType),b['hasOwnProperty'](r["default"].MAX_PLAYOUT_RATE)&&(p['maxPlayoutRate']=b.maxPlayoutRate),b['hasOwnProperty'](r["default"].SEGMENT_BASE)?(l=b.SegmentBase,p['segmentInfoType']=r["default"].SEGMENT_BASE):b['hasOwnProperty'](r["default"].SEGMENT_LIST)?(l=b.SegmentList,l['hasOwnProperty'](r["default"].SEGMENT_TIMELINE)?(p['segmentInfoType']=r["default"].SEGMENT_TIMELINE,p['useCalculatedLiveEdgeTime']=na(l.SegmentTimeline)):(p['segmentInfoType']=r["default"].SEGMENT_LIST,p['useCalculatedLiveEdgeTime']=!0)):b['hasOwnProperty'](r["default"].SEGMENT_TEMPLATE)?(l=b.SegmentTemplate,l['hasOwnProperty'](r["default"].SEGMENT_TIMELINE)?(p['segmentInfoType']=r["default"].SEGMENT_TIMELINE,p['useCalculatedLiveEdgeTime']=na(l.SegmentTimeline)):p['segmentInfoType']=r["default"].SEGMENT_TEMPLATE,l['hasOwnProperty'](r["default"].INITIALIZATION_MINUS)&&(p['initialization']=l['initialization']['split']("$Bandwidth$")['join'](b.bandwidth)['split']("$RepresentationID$")['join'](b.id))):p['segmentInfoType']=r["default"].BASE_URL,p['essentialProperties']=_(b),l){if(l['hasOwnProperty'](r["default"].INITIALIZATION)){var w=l.Initialization;w['hasOwnProperty'](r["default"].SOURCE_URL)?p['initialization']=w.sourceURL:w['hasOwnProperty'](r["default"].RANGE)&&(p['range']=w.range)}else b['hasOwnProperty'](r["default"].MIME_TYPE)&&c(b.mimeType)&&(p['range']=0);l['hasOwnProperty'](r["default"].TIMESCALE)&&(p['timescale']=l.timescale),l['hasOwnProperty'](r["default"].DURATION)&&(p['segmentDuration']=l.duration/p.timescale),l['hasOwnProperty'](r["default"].MEDIA)&&(p['media']=l.media),l['hasOwnProperty'](r["default"].START_NUMBER)&&(p['startNumber']=l.startNumber),l['hasOwnProperty'](r["default"].INDEX_RANGE)&&(p['indexRange']=l.indexRange),l['hasOwnProperty'](r["default"].PRESENTATION_TIME_OFFSET)&&(p['presentationTimeOffset']=l.presentationTimeOffset/p.timescale),l['hasOwnProperty'](r["default"].AVAILABILITY_TIME_OFFSET)?p['availabilityTimeOffset']=l.availabilityTimeOffset:E&&void 0!==E.availabilityTimeOffset&&(p['availabilityTimeOffset']=E.availabilityTimeOffset),l['hasOwnProperty'](r["default"].AVAILABILITY_TIME_COMPLETE)?p['availabilityTimeComplete']="false"!==l.availabilityTimeComplete:E&&void 0!==E.availabilityTimeComplete&&(p['availabilityTimeComplete']=E.availabilityTimeComplete)}p['MSETimeOffset']=Ma['calcMSETimeOffset'](p),p['path']=[a.period.index,a.index,i],e['push'](p)}return e}function oa(a){var e=a&&Ra(a.index)?a.mpd['manifest']['Period_asArray'][a.index]:null,n=[],d=[],c=void 0,w=void 0,x=void 0,v=void 0;if(e&&e.AdaptationSet_asArray)for(x=0;x<e.AdaptationSet_asArray.length;x++)w=e['AdaptationSet_asArray'][x],v=Da(w),c=new p["default"],w['hasOwnProperty'](r["default"].ID)&&(c['id']=w.id),c['index']=x,c['period']=a,c['trickModeFor']=v,t(w)?c['type']=i["default"].MUXED:l(w)?c['type']=i["default"].AUDIO:E(w)?c['type']=i["default"].VIDEO:o(w)?c['type']=i["default"].FRAGMENTED_TEXT:b(w)?c['type']=i["default"].IMAGE:c['type']=i["default"].TEXT,null!==v?d['push'](c):n['push'](c);return d['forEach'](function(a){var e=a.trickModeFor;n['forEach'](function(n){n['id']==e&&(n['trickModeSet']=a)})}),n}function ia(a){var e=a?H(a.manifest):!1,n=[],l=null,E=null,o=null,i=null,t=void 0,b=void 0;for(b=0,t=a&&a.manifest&&a.manifest.Period_asArray?a.manifest.Period_asArray.length:0;t>b;b++)E=a['manifest']['Period_asArray'][b],E['hasOwnProperty'](r["default"].START)?(i=new x["default"],i['start']=E.start):null!==l&&l['hasOwnProperty'](r["default"].DURATION)&&null!==o?(i=new x["default"],i['start']=parseFloat((o.start+o.duration)['toFixed'](5))):0!==b||e||(i=new x["default"],i['start']=0),null!==o&&isNaN(o.duration)&&(null!==i?o['duration']=parseFloat((i.start-o.start)['toFixed'](5)):Ca['warn']("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==i&&(i['id']=ta(E,b),i['index']=b,i['mpd']=a,E['hasOwnProperty'](r["default"].DURATION)&&(i['duration']=E.duration),n['push'](i),l=E,o=i),E=null,i=null;return 0===n.length?n:(null!==o&&isNaN(o.duration)&&(o['duration']=parseFloat((ba(o)-o.start)['toFixed'](5))),n)}function ta(a,e){if(!a)throw new Error("Period cannot be null or undefined");var n=x["default"].DEFAULT_ID+"_"+e;return a['hasOwnProperty'](r["default"].ID)&&a.id.length>0&&"__proto__"!==a.id&&(n=a.id),n}function ra(a){var e=new y["default"];return a&&(e['manifest']=a,a['hasOwnProperty'](r["default"].AVAILABILITY_START_TIME)?e['availabilityStartTime']=new Date(a['availabilityStartTime']['getTime']()):e['availabilityStartTime']=new Date(a['loadedTime']['getTime']()),a['hasOwnProperty'](r["default"].AVAILABILITY_END_TIME)&&(e['availabilityEndTime']=new Date(a['availabilityEndTime']['getTime']())),a['hasOwnProperty'](r["default"].MINIMUM_UPDATE_PERIOD)&&(e['minimumUpdatePeriod']=a.minimumUpdatePeriod),a['hasOwnProperty'](r["default"].MEDIA_PRESENTATION_DURATION)&&(e['mediaPresentationDuration']=a.mediaPresentationDuration),a['hasOwnProperty'](i["default"].SUGGESTED_PRESENTATION_DELAY)&&(e['suggestedPresentationDelay']=a.suggestedPresentationDelay),a['hasOwnProperty'](r["default"].TIMESHIFT_BUFFER_DEPTH)&&(e['timeShiftBufferDepth']=a.timeShiftBufferDepth),a['hasOwnProperty'](r["default"].MAX_SEGMENT_DURATION)&&(e['maxSegmentDuration']=a.maxSegmentDuration)),e}function ba(a){var e=H(a.mpd.manifest),n=void 0;return a.mpd.manifest.mediaPresentationDuration?n=a.mpd.manifest.mediaPresentationDuration:a.duration?n=a.duration:e?n=Number.POSITIVE_INFINITY:Ta['error'](new J["default"](N["default"].MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",a)),n}function da(a){var e=a&&a.mpd&&a.mpd.manifest?a.mpd.manifest:null,n=e?e.Period_asArray:null,l=n&&a&&Ra(a.index)?n[a.index].EventStream_asArray:null,E=[],o=void 0,t=void 0;if(l)for(o=0;o<l.length;o++){var b=new k["default"];if(b['period']=a,b['timescale']=1,!l[o]['hasOwnProperty'](i["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(b['schemeIdUri']=l[o].schemeIdUri,l[o]['hasOwnProperty'](r["default"].TIMESCALE)&&(b['timescale']=l[o].timescale),l[o]['hasOwnProperty'](r["default"].VALUE)&&(b['value']=l[o].value),t=0;l[o].Event_asArray&&t<l[o].Event_asArray.length;t++){var d=new m["default"];d['presentationTime']=0,d['eventStream']=b,l[o]['Event_asArray'][t]['hasOwnProperty'](r["default"].PRESENTATION_TIME)&&(d['presentationTime']=l[o]['Event_asArray'][t].presentationTime),l[o]['Event_asArray'][t]['hasOwnProperty'](r["default"].DURATION)&&(d['duration']=l[o]['Event_asArray'][t].duration),l[o]['Event_asArray'][t]['hasOwnProperty'](r["default"].ID)&&(d['id']=l[o]['Event_asArray'][t].id),d['messageData']=l[o]['Event_asArray'][t].messageData||l[o]['Event_asArray'][t].__text,E['push'](d)}}return E}function ca(a,e){var n=[],l=void 0;if(!a)return n;for(l=0;l<a.length;l++){var E=new k["default"];if(E['timescale']=1,E['representation']=e,!a[l]['hasOwnProperty'](i["default"].SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");E['schemeIdUri']=a[l].schemeIdUri,a[l]['hasOwnProperty'](r["default"].TIMESCALE)&&(E['timescale']=a[l].timescale),a[l]['hasOwnProperty'](r["default"].VALUE)&&(E['value']=a[l].value),n['push'](E)}return n}function pa(a,e){var n=void 0,l=void 0,E=void 0;return a&&a.Period_asArray&&e&&e.period&&Ra(e.period.index)&&(l=a['Period_asArray'][e.period.index],l&&l.AdaptationSet_asArray&&Ra(e.index)&&(E=l['AdaptationSet_asArray'][e.index],E&&(n=E.InbandEventStream_asArray))),ca(n,null)}function wa(a,e){var n=void 0,l=void 0,E=void 0,o=void 0;return a&&a.Period_asArray&&e&&e.adaptation&&e.adaptation.period&&Ra(e.adaptation.period.index)&&(l=a['Period_asArray'][e.adaptation.period.index],l&&l.AdaptationSet_asArray&&Ra(e.adaptation.index)&&(E=l['AdaptationSet_asArray'][e.adaptation.index],E&&E.Representation_asArray&&Ra(e.index)&&(o=E['Representation_asArray'][e.index],o&&(n=o.InbandEventStream_asArray)))),ca(n,e)}function xa(a){var e=H(a),n=a?a['hasOwnProperty'](r["default"].AVAILABILITY_START_TIME):!1,l=a?a.UTCTiming_asArray:null,E=[];return(e||n)&&l&&l['forEach'](function(a){var e=new s["default"];a['hasOwnProperty'](i["default"].SCHEME_ID_URI)&&(e['schemeIdUri']=a.schemeIdUri,a['hasOwnProperty'](r["default"].VALUE)&&(e['value']=a['value']['toString'](),E['push'](e)))}),E}function va(a){var e=[],n=a.BaseURL_asArray||[a.baseUri],l=!1;return n['some'](function(n){if(n){var E=new f["default"],o=n.__text||n;return ga['isRelative'](o)&&(l=!0,a.baseUri&&(o=ga['resolve'](o,a.baseUri))),E['url']=o,n['hasOwnProperty'](r["default"].SERVICE_LOCATION)&&n.serviceLocation.length?E['serviceLocation']=n.serviceLocation:E['serviceLocation']=o,n['hasOwnProperty'](r["default"].DVB_PRIORITY)&&(E['dvb_priority']=n[r["default"].DVB_PRIORITY]),n['hasOwnProperty'](r["default"].DVB_WEIGHT)&&(E['dvb_weight']=n[r["default"].DVB_WEIGHT]),n['hasOwnProperty'](r["default"].AVAILABILITY_TIME_OFFSET)&&(E['availabilityTimeOffset']=n[r["default"].AVAILABILITY_TIME_OFFSET]),n['hasOwnProperty'](r["default"].AVAILABILITY_TIME_COMPLETE)&&(E['availabilityTimeComplete']="false"!==n[r["default"].AVAILABILITY_TIME_COMPLETE]),e['push'](E),l}}),e}function ya(a){return a&&a['hasOwnProperty'](i["default"].LOCATION)?(a['Location']=a['Location_asArray'][0],a.Location):void 0}function ha(a){var e=[];if(a&&a['hasOwnProperty'](r["default"].SERVICE_DESCRIPTION)){var n=!0,l=!1,E=void 0;try{for(var o,t=a['ServiceDescription_asArray'][Symbol.iterator]();!(n=(o=t['next']()).done);n=!0){var b=o.value,d=void 0,c=void 0,p=void 0,w=void 0;for(var x in b)b['hasOwnProperty'](x)&&(x===r["default"].ID?d=b[x]:x===r["default"].SERVICE_DESCRIPTION_SCOPE?c=b[x].schemeIdUri:x===r["default"].SERVICE_DESCRIPTION_LATENCY?p={'target':b[x].target,'max':b[x].max,'min':b[x].min}:x===r["default"].SERVICE_DESCRIPTION_PLAYBACK_RATE&&(w={'max':b[x].max,'min':b[x].min}));c===i["default"].SERVICE_DESCRIPTION_LL_SCHEME&&(p||w)&&e['push']({'id':d,'schemeIdUri':c,'latency':p,'playbackRate':w})}}catch(v){l=!0,E=v}finally{try{!n&&t["return"]&&t["return"]()}finally{if(l)throw E}}}return e}function sa(a){var e={};if(a&&a['hasOwnProperty'](r["default"].SUPPLEMENTAL_PROPERTY)){var n=!0,l=!1,E=void 0;try{for(var o,t=a['SupplementalProperty_asArray'][Symbol.iterator]();!(n=(o=t['next']()).done);n=!0){var b=o.value;b['hasOwnProperty'](i["default"].SCHEME_ID_URI)&&b['hasOwnProperty'](r["default"].VALUE)&&(e[b[i["default"].SCHEME_ID_URI]]=b[r["default"].VALUE])}}catch(d){l=!0,E=d}finally{try{!n&&t["return"]&&t["return"]()}finally{if(l)throw E}}}return e}function Da(a){var e=null;if(a['hasOwnProperty']("EssentialProperty")){var n=a.EssentialProperty_asArray;n['forEach'](function(a){a['hasOwnProperty']("schemeIdUri")&&"http://dashif.org/guidelines/trickmode"===a.schemeIdUri&&(ua['setTrickPlayMode'](!0),a.value&&(e=parseInt(a.value)))})}return e}a=a||{};var ma=void 0,Ca=void 0,fa=this.context,ga=u["default"](fa)['getInstance'](),ka=a.mediaController,Ma=a.timelineConverter,Pa=a.adapter,Ta=a.errHandler,ua=V["default"](fa)['getInstance'](),Aa="urn:dvb:dash:profile:dvb-dash:2014",Ra=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math['floor'](a)===a};return ma={'getIsTypeOf':n,'getIsTextTrack':c,'getLanguageForAdaptation':w,'getViewpointForAdaptation':v,'getRolesForAdaptation':h,'getAccessibilityForAdaptation':D,'getAudioChannelConfigurationForAdaptation':C,'getAdaptationForIndex':I,'getIndexForAdaptation':L,'getAdaptationForId':S,'getAdaptationsForType':O,'getAdaptationForType':q,'getCodec':z,'getMimeType':B,'getKID':F,'getContentProtectionData':G,'getIsDynamic':H,'getIsDVB':Q,'getDuration':W,'getBandwidth':X,'getManifestUpdatePeriod':Y,'getRepresentationCount':Z,'getBitrateListForAdaptation':$,'getRepresentationFor':aa,'getRepresentationsForAdaptation':Ea,'getAdaptationsForPeriod':oa,'getRegularPeriods':ia,'getMpd':ra,'getEventsForPeriod':da,'getEventStreamForAdaptationSet':pa,'getEventStreamForRepresentation':wa,'getUTCTimingSources':xa,'getBaseURLsFromElement':va,'getRepresentationSortFunction':M,'getLocation':ya,'getUseCalculatedLiveEdgeTimeForAdaptation':la,'getServiceDescriptions':ha,'getSupplementalPropperties':sa,'getTrickModeFor':Da},e(),ma}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(31),r=l(t),b=a(58),d=l(b),c=a(52),p=l(c),w=a(57),x=l(w),v=a(56),y=l(v),h=a(60),s=l(h),D=a(54),m=l(D),C=a(53),f=l(C),g=a(55),k=l(g),M=a(187),P=l(M),T=a(190),u=l(T),A=a(19),R=l(A),S=a(17),U=l(S),I=a(194),J=l(I),L=a(21),N=l(L),O=a(121),V=l(O),j=a(175);E['__visualon_factory_name']="DashManifestModel",n["default"]=R["default"]['getSingletonFactory'](E)},{'121':121,'17':17,'175':175,'187':187,'19':19,'190':190,'194':194,'21':21,'31':31,'52':52,'53':53,'54':54,'55':55,'56':56,'57':57,'58':58,'60':60,'79':79}],'34':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){i=r["default"](E)['getInstance']()['getLogger'](o),t=[new y["default"],new s["default"],new m["default"],new x["default"]],b=new p["default"]({'escapeMode':!1,'attributePrefix':"",'arrayAccessForm':"property",'emptyNodeForm':"object",'stripWhitespaces':!1,'enableToStringFunc':!1,'ignoreRoot':!0,'matchers':t}),c=d["default"](E)['create']({'adaptationset':new f["default"],'period':new k["default"]})}function e(){return t}function n(){return c}function l(a){var e=void 0,n=window['performance']['now']();if(e=b['xml_str2json'](a),!e)throw new Error("parsing the manifest failed");var l=window['performance']['now']();c['run'](e);var E=window['performance']['now']();return i['info']("Parsing complete: ( xml2json: "+(l-n)['toPrecision'](3)+"ms, objectiron: "+(E-l)['toPrecision'](3)+"ms, total: "+((E-n)/1e3)['toPrecision'](3)+"s)"),e}var E=this.context,o=void 0,i=void 0,t=void 0,b=void 0,c=void 0;return o={'parse':l,'getMatchers':e,'getIron':n},a(),o}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(17),r=l(t),b=a(44),d=l(b),c=a(16),p=l(c),w=a(43),x=l(w),v=a(41),y=l(v),h=a(40),s=l(h),D=a(42),m=l(D),C=a(37),f=l(C),g=a(38),k=l(g);E['__visualon_factory_name']="DashParser",n["default"]=i["default"]['getClassFactory'](E)},{'16':16,'17':17,'19':19,'37':37,'38':38,'40':40,'41':41,'42':42,'43':43,'44':44}],'35':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e){l(this,a);var n=function(a){return a&&a.length&&a['charAt'](0)===a['charAt'](0)['toUpperCase']()};this['_name']=e,this['_merge']=n(e)}return E(a,[{'key':"name",'get':function(){return this._name}},{'key':"merge",'get':function(){return this._merge}}]),a}();n["default"]=o},{}],'36':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(35),t=l(i),r=function(){function a(e,n,l){var o=this;E(this,a),this['_name']=e||"",this['_properties']=[],this['_children']=l||[],Array['isArray'](n)&&n['forEach'](function(a){o['_properties']['push'](new t["default"](a))})}return o(a,[{'key':"name",'get':function(){return this._name}},{'key':"children",'get':function(){return this._children}},{'key':"properties",'get':function(){return this._properties}}]),a}();n["default"]=r},{'35':35}],'37':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(36),r=l(t),b=a(31),d=l(b),c=function(a){function e(){E(this,e);var a=[d["default"].PROFILES,d["default"].WIDTH,d["default"].HEIGHT,d["default"].SAR,d["default"].FRAMERATE,d["default"].AUDIO_SAMPLING_RATE,d["default"].MIME_TYPE,d["default"].SEGMENT_PROFILES,d["default"].CODECS,d["default"].MAXIMUM_SAP_PERIOD,d["default"].START_WITH_SAP,d["default"].MAX_PLAYOUT_RATE,d["default"].CODING_DEPENDENCY,d["default"].SCAN_TYPE,d["default"].FRAME_PACKING,d["default"].AUDIO_CHANNEL_CONFIGURATION,d["default"].CONTENT_PROTECTION,d["default"].ESSENTIAL_PROPERTY,d["default"].SUPPLEMENTAL_PROPERTY,d["default"].INBAND_EVENT_STREAM];return o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,d["default"].ADAPTATION_SET,a,[new r["default"](d["default"].REPRESENTATION,a,[new r["default"](d["default"].SUB_REPRESENTATION,a)])]))}return i(e,a),e}(r["default"]);n["default"]=c},{'31':31,'36':36}],'38':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(36),r=l(t),b=a(31),d=l(b),c=function(a){function e(){E(this,e);var a=[d["default"].SEGMENT_BASE,d["default"].SEGMENT_TEMPLATE,d["default"].SEGMENT_LIST];return o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,d["default"].PERIOD,a,[new r["default"](d["default"].ADAPTATION_SET,a,[new r["default"](d["default"].REPRESENTATION,a)])]))}return i(e,a),e}(r["default"]);n["default"]=c},{'31':31,'36':36}],'39':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e,n){l(this,a),this['_test']=e,this['_converter']=n}return E(a,[{'key':"test",'get':function(){return this._test}},{'key':"converter",'get':function(){return this._converter}}]),a}();n["default"]=o},{}],'40':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(39),r=l(t),b=60,d=60,c=1e3,p=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,w=function(a){function e(){return E(this,e),o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,function(a){return p['test'](a.value)},function(a){var e=p['exec'](a),n=void 0;if(n=Date['UTC'](parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&parseFloat(e[7])*c||0),e[9]&&e[10]){var l=parseInt(e[9],10)*d+parseInt(e[10],10);n+=("+"===e[8]?-1:1)*l*b*c}return new Date(n)}))}return i(e,a),e}(r["default"]);n["default"]=w},{'39':39}],'41':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(39),r=l(t),b=a(79),d=l(b),c=a(31),p=l(c),w=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,x=31536e3,v=2592e3,y=86400,h=3600,s=60,D=function(a){function e(){return E(this,e),o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,function(a){for(var e=[p["default"].MIN_BUFFER_TIME,p["default"].MEDIA_PRESENTATION_DURATION,p["default"].MINIMUM_UPDATE_PERIOD,p["default"].TIMESHIFT_BUFFER_DEPTH,p["default"].MAX_SEGMENT_DURATION,p["default"].MAX_SUBSEGMENT_DURATION,d["default"].SUGGESTED_PRESENTATION_DELAY,p["default"].START,d["default"].START_TIME,p["default"].DURATION],n=e.length,l=0;n>l;l++)if(a['nodeName']===e[l])return w['test'](a.value);return!1},function(a){var e=w['exec'](a),n=parseFloat(e[2]||0)*x+parseFloat(e[4]||0)*v+parseFloat(e[6]||0)*y+parseFloat(e[8]||0)*h+parseFloat(e[10]||0)*s+parseFloat(e[12]||0);
return void 0!==e[1]&&(n=-n),n}))}return i(e,a),e}(r["default"]);n["default"]=D},{'31':31,'39':39,'79':79}],'42':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(39),r=l(t),b=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,d=function(a){function e(){return E(this,e),o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,function(a){return b['test'](a.value)},function(a){return parseFloat(a)}))}return i(e,a),e}(r["default"]);n["default"]=d},{'39':39}],'43':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function t(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var r=a(39),b=l(r),d=a(31),c=l(d),p=function(a){function e(){return o(this,e),i(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,function(a,e){var n,l=(n={},E(n,c["default"].MPD,[c["default"].ID,c["default"].PROFILES]),E(n,c["default"].PERIOD,[c["default"].ID]),E(n,c["default"].BASE_URL,[c["default"].SERVICE_LOCATION,c["default"].BYTE_RANGE]),E(n,c["default"].SEGMENT_BASE,[c["default"].INDEX_RANGE]),E(n,c["default"].INITIALIZATION,[c["default"].RANGE]),E(n,c["default"].REPRESENTATION_INDEX,[c["default"].RANGE]),E(n,c["default"].SEGMENT_LIST,[c["default"].INDEX_RANGE]),E(n,c["default"].BITSTREAM_SWITCHING,[c["default"].RANGE]),E(n,c["default"].SEGMENT_URL,[c["default"].MEDIA_RANGE,c["default"].INDEX_RANGE]),E(n,c["default"].SEGMENT_TEMPLATE,[c["default"].INDEX_RANGE,c["default"].MEDIA,c["default"].INDEX,c["default"].INITIALIZATION_MINUS,c["default"].BITSTREAM_SWITCHING_MINUS]),E(n,c["default"].ASSET_IDENTIFIER,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].EVENT_STREAM,[c["default"].VALUE]),E(n,c["default"].ADAPTATION_SET,[c["default"].PROFILES,c["default"].MIME_TYPE,c["default"].SEGMENT_PROFILES,c["default"].CODECS,c["default"].CONTENT_TYPE]),E(n,c["default"].FRAME_PACKING,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].AUDIO_CHANNEL_CONFIGURATION,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].CONTENT_PROTECTION,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].ESSENTIAL_PROPERTY,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].SUPPLEMENTAL_PROPERTY,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].INBAND_EVENT_STREAM,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].ACCESSIBILITY,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].ROLE,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].RATING,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].VIEWPOINT,[c["default"].VALUE,c["default"].ID]),E(n,c["default"].CONTENT_COMPONENT,[c["default"].CONTENT_TYPE]),E(n,c["default"].REPRESENTATION,[c["default"].ID,c["default"].DEPENDENCY_ID,c["default"].MEDIA_STREAM_STRUCTURE_ID]),E(n,c["default"].SUBSET,[c["default"].ID]),E(n,c["default"].METRICS,[c["default"].METRICS_MINUS]),E(n,c["default"].REPORTING,[c["default"].VALUE,c["default"].ID]),n);if(l['hasOwnProperty'](e)){var o=l[e];return void 0!==o?o['indexOf'](a.name)>=0:!1}return!1},function(a){return String(a)}))}return t(e,a),e}(b["default"]);n["default"]=p},{'31':31,'39':39}],'44':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e){for(var n in a)e['hasOwnProperty'](n)||(e[n]=a[n])}function n(a,n,l){for(var E=0,i=a.length;i>E;++E){var t=a[E];if(n[t.name]){var r=null,d=void 0;if(d=t['name']===b["default"].SEGMENT_BASE?[b["default"].SEGMENT_BASE,b["default"].SEGMENT_TEMPLATE,b["default"].SEGMENT_LIST]:[t.name],d['some'](function(a){return l['hasOwnProperty'](a)?(r=a,!0):!1}),r){if(t.merge||r!==t.name){var c=n[t.name],p=l[r];"object"===("undefined"==typeof c?"undefined":o(c))&&"object"===("undefined"==typeof p?"undefined":o(p))?e(c,p):l[r]=c+p}}else l[t.name]=n[t.name]}}}function l(a,e){for(var E=0,o=a.children.length;o>E;++E){var i=a['children'][E],t=e[i.name+"_asArray"];if(t)for(var r=0,b=t.length;b>r;++r){var d=t[r];n(a.properties,e,d),l(i,d)}}}function E(e){if(null===e||"object"!==("undefined"==typeof e?"undefined":o(e)))return e;if("period"in a)for(var n=a.period,E=e.Period_asArray,i=0,t=E.length;t>i;++i){var r=E[i];if(l(n,r),"adaptationset"in a){var b=r.AdaptationSet_asArray;if(b)for(var d=a.adaptationset,c=0,p=b.length;p>c;++c)l(d,b[c])}}return e}return{'run':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a(19),t=l(i),r=a(31),b=l(r);E['__visualon_factory_name']="ObjectIron";var d=t["default"]['getClassFactory'](E);n["default"]=d},{'19':19,'31':31}],'45':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){function n(a,n,E,o){var i=a.adaptation.period.mpd['manifest']['Period_asArray'][a.adaptation.period.index]['AdaptationSet_asArray'][a.adaptation.index]['Representation_asArray'][a.index].SegmentList,r=i.SegmentURL_asArray.length,b=[],d=void 0,c=void 0,p=void 0,w=void 0,x=void 0,v=void 0,y=void 0;for(y=a.startNumber,w=t['decideSegmentListRangeForTemplate'](l,e,a,n,E,o),x=Math['max'](w.start,0),v=Math['min'](w.end,i.SegmentURL_asArray.length-1),d=x;v>=d;d++)p=i['SegmentURL_asArray'][d],c=t['getIndexBasedSegment'](l,e,a,d),c['replacementTime']=(y+d-1)*a.segmentDuration,c['media']=p.media?p.media:"",c['mediaRange']=p.mediaRange,c['index']=p.index,c['indexRange']=p.indexRange,b['push'](c),c=null;return a['availableSegmentsNumber']=r,b}a=a||{};var l=a.timelineConverter,E=void 0;return E={'getSegments':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(48);E['__visualon_factory_name']="ListSegmentsGetter";var r=i["default"]['getClassFactory'](E);n["default"]=r},{'19':19,'48':48}],'46':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function E(a,e,n){return"undefined"==typeof n||0===+n?Math[a](e):(e=+e,n=+n,null===e||isNaN(e)||"number"!=typeof n||n%1!==0?NaN:(e=e['toString']()['split']("e"),e=Math[a](+(e[0]+"e"+(e[1]?+e[1]-n:-n))),e=e['toString']()['split']("e"),+(e[0]+"e"+(e[1]?+e[1]+n:n))))}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=function(){function a(){l(this,a)}return o(a,null,[{'key':"round10",'value':function(a,e){return E("round",a,e)}}]),a}();n["default"]=i},{}],'47':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){function n(){r=d["default"](o)['create'](a,e),b=p["default"](o)['create'](a,e),c=x["default"](o)['create'](a,e)}function l(a,e,n,l,o){var t=void 0,d=a.segmentInfoType;d!==i["default"].SEGMENT_BASE&&d!==i["default"].BASE_URL&&E(a,n)?(d===i["default"].SEGMENT_TIMELINE?t=r['getSegments'](a,e,n,o):d===i["default"].SEGMENT_TEMPLATE?t=b['getSegments'](a,e,n,o):d===i["default"].SEGMENT_LIST&&(t=c['getSegments'](a,e,n,o)),l&&l(a,t)):t=a.segments}function E(a,e){var n=a.segments,l=!1,E=void 0,o=void 0;return n&&0!==n.length?(o=n[0].availabilityIdx,E=n[n.length-1].availabilityIdx,l=o>=e||e>=E):l=!0,l}var o=this.context,t=void 0,r=void 0,b=void 0,c=void 0;return t={'getSegments':l},n(),t}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(31),i=l(o),t=a(19),r=l(t),b=a(51),d=l(b),c=a(49),p=l(c),w=a(45),x=l(w);E['__visualon_factory_name']="SegmentsGetter";var v=r["default"]['getClassFactory'](E);n["default"]=v},{'19':19,'31':31,'45':45,'49':49,'51':51}],'48':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){for(;a.length<e;)a="0"+a;return a}function o(a,e){return a.representation.startNumber+e}function i(a){return a?a['split']("$$")['join']("$"):a}function t(a,e){if(!e||!a||-1===a['indexOf']("$RepresentationID$"))return a;var n=e['toString']();return a['split']("$RepresentationID$")['join'](n)}function r(a,e,n){var l="%0",o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=e.length,p=l.length;if(!a)return a;for(;;){if(o=a['indexOf']("$"+e),0>o)return a;if(i=a['indexOf']("$",o+c),0>i)return a;if(t=a['indexOf'](l,o+c),t>o&&i>t)switch(r=a['charAt'](i-1),b=parseInt(a['substring'](t+p,i-1),10),r){case"d":case"i":case"u":d=E(n['toString'](),b);break;case"x":d=E(n['toString'](16),b);break;case"X":d=E(n['toString'](16),b)['toUpperCase']();break;case"o":d=E(n['toString'](8),b);break;default:return a}else d=n;a=a['substring'](0,o)+d+a['substring'](i+1)}}function b(a,e,n,l){var E=void 0,i=void 0,t=void 0,r=void 0;return i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),t=parseFloat((n.adaptation.period.start+l*i)['toFixed'](5)),r=parseFloat((t+i)['toFixed'](5)),E=new x["default"],E['representation']=n,E['duration']=i,E['presentationStartTime']=t,E['mediaStartTime']=a['calcMediaTimeFromPresentationTime'](E.presentationStartTime,n),E['availabilityStartTime']=a['calcAvailabilityStartTimeFromPresentationTime'](E.presentationStartTime,n.adaptation.period.mpd,e),E['availabilityEndTime']=a['calcAvailabilityEndTimeFromPresentationTime'](r,n.adaptation.period.mpd,e),E['wallStartTime']=a['calcWallTimeForSegment'](E,e),E['replacementNumber']=o(E,l),E['availabilityIdx']=l,E}function d(a,e,n,l,E,i,t,b,d,c){var p=l/i,w=Math['min'](E/i,n.adaptation.period.mpd.maxSegmentDuration),v=void 0,y=void 0,h=void 0;return v=a['calcPresentationTimeFromMediaTime'](p,n),y=v+w,h=new x["default"],h['representation']=n,h['duration']=w,h['mediaStartTime']=p,h['presentationStartTime']=v,h['availabilityStartTime']=n.adaptation.period.mpd.manifest.loadedTime,h['availabilityEndTime']=a['calcAvailabilityEndTimeFromPresentationTime'](y,n.adaptation.period.mpd,e),h['wallStartTime']=a['calcWallTimeForSegment'](h,e),h['replacementTime']=c?c:l,h['replacementNumber']=o(h,d),t=r(t,"Number",h.replacementNumber),t=r(t,"Time",h.replacementTime),h['media']=t,h['mediaRange']=b,h['availabilityIdx']=d,h}function c(a,e){if(!e||!e.segments)return null;var n=e.segments.length,l=void 0,E=void 0;if(n>a&&(l=e['segments'][a],l&&l['availabilityIdx']===a))return l;for(E=0;n>E;E++)if(l=e['segments'][E],l&&l['availabilityIdx']===a)return l;return null}function p(a,e,n,l,E,o){var i=n.segmentDuration,t=n.adaptation.period.mpd.manifest.minBufferTime,r=n.segmentAvailabilityRange,b={'start':a['calcPeriodRelativeTimeFromMpdRelativeTime'](n,r?r.start:NaN),'end':a['calcPeriodRelativeTimeFromMpdRelativeTime'](n,r?r.end:NaN)},d=n.segments,p=2*i,w=o||Math['max'](2*t,10*i),x=NaN,v=null,y=void 0,h=void 0,s=void 0;return b['start']=Math['max'](b.start,0),e&&!a['isTimeSyncCompleted']()?(y=Math['floor'](b.start/i),h=Math['floor'](b.end/i),s={'start':y,'end':h}):(d&&d.length>0?(v=c(E,n),x=v?a['calcPeriodRelativeTimeFromMpdRelativeTime'](n,v.presentationStartTime):E>0?E*i:a['calcPeriodRelativeTimeFromMpdRelativeTime'](n,l)):x=E>0?E*i:e?b.end:b.start,y=Math['floor'](Math['max'](x-p,b.start)/i),h=Math['floor'](Math['min'](y+w/i,b.end/i)),s={'start':y,'end':h})}Object['defineProperty'](n,"__esModule",{'value':!0}),n['unescapeDollarsInTemplate']=i,n['replaceIDForTemplate']=t,n['replaceTokenForTemplate']=r,n['getIndexBasedSegment']=b,n['getTimeBasedSegment']=d,n['getSegmentByIndex']=c,n['decideSegmentListRangeForTemplate']=p;var w=a(59),x=l(w)},{'59':59}],'49':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){function n(a,n,E,o){var i=a.adaptation.period.mpd['manifest']['Period_asArray'][a.adaptation.period.index]['AdaptationSet_asArray'][a.adaptation.index]['Representation_asArray'][a.index].SegmentTemplate,r=a.segmentDuration,b=a.segmentAvailabilityRange,d=[],c=null,p=null,w=void 0,x=void 0,v=void 0,y=void 0,h=void 0,s=function(n){if(e)return!1;var l=parseFloat((n.presentationStartTime-a.adaptation.period.start)['toFixed'](5)),E=n.duration>0?l+1.5*n.duration:l,o=a.adaptation.period.duration;return E>=o};for(h=a.startNumber,w=isNaN(r)&&!e?{'start':h,'end':h}:t['decideSegmentListRangeForTemplate'](l,e,a,n,E,o),v=w.start,y=w.end,x=v;y>=x;x++)p=t['getIndexBasedSegment'](l,e,a,x),p['replacementTime']=(h+x-1)*a.segmentDuration,c=i.media,c=t['replaceTokenForTemplate'](c,"Number",p.replacementNumber),c=t['replaceTokenForTemplate'](c,"Time",p.replacementTime),p['media']=c,d['push'](p),p=null;return isNaN(r)?a['availableSegmentsNumber']=1:d.length>0&&s(d[d.length-1])?a['availableSegmentsNumber']=d[d.length-1].availabilityIdx+1:a['availableSegmentsNumber']=Math['ceil']((b.end-b.start)/r),d}var l=a.timelineConverter,E=void 0;return E={'getSegments':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(48);E['__visualon_factory_name']="TemplateSegmentsGetter";var r=i["default"]['getClassFactory'](E);n["default"]=r},{'19':19,'48':48}],'50':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){f(),M['on'](r["default"].TIME_SYNCHRONIZATION_COMPLETED,D,this)}function e(){return u}function n(a){u=a}function l(){return T}function E(a){T=a}function o(){return R}function t(a){R=isNaN(R)?a:Math['max'](R,a)}function b(a,e,n,l){var E=NaN;return E=l?n&&e.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(e['availabilityStartTime']['getTime']()+1e3*(a+e.timeShiftBufferDepth)):e.availabilityEndTime:n?new Date(e['availabilityStartTime']['getTime']()+1e3*(a-T)):e.availabilityStartTime}function d(a,e,n){return b['call'](this,a,e,n)}function c(a,e,n){return b['call'](this,a,e,n,!0)}function p(a,e){return(a['getTime']()-e.mpd['availabilityStartTime']['getTime']()+1e3*T+1e3*A)/1e3}function w(a,e){var n=e.adaptation.period.start,l=e.presentationTimeOffset;return a+(n-l)}function x(a,e){var n=e.adaptation.period.start,l=e.presentationTimeOffset;return a-n+l}function v(a,e){var n=e.adaptation.period.start;return a-n}function y(a,e){var n=void 0,l=void 0,E=void 0;return e&&(n=a.representation.adaptation.period.mpd.suggestedPresentationDelay,l=a.presentationStartTime+n,E=new Date(a['availabilityStartTime']['getTime']()+1e3*l)),E}function h(a,e){var n=a.adaptation.period,l={'start':n.start,'end':n.start+n.duration};if(!e)return l;if(!u&&a.segmentAvailabilityRange)return a.segmentAvailabilityRange;var E=a.segmentDuration||(a.segments&&a.segments.length?a['segments'][a.segments.length-1].duration:0),o=p(new Date,n),i=n.start+n.duration;l['start']=Math['max'](o-n.mpd.timeShiftBufferDepth,n.start);var t=void 0!==a.availabilityTimeOffset&&a.availabilityTimeOffset<E?E-a.availabilityTimeOffset:E;return l['end']=o>=i&&i>o-t?i:o-t,l}function s(a,e){var n=a.adaptation.period.start;return e-n}function D(a){u||void 0!==a.offset&&(E(a.offset/1e3),u=!0)}function m(a){var e=a.presentationTimeOffset,n=a.adaptation.period.start;return n-e}function C(a){A=a}function f(){T=0,u=!1,R=NaN,A=0}function g(){M['off'](r["default"].TIME_SYNCHRONIZATION_COMPLETED,D,this),f()}var k=this.context,M=i["default"](k)['getInstance'](),P=void 0,T=void 0,u=void 0,A=void 0,R=void 0;return P={'initialize':a,'isTimeSyncCompleted':e,'setTimeSyncCompleted':n,'getClientTimeOffset':l,'setClientTimeOffset':E,'getExpectedLiveEdge':o,'setExpectedLiveEdge':t,'calcAvailabilityStartTimeFromPresentationTime':d,'calcAvailabilityEndTimeFromPresentationTime':c,'calcPresentationTimeFromWallTime':p,'calcPresentationTimeFromMediaTime':w,'calcPeriodRelativeTimeFromMpdRelativeTime':s,'calcMediaTimeFromPresentationTime':x,'calcMediaTimeFromPresentationTime_v2':v,'calcSegmentAvailabilityRange':h,'calcWallTimeForSegment':y,'calcMSETimeOffset':m,'setLiveEdgeTimeOffset':C,'reset':g}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(18),i=l(o),t=a(24),r=l(t),b=a(19),d=l(b);E['__visualon_factory_name']="TimelineConverter",n["default"]=d["default"]['getSingletonFactory'](E)},{'18':18,'19':19,'24':24}],'51':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){function n(){if(!E||!E['hasOwnProperty']("calcMediaTimeFromPresentationTime")||!E['hasOwnProperty']("calcSegmentAvailabilityRange"))throw new Error(r["default"].MISSING_CONFIG_ERROR)}function l(a,l,o,i){if(n(),!a)throw new Error("no representation");void 0===l&&(l=null);var t=a.adaptation.period.mpd['manifest']['Period_asArray'][a.adaptation.period.index]['AdaptationSet_asArray'][a.adaptation.index]['Representation_asArray'][a.index].SegmentTemplate||a.adaptation.period.mpd['manifest']['Period_asArray'][a.adaptation.period.index]['AdaptationSet_asArray'][a.adaptation.index]['Representation_asArray'][a.index].SegmentList,r=t.SegmentTimeline,d=t.SegmentURL_asArray,c=a.availableSegmentsNumber>0,p=void 0;p=i?i:o>-1||null!==l?10:1/0;var w=0,x=0,v=-1,y=[],h=null,s=void 0,D=void 0,m=void 0,C=void 0,f=void 0,g=void 0,k=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=function(n,l){var o=t.media,i=n.mediaRange;return d&&(o=d[l].media||"",i=d[l].mediaRange),b['getTimeBasedSegment'](E,e,a,w,n.d,u,o,i,v,n.tManifest)};for(u=a.timescale,s=r.S_asArray,T=o,null!==l&&(h=E['calcMediaTimeFromPresentationTime'](l,a)),m=0,C=s.length;C>m;m++){if(D=s[m],g=0,D['hasOwnProperty']("r")&&(g=D.r),D['hasOwnProperty']("t")&&(w=D.t,x=w/u),0>g){if(M=s[m+1],M&&M['hasOwnProperty']("t"))k=M.t/u;else{var R=a.segmentAvailabilityRange?a.segmentAvailabilityRange.end:E['calcSegmentAvailabilityRange'](a,e).end;k=E['calcMediaTimeFromPresentationTime_v2'](R,a),a['segmentDuration']=D.d/u}g=Math['ceil']((k-x)/(D.d/u))-1}if(P){if(c)break;v+=g+1}else for(f=0;g>=f;f++)if(v++,y.length>p){if(P=!0,c)break}else null!==h?x>=h-D.d/u*1.5&&y['push'](A(D,v)):v>=T&&y['push'](A(D,v)),w+=D.d,x=w/u}return c||(a['availableSegmentsNumber']=v+1),y}a=a||{};var E=a.timelineConverter,o=void 0;return o={'getSegments':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(79),r=l(t),b=a(48);E['__visualon_factory_name']="TimelineSegmentsGetter";var d=i["default"]['getClassFactory'](E);n["default"]=d},{'19':19,'48':48,'79':79}],'52':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['period']=null,this['index']=-1,this['type']=null,this['trickModeFor']=null,this['trickModeSet']=null};n["default"]=E},{}],'53':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=1,o=1,i=function t(a,e,n,i){l(this,t),this['url']=a||"",this['serviceLocation']=e||a||"",this['dvb_priority']=n||E,this['dvb_weight']=i||o,this['availabilityTimeOffset']=0,this['availabilityTimeComplete']=!0};i['DEFAULT_DVB_PRIORITY']=E,i['DEFAULT_DVB_WEIGHT']=o,n["default"]=i},{}],'54':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['duration']=NaN,this['presentationTime']=NaN,this['id']=NaN,this['messageData']="",this['eventStream']=null,this['presentationTimeDelta']=NaN};n["default"]=E},{}],'55':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['adaptionSet']=null,this['representation']=null,this['period']=null,this['timescale']=1,this['value']="",this['schemeIdUri']=""};n["default"]=E},{}],'56':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['manifest']=null,this['suggestedPresentationDelay']=0,this['availabilityStartTime']=null,this['availabilityEndTime']=Number.POSITIVE_INFINITY,this['timeShiftBufferDepth']=Number.POSITIVE_INFINITY,this['maxSegmentDuration']=Number.POSITIVE_INFINITY,this['minimumUpdatePeriod']=NaN,this['mediaPresentationDuration']=NaN};n["default"]=E},{}],'57':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['id']=null,this['index']=-1,this['duration']=NaN,this['start']=NaN,this['mpd']=null};E['DEFAULT_ID']="defaultId",n["default"]=E},{}],'58':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(31),t=l(i),r=function(){function a(){E(this,a),this['id']=null,this['index']=-1,this['adaptation']=null,this['segmentInfoType']=null,this['initialization']=null,this['codecs']=null,this['codecPrivateData']=null,this['segmentDuration']=NaN,this['timescale']=1,this['startNumber']=1,this['indexRange']=null,this['range']=null,this['presentationTimeOffset']=0,this['MSETimeOffset']=NaN,this['segmentAvailabilityRange']=null,this['availableSegmentsNumber']=0,this['bandwidth']=NaN,this['width']=NaN,this['height']=NaN,this['scanType']=null,this['maxPlayoutRate']=NaN,this['availabilityTimeOffset']=0,this['availabilityTimeComplete']=!0,this['width']=0,this['height']=0}return o(a,null,[{'key':"hasInitialization",'value':function(a){return null!==a.initialization||null!==a.range}},{'key':"hasSegments",'value':function(a){return a.segmentInfoType!==t["default"].BASE_URL&&a.segmentInfoType!==t["default"].SEGMENT_BASE&&!a.indexRange}}]),a}();n["default"]=r},{'31':31}],'59':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['indexRange']=null,this['index']=null,this['mediaRange']=null,this['media']=null,this['duration']=NaN,this['replacementTime']=null,this['replacementNumber']=NaN,this['mediaStartTime']=NaN,this['presentationStartTime']=NaN,this['availabilityStartTime']=NaN,this['availabilityEndTime']=NaN,this['availabilityIdx']=NaN,this['wallStartTime']=NaN,this['representation']=null};n["default"]=E},{}],'60':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['schemeIdUri']="",this['value']=""};n["default"]=E},{}],'61':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(25),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['FRAGMENT_INFO_LOADING_COMPLETED']="fragmentInfoLoadingCompleted",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'25':25}],'62':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){s=U['getLogger'](h)}function n(){m=!1,g=null,k=null,P['registerExternalController'](h),C=P['getType'](),D=P['getFragmentModel']()}function l(){m!==!0&&(s['debug']("Do start"),T['on'](i["default"].FRAGMENT_INFO_LOADING_COMPLETED,x,h),m=!0,g=(new Date)['getTime'](),M=0,t())}function E(){m&&(s['debug']("Do stop"),T['off'](i["default"].FRAGMENT_INFO_LOADING_COMPLETED,x,h),clearTimeout(f),m=!1,g=null,k=null)}function o(){E(),P['unregisterExternalController'](h)}function t(){if(m){var a=p(),e=a.adaptation.period.mpd.manifest,n=e['Period_asArray'][a.adaptation.period.index]['AdaptationSet_asArray'][a.adaptation.index],l=n.SegmentTemplate.SegmentTimeline.S_asArray,E=l[l.length-1];s['debug']("Last fragment time: "+E.t/n.SegmentTemplate.timescale);var o=c(n,a,E);w['call'](this,o)}}function b(a){clearTimeout(f),f=setTimeout(function(){f=null,t()},1e3*a)}function c(a,e,n){var l=a.SegmentTemplate.timescale,E=new d["default"];return E['mediaType']=C,E['type']="FragmentInfoSegment",E['startTime']=n.t/l,E['duration']=n.d/l,E['timescale']=l,E['quality']=e.index,E['index']=M++,E['mediaInfo']=P['getMediaInfo'](),E['adaptationIndex']=e.adaptation.index,E['representationId']=e.id,E['url']=S['resolve'](e.path).url+a.SegmentTemplate.media,E['url']=E['url']['replace']("$Bandwidth$",e.bandwidth),E['url']=E['url']['replace']("$Time$",n.tManifest?n.tManifest:n.t),E['url']=E['url']['replace']("/Fragments(","/FragmentInfo("),E}function p(){var a=P['getRepresentationController'](),e=a['getCurrentRepresentation']();return e}function w(a){return s['debug']("Load fragment for time: "+a.startTime),P['getFragmentModel']()['isFragmentLoadedOrPending'](a)?void s['debug']("No more fragments"):void D['executeRequest'](a)}function x(a){if(a['streamProcessor']===P){var e=a.fragmentInfo.request;if(!a.fragmentInfo.response)return void s['error']("Load error",e.url);var n=void 0,l=void 0;s['debug']("FragmentInfo loaded: ",e.url),k||(k=e.startTime);try{var E=r["default"](y)['create']({'metricsModel':u,'playbackController':A,'ISOBoxer':R,'eventBus':T,'debug':U});E['updateSegmentList'](a.fragmentInfo,P),l=((new Date)['getTime']()-g)/1e3,n=e.startTime+e.duration-k,b(Math['max'](0,n-l))}catch(a){s['fatal']("Internal error while processing fragment info segment ")}}}function v(){return C}a=a||{};var y=this.context,h=void 0,s=void 0,D=void 0,m=void 0,C=void 0,f=void 0,g=void 0,k=void 0,M=void 0,P=a.streamProcessor,T=a.eventBus,u=a.metricsModel,A=a.playbackController,R=a.ISOBoxer,S=a.baseURLController,U=a.debug,I="MssFragmentInfoController";return h={'initialize':n,'controllerType':I,'start':l,'getType':v,'reset':o},e(),h}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(61),i=l(o),t=a(63),r=l(t),b=a(196),d=l(b),c=a(19),p=l(c);E['__visualon_factory_name']="MssFragmentInfoController",n["default"]=p["default"]['getClassFactory'](E)},{'19':19,'196':196,'61':61,'63':63}],'63':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){w=D['getLogger'](c),p=""}function n(a,e,n,E){var o=E['getRepresentationController'](),t=o['getCurrentRepresentation'](),b=E['getIndexHandler'](),c=t.adaptation.period.mpd.manifest,x=c['Period_asArray'][t.adaptation.period.index]['AdaptationSet_asArray'][t.adaptation.index],v=x.SegmentTemplate.timescale;if(p=E['getType'](),"dynamic"===c.type||c.timeShiftBufferDepth){if(!e)return void y['error'](new i["default"](r["default"].MSS_NO_TFRF_CODE,r["default"].MSS_NO_TFRF_MESSAGE));var s=x.SegmentTemplate.SegmentTimeline.S,D=e.entry,m=void 0,C=void 0,f=null,g=0,k=null,M=void 0;if(0!==D.length&&(m=D[0],!("static"===c.type&&(C=s[0].tManifest?parseFloat(s[0].tManifest):s[0].t,m.fragment_absolute_time>C+c.timeShiftBufferDepth*v)))){if(w['debug']("entry - t = ",m.fragment_absolute_time/v),C=s[s.length-1].tManifest?parseFloat(s[s.length-1].tManifest):s[s.length-1].t,w['debug']("Last segment - t = ",C/v),m.fragment_absolute_time<=C)return M={'start':s[0].t/v,'end':n.baseMediaDecodeTime/v+a.duration},void l(a.mediaType,M,E['getStreamInfo']().manifestInfo);if(w['debug']("Add new segment - t = ",m.fragment_absolute_time/v),f={},f['t']=m.fragment_absolute_time,f['d']=m.fragment_duration,s[0].tManifest&&(f.t-=parseFloat(s[0].tManifest)-s[0].t,f['tManifest']=m.fragment_absolute_time),s['push'](f),"static"!==c.type){if(c.timeShiftBufferDepth&&c.timeShiftBufferDepth>0){for(f=s[s.length-1],g=f.t,k=Math['round']((g-c.timeShiftBufferDepth*v)/v),f=s[0];Math['round'](f.t/v)<k;)w['debug']("Remove segment  - t = "+f.t/v),s['splice'](0,1),f=s[0];M={'start':s[0].t/v,'end':n.baseMediaDecodeTime/v+a.duration},l(p,M,E['getStreamInfo']().manifestInfo)}b['updateSegmentList'](t)}else if("video"===p){f=s[s.length-1];var P=(f.t+f.d)/v;P>t.adaptation.period.duration&&h['trigger'](d["default"].MANIFEST_VALIDITY_CHANGED,{'sender':this,'newDuration':P})}}}}function l(a,e,n){var l=x['getMetricsFor'](a).DVRInfo;l&&(0===l.length||l.length>0&&e.end>l[l.length-1].range.end)&&(w['debug']("Update DVR Infos ["+e.start+" - "+e.end+"]"),x['addDVRInfo'](a,v['getTime'](),n,e))}function E(a,e){var n=8,l=0;for(l=0;l<a.boxes.length;l++){if(a['boxes'][l]['type']===e)return n;n+=a['boxes'][l].size}return n}function o(a,e){var l=void 0,o=s['parseBuffer'](a.response),i=o['fetch']("tfhd");i['track_ID']=a.request.mediaInfo.index+1;var t=o['fetch']("tfdt"),r=o['fetch']("traf");null===t&&(t=s['createFullBox']("tfdt",r,i),t['version']=1,t['flags']=0,t['baseMediaDecodeTime']=Math['floor'](a.request.startTime*a.request.timescale));var b=o['fetch']("trun"),d=o['fetch']("tfxd");d&&(d._parent['boxes']['splice'](d._parent['boxes']['indexOf'](d),1),d=null);var c=o['fetch']("tfrf");n(a.request,c,t,e),c&&(c._parent['boxes']['splice'](c._parent['boxes']['indexOf'](c),1),c=null);var p=o['fetch']("sepiff");if(null!==p){p['type']="senc",p['usertype']=void 0;var w=o['fetch']("saio");if(null===w){w=s['createFullBox']("saio",r),w['version']=0,w['flags']=0,w['entry_count']=1,w['offset']=[0];var x=s['createFullBox']("saiz",r);if(x['version']=0,x['flags']=0,x['sample_count']=p.sample_count,x['default_sample_info_size']=0,x['sample_info_size']=[],2&p.flags)for(l=0;l<p.sample_count;l+=1)x['sample_info_size'][l]=10+6*p['entry'][l].NumberOfEntries;else x['default_sample_info_size']=8}}i.flags&=16777214,i.flags|=131072,b.flags|=1;var v=o['fetch']("moof"),y=v['getLength']();b['data_offset']=y+8;var h=o['fetch']("saio");if(null!==h){var D=E(v,"traf"),m=E(r,"senc");h['offset'][0]=D+m+16}a['response']=o['write']()}function t(a,e){if(!a.response)throw new Error("e.response parameter is missing");var l=s['parseBuffer'](a.response),E=l['fetch']("tfhd");E['track_ID']=a.request.mediaInfo.index+1;var o=l['fetch']("tfdt"),i=l['fetch']("traf");null===o&&(o=s['createFullBox']("tfdt",i,E),o['version']=1,o['flags']=0,o['baseMediaDecodeTime']=Math['floor'](a.request.startTime*a.request.timescale));var t=l['fetch']("tfrf");n(a.request,t,o,e),t&&(t._parent['boxes']['splice'](t._parent['boxes']['indexOf'](t),1),t=null)}function b(){return p}a=a||{};var c=void 0,p=void 0,w=void 0,x=a.metricsModel,v=a.playbackController,y=a.errHandler,h=a.eventBus,s=a.ISOBoxer,D=a.debug;return c={'convertFragment':o,'updateSegmentList':t,'getType':b},e(),c}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(194),i=l(o),t=a(67),r=l(t),b=a(73),d=l(b),c=a(19),p=l(c);E['__visualon_factory_name']="MssFragmentMoofProcessor",n["default"]=p["default"]['getClassFactory'](E)},{'19':19,'194':194,'67':67,'73':73}],'64':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){var e=A['createBox']("ftyp",a);return e['major_brand']="iso6",e['minor_version']=1,e['compatible_brands']=[],e['compatible_brands'][0]="isom",e['compatible_brands'][1]="iso6",e['compatible_brands'][2]="msdh",e}function n(a){var e=A['createBox']("moov",a);l(e);var n=A['createBox']("trak",e);E(n);var i=A['createBox']("mdia",n);o(i),t(i);var p=A['createBox']("minf",i);switch(I.type){case u.VIDEO:r(p);break;case u.AUDIO:b(p)}var w=A['createBox']("dinf",p);d(w);var x=A['createBox']("stbl",p),v=A['createFullBox']("stts",x);v['_data']=[0,0,0,0,0,0,0,0];var y=A['createFullBox']("stsc",x);y['_data']=[0,0,0,0,0,0,0,0];var h=A['createFullBox']("stco",x);h['_data']=[0,0,0,0,0,0,0,0];var s=A['createFullBox']("stsz",x);s['_data']=[0,0,0,0,0,0,0,0,0,0,0,0],c(x);var D=A['createBox']("mvex",e);if(f(D),L&&R){var C=R['getSupportedKeySystemsFromContentProtection'](L);
m(e,C)}}function l(a){var e=A['createFullBox']("mvhd",a);return e['version']=1,e['creation_time']=0,e['modification_time']=0,e['timescale']=N,e['duration']=Math['round'](U.duration*N),e['rate']=1,e['volume']=1,e['reserved1']=0,e['reserved2']=[0,0],e['matrix']=[1,0,0,0,1,0,0,0,16384],e['pre_defined']=[0,0,0,0,0,0],e['next_track_ID']=O+1,e}function E(a){var e=A['createFullBox']("tkhd",a);return e['version']=1,e['flags']=7,e['creation_time']=0,e['modification_time']=0,e['track_ID']=O,e['reserved1']=0,e['duration']=Math['round'](U.duration*N),e['reserved2']=[0,0],e['layer']=0,e['alternate_group']=0,e['volume']=1,e['reserved3']=0,e['matrix']=[1,0,0,0,1,0,0,0,16384],e['width']=J.width,e['height']=J.height,e}function o(a){var e=A['createFullBox']("mdhd",a);return e['version']=1,e['creation_time']=0,e['modification_time']=0,e['timescale']=N,e['duration']=Math['round'](U.duration*N),e['language']=I.lang||"und",e['pre_defined']=0,e}function t(a){var e=A['createFullBox']("hdlr",a);switch(e['pre_defined']=0,I.type){case u.VIDEO:e['handler_type']="vide";break;case u.AUDIO:e['handler_type']="soun";break;default:e['handler_type']="meta"}return e['name']=J.id,e['reserved']=[0,0,0],e}function r(a){var e=A['createFullBox']("vmhd",a);return e['flags']=1,e['graphicsmode']=0,e['opcolor']=[0,0,0],e}function b(a){var e=A['createFullBox']("smhd",a);return e['flags']=1,e['balance']=0,e['reserved']=0,e}function d(a){var e=A['createFullBox']("dref",a);e['entry_count']=1,e['entries']=[];var n=A['createFullBox']("url ",e,!1);return n['location']="",n['flags']=1,e['entries']['push'](n),e}function c(a){var e=A['createFullBox']("stsd",a);switch(e['entries']=[],I.type){case u.VIDEO:case u.AUDIO:e['entries']['push'](p(e))}return e['entry_count']=e.entries.length,e}function p(a){var e=J['codecs']['substring'](0,J['codecs']['indexOf']("."));switch(e){case"avc1":return w(a,e);case"mp4a":return v(a,e);default:throw{'code':i["default"].MSS_UNSUPPORTED_CODEC_CODE,'message':i["default"].MSS_UNSUPPORTED_CODEC_MESSAGE,'data':{'codec':e}}}}function w(a,e){var n=void 0;if(n=L?A['createBox']("encv",a,!1):A['createBox']("avc1",a,!1),n['reserved1']=[0,0,0,0,0,0],n['data_reference_index']=1,n['pre_defined1']=0,n['reserved2']=0,n['pre_defined2']=[0,0,0],n['height']=J.height,n['width']=J.width,n['horizresolution']=72,n['vertresolution']=72,n['reserved3']=0,n['frame_count']=1,n['compressorname']=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n['depth']=24,n['pre_defined3']=65535,n['config']=x(),L){var l=A['createBox']("sinf",n);h(l,e),s(l),D(l)}return n}function x(){for(var a=null,e=15,n=[],l=[],E=0,o=0,i=0,t=J['codecPrivateData']['split']("00000001")['slice'](1),r=void 0,b=void 0,d=0;d<t.length;d++)switch(r=g(t[d]),b=31&r[0]){case P:n['push'](r),e+=r.length+2;break;case T:l['push'](r),e+=r.length+2}n.length>0&&(E=n[0][1],i=n[0][2],o=n[0][3]),a=new Uint8Array(e);var c=0;a[c++]=(4278190080&e)>>24,a[c++]=(16711680&e)>>16,a[c++]=(65280&e)>>8,a[c++]=255&e,a['set']([97,118,99,67],c),c+=4,a[c++]=1,a[c++]=E,a[c++]=i,a[c++]=o,a[c++]=255,a[c++]=224|n.length;for(var p=0;p<n.length;p++)a[c++]=(65280&n[p].length)>>8,a[c++]=255&n[p].length,a['set'](n[p],c),c+=n[p].length;a[c++]=l.length;for(var w=0;w<l.length;w++)a[c++]=(65280&l[w].length)>>8,a[c++]=255&l[w].length,a['set'](l[w],c),c+=l[w].length;return a}function v(a,e){var n=void 0;if(n=L?A['createBox']("enca",a,!1):A['createBox']("mp4a",a,!1),n['reserved1']=[0,0,0,0,0,0],n['data_reference_index']=1,n['reserved2']=[0,0],n['channelcount']=J.audioChannels,n['samplesize']=16,n['pre_defined']=0,n['reserved_3']=0,n['samplerate']=J.audioSamplingRate<<16,n['esds']=y(),L){var l=A['createBox']("sinf",n);h(l,e),s(l),D(l)}return n}function y(){var a=g(J.codecPrivateData),e=34+a.length,n=new Uint8Array(e),l=0;return n[l++]=(4278190080&e)>>24,n[l++]=(16711680&e)>>16,n[l++]=(65280&e)>>8,n[l++]=255&e,n['set']([101,115,100,115],l),l+=4,n['set']([0,0,0,0],l),l+=4,n[l++]=3,n[l++]=20+a.length,n[l++]=(65280&O)>>8,n[l++]=255&O,n[l++]=0,n[l++]=4,n[l++]=15+a.length,n[l++]=64,n[l]=20,n[l]|=0,n[l++]|=1,n[l++]=255,n[l++]=255,n[l++]=255,n[l++]=(4278190080&J.bandwidth)>>24,n[l++]=(16711680&J.bandwidth)>>16,n[l++]=(65280&J.bandwidth)>>8,n[l++]=255&J.bandwidth,n[l++]=(4278190080&J.bandwidth)>>24,n[l++]=(16711680&J.bandwidth)>>16,n[l++]=(65280&J.bandwidth)>>8,n[l++]=255&J.bandwidth,n[l++]=5,n[l++]=a.length,n['set'](a,l),n}function h(a,e){var n=A['createBox']("frma",a);n['data_format']=k(e)}function s(a){var e=A['createFullBox']("schm",a);e['flags']=0,e['version']=0,e['scheme_type']=1667591779,e['scheme_version']=65536}function D(a){var e=A['createBox']("schi",a);C(e)}function m(a,e){var n=void 0,l=void 0,E=void 0,o=void 0;for(E=0;E<e.length;E+=1)n=e[E].initData,o=A['parseBuffer'](n),l=o['fetch']("pssh"),l&&A['Utils']['appendBox'](a,l)}function C(a){var e=A['createFullBox']("tenc",a);e['flags']=0,e['version']=0,e['default_IsEncrypted']=1,e['default_IV_size']=8,e['default_KID']=L&&L.length>0&&L[0]["cenc:default_KID"]?L[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function f(a){var e=A['createFullBox']("trex",a);return e['track_ID']=O,e['default_sample_description_index']=1,e['default_sample_duration']=0,e['default_sample_size']=0,e['default_sample_flags']=0,e}function g(a){var e=new Uint8Array(a.length/2),n=void 0;for(n=0;n<a.length/2;n+=1)e[n]=parseInt(""+a[2*n]+a[2*n+1],16);return e}function k(a){var e=0,n=void 0;for(n=0;n<a.length;n+=1)e|=a['charCodeAt'](n)<<8*(a.length-n-1);return e}function M(a){if(a&&a.adaptation){var l=void 0,E=void 0;return J=a,I=J.adaptation,U=I.period,O=I.index+1,L=U.mpd['manifest']['Period_asArray'][U.index]['AdaptationSet_asArray'][I.index].ContentProtection,N=U.mpd['manifest']['Period_asArray'][U.index]['AdaptationSet_asArray'][I.index].SegmentTemplate.timescale,l=A['createFile'](),e(l),n(l),E=l['write']()}}a=a||{};var P=7,T=8,u=a.constants,A=a.ISOBoxer,R=a.protectionController,S=void 0,U=void 0,I=void 0,J=void 0,L=void 0,N=void 0,O=void 0;return S={'generateMoov':M}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(67),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="MssFragmentMoovProcessor",n["default"]=r["default"]['getClassFactory'](E)},{'19':19,'67':67}],'65':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){return a['length']===e.length&&a['every'](function(a,n){return a===e[n]})}function o(){this['_procFullBox'](),1&this.flags&&(this['_procField']("aux_info_type","uint",32),this['_procField']("aux_info_type_parameter","uint",32)),this['_procField']("entry_count","uint",32),this['_procFieldArray']("offset",this.entry_count,"uint",1===this.version?64:32)}function i(){this['_procFullBox'](),1&this.flags&&(this['_procField']("aux_info_type","uint",32),this['_procField']("aux_info_type_parameter","uint",32)),this['_procField']("default_sample_info_size","uint",8),this['_procField']("sample_count","uint",32),0===this.default_sample_info_size&&this['_procFieldArray']("sample_info_size",this.sample_count,"uint",8)}function t(){this['_procFullBox'](),this['_procField']("sample_count","uint",32),1&this.flags&&this['_procField']("IV_size","uint",8),this['_procEntries']("entry",this.sample_count,function(a){this['_procEntryField'](a,"InitializationVector","data",8),2&this.flags&&(this['_procEntryField'](a,"NumberOfEntries","uint",16),this['_procSubEntries'](a,"clearAndCryptedData",a.NumberOfEntries,function(a){this['_procEntryField'](a,"BytesOfClearData","uint",16),this['_procEntryField'](a,"BytesOfEncryptedData","uint",32)}))})}function r(){var a=[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178],e=[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159],n=[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244];E(this.usertype,a)&&(this['_procFullBox'](),this._parsing&&(this['type']="tfxd"),this['_procField']("fragment_absolute_time","uint",1===this.version?64:32),this['_procField']("fragment_duration","uint",1===this.version?64:32)),E(this.usertype,e)&&(this['_procFullBox'](),this._parsing&&(this['type']="tfrf"),this['_procField']("fragment_count","uint",8),this['_procEntries']("entry",this.fragment_count,function(a){this['_procEntryField'](a,"fragment_absolute_time","uint",1===this.version?64:32),this['_procEntryField'](a,"fragment_duration","uint",1===this.version?64:32)})),E(this.usertype,n)&&(this._parsing&&(this['type']="sepiff"),t['call'](this))}function b(a){function e(){y['addBoxProcessor']("uuid",r),y['addBoxProcessor']("saio",o),y['addBoxProcessor']("saiz",i),y['addBoxProcessor']("senc",t),s=w["default"](E)['create']({'protectionController':x,'constants':a.constants,'ISOBoxer':y}),D=c["default"](E)['create']({'metricsModel':b,'playbackController':d,'ISOBoxer':y,'eventBus':p,'debug':h,'errHandler':a.errHandler})}function n(a){return s['generateMoov'](a)}function l(a,e){if(!a||!a.request||!a.response)throw new Error("e parameter is missing or malformed");var n=a.request;"MediaSegment"===n.type?D['convertFragment'](a,e):"FragmentInfoSegment"===n.type&&(p['trigger'](v["default"].FRAGMENT_INFO_LOADING_COMPLETED,{'fragmentInfo':a,'streamProcessor':e}),a['sender']=null)}a=a||{};var E=this.context,b=a.metricsModel,d=a.playbackController,p=a.eventBus,x=a.protectionController,y=a.ISOBoxer,h=a.debug,s=void 0,D=void 0,m=void 0;return m={'generateMoov':n,'processFragment':l},e(),m}Object['defineProperty'](n,"__esModule",{'value':!0});var d=a(63),c=l(d),p=a(64),w=l(p),x=a(61),v=l(x),y=a(19),h=l(y);b['__visualon_factory_name']="MssFragmentProcessor",n["default"]=h["default"]['getClassFactory'](b)},{'19':19,'61':61,'63':63,'64':64}],'66':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){}function n(e){var n=e['sender']['getStreamProcessor'](),E=new r["default"],o=n['getRepresentationController'](),i=o['getCurrentRepresentation'](),t=void 0,b=void 0;t=i.adaptation.period,E['mediaType']=i.adaptation.type,E['type']=g,E['range']=i.range,b=t.start,E['quality']=i.index,E['mediaInfo']=n['getMediaInfo'](),E['representationId']=i.id;var d=l(E,n['getStreamInfo']().id,e.type!==C.FRAGMENT_LOADING_PROGRESS);try{d['bytes']=T['generateMoov'](i)}catch(e){a['errHandler']['error'](new s["default"](e.code,e.message,e.data))}D['trigger'](C.INIT_FRAGMENT_LOADED,{'chunk':d,'fragmentModel':n['getFragmentModel']()}),e['sender']=null}function l(a,e,n){var l=new i["default"];return l['streamId']=e,l['mediaInfo']=a.mediaInfo,l['segmentType']=a.type,l['start']=a.startTime,l['duration']=a.duration,l['end']=l.start+l.duration,l['index']=a.index,l['quality']=a.quality,l['representationId']=a.representationId,l['endFragment']=n,l}function E(){var e=M['getStreamController']();if(e){var n=e['getActiveStreamProcessors']();n['forEach'](function(e){if(e['getType']()===f.VIDEO||e['getType']()===f.AUDIO||e['getType']()===f.FRAGMENTED_TEXT){var n=void 0,l=!1,E=e['getExternalControllers']();for(n=0;n<E.length;n++)E[n].controllerType&&"MssFragmentInfoController"===E[n].controllerType&&(l=!0);if(!l){var o=d["default"](h)['create']({'streamProcessor':e,'eventBus':D,'metricsModel':k,'playbackController':M,'baseURLController':a.baseURLController,'ISOBoxer':a.ISOBoxer,'debug':a.debug});o['initialize'](),o['start']()}}})}}function o(a){if(!a.error){var e=a['sender']['getStreamProcessor']();T['processFragment'](a,e);var n=e['getStreamInfo']();n.manifestInfo.isDynamic||n['manifestInfo']['DVRWindowSize']===1/0||E()}}function t(){M['getIsDynamic']()&&0!==M['getTime']()&&E()}function b(){M['getIsDynamic']()&&0!==M['getTime']()&&E()}function c(a){a&&a.data&&(a['data']=a['data']['replace'](/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"))}function w(){D['on'](C.INIT_REQUESTED,n,A,m["default"]['getSingletonFactoryByName'](D['getClassName']()).EVENT_PRIORITY_HIGH),D['on'](C.PLAYBACK_PAUSED,t,A,m["default"]['getSingletonFactoryByName'](D['getClassName']()).EVENT_PRIORITY_HIGH),D['on'](C.PLAYBACK_SEEK_ASKED,b,A,m["default"]['getSingletonFactoryByName'](D['getClassName']()).EVENT_PRIORITY_HIGH),D['on'](C.FRAGMENT_LOADING_COMPLETED,o,A,m["default"]['getSingletonFactoryByName'](D['getClassName']()).EVENT_PRIORITY_HIGH),D['on'](C.TTML_TO_PARSE,c,A)}function v(){D['off'](C.INIT_REQUESTED,n,this),D['off'](C.PLAYBACK_PAUSED,t,this),D['off'](C.PLAYBACK_SEEK_ASKED,b,this),D['off'](C.FRAGMENT_LOADING_COMPLETED,o,this),D['off'](C.TTML_TO_PARSE,c,this)}function y(){return u=x["default"](h)['create'](a)}a=a||{};var h=this.context,D=a.eventBus,C=a.events,f=a.constants,g=a.initSegmentType,k=a.metricsModel,M=a.playbackController,P=a.protectionController,T=p["default"](h)['create']({'metricsModel':k,'playbackController':M,'protectionController':P,'eventBus':D,'constants':f,'ISOBoxer':a.ISOBoxer,'debug':a.debug,'errHandler':a.errHandler}),u=void 0,A=void 0;return A={'reset':v,'createMssParser':y,'registerEvents':w},e(),A}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(195),i=l(o),t=a(196),r=l(t),b=a(62),d=l(b),c=a(65),p=l(c),w=a(68),x=l(w),v=a(67),y=l(v),h=a(194),s=l(h),D=a(19),m=l(D);E['__visualon_factory_name']="MssHandler";var C=m["default"]['getClassFactory'](E);C['errors']=y["default"],m["default"]['updateClassFactory'](E.__visualon_factory_name,C),n["default"]=C},{'19':19,'194':194,'195':195,'196':196,'62':62,'65':65,'67':67,'68':68}],'67':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(22),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['MSS_NO_TFRF_CODE']=200,a['MSS_UNSUPPORTED_CODEC_CODE']=201,a['MSS_NO_TFRF_MESSAGE']="Missing tfrf in live media segment",a['MSS_UNSUPPORTED_CODEC_MESSAGE']="Unsupported codec",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'22':22}],'68':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){R=C['getLogger'](A),S=a.mediaPlayerModel}function n(a,e){var n={},E=void 0,o=void 0;n['AdaptationSet_asArray']=[],E=a['getElementsByTagName']("StreamIndex");for(var i=0;i<E.length;i++)o=l(E[i],e),null!==o&&n['AdaptationSet_asArray']['push'](o);return n.AdaptationSet_asArray.length>0&&(n['AdaptationSet']=n.AdaptationSet_asArray.length>1?n.AdaptationSet_asArray:n['AdaptationSet_asArray'][0]),n}function l(a,e){var n={},l=[],o=void 0,i=void 0,r=void 0,b=void 0,d=void 0;if(n['id']=a['getAttribute']("Name")?a['getAttribute']("Name"):a['getAttribute']("Type"),n['contentType']=a['getAttribute']("Type"),n['lang']=a['getAttribute']("Language")||"und",n['mimeType']=u[n.contentType],n['subType']=a['getAttribute']("Subtype"),n['maxWidth']=a['getAttribute']("MaxWidth"),n['maxHeight']=a['getAttribute']("MaxHeight"),n.subType){if(M[n.subType]){var c={'schemeIdUri':"urn:mpeg:dash:role:2011",'value':M[n.subType]};n['Role']=c,n['Role_asArray']=[c]}if(P[n.subType]){var p={'schemeIdUri':"urn:tva:metadata:cs:AudioPurposeCS:2007",'value':P[n.subType]};n['Accessibility']=p,n['Accessibility_asArray']=[p]}}for(o=t(a,e),i=a['getElementsByTagName']("QualityLevel"),d=0;d<i.length;d++)i[d]['BaseURL']=n.BaseURL,i[d]['mimeType']=n.mimeType,i[d]['Id']=n.id+"_"+i[d]['getAttribute']("Index"),r=E(i[d],a),null!==r&&(r['SegmentTemplate']=o,l['push'](r));return 0===l.length?null:(n['Representation']=l.length>1?l:l[0],n['Representation_asArray']=l,n['SegmentTemplate']=o,b=o.SegmentTimeline.S_asArray,n)}function E(a,e){var n={},l=e['getAttribute']("Type"),E=null;if(n['id']=a.Id,n['bandwidth']=parseInt(a['getAttribute']("Bitrate"),10),n['mimeType']=a.mimeType,n['width']=parseInt(a['getAttribute']("MaxWidth"),10),n['height']=parseInt(a['getAttribute']("MaxHeight"),10),E=a['getAttribute']("FourCC"),(null===E||""===E)&&(E=e['getAttribute']("FourCC")),null===E||""===E)if("audio"===l)E="AAC";else if("video"===l)return R['debug']('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;return-1===k['indexOf'](E['toUpperCase']())?(R['warn']("Codec not supported: "+E),null):("H264"===E||"AVC1"===E?n['codecs']=o(a):E['indexOf']("AAC")>=0?(n['codecs']=i(a,E),n['audioSamplingRate']=parseInt(a['getAttribute']("SamplingRate"),10),n['audioChannels']=parseInt(a['getAttribute']("Channels"),10)):(E['indexOf']("TTML")||E['indexOf']("DFXP"))&&(n['codecs']=f.STPP),n['codecPrivateData']=""+a['getAttribute']("CodecPrivateData"),n['BaseURL']=a.BaseURL,n)}function o(a){var e=a['getAttribute']("CodecPrivateData")['toString'](),n=void 0,l=void 0;return n=/00000001[0-9]7/['exec'](e),l=n&&n[0]?e['substr'](e['indexOf'](n[0])+10,6):void 0,"avc1."+l}function i(a,e){var n=parseInt(a['getAttribute']("SamplingRate"),10),l=a['getAttribute']("CodecPrivateData")['toString'](),E=0,o=void 0,i=void 0,t=void 0,r=void 0;return"AACH"===e&&(E=5),void 0===l||""===l?(E=2,t=T[n],"AACH"===e?(E=5,l=new Uint8Array(4),r=T[2*n],l[0]=E<<3|t>>1,l[1]=t<<7|a.Channels<<3|r>>1,l[2]=r<<7|8,l[3]=0,i=new Uint16Array(2),i[0]=(l[0]<<8)+l[1],i[1]=(l[2]<<8)+l[3],o=i[0]['toString'](16),o=i[0]['toString'](16)+i[1]['toString'](16)):(l=new Uint8Array(2),l[0]=E<<3|t>>1,l[1]=t<<7|parseInt(a['getAttribute']("Channels"),10)<<3,i=new Uint16Array(1),i[0]=(l[0]<<8)+l[1],o=i[0]['toString'](16)),l=""+o,l=l['toUpperCase'](),a['setAttribute']("CodecPrivateData",l)):0===E&&(E=(248&parseInt(l['substr'](0,2),16))>>3),"mp4a.40."+E}function t(a,e){var n={},l=void 0,E=void 0;return l=a['getAttribute']("Url")['replace']("{bitrate}","$Bandwidth$"),l=l['replace']("{start time}","$Time$"),E=a['getAttribute']("TimeScale"),E=E?parseFloat(E):e,n['media']=l,n['timescale']=E,n['SegmentTimeline']=r(a,n.timescale),n}function r(a,e){var n={},l=a['getElementsByTagName']("c"),E=[],o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=0;for(r=0;r<l.length;r++)if(o={},t=l[r]['getAttribute']("t"),o['tManifest']=parseFloat(t),o['t']=parseFloat(t),o['d']=parseFloat(l[r]['getAttribute']("d")),0!==r||o.t||(o['t']=0),r>0&&(i=E[E.length-1],i.d||(i.tManifest?i['d']=parseFloat(t)-parseFloat(i.tManifest):i['d']=o.t-i.t,c+=i.d),o.t||(i.tManifest?(o['tManifest']=parseFloat(i.tManifest)+i.d,o['t']=parseFloat(o.tManifest)):o['t']=i.t+i.d)),o.d&&(c+=o.d),E['push'](o),d=parseFloat(l[r]['getAttribute']("r")))for(b=0;d-1>b;b++)i=E[E.length-1],o={},o['t']=i.t+i.d,o['d']=i.d,i.tManifest&&(o['tManifest']=parseFloat(i.tManifest)+i.d),c+=o.d,E['push'](o);return n['S']=E,n['S_asArray']=E,n['duration']=c/e,n}function b(a){var e=void 0,n=void 0,l=void 0,E=void 0;return e=m['decodeArray'](a.firstChild.data),n=d(e),n=new Uint16Array(n.buffer),n=String['fromCharCode']['apply'](null,n),l=(new DOMParser)['parseFromString'](n,"application/xml"),E=l['querySelector']("KID").textContent,E=m['decodeArray'](E),c(E),E}function d(a){var e=void 0,n=void 0,l=void 0,E=void 0,o=void 0,i=0;for(e=(a[i+3]<<24)+(a[i+2]<<16)+(a[i+1]<<8)+a[i],i+=4,n=(a[i+1]<<8)+a[i],i+=2;i<a.length;)if(l=(a[i+1]<<8)+a[i],i+=2,1===l)return E=(a[i+1]<<8)+a[i],i+=2,o=new Uint8Array(E),o['set'](a['subarray'](i,i+E)),o;return null}function c(a){p(a,0,3),p(a,1,2),p(a,4,5),p(a,6,7)}function p(a,e,n){var l=a[e];a[e]=a[n],a[n]=l}function w(a){var e={'__text':a.firstChild.data,'__prefix':"mspr"};return{'schemeIdUri':"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",'value':"com.microsoft.playready",'pro':e,'pro_asArray':e}}function x(a,e){var n=new Uint8Array(2+e.length);n[0]=18,n[1]=16,n['set'](e,2);var l=32+n.length,E=new Uint8Array(l),o=0;return E[o++]=(4278190080&l)>>24,E[o++]=(16711680&l)>>16,E[o++]=(65280&l)>>8,E[o++]=255&l,E['set']([112,115,115,104,0,0,0,0],o),o+=8,E['set']([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],o),o+=16,E[o++]=(4278190080&n.length)>>24,E[o++]=(16711680&n.length)>>16,E[o++]=(65280&n.length)>>8,E[o++]=255&n.length,E['set'](n,o),E=String['fromCharCode']['apply'](null,E),E=m['encodeASCII'](E),{'schemeIdUri':"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",'value':"com.widevine.alpha",'pssh':{'__text':E}}}function v(a,e){var l={},E=[],o=a['getElementsByTagName']("SmoothStreamingMedia")[0],i=a['getElementsByTagName']("Protection")[0],t=null,r=void 0,d=void 0,c=void 0,p=void 0,v=void 0,y=void 0,h=void 0,s=void 0,D=void 0,m=void 0;l['protocol']="MSS",l['profiles']="urn:mpeg:dash:profile:isoff-live:2011",l['type']="TRUE"===o['getAttribute']("IsLive")?"dynamic":"static",s=o['getAttribute']("TimeScale"),l['timescale']=s?parseFloat(s):g;var C=parseFloat(o['getAttribute']("DVRWindowLength"));0===C&&"TRUE"===o['getAttribute']("CanSeek")&&(C=1/0),C>0&&(l['timeShiftBufferDepth']=C/l.timescale);var f=parseFloat(o['getAttribute']("Duration"));for(l['mediaPresentationDuration']=0===f?1/0:f/l.timescale,l['minBufferTime']=S['getStableBufferTime'](),l['ttmlTimeIsRelative']=!0,"dynamic"===l.type&&f>0&&(l['type']="static",l['timeShiftBufferDepth']=f/l.timescale),"dynamic"===l.type&&l.timeShiftBufferDepth<1/0&&(l['availabilityStartTime']=new Date(e['getTime']()-1e3*l.timeShiftBufferDepth),l['refreshManifestOnSwitchTrack']=!0,l['doNotUpdateDVRWindowOnBufferUpdated']=!0,l['ignorePostponeTimePeriod']=!0),l['Period']=n(o,l.timescale),l['Period_asArray']=[l.Period],r=l.Period,r['start']=0,void 0!==i&&(t=a['getElementsByTagName']("ProtectionHeader")[0],t['firstChild']['data']=t.firstChild['data']['replace'](/\n|\r/g,""),p=b(t),c=w(t),c["cenc:default_KID"]=p,E['push'](c),c=x(t,p),c["cenc:default_KID"]=p,E['push'](c),l['ContentProtection']=E,l['ContentProtection_asArray']=E),d=r.AdaptationSet_asArray,D=0;D<d.length;D+=1)d[D]['SegmentTemplate']['initialization']="$Bandwidth$",void 0!==l.ContentProtection&&(d[D]['ContentProtection']=l.ContentProtection,d[D]['ContentProtection_asArray']=l.ContentProtection_asArray),"dynamic"===l.type&&(l['timeShiftBufferDepth']===1/0&&(l['availabilityStartTime']=new Date(e['getTime']()-1e3*d[D].SegmentTemplate.SegmentTimeline.duration)),l.timeShiftBufferDepth>0&&l.timeShiftBufferDepth!==1/0&&"video"===d[D].contentType&&l.timeShiftBufferDepth>d[D].SegmentTemplate.SegmentTimeline.duration&&(l['timeShiftBufferDepth']=d[D].SegmentTemplate.SegmentTimeline.duration));if(l.timeShiftBufferDepth<l.minBufferTime&&(l['minBufferTime']=l.timeShiftBufferDepth),delete l.ContentProtection,delete l.ContentProtection_asArray,"static"===l.type){var k=null;if(k&&k.timestampOffset)v=k.timestampOffset;else for(D=0;D<d.length;D++)("audio"===d[D].contentType||"video"===d[D].contentType)&&(h=d[D].SegmentTemplate.SegmentTimeline.S_asArray,y=h[0].t/d[D].SegmentTemplate.timescale,void 0===v&&(v=y),v=Math['min'](v,y),l['mediaPresentationDuration']=Math['min'](l.mediaPresentationDuration,d[D].SegmentTemplate.SegmentTimeline.duration));if(v>0){for(l['timestampOffset']=v,D=0;D<d.length;D++){for(h=d[D].SegmentTemplate.SegmentTimeline.S_asArray,m=0;m<h.length;m++)h[m].tManifest||(h[m]['tManifest']=h[m].t),h[m].t-=v*d[D].SegmentTemplate.timescale;("audio"===d[D].contentType||"video"===d[D].contentType)&&(r['start']=Math['max'](h[0].t,r.start),d[D]['SegmentTemplate']['presentationTimeOffset']=r.start)}r.start/=l.timescale}}return l['mediaPresentationDuration']=Math['floor'](1e3*l.mediaPresentationDuration)/1e3,r['duration']=l.mediaPresentationDuration,l}function y(a){var e=null;if(window.DOMParser){var n=new window.DOMParser;if(e=n['parseFromString'](a,"text/xml"),e['getElementsByTagName']("parsererror").length>0)throw new Error("parsing the manifest failed")}return e}function h(){return null}function s(){return null}function D(a){var e=null,n=null,l=window['performance']['now']();e=y(a);var E=window['performance']['now']();if(null===e)return null;n=v(e,new Date);var o=window['performance']['now']();return R['info']("Parsing complete: (xmlParsing: "+(E-l)['toPrecision'](3)+"ms, mss2dash: "+(o-E)['toPrecision'](3)+"ms, total: "+((o-l)/1e3)['toPrecision'](3)+"s)"),n}a=a||{};var m=a.BASE64,C=a.debug,f=a.constants,g=1e7,k=["AAC","AACL","AVC1","H264","TTML","DFXP"],M={'SUBT':"alternate",'CAPT':"alternate",'DESC':"main"},P={'DESC':"2"},T={'96e3':0,'88200':1,'64e3':2,'48e3':3,'44100':4,'32e3':5,'24e3':6,'22050':7,'16e3':8,'12e3':9,'11025':10,'8e3':11,'7350':12},u={'video':"video/mp4",'audio':"audio/mp4",'text':"application/mp4"},A=void 0,R=void 0,S=void 0;return A={'parse':D,'getMatchers':h,'getIron':s},e(),A}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="MssParser",n["default"]=i["default"]['getClassFactory'](E)},{'19':19}],'69':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){var e=x["default"](t)['getInstance']();w=i["default"](t)['create']({'errHandler':a.errHandler,'errors':s["default"],'dashMetrics':a.dashMetrics,'metricsModel':a.metricsModel,'mediaPlayerModel':a.mediaPlayerModel,'requestModifier':a.requestModifier,'boxParser':e,'useFetch':a['mediaPlayerModel']['getUseFetch'](),'urlUtils':a.urlUtils,'constants':a.constants,'dashConstants':a.dashConstants})}function n(a){var e=function(e){b['trigger'](y["default"].CHECK_FOR_EXISTENCE_COMPLETED,{'request':a,'exists':e})};if(a){var n=new r["default"](a.url);w['load']({'request':n,'success':function(){e(!0)},'error':function(){e(!1)}})}else e(!1)}function l(a){var e=function(e,n){b['trigger'](y["default"].LOADING_COMPLETED,{'request':a,'response':e||null,'error':n||null,'sender':c})};a?w['load']({'request':a,'progress':function(e){b['trigger'](y["default"].LOADING_PROGRESS,{'request':a,'stream':e.stream}),e.data&&b['trigger'](y["default"].LOADING_DATA_PROGRESS,{'request':a,'response':e.data||null,'error':null,'sender':c})},'success':function(a){e(a)},'error':function n(a,l,E,o){var n=new d["default"](s["default"].FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,E,l);n['fatal']=o?!0:!1,e(void 0,n)},'abort':function(a){a&&b['trigger'](y["default"].LOADING_ABANDONED,{'request':a,'mediaType':a.mediaType,'sender':c})}}):e(void 0,new d["default"](s["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,s["default"].FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))}function E(){w&&w['abort']()}function o(){w&&(w['abort'](),w=null)}a=a||{};var t=this.context,b=p["default"](t)['getInstance'](),c=void 0,w=void 0;return c={'checkForExistence':n,'load':l,'abort':E,'reset':o},e(),c}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(128),i=l(o),t=a(197),r=l(t),b=a(194),d=l(b),c=a(18),p=l(c),w=a(177),x=l(w),v=a(24),y=l(v),h=a(21),s=l(h),D=a(19),m=l(D);E['__visualon_factory_name']="FragmentLoader",n["default"]=m["default"]['getClassFactory'](E)},{'128':128,'177':177,'18':18,'19':19,'194':194,'197':197,'21':21,'24':24}],'70':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){h=S["default"](t)['getInstance']()['getLogger'](v),b['on'](g["default"].XLINK_READY,n,v),m=p["default"](t)['create']({'errHandler':a.errHandler,'dashMetrics':a.dashMetrics,'metricsModel':a.metricsModel,'mediaPlayerModel':a.mediaPlayerModel,'requestModifier':a.requestModifier,'urlUtils':c,'constants':i["default"],'dashConstants':r["default"],'errors':M["default"]}),f=d["default"](t)['create']({'errHandler':T,'metricsModel':a.metricsModel,'mediaPlayerModel':a.mediaPlayerModel,'requestModifier':a.requestModifier}),k=null}function n(a){f===a.sender&&b['trigger'](g["default"].INTERNAL_MANIFEST_LOADED,{'manifest':a.manifest,'sender':v})}function l(a){var e=null;return a['indexOf']("SmoothStreamingMedia")>-1?(P&&(e=P['createMssParser'](),P['registerEvents']()),e):a['indexOf']("MPD")>-1?A["default"](t)['create']():e}function E(a){var e=new y["default"](a,D.HTTPRequest.MPD_TYPE);m['load']({'request':e,'success':function(e,n,E,o){if(f){var t=void 0,r=void 0,d=void 0;if("string"==typeof o&&""!==o&&w&&w['setOfflineSessionIds'](JSON['parse'](o)),E&&E!==a?(r=c['parseBaseUrl'](E),t=E):(c['isRelative'](a)&&(a=c['resolve'](a,window.location.href)),r=c['parseBaseUrl'](a)),null===k&&(k=l(e)),null===k)return void b['trigger'](g["default"].INTERNAL_MANIFEST_LOADED,{'manifest':null,'sender':v,'error':new s["default"](M["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,M["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+(""+a))});f['setMatchers'](k['getMatchers']()),f['setIron'](k['getIron']());try{d=k['parse'](e)}catch(p){return void b['trigger'](g["default"].INTERNAL_MANIFEST_LOADED,{'manifest':null,'sender':v,'error':new s["default"](M["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,M["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+(""+a))})}d?(d['url']=t||a,d.originalUrl||(d['originalUrl']=d.url),d['hasOwnProperty'](i["default"].LOCATION)&&(r=c['parseBaseUrl'](d['Location_asArray'][0]),h['debug']("BaseURI set by Location to: "+r)),d['baseUri']=r,d['loadedTime']=new Date,f['resolveManifestOnLoad'](d),b['trigger'](g["default"].ORIGINAL_MANIFEST_LOADED,{'originalManifest':e,'sender':v})):b['trigger'](g["default"].INTERNAL_MANIFEST_LOADED,{'manifest':null,'sender':v,'error':new s["default"](M["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,M["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+(""+a))})}},'error':function(e,n,l){b['trigger'](g["default"].INTERNAL_MANIFEST_LOADED,{'manifest':null,'sender':v,'error':new s["default"](M["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,M["default"].MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(a+", "+l))})}})}function o(){b['off'](g["default"].XLINK_READY,n,v),f&&(f['reset'](),f=null),m&&(m['abort'](),m=null),P&&P['reset']()}a=a||{};var t=this.context,b=C["default"](t)['getInstance'](),c=x["default"](t)['getInstance'](),w=a.protectionController,v=void 0,h=void 0,m=void 0,f=void 0,k=void 0,P=a.mssHandler,T=a.errHandler;return v={'load':E,'reset':o},e(),v}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(31),r=l(t),b=a(94),d=l(b),c=a(128),p=l(c),w=a(190),x=l(w),v=a(205),y=l(v),h=a(194),s=l(h),D=a(214),m=a(18),C=l(m),f=a(24),g=l(f),k=a(21),M=l(k),P=a(19),T=l(P),u=a(34),A=l(u),R=a(17),S=l(R);E['__visualon_factory_name']="ManifestLoader";var U=T["default"]['getClassFactory'](E);n["default"]=U},{'128':128,'17':17,'18':18,'19':19,'190':190,'194':194,'205':205,'21':21,'214':214,'24':24,'31':31,'34':34,'79':79,'94':94}],'71':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){g=p["default"](m)['getInstance']()['getLogger'](f)}function e(a){a&&(a.manifestModel&&(A=a.manifestModel),a.dashManifestModel&&(R=a.dashManifestModel),a.mediaPlayerModel&&(U=a.mediaPlayerModel),a.manifestLoader&&(u=a.manifestLoader),a.errHandler&&(S=a.errHandler))}function n(){E(),C['on'](r["default"].STREAMS_COMPOSED,D,this),C['on'](r["default"].PLAYBACK_STARTED,h,this),C['on'](r["default"].PLAYBACK_PAUSED,s,this),C['on'](r["default"].INTERNAL_MANIFEST_LOADED,v,this)}function l(a){c(a)}function E(){k=NaN,T=!1,P=!1,t()}function o(){C['off'](r["default"].PLAYBACK_STARTED,h,this),C['off'](r["default"].PLAYBACK_PAUSED,s,this),C['off'](r["default"].STREAMS_COMPOSED,D,this),C['off'](r["default"].INTERNAL_MANIFEST_LOADED,v,this),E()}function t(){null!==M&&(clearInterval(M),M=null)}function b(a){t(),isNaN(a)&&!isNaN(k)&&(a=1e3*k),isNaN(a)||(g['debug']("Refresh manifest in "+a+" milliseconds."),M=setTimeout(w,a))}function d(){T=!0;var a=A['getValue'](),e=a.url,n=R['getLocation'](a);n&&(e=n),u['load'](e)}function c(a){A['setValue'](a);var e=new Date,n=(e['getTime']()-a['loadedTime']['getTime']())/1e3;k=R['getManifestUpdatePeriod'](a,n),1e3*k>2147483647&&(k=2147483.647),U['getAutoPlay']()||"dynamic"!==a.type||U['setPreloadMode'](y["default"].PRELOAD_METADATA),U['getLowLatencyEnabled']()&&"dynamic"!==a.type&&U['setLowLatencyEnabled'](!1),U['isSupportTrickPlay']()&&U['setTrickPlayMode'](!1),C['trigger'](r["default"].MANIFEST_UPDATED,{'manifest':a}),g['info']("Manifest has been refreshed at "+e+"["+e['getTime']()/1e3+"] "),P||b()}function w(){return!P||U['getScheduleWhilePaused']()?T?void b(U['getManifestUpdateRetryInterval']()):void d():void 0}function v(a){u===a.sender&&(a.error?a['error']['code']===x["default"].MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&S['error'](a.error):c(a.manifest))}function h(){P=!1,b()}function s(){P=!0,t()}function D(){T=!1}var m=this.context,C=i["default"](m)['getInstance'](),f=void 0,g=void 0,k=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=void 0;return f={'initialize':n,'setManifest':l,'refreshManifest':d,'setConfig':e,'reset':o},a(),f}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(18),i=l(o),t=a(24),r=l(t),b=a(19),d=l(b),c=a(17),p=l(c),w=a(21),x=l(w),v=a(79),y=l(v);E['__visualon_factory_name']="ManifestUpdater",n["default"]=d["default"]['getClassFactory'](E)},{'17':17,'18':18,'19':19,'21':21,'24':24,'79':79}],'72':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(){function a(){kl=Cl['getLogger'](gl),Tl=!1,Rl=!1,ul=!1,Al=!1,Sl=!0,Ol=null,Pl=null,ql=null,ea["default"]['extend'](Dl.voDashEvents),_["default"]['extend'](ea["default"]),"function"==typeof fl&&_["default"]['extend'](fl.events),Bl=L["default"](Dl)['getInstance'](),Zl=F["default"](Dl)['getInstance'](),Dl['VideoModel']=F["default"],_l=S["default"](Dl)['getInstance']();for(var a in Dl.Constants)void 0===t["default"][a]&&(t["default"][a]=Dl['Constants'][a])}function e(a){a&&(a.capabilities&&(Gl=a.capabilities),a.streamController&&(Hl=a.streamController),a.playbackController&&(Kl=a.playbackController),a.mediaPlayerModel&&(Bl=a.mediaPlayerModel),a.abrController&&(Ul=a.abrController),a.schemeLoaderFactory&&(Il=a.schemeLoaderFactory),a.mediaController&&(Nl=a.mediaController))}function n(a,e,n){
return Ya(void 0!==n?n:!0),Gl||(Gl=M["default"](Dl)['getInstance']()),Fl=g["default"](Dl)['getInstance'](),Gl['supportsMediaSource']()?void(Tl||(Tl=!0,Ll=pa["default"](Dl)['getInstance'](),Ul||(Ul=j["default"](Dl)['getInstance']()),Il||(Il=z["default"](Dl)['getInstance']()),Kl||(Kl=w["default"](Dl)['getInstance']()),Ql||(Ql=D["default"](Dl)['create']()),Nl||(Nl=h["default"](Dl)['getInstance']()),ql=ia["default"](Dl)['getInstance'](),Xl=ra["default"](Dl)['getInstance']({'mediaController':Nl,'timelineConverter':Ll,'adapter':ql,'errHandler':Fl}),Yl=I["default"](Dl)['getInstance'](),Wl=da["default"](Dl)['getInstance']({'manifestModel':Yl,'dashManifestModel':Xl}),zl=O["default"](Dl)['getInstance'](),Dl.voSubtitlesPlugin&&($l=A["default"](Dl)['getInstance'](),Dl['TextController']=A["default"]),aE=H["default"](Dl)['getInstance']({'mediaPlayerModel':Bl}),ql['setConfig']({'dashManifestModel':Xl}),zl['setConfig']({'adapter':ql}),ge(),a&&yn(a),e&&Vn(e),kl['info']("[dash.js "+d()+"] MediaPlayer has been initialized"))):(Fl['capabilityError']("mediasource"),void Fl['error'](new Da["default"](X["default"].CAPABILITY_MEDIASOURCE_ERROR_CODE,X["default"].CAPABILITY_MEDIASOURCE_ERROR_MESSAGE)))}function l(){Vn(null),yn(null),Pl=null,Ol&&(Ol['reset'](),Ol=null),Vl&&(Vl['reset'](),Vl=null),Jl&&(Jl['reset'](),ul=!1,ml['off'](fl.events.DASH_ELEMENTS_CREATION_NEEDED,_e,gl),Jl=null)}function o(){return!!Ml&&!!Zl['getElement']()}function i(a,e,n){ml['on'](a,e,n)}function r(a,e,n){ml['off'](a,e,n)}function d(){return Ea['getVersionString']()}function p(){return Cl}function x(){if(Zl['getElement']()||Al)return!1;if(!Ml)throw vl;$n()}function y(){return Rl?(Bl['getPreloadMode']()!==t["default"].PRELOAD_METADATA||Kl['isPlaybackStarted']()||(Kl['setPlaybackStarted'](!0),ml['trigger'](_["default"].PLAYBACK_START)),Kl['play']()):{'name':"OtherError",'message':"Initialization is not completed !"}}function s(){if(!Rl)throw wl;Kl['pause']()}function m(){if(!Rl)throw wl;return Kl['isPaused']()}function f(a){if(!Rl)throw wl;if(ma['checkParameterType'](a,"number"),isNaN(a))throw t["default"].BAD_ARGUMENT_ERROR;Bl['getPreloadMode']()!==t["default"].PRELOAD_METADATA||Kl['isPlaybackStarted']()||(Kl['setPlaybackStarted'](!0),ml['trigger'](_["default"].PLAYBACK_START)),Kl['getIsDynamic']()?Yn()?Kl['seek'](na(a)):Kl['setLiveStartPosition'](a):Kl['seek'](a)}function k(){if(!Rl)throw wl;return Kl['isSeeking']()}function P(){if(!Rl)throw wl;return Kl['getIsDynamic']()}function u(a){wn()['playbackRate']=a}function R(){return wn().playbackRate}function U(a){Bl['setCatchUpPlaybackRate'](a)}function J(){return Bl['getCatchUpPlaybackRate']()}function N(a){if("number"!=typeof a||isNaN(a)||0>a||a>.5)throw hl;Bl['setLowLatencyMinDrift'](a)}function V(){return Bl['getLowLatencyMinDrift']()}function q(a){if("number"!=typeof a||isNaN(a)||0>a)throw sl;Bl['setLowLatencyMaxDriftBeforeSeeking'](a)}function B(){return Bl['getLowLatencyMaxDriftBeforeSeeking']()}function G(a){ma['checkParameterType'](a,"boolean"),wn()['muted']=a}function K(){return wn().muted}function W(a){if("number"!=typeof a||isNaN(a)||0>a||a>1)throw t["default"].BAD_ARGUMENT_ERROR;wn()['volume']=a}function Y(){return wn().volume}function $(a){var e=[t["default"].VIDEO,t["default"].AUDIO,t["default"].FRAGMENTED_TEXT,t["default"].MUXED];if(a){if(-1!==e['indexOf'](a)){var n=en()['getCurrentBufferLevel'](nn(a));return n?n:NaN}return kl['warn']("getBufferLength requested for invalid type"),NaN}var l=e['map'](function(a){return Cn(a).length>0?en()['getCurrentBufferLevel'](nn(a)):Number.MAX_VALUE})['reduce'](function(a,e){return Math['min'](a,e)});return l===Number.MAX_VALUE?NaN:l}function aa(){var a=Yn();return a?a.manifestInfo.DVRWindowSize:0}function na(a){var e=Yn();if(!e)return 0;var n=Kl['getLiveDelay'](),l=e.range.start+a;return l>e.range.end-n&&(l=e.range.end-n),l}function oa(a){if(!Rl)throw wl;var e=wn().currentTime;if(void 0!==a)e=Hl['getTimeRelativeToStreamId'](e,a);else if(Kl['getIsDynamic']()){var n=Yn();e=null===n?0:ta()-(n.range.end-n.time)}return e}function ta(){if(!Rl)throw wl;var a=parseFloat(wn()['duration']['toFixed'](5));if(Kl['getIsDynamic']()){var e=Yn(),n=void 0;if(!e)return 0;n=e.range.end-e.range.start,a=n<e.manifestInfo.DVRWindowSize?n:e.manifestInfo.DVRWindowSize}return a}function ba(){if(!Rl)throw wl;return oa()<0?NaN:Zn(oa())}function ca(){if(!Rl)throw wl;return Zn(ta())}function xa(a,e){Ul['setMaxAllowedBitrateFor'](a,e)}function ya(a,e){Ul['setMinAllowedBitrateFor'](a,e)}function sa(a){return Ul['getMaxAllowedBitrateFor'](a)}function Ca(a){if(!Al)throw pl;return Ul['getTopBitrateInfoFor'](a)}function ga(a){return Ul['getMinAllowedBitrateFor'](a)}function Ma(a,e){Ul['setMaxAllowedRepresentationRatioFor'](a,e)}function Ta(a){return Ul['getMaxAllowedRepresentationRatioFor'](a)}function Aa(a){if(!Al)throw pl;if(a===t["default"].IMAGE){var e=Bn();if(!e)return-1;var n=e['getThumbnailController']();return n?n['getCurrentTrackIndex']():-1}return Ul['getQualityFor'](a)}function Sa(a,e){if(!Al)throw pl;if(a===t["default"].IMAGE){var n=Bn();if(!n)return;var l=n['getThumbnailController']();l&&l['setTrackByIndex'](e)}Ul['setPlaybackQuality'](a,Hl['getActiveStreamInfo'](),e)}function Ia(){Ul['setElementSize'](),Ul['setWindowResizeEventCalled'](!0)}function La(){return Ul['getLimitBitrateByPortal']()}function Oa(a){Ul['setLimitBitrateByPortal'](a)}function ja(){return Ul['getUsePixelRatioInLimitBitrateByPortal']()}function za(a){Ul['setUsePixelRatioInLimitBitrateByPortal'](a)}function Ba(a,e){Ul['setInitialBitrateFor'](a,e)}function Fa(a){if(!Al)throw pl;return Ul['getInitialBitrateFor'](a)}function Ga(a,e){Ul['setInitialRepresentationRatioFor'](a,e)}function Ha(a){return Ul['getInitialRepresentationRatioFor'](a)}function Ka(a){return Ul['getAutoSwitchBitrateFor'](a)}function Qa(a,e){Ul['setAutoSwitchBitrateFor'](a,e)}function Wa(){return Ul['getUseDeadTimeLatency']()}function Xa(a){Ul['setUseDeadTimeLatency'](a)}function Ya(a){ma['checkParameterType'](a,"boolean"),Sl=a,Bl['setAutoPlay'](a)}function Za(){return Sl}function $a(a){Bl['setLiveDelayFragmentCount'](a)}function _a(a){Bl['setLiveDelay'](a)}function ae(){return Bl['getLiveDelay']()}function ee(){if(!Tl)throw yl;return Rl?Kl['getCurrentLiveLatency']():NaN}function ne(a){Bl['setUseSuggestedPresentationDelay'](a)}function le(a,e){Bl['setLastBitrateCachingInfo'](a,e)}function Ee(a,e){Bl['setLastMediaSettingsCachingInfo'](a,e)}function oe(a){Bl['setScheduleWhilePaused'](a)}function ie(){return Bl['getScheduleWhilePaused']()}function te(a){Bl['setFastSwitchEnabled'](a)}function re(){return Bl['getFastSwitchEnabled']()}function be(a){Bl['setABRStrategy'](a)}function de(){return Bl['getABRStrategy']()}function ce(a){Bl['setUseDefaultABRRules'](a)}function pe(a,e,n){Bl['addABRCustomRule'](a,e,n)}function we(a){Bl['removeABRCustomRule'](a)}function xe(){Bl['removeABRCustomRule']()}function ve(a){Bl['setMovingAverageMethod'](a)}function ye(){return Bl['getMovingAverageMethod']()}function he(){return Bl['getLowLatencyEnabled']()}function se(a){Bl['setLowLatencyEnabled'](a)}function De(a){Bl['setUseFetch'](a)}function me(a,e){Bl['addUTCTimingSource'](a,e)}function Ce(a,e){Bl['removeUTCTimingSource'](a,e)}function fe(){Bl['clearDefaultUTCTimingSources']()}function ge(){Bl['restoreDefaultUTCTimingSources']()}function ke(a){Bl['setUseManifestDateHeaderTimeSource'](a)}function Me(a){Bl['setBufferToKeep'](a)}function Pe(a){Bl['setBufferAheadToKeep'](a)}function Te(a){Bl['setBufferPruningInterval'](a)}function ue(a){Bl['setStableBufferTime'](a)}function Ae(){return Bl['getStableBufferTime']()}function Re(a){Bl['setBufferTimeAtTopQuality'](a)}function Se(){return Bl['getBufferTimeAtTopQuality']()}function Ue(a){Bl['setBufferTimeAtTopQualityLongForm'](a)}function Ie(){return Bl['getBufferTimeAtTopQualityLongForm']()}function Je(a){Bl['setLongFormContentDurationThreshold'](a)}function Le(a){Bl['setSegmentOverlapToleranceTime'](a)}function Ne(a,e){Bl['setCacheLoadThresholdForType'](a,e)}function Oe(a){Bl['setBandwidthSafetyFactor'](a)}function Ve(){return Bl['getBandwidthSafetyFactor']()}function je(a){var e=Ul['getThroughputHistory']();return e?e['getAverageThroughput'](a):0}function qe(a){Bl['setAbandonLoadTimeout'](a)}function ze(a){Bl['setRetryAttemptsForType'](wa.HTTPRequest.MEDIA_SEGMENT_TYPE,a),Bl['setRetryAttemptsForType'](wa.HTTPRequest.INIT_SEGMENT_TYPE,a)}function Be(a){Bl['setRetryIntervalForType'](wa.HTTPRequest.MEDIA_SEGMENT_TYPE,a),Bl['setRetryIntervalForType'](wa.HTTPRequest.INIT_SEGMENT_TYPE,a)}function Fe(a){Bl['setRetryAttemptsForType'](wa.HTTPRequest.MPD_TYPE,a)}function Ge(a){Bl['setRetryIntervalForType'](wa.HTTPRequest.MPD_TYPE,a)}function He(a,e){Bl['setXHRWithCredentialsForType'](a,e)}function Ke(a){return Bl['getXHRWithCredentialsForType'](a)}function Qe(a){Bl['setJumpGaps'](a)}function We(){return Bl['getJumpGaps']()}function Xe(a){Bl['setSmallGapLimit'](a)}function Ye(){return Bl['getSmallGapLimit']()}function Ze(a){Bl['setManifestUpdateRetryInterval'](a)}function $e(){return Bl['getManifestUpdateRetryInterval']()}function _e(a){var e=T["default"](Dl)['getInstance'](),n=Ua["default"](Dl)['create']({'mimeType':a.config.mimeType,'timelineConverter':Ll,'dashMetrics':Wl,'metricsModel':zl,'mediaPlayerModel':Bl,'baseURLController':a.config.baseURLController,'errHandler':Fl}),l=Ja["default"](Dl)['create']();l['setConfig']({'abrController':Ul,'domStorage':aE,'metricsModel':zl,'dashMetrics':Wl,'dashManifestModel':Xl,'manifestModel':Yl,'playbackController':Kl,'timelineConverter':Ll,'streamProcessor':a.sender,'type':a.config.type,'streamId':a.config.streamInfo?a.config.streamInfo.id:null});var E=Va["default"](Dl)['create']({'metricsModel':zl,'mediaPlayerModel':Bl,'errHandler':Fl,'requestModifier':e,'dashMetrics':Wl,'eventBus':ml,'events':_["default"],'errors':X["default"],'constants':t["default"],'dashConstants':b["default"],'urlUtils':Ra["default"](Dl)['getInstance']()}),o=Na["default"](Dl)['create']({'metricsModel':zl,'mediaPlayerModel':Bl,'fragmentLoader':E,'dashMetrics':Wl,'eventBus':ml,'events':_["default"],'debug':Cl});a['sender']['setDashElements'](n,o,l)}function an(a){if(Tl&&"function"==typeof fl){if(ul)return Jl;Jl=fl(Dl)['create'](),ml['on'](fl.events.DASH_ELEMENTS_CREATION_NEEDED,_e,gl),ea["default"]['extend'](fl.events,{'publicOnly':!0}),X["default"]['extend'](fl.errors);var e=Hn(),n=ua["default"](Dl)['create']();return n['setConfig']({'manifestModel':Yl,'adapter':ql,'manifestLoader':e,'errHandler':Fl,'dashManifestModel':Xl,'mediaPlayerModel':Bl}),Jl['setConfig']({'debug':Cl,'ManifestLoader':C["default"],'ManifestUpdater':ua["default"],'BaseURLController':D["default"],'dashManifestModel':Xl,'mediaPlayerModel':Bl,'manifestLoader':e,'manifestModel':Yl,'metricsModel':zl,'dashMetrics':Wl,'requestModifier':T["default"](Dl)['getInstance'](),'adapter':ql,'errHandler':Fl,'schemeLoaderFactory':Il,'eventBus':ml,'events':_["default"],'constants':t["default"],'dashConstants':b["default"],'urlUtils':Ra["default"](Dl)['getInstance'](),'mediaPlayer':this,'filterDRMInfo':a.filterDRMInfo,'boxParser':qa["default"](Dl)['getInstance']()}),ul=!0,Jl}}function en(){return Wl}function nn(a){return zl['getReadOnlyMetricsFor'](a)}function ln(a){Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l&&$l['setTextDefaultLanguage'](a)}function En(){return Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l?$l['getTextDefaultLanguage']():null}function on(a){Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l&&$l['setTextDefaultEnabled'](a)}function tn(){return Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l?$l['getTextDefaultEnabled']():!1}function rn(a){Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l&&$l['enableText'](a)}function bn(a){Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l&&$l['enableForcedTextStreaming'](a)}function dn(){return Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l?$l['isTextEnabled']():!1}function cn(a){if(!Rl)throw wl;Dl.voSubtitlesPlugin&&void 0===$l&&($l=A["default"](Dl)['getInstance']()),$l&&$l['setTextTrack'](a)}function pn(a){}function wn(){if(!Zl['getElement']())throw xl;return Zl['getElement']()}function xn(){return Zl?Zl['getVideoContainer']():null}function vn(a){if(!Zl['getElement']())throw xl;Zl['setVideoContainer'](a)}function yn(a){if(!Tl)throw yl;Zl['setElement'](a),a&&(Kn(),Wn(),Xn(),Hl&&Hl['switchToVideoElement']()),Rl&&Fn(),$n()}function hn(){return Zl?Zl['getTTMLRenderingDiv']():null}function sn(a){if(!Zl['getElement']())throw xl;Zl['setTTMLRenderingDiv'](a)}function Dn(a){if(!Al)throw pl;var e=Bn();return e?e['getBitrateListFor'](a):[]}function mn(a){if(!Al)throw pl;return ql['getStreamsInfo'](a)}function Cn(a){if(!Al)throw pl;var e=Hl['getActiveStreamInfo']();return Nl['getTracksFor'](a,e)}function fn(a,e,n){if(!Al)throw pl;return n=n||ql['getStreamsInfo'](e,1)[0],n?ql['getAllMediaInfoForType'](n,a,e):[]}function gn(a){if(!Al)throw pl;var e=Hl['getActiveStreamInfo']();return Nl['getCurrentTrackFor'](a,e)}function kn(a,e){if(!Tl)throw yl;Nl['setInitialSettings'](a,e)}function Mn(a){if(!Tl)throw yl;return Nl['getInitialSettings'](a)}function Pn(a){if(!Al)throw pl;Nl['setTrack'](a)}function Tn(a){if(!Tl)throw yl;return Nl['getSwitchMode'](a)}function un(a,e){if(!Tl)throw yl;Nl['setSwitchMode'](a,e)}function An(a){if(!Tl)throw yl;Nl['setSelectionModeForInitialTrack'](a)}function Rn(){if(!Tl)throw yl;return Nl['getSelectionModeForInitialTrack']()}function Sn(){return Kn()}function Un(a){Ol=a}function In(a){Pl=a,Hl&&Hl['setProtectionData'](Pl)}function Jn(a,e){if(0>a)return null;var n=Kl['getIsDynamic']()?na(a):a,l=Hl['getStreamForTime'](n);if(null===l)return null;var E=l['getThumbnailController']();if(!E)return e(null),null;var o=Hl['getTimeRelativeToStreamId'](n,l['getId']());return E['get'](o,e)}function Ln(a){Bl['setKeepProtectionMediaKeys'](a)}function Nn(a,e){var n=Hn(),l=this,E=function o(a){a.error?e(null,a.error):e(a.manifest),ml['off'](_["default"].INTERNAL_MANIFEST_LOADED,o,l),n['reset']()};ml['on'](_["default"].INTERNAL_MANIFEST_LOADED,E,l),_l['initialize'](a),n['load'](a)}function On(){if(!Ml)throw vl;return Ml}function Vn(a){if(!Tl)throw yl;"string"==typeof a&&_l['initialize'](a),Ml=a,(Al||Rl)&&Fn(),o()&&$n()}function jn(a,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1,E=new Date(1e3*a),o=E['toLocaleDateString'](e),i=E['toLocaleTimeString'](e,{'hour12':n});return l?i+" "+o:i}function qn(a){a=Math['max'](a,0);var e=Math['floor'](a/3600),n=Math['floor'](a%3600/60),l=Math['floor'](a%3600%60);return(0===e?"":10>e?"0"+e['toString']()+":":e['toString']()+":")+(10>n?"0"+n['toString']():n['toString']())+":"+(10>l?"0"+l['toString']():l['toString']())}function zn(a,e,n){la["default"]['extend'](a,e,n,Dl)}function Bn(){if(!Al)throw pl;var a=Hl['getActiveStreamInfo']();return a?Hl['getStreamById'](a.id):null}function Fn(){Rl=!1,Al=!1,ql['reset'](),Hl['reset'](),Kl['reset'](),Ul['reset'](),Nl['reset'](),$l&&$l['reset'](),Bl['reset'](),Ol&&(Bl['getKeepProtectionMediaKeys']()?Ol['stop']():(Ol['reset'](),Ol=null,Kn()))}function Gn(){var a=Hn();Hl||(Hl=v["default"](Dl)['getInstance']()),Nl['setConfig']({'domStorage':aE}),Hl['setConfig']({'capabilities':Gl,'manifestLoader':a,'manifestModel':Yl,'dashManifestModel':Xl,'mediaPlayerModel':Bl,'protectionController':Ol,'adapter':ql,'metricsModel':zl,'dashMetrics':Wl,'errHandler':Fl,'timelineConverter':Ll,'videoModel':Zl,'playbackController':Kl,'domStorage':aE,'abrController':Ul,'mediaController':Nl,'textController':$l,'baseURLController':Ql}),Kl['setConfig']({'streamController':Hl,'metricsModel':zl,'dashMetrics':Wl,'manifestModel':Yl,'mediaPlayerModel':Bl,'dashManifestModel':Xl,'adapter':ql,'videoModel':Zl,'timelineConverter':Ll,'uriFragmentModel':_l}),Ul['setConfig']({'streamController':Hl,'domStorage':aE,'mediaPlayerModel':Bl,'metricsModel':zl,'dashMetrics':Wl,'dashManifestModel':Xl,'manifestModel':Yl,'videoModel':Zl,'adapter':ql}),$l&&$l['setConfig']({'errHandler':Fl,'manifestModel':Yl,'dashManifestModel':Xl,'mediaController':Nl,'streamController':Hl,'videoModel':Zl}),Hl['initialize'](Sl,Pl)}function Hn(){return C["default"](Dl)['create']({'errHandler':Fl,'metricsModel':zl,'dashMetrics':Wl,'mediaPlayerModel':Bl,'requestModifier':T["default"](Dl)['getInstance'](),'mssHandler':jl,'protectionController':Ol})}function Kn(){return Ol?Ol:Ol=Qn()}function Qn(){if("function"==typeof fa["default"]){var a=fa["default"](Dl)['create']();_["default"]['extend'](fa["default"].events),ea["default"]['extend'](fa["default"].events,{'publicOnly':!0}),X["default"]['extend'](fa["default"].errors),Gl||(Gl=M["default"](Dl)['getInstance']());var e=a['createProtectionSystem']({'debug':Cl,'errHandler':Fl,'videoModel':Zl,'capabilities':Gl,'eventBus':ml,'events':_["default"],'BASE64':va["default"],'constants':t["default"]});return e}return null}function Wn(){if(!Vl&&"function"==typeof ka["default"]){var a=ka["default"](Dl)['create']();Vl=a['createMetricsReporting']({'debug':Cl,'eventBus':ml,'mediaElement':wn(),'dashManifestModel':Xl,'metricsModel':zl,'events':_["default"],'constants':t["default"],'metricsConstants':c["default"]})}}function Xn(){jl||"function"==typeof Pa["default"]&&(X["default"]['extend'](Pa["default"].errors),jl=Pa["default"](Dl)['create']({'eventBus':ml,'mediaPlayerModel':Bl,'metricsModel':zl,'playbackController':Kl,'protectionController':Ol,'baseURLController':Ql,'errHandler':Fl,'events':_["default"],'constants':t["default"],'debug':Cl,'initSegmentType':wa.HTTPRequest.INIT_SEGMENT_TYPE,'BASE64':va["default"],'ISOBoxer':ha["default"]}))}function Yn(){var a=zl['getReadOnlyMetricsFor'](t["default"].VIDEO)||zl['getReadOnlyMetricsFor'](t["default"].AUDIO)||zl['getReadOnlyMetricsFor'](t["default"].MUXED);return Wl['getCurrentDVRInfo'](a)}function Zn(a){var e=Yn(),n=void 0,l=void 0;return e?(n=e.manifestInfo['availableFrom']['getTime']()/1e3,l=a+(n+e.range.start)):0}function $n(){!Al&&Ml&&(Al=!0,kl['info']("Streaming Initialized"),Gn(),"string"==typeof Ml?Hl['load'](Ml):Hl['loadWithManifest'](Ml)),!Rl&&o()&&(Rl=!0,kl['info']("Playback Initialized"))}function _n(a){if(!Zl)throw xl;wn()['playbackRate']=a}function al(){if(!Rl)throw wl;return Kl['isAudioOnlyStream']()}function el(){if(!Rl)throw wl;var a=null;if(P()){var e=Yn();if(e)if(1/0===e.manifestInfo.DVRWindowSize)a={'start':0,'end':0};else{var n=e.range.end;n>e.range.start+e.manifestInfo.DVRWindowSize&&(n=e.range.start+e.manifestInfo.DVRWindowSize),a={'start':e.range.start,'end':n}}else a={'start':0,'end':0}}else a={'start':0,'end':ta()};return a}function nl(a){Bl['setStartWithLowestLatency'](a)}function ee(){if(!Rl)throw wl;return Kl['getCurrentLiveLatency']()}function ll(){if(!Rl)throw wl;return Kl['getCurrentTimeForLocal']()}function El(a){Bl['setLiveDelay'](a)}function ol(a){Bl['setMinBufferToAppendData'](a)}function il(a){Kl['setTrickPlayRate'](a)}function tl(){return Kl['getTrickPlayRate']()}function rl(){return Bl['isSupportTrickPlay']()}function bl(a){Bl['setHTTPHeaders'](a)}function dl(a){Bl['setPreloadMode'](a)}var cl,pl="You must first call initialize() and set a source before calling this method",wl="You must first call initialize() and set a valid source and view before calling this method",xl="You must first call attachView() to set the video element before calling this method",vl="You must first call attachSource() with a valid source before calling this method",yl="MediaPlayer not initialized!",hl="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",sl="Playback maximum drift has an invalid value! Use a number greater or equal to 0",Dl=this.context,ml=Z["default"](Dl)['getInstance'](),Cl=Q["default"](Dl)['getInstance'](),fl=Dl.voDownloaderPlugin&&Dl.voDownloaderPlugin.voDashOfflineController?Dl.voDownloaderPlugin.voDashOfflineController:null,gl=void 0,kl=void 0,Ml=void 0,Pl=void 0,Tl=void 0,ul=void 0,Al=void 0,Rl=void 0,Sl=void 0,Ul=void 0,Il=void 0,Jl=void 0,Ll=void 0,Nl=void 0,Ol=void 0,Vl=void 0,jl=void 0,ql=void 0,zl=void 0,Bl=void 0,Fl=void 0,Gl=void 0,Hl=void 0,Kl=void 0,Ql=void 0,Wl=void 0,Xl=void 0,Yl=void 0,Zl=void 0,$l=void 0,_l=void 0,aE=void 0;return cl={'initialize':n,'setConfig':e,'on':i,'off':r,'extend':zn,'attachView':yn,'attachSource':Vn,'isReady':o,'preload':x,'play':y,'isPaused':m,'pause':s,'isSeeking':k,'isDynamic':P,'seek':f,'setPlaybackRate':u,'getPlaybackRate':R,'setMute':G,'isMuted':K,'setVolume':W,'getVolume':Y,'time':oa,'duration':ta,'timeAsUTC':ba,'durationAsUTC':ca,'getActiveStream':Bn,'getDVRWindowSize':aa,'getDVRSeekOffset':na,'convertToTimeCode':qn,'formatUTC':jn,'getVersion':d,'getDebug':p,'getBufferLength':$,'getVideoContainer':xn,'getTTMLRenderingDiv':hn,'getVideoElement':wn,'getSource':On,'setLiveDelayFragmentCount':$a,'setLiveDelay':_a,'getLiveDelay':ae,'getCurrentLiveLatency':ee,'useSuggestedPresentationDelay':ne,'enableLastBitrateCaching':le,'enableLastMediaSettingsCaching':Ee,'setMaxAllowedBitrateFor':xa,'getMaxAllowedBitrateFor':sa,'getTopBitrateInfoFor':Ca,'setMinAllowedBitrateFor':ya,'getMinAllowedBitrateFor':ga,'setMaxAllowedRepresentationRatioFor':Ma,'getMaxAllowedRepresentationRatioFor':Ta,'setAutoPlay':Ya,'getAutoPlay':Za,'setScheduleWhilePaused':oe,'getScheduleWhilePaused':ie,'getDashMetrics':en,'getMetricsFor':nn,'getQualityFor':Aa,'setQualityFor':Sa,'updatePortalSize':Ia,'getLimitBitrateByPortal':La,'setLimitBitrateByPortal':Oa,'getUsePixelRatioInLimitBitrateByPortal':ja,'setUsePixelRatioInLimitBitrateByPortal':za,'setTextDefaultLanguage':ln,'getTextDefaultLanguage':En,'setTextDefaultEnabled':on,'getTextDefaultEnabled':tn,'enableText':rn,'enableForcedTextStreaming':bn,'isTextEnabled':dn,'setTextTrack':cn,'getBitrateInfoListFor':Dn,'setInitialBitrateFor':Ba,'getInitialBitrateFor':Fa,'setInitialRepresentationRatioFor':Ga,'getInitialRepresentationRatioFor':Ha,'getStreamsFromManifest':mn,'getTracksFor':Cn,'getTracksForTypeFromManifest':fn,'getCurrentTrackFor':gn,'setInitialMediaSettingsFor':kn,'getInitialMediaSettingsFor':Mn,'setCurrentTrack':Pn,'getTrackSwitchModeFor':Tn,'setTrackSwitchModeFor':un,'setSelectionModeForInitialTrack':An,'getSelectionModeForInitialTrack':Rn,'setFastSwitchEnabled':te,'getFastSwitchEnabled':re,'setMovingAverageMethod':ve,'getMovingAverageMethod':ye,'getAutoSwitchQualityFor':Ka,'setAutoSwitchQualityFor':Qa,'setABRStrategy':be,'getABRStrategy':de,'useDefaultABRRules':ce,'addABRCustomRule':pe,'removeABRCustomRule':we,'removeAllABRCustomRule':xe,'setBandwidthSafetyFactor':Oe,'getBandwidthSafetyFactor':Ve,'getAverageThroughput':je,'setAbandonLoadTimeout':qe,'retrieveManifest':Nn,'addUTCTimingSource':me,'removeUTCTimingSource':Ce,'clearDefaultUTCTimingSources':fe,'restoreDefaultUTCTimingSources':ge,'setBufferToKeep':Me,'setBufferAheadToKeep':Pe,'setBufferPruningInterval':Te,'setStableBufferTime':ue,'getStableBufferTime':Ae,'setBufferTimeAtTopQuality':Re,'getBufferTimeAtTopQuality':Se,'setBufferTimeAtTopQualityLongForm':Ue,'getBufferTimeAtTopQualityLongForm':Ie,'setFragmentLoaderRetryAttempts':ze,'setFragmentLoaderRetryInterval':Be,'setManifestLoaderRetryAttempts':Fe,'setManifestLoaderRetryInterval':Ge,'setXHRWithCredentialsForType':He,'getXHRWithCredentialsForType':Ke,'setJumpGaps':Qe,'getJumpGaps':We,'setSmallGapLimit':Xe,'getSmallGapLimit':Ye,'setLowLatencyEnabled':se,'getLowLatencyEnabled':he,'setUseFetch':De,'setCatchUpPlaybackRate':U,'getCatchUpPlaybackRate':J,'setLowLatencyMinDrift':N,'getLowLatencyMinDrift':V,'setLowLatencyMaxDriftBeforeSeeking':q,'getLowLatencyMaxDriftBeforeSeeking':B,'setManifestUpdateRetryInterval':Ze,'getManifestUpdateRetryInterval':$e,'setLongFormContentDurationThreshold':Je,'setSegmentOverlapToleranceTime':Le,'setCacheLoadThresholdForType':Ne,'getProtectionController':Sn,'attachProtectionController':Un,'setProtectionData':In,'enableManifestDateHeaderTimeSource':ke,'displayCaptionsOnTop':pn,'attachVideoContainer':vn,'attachTTMLRenderingDiv':sn,'getUseDeadTimeLatencyForAbr':Wa,'setUseDeadTimeLatencyForAbr':Xa,'getThumbnail':Jn,'keepProtectionMediaKeys':Ln,'createOfflineController':an,'reset':l,'setPreloadMode':dl,'setAudioPlaybackSpeed':_n,'isAudioOnlyStream':al,'getSeekableRange':el,'setStartWithLowestLatency':nl},E(cl,"getCurrentLiveLatency",ee),E(cl,"getCurrentTimeForLocal",ll),E(cl,"setPresentationDelay",El),E(cl,"setMinBufferToAppendData",ol),E(cl,"setTrickPlayRate",il),E(cl,"getTrickPlayRate",tl),E(cl,"isSupportTrickPlay",rl),E(cl,"setHTTPHeaders",bl),gl=cl,a(),gl}Object['defineProperty'](n,"__esModule",{'value':!0});var i=a(79),t=l(i),r=a(31),b=l(r),d=a(80),c=l(d),p=a(90),w=l(p),x=a(92),v=l(x),y=a(88),h=l(y),s=a(83),D=l(s),m=a(70),C=l(m),f=a(183),g=l(f),k=a(178),M=l(k),P=a(188),T=l(P),u=a(172),A=l(u),R=a(123),S=l(R),U=a(120),I=l(U),J=a(121),L=l(J),N=a(122),O=l(N),V=a(82),j=l(V),q=a(127),z=l(q),B=a(124),F=l(B),G=a(180),H=l(G),K=a(17),Q=l(K),W=a(21),X=l(W),Y=a(18),Z=l(Y),$=a(24),_=l($),aa=a(73),ea=l(aa),na=a(19),la=l(na),Ea=a(20),oa=a(26),ia=l(oa),ta=a(33),ra=l(ta),ba=a(28),da=l(ba),ca=a(50),pa=l(ca),wa=a(214),xa=a(14),va=l(xa),ya=a(335),ha=l(ya),sa=a(194),Da=l(sa),ma=a(189),Ca=a(131),fa=l(Ca),ga=a(95),ka=l(ga),Ma=a(66),Pa=l(Ma),Ta=a(71),ua=l(Ta),Aa=a(190),Ra=l(Aa),Sa=a(27),Ua=l(Sa),Ia=a(32),Ja=l(Ia),La=a(119),Na=l(La),Oa=a(69),Va=l(Oa),ja=a(177),qa=l(ja);o['__visualon_factory_name']="MediaPlayer";var za=la["default"]['getClassFactory'](o);za['events']=ea["default"],za['errors']=X["default"],la["default"]['updateClassFactory'](o.__visualon_factory_name,za),n["default"]=za},{'119':119,'120':120,'121':121,'122':122,'123':123,'124':124,'127':127,'131':131,'14':14,'17':17,'172':172,'177':177,'178':178,'18':18,'180':180,'183':183,'188':188,'189':189,'19':19,'190':190,'194':194,'20':20,'21':21,'214':214,'24':24,'26':26,'27':27,'28':28,'31':31,'32':32,'33':33,'335':335,'50':50,'66':66,'69':69,'70':70,'71':71,'73':73,'79':79,'80':80,'82':82,'83':83,'88':88,'90':90,'92':92,'95':95}],'73':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(25),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['AST_IN_FUTURE']="astInFuture",a['BUFFER_EMPTY']="bufferStalled",a['BUFFER_LOADED']="bufferLoaded",a['BUFFER_LEVEL_STATE_CHANGED']="bufferStateChanged",a['ERROR']="error",a['FRAGMENT_LOADING_COMPLETED']="fragmentLoadingCompleted",a['FRAGMENT_LOADING_PROGRESS']="fragmentLoadingProgress",a['FRAGMENT_LOADING_STARTED']="fragmentLoadingStarted",a['FRAGMENT_LOADING_ABANDONED']="fragmentLoadingAbandoned",a['LOG']="log",a['MANIFEST_LOADED']="manifestLoaded",a['METRICS_CHANGED']="metricsChanged",a['METRIC_CHANGED']="metricChanged",a['METRIC_ADDED']="metricAdded",a['METRIC_UPDATED']="metricUpdated",a['PERIOD_SWITCH_COMPLETED']="periodSwitchCompleted",a['PERIOD_SWITCH_STARTED']="periodSwitchStarted",a['QUALITY_CHANGE_REQUESTED']="qualityChangeRequested",a['QUALITY_CHANGE_RENDERED']="qualityChangeRendered",a['TRACK_CHANGE_RENDERED']="trackChangeRendered",a['SOURCE_INITIALIZED']="sourceInitialized",a['STREAM_INITIALIZING']="streamInitializing",a['STREAM_INITIALIZED']="streamInitialized",a['STREAM_TEARDOWN_COMPLETE']="streamTeardownComplete",a['TEXT_TRACKS_ADDED']="allTextTracksAdded",a['TEXT_TRACK_ADDED']="textTrackAdded",a['TTML_PARSED']="ttmlParsed",a['TTML_TO_PARSE']="ttmlToParse",a['CAPTION_RENDERED']="captionRendered",a['CAPTION_CONTAINER_RESIZE']="captionContainerResize",a['CAN_PLAY']="canPlay",a['STREAM_OPEN_COMPLETE']="streamOpenComplete",a['PLAYBACK_ENDED']="playbackEnded",a['PLAYBACK_ERROR']="playbackError",a['PLAYBACK_NOT_ALLOWED']="playbackNotAllowed",a['PLAYBACK_METADATA_LOADED']="playbackMetaDataLoaded",a['PLAYBACK_PAUSED']="playbackPaused",a['PLAYBACK_PLAYING']="playbackPlaying",a['PLAYBACK_PROGRESS']="playbackProgress",a['PLAYBACK_RATE_CHANGED']="playbackRateChanged",a['PLAYBACK_SEEKED']="playbackSeeked",a['PLAYBACK_SEEKING']="playbackSeeking",a['PLAYBACK_SEEK_ASKED']="playbackSeekAsked",a['PLAYBACK_STALLED']="playbackStalled",a['PLAYBACK_START']="playbackStart",a['PLAYBACK_STARTED']="playbackStarted",a['PLAYBACK_TIME_UPDATED']="playbackTimeUpdated",a['PLAYBACK_WAITING']="playbackWaiting",a['MANIFEST_VALIDITY_CHANGED']="manifestValidityChanged",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'25':25}],'74':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){w=i["default"](c)['getInstance']()['getLogger'](p)}function n(){v=[],x=null,y=null}function l(a){"InitializationSegment"!==a.segmentType?(v['push'](a),v['sort'](function(a,e){return a.start-e.start}),x=null):x=a,w['debug']("PreBufferSink appended chunk s: "+a.start+"; e: "+a.end),y&&y({'chunk':a})}function E(a,e){v=v['filter'](function(n){return!((isNaN(e)||n.start<e)&&(isNaN(a)||n.end>a))})}function o(){}function t(){for(var a=[],e=0;e<v.length;e++){var n=v[e];0===a.length||n.start>a[a.length-1].end?a['push']({'start':n.start,'end':n.end}):a[a.length-1]['end']=n.end}var l={'start':function(e){return a[e].start},'end':function(e){return a[e].end}};return Object['defineProperty'](l,"length",{'get':function(){return a.length}}),l}function r(){}function b(a,e){var n=d(a,e);return x&&(n['push'](x),x=null),E(a,e),n}function d(a,e){return v['filter'](function(n){return(isNaN(e)||n.start<e)&&(isNaN(a)||n.end>a)})}var c=this.context,p=void 0,w=void 0,x=void 0,v=[],y=a;return p={'getAllBufferRanges':t,'append':l,'remove':E,'abort':o,'discharge':b,'reset':n,'updateTimestampOffset':r},e(),p}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(17),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="PreBufferSink";var b=r["default"]['getClassFactory'](E);n["default"]=b},{'17':17,'19':19}],'75':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n,l){function E(){V=t["default"](S)['getInstance']()['getLogger'](O),q=!1,B=null,F=e.codec;try{if(F['match'](/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");j=l?l:a['addSourceBuffer'](F);var n=50;if(l||"function"!=typeof j['addEventListener'])clearInterval(z),z=setInterval(g,n);else try{j['addEventListener']("updateend",k,!1),j['addEventListener']("error",M,!1),j['addEventListener']("abort",M,!1)}catch(E){clearInterval(z),z=setInterval(g,n)}}catch(o){if(!e.isText&&-1===F['indexOf']('codecs="stpp')&&-1===F['indexOf']('codecs="wvtt'))throw o;var i=S.TextController?S['TextController'](S)['getInstance']():null;j=i?i['getTextSourceBuffer']():null}}function i(e){if(j){if(clearInterval(z),!e){try{"function"==typeof j.removeEventListener&&(j['removeEventListener']("updateend",k,!1),j['removeEventListener']("error",M,!1),j['removeEventListener']("abort",M,!1)),j.getClassName&&"TextSourceBuffer"===j['getClassName']()||a['removeSourceBuffer'](j)}catch(n){V['error']("Failed to remove source buffer from media source.")}j=null}q=!1}H=[],K=null,Q=0,W=null,Y=null,X=void 0,Z={},$=void 0}function r(){return j}function d(){try{return j?j.buffered:null}catch(a){return V['error']("getAllBufferRanges exception: "+a.message),null}}function p(){Y=null}function x(a){if(!a)return void K({'chunk':a,'error':new b["default"](h["default"].APPEND_ERROR_CODE,h["default"].APPEND_ERROR_MESSAGE)});var e=function(a){if(!a)return!1;var e=a.totalDuration,n=a.sampleEndTime;if(0===e&&0===n)return!1;if(a.mediaInfo&&a.mediaInfo.streamInfo&&a.mediaInfo.streamInfo.manifestInfo&&!a.mediaInfo.streamInfo.manifestInfo.isDynamic&&n>a.mediaInfo.streamInfo.manifestInfo.duration-.5)return!0;var l=L['getTime'](),E=l>0?n-l:0,o=I['getMinBufferToAppendData'](),i=a.mediaInfo?a.mediaInfo.type:void 0;return e>=o&&E>=o?!0:(V['info']("[minBufferToAppendData]bufferState is bufferStalled, waiting to append! mediaType: "+i+", totalDuration: "+e+", minBuffer: "+o+(", sampleEndTime: "+n+", playTime: "+l+", bufferTime: "+E)),!1)},n=function(a){if(a){var e=U['deepCopy'](a);e['bytes']=a['bytes']['slice'](0);var n=J['getSamplesInfo'](e.bytes,W),l=void 0,E=void 0;return n&&Q&&(l=n.totalDuration/Q,E=n['sampleList'][0]&&n['sampleList'][0].cts?n['sampleList'][0].cts/Q+j.timestampOffset+l:E),e['totalDuration']=l||0,e['sampleEndTime']=E||0,e}return null},l=function(a,e){return a&&e?(e['bytes']=U['concatArrayBuffer'](a.bytes,e.bytes),e['totalDuration']=a.totalDuration+e.totalDuration,e['sampleEndTime']=0===e.sampleEndTime?a.sampleEndTime:e.sampleEndTime,e):a&&!e?a:!a&&e?e:void 0};if("bufferStalled"===X&&I['getUseFetch']())if("InitializationSegment"===a.segmentType)Y&&(H['push'](Y),Y=null),H['push'](a);else{Y&&Y.representationId!==a.representationId&&(H['push'](Y),Y=null);var E=n(a),o=Y;Y=l(o,E),e(Y)?(H['push'](Y),Y=null):a.endFragment&&K&&K({'chunk':a})}else H['push'](a);q||P(j,s['bind'](this))}function v(a){j&&j.timestampOffset!==a&&!isNaN(a)&&P(j,function(){j['timestampOffset']=a})}function y(e,n,l){var E=this;P(j,function(){try{e>=0&&n>e&&(l||"ended"!==a.readyState)&&j['remove'](e,n),P(j,function(){N['trigger'](w["default"].SOURCEBUFFER_REMOVE_COMPLETED,{'buffer':E,'from':e,'to':n,'unintended':!1})})}catch(o){N['trigger'](w["default"].SOURCEBUFFER_REMOVE_COMPLETED,{'buffer':E,'from':e,'to':n,'unintended':!1,'error':new b["default"](o.code,o.message)})}})}function s(){var a=this;if(H.length>0){q=!0;var e=H[0];H['splice'](0,1);var n=[],l=function(){var l=d();D(a,n,l,e),H.length>0?s['call'](this):(q=!1,K&&K({'chunk':e}))};try{if(0===e.bytes.byteLength)l['call'](this);else{
if(n=d(),"InitializationSegment"===e.segmentType&&(T(e.bytes),e.mediaInfo.codec!==F&&void 0!==o(j.changeType)&&(j['changeType'](e.mediaInfo.codec),F=e.mediaInfo.codec)),V['info']("msk2_"+e.mediaInfo.type+", rep id: "+e.representationId+", index: "+e.index+", type: "+e.segmentType+(", byteLength: "+e.bytes.byteLength+",  bufferState: "+X)+(", lastVideoRepId: "+B)),"video"===e.mediaInfo.type)if(-1===B)B=e.representationId;else if("InitializationSegment"===e.segmentType)B=e.representationId;else if(B!=e.representationId)return void V['error']("mskError, last video representationId: "+B+", new video representationId: "+e.representationId);A(e),j.appendBuffer?j['appendBuffer'](e.bytes):j['append'](e.bytes,e),P(j,l['bind'](this))}}catch(E){V['fatal']('SourceBuffer append failed "'+E+'"'),H.length>0?s():q=!1,K&&K({'chunk':e,'error':new b["default"](E.code,E.message)})}}}function D(a,e,n,l){e&&e.length>0&&e.length<n.length&&m(e,l)&&N['trigger'](w["default"].SOURCEBUFFER_REMOVE_COMPLETED,{'buffer':a,'from':n['end'](n.length-2),'to':n['start'](n.length-1),'unintended':!0})}function m(a,e){for(var n=0;n<a.length;n++){var l=Math['round'](a['start'](n)),E=Math['round'](a['end'](n));if(E===e.start||l===e.end||e.start>=l&&e.end<=E)return!0}return!1}function C(e){if(j){if(!e)try{"open"===a.readyState?j['abort']():j.setTextTrack&&"ended"===a.readyState&&j['abort']()}catch(n){V['error']('SourceBuffer append abort failed: "'+n+'"')}H=[]}}function f(){if(G.length>0&&!j.updating){var a=G['shift']();a(),f()}}function g(){j&&j.updating||f()}function k(){j&&j.updating||f()}function M(){V['error']("SourceBufferSink error",e.type)}function P(a,e){G['push'](e),a&&!a.updating&&f()}function T(a){Q=J['getMediaTimescaleFromMoov'](a),W=J['getMediaDefaultInfoFromMoov'](a)}function u(a){X=a}function A(a){if("MediaSegment"===a.segmentType){var e=J['getResolutionFromMoov'](a.bytes);if(e&&(void 0===Z.width||void 0===Z.height||Z.width!==e.width&&Z.height!==e.height)&&(Z=Z||{},Z['width']=e.width,Z['height']=e.height,Z['isResolutionChanged']=!0,Z['isFromMoov']=!0,T(a.bytes)),Z&&Z.isResolutionChanged){$=U['concatArrayBuffer']($,a.bytes);var n=J['getSamplesInfo']($,W),l=n&&Q?n.totalDuration/Q:0;if(a.endFragment||l>=a.duration){if(n){for(var E=0,o=0;o<n.sampleList.length;o++){var i=n['sampleList'][o];E+=i.size}var t=Math['floor'](8*E/l),r={'mediaType':a.mediaInfo.type,'width':Z.width,'height':Z.height,'oldBandwidth':Z.bandwidth,'newBandwidth':t,'codec':a.mediaInfo.codec,'lang':a.mediaInfo.lang,'isFromMoov':!0};Z['bandwidth']=t?t:Z.bandwidth,Z['isResolutionChanged']=!1,V['info']("[Track Info from moov] type: "+a.mediaInfo.type+", bitrate: "+t+", resolution: "+Z.width+" * "+Z.height+", totalDuration: "+l+", chunk duration: "+a.duration+", sample size: "+E+", endFragment: "+a.endFragment),N['trigger'](w["default"].QUALITY_CHANGE_RENDERED,r)}$=void 0}}}}function R(){return Z.isFromMoov?!0:!1}var S=this.context,U=S.commonUtil,I=S.mediaPlayerModel,J=S['BoxParser'](S)['getInstance'](),L=S.VideoModel?S['VideoModel'](S)['getInstance']():null,N=c["default"](S)['getInstance'](),O=void 0,V=void 0,j=void 0,q=void 0,z=void 0,B=void 0,F=void 0,G=[],H=[],K=n,Q=0,W=null,X=void 0,Y=null,Z={},$=void 0;return O={'getAllBufferRanges':d,'getBuffer':r,'append':x,'remove':y,'abort':C,'reset':i,'updateTimestampOffset':v,'setBufferState':u,'isTrackInfoFromMoov':R,'clearChunk':p},E(),O}Object['defineProperty'](n,"__esModule",{'value':!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a(17),t=l(i),r=a(194),b=l(r),d=a(18),c=l(d),p=a(24),w=l(p),x=a(19),v=l(x),y=a(21),h=l(y);E['__visualon_factory_name']="SourceBufferSink";var s=v["default"]['getClassFactory'](E);n["default"]=s},{'17':17,'18':18,'19':19,'194':194,'21':21,'24':24}],'76':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){ua=m["default"](ca)['getInstance']()['getLogger'](Ta),h(),Na=p["default"](ca)['create']({'mediaPlayerModel':va,'metricsModel':Ca,'errHandler':Da,'dashMetrics':a.dashMetrics,'urlUtils':a.urlUtils}),n()}function n(){pa['on'](s["default"].BUFFERING_COMPLETED,aa,Ta),pa['on'](s["default"].DATA_UPDATE_COMPLETED,ea,Ta)}function l(){pa['off'](s["default"].DATA_UPDATE_COMPLETED,ea,Ta),pa['off'](s["default"].BUFFERING_COMPLETED,aa,Ta)}function E(){La&&(pa['on'](s["default"].KEY_ERROR,J,Ta),pa['on'](s["default"].SERVER_CERTIFICATE_UPDATED,J,Ta),pa['on'](s["default"].LICENSE_REQUEST_COMPLETE,L,Ta),pa['on'](s["default"].KEY_SYSTEM_SELECTED,N,Ta),pa['on'](s["default"].KEY_SESSION_CREATED,O,Ta),pa['on'](s["default"].KEY_STATUSES_CHANGED,V,Ta))}function o(){La&&(pa['off'](s["default"].KEY_ERROR,J,Ta),pa['off'](s["default"].SERVER_CERTIFICATE_UPDATED,J,Ta),pa['off'](s["default"].LICENSE_REQUEST_COMPLETE,L,Ta),pa['off'](s["default"].KEY_SYSTEM_SELECTED,N,Ta),pa['off'](s["default"].KEY_SESSION_CREATED,O,Ta),pa['off'](s["default"].KEY_STATUSES_CHANGED,V,Ta))}function t(a,e){Ua=a,La=e,E()}function b(a,e){if(!Ra){var n=void 0;return pa['on'](s["default"].CURRENT_TRACK_CHANGED,q,Ta),ba()?(X(),n=e):n=W(a,e),Ra=!0,n}return e}function c(a){for(var e=Aa?Aa.length:0,n=!1,l=0;e>l;l++){var E=Aa[l]['getFragmentModel']();E['removeExecutedRequestsBeforeTime'](g()+C()),Aa[l]['reset'](n,a)}Aa=[],Ra=!1,Sa=!1,ra(!1),pa['off'](s["default"].CURRENT_TRACK_CHANGED,q,Ta)}function w(){return Ra}function v(a){for(var e=0;e<Aa.length;)j(Aa[e]['getMediaInfo']())?(Aa[e]['setMediaSource'](a),e++):(Aa[e]['reset'](),Aa['splice'](e,1));for(var n=0;n<Aa.length;n++)Aa[n]['dischargePreBuffer']();if(0===Aa.length){var l="No streams to play.";Da['manifestError'](l,"nostreams",wa['getValue']()),Da['error'](new P["default"](f["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,l+"nostreams",wa['getValue']())),ua['fatal'](l)}}function h(){c(),Ua=null,Ia={},Ja=!1}function D(){ga&&ga['pause'](),Na&&(Na['reset'](),Na=null),Oa&&Oa['reset'](),h(),l(),o(),ra(!1)}function C(){return Ua?Ua.duration:NaN}function g(){return Ua?Ua.start:NaN}function k(){return Ua?Ua.id:null}function M(){return Ua}function T(){return Na}function u(){return Oa}function A(){if(!(fa&&fa['hasOwnProperty']("getBitrateList")&&ha&&ha['hasOwnProperty']("getAllMediaInfoForType")&&ha['hasOwnProperty']("getEventsFor")))throw new Error(i["default"].MISSING_CONFIG_ERROR)}function R(a){if(A(),a===i["default"].IMAGE)return Oa?Oa['getBitrateList']():[];var e=$(a);return fa['getBitrateList'](e)}function S(){Va&&Va['start']()}function U(){Va&&Va['stop']()}function I(a,e){e.error&&(Da['mediaKeySessionError'](a,e.error.message),ua['fatal'](e.error.message),D())}function J(a){a.error&&I("KEY_ERROR",a)}function L(a){a.error&&I("LICENSE_REQUEST_COMPLETE",a)}function N(a){a.error&&I("KEY_SYSTEM_SELECTED",a)}function O(a){a.error&&I("KEY_SESSION_CREATED",a)}function V(a){a.error&&I("KEY_STATUSES_CHANGED",a)}function j(a,e){var n=a.type,l=wa['getValue'](),E=void 0,o=void 0;return n===i["default"].MUXED&&a&&(o="It's multiplexed representations, but they are not compliant with the DASH-AVC/264 guidelines",ua['info'](o)),n===i["default"].TEXT||n===i["default"].FRAGMENTED_TEXT||n===i["default"].EMBEDDED_TEXT||n===i["default"].IMAGE?!0:(E=a.codec,ua['debug'](n+" codec: "+E),a.contentProtection&&!sa['supportsEncryptedMedia']()?(Da['capabilityError']("encryptedmedia",e),e&&(za=!0),!1):sa['supportsCodec'](E)?!0:(o=n+"Codec ("+E+") is not supported.",ua['error'](o),Da['manifestError'](o,"codec",l,void 0,e),e&&(za=!0),!1))}function q(a){if(a.newMediaInfo['streamInfo']['id']===Ua.id){var e=na(a.newMediaInfo);if(e){var n=ga['getTime']();ua['info']("Stream -  Process track changed at current time "+n);var l=a.newMediaInfo,E=wa['getValue']();ua['debug']("Stream -  Update stream controller"),E.refreshManifestOnSwitchTrack?(ua['debug']("Stream -  Refreshing manifest for switch track"),qa=a,ya['refreshManifest']()):(e['getIndexHandler']()['updateSegmentBaseLoader'](l.mimeType),e['selectMediaInfo'](l),l.type!==i["default"].FRAGMENTED_TEXT?(fa['updateTopQualityIndex'](l),e['switchTrackAsked'](),e['getFragmentModel']()['abortRequests']()):(e['getScheduleController']()['setSeekTarget'](NaN),ha['setIndexHandlerTime'](e,n),ha['resetIndexHandler'](e)))}}}function z(e,n,l,E){var o=r["default"](ca)['create']({'type':e.type,'mimeType':e.mimeType,'timelineConverter':ma,'adapter':ha,'manifestModel':wa,'dashManifestModel':xa,'mediaPlayerModel':va,'metricsModel':Ca,'dashMetrics':a.dashMetrics,'baseURLController':a.baseURLController,'stream':Ta,'abrController':fa,'domStorage':a.domStorage,'playbackController':ga,'mediaController':ka,'streamController':a.streamController,'textController':Ma,'errHandler':Da});if(o['initialize'](l),fa['updateTopQualityIndex'](e),E?(o['setBuffer'](E.buffer),o['getIndexHandler']()['setCurrentTime'](E.currentTime),Aa[E.replaceIdx]=o):Aa['push'](o),!E||!E.ignoreMediaInfo)if(e['type']===i["default"].TEXT||e['type']===i["default"].FRAGMENTED_TEXT){for(var t=void 0,b=0;b<n.length;b++)n[b]['index']===e.index&&(t=b),o['addMediaInfo'](n[b]);o['selectMediaInfo'](n[t])}else o['addMediaInfo'](e,!0)}function B(a){var e=!1;return e=i["default"]['VIDEO']===a?ha['getAllMediaInfoForType'](Ua,i["default"].AUDIO)?!0:!1:i["default"]['AUDIO']===a?ha['getAllMediaInfoForType'](Ua,i["default"].VIDEO)?!0:!1:i["default"]['MUXED']===a?!1:!0}function F(e,n){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,E=ha['getAllMediaInfoForType'](Ua,e);za=!1;var o=null,t=void 0;if(!E||0===E.length)return ua['info']("No "+e+" data."),!1;for(var r=0,b=E.length;b>r;r++){o=E[r];var d=0;if(e===i["default"].EMBEDDED_TEXT)Ma&&Ma['addEmbeddedTrack'](o);else{var c=B(e),p=d!==E.length-1||c&&l?!1:!0;if(!j(o,p)){d++;continue}ka['addTrack'](o)}}return e===i["default"].EMBEDDED_TEXT||0===ka['getTracksFor'](e,Ua).length?!1:e===i["default"].IMAGE?(Oa=x["default"](ca)['create']({'dashManifestModel':xa,'adapter':ha,'baseURLController':a.baseURLController,'stream':Ta,'timelineConverter':a.timelineConverter,'mediaPlayerModel':a.mediaPlayerModel,'metricsModel':a.metricsModel,'errHandler':a.errHandler,'dashMetrics':a.dashMetrics}),!1):((e!==i["default"].FRAGMENTED_TEXT||e===i["default"].FRAGMENTED_TEXT&&Ma&&Ma['getTextDefaultEnabled']())&&(ka['checkInitialMediaSettingsForType'](e,Ua),t=ka['getCurrentTrackFor'](e,Ua)),e===i["default"].FRAGMENTED_TEXT&&Ma&&!Ma['getTextDefaultEnabled']()&&(t=ka['getTracksFor'](e,Ua)[0]),pa['trigger'](s["default"].STREAM_INITIALIZING,{'streamInfo':Ua,'mediaInfo':o}),t?(z(t,E,n),!0):!1)}function G(){Va||(Va=d["default"](ca)['create'](),Va['setConfig']({'manifestUpdater':ya,'playbackController':ga}),H())}function H(){var a=ha['getEventsFor'](Ua);Va['addInlineEvents'](a)}function K(a){Va&&Va['addInbandEvents'](a)}function Q(a){var e=Pa['getElement'](),n=!1;return(null===e||e&&/^VIDEO$/i['test'](e.nodeName))&&(n=F(i["default"].VIDEO,a),za)?!1:(F(i["default"].AUDIO,a,n),za?!1:(F(i["default"].TEXT,a),F(i["default"].FRAGMENTED_TEXT,a),F(i["default"].EMBEDDED_TEXT,a),F(i["default"].MUXED,a),F(i["default"].IMAGE,a),!0))}function W(a,e){if(A(),G(),Ja=!0,Y(i["default"].VIDEO),Y(i["default"].AUDIO),!Q(a))return{};var n=_(e);if(Sa=!0,Ja=!1,0===Aa.length){var l="No streams to play.";Da['manifestError'](l,"nostreams",wa['getValue']()),Da['error'](new P["default"](f["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,l,wa['getValue']())),ua['fatal'](l)}else Z();return n}function X(){if(Ja=!0,A(),Y(i["default"].VIDEO),Y(i["default"].AUDIO),Sa=!0,Ja=!1,0===Aa.length){var a="No streams to play.";Da['manifestError'](a,"nostreams",wa['getValue']()),ua['debug'](a)}else Z()}function Y(a){var e=xa['getAdaptationForType'](wa['getValue'](),Ua.index,a,Ua);e&&Array['isArray'](e.Representation_asArray)&&(e['Representation_asArray']=e['Representation_asArray']['filter'](function(a,n){if(0===n)return!0;var l=xa['getCodec'](e,n,!0);return sa['supportsCodec'](l)?!0:(ua['error']("[Stream] codec not supported: "+l),!1)}))}function Z(){for(var a=Aa.length,e=!!Ia.audio||!!Ia.video,n=e?new P["default"](f["default"].DATA_UPDATE_FAILED_ERROR_CODE,f["default"].DATA_UPDATE_FAILED_ERROR_MESSAGE):null,l=0;a>l;l++)if(Aa[l]['isUpdating']()||Ja)return;if(Sa){if(La)for(var E=0;a>E&&Aa[E];E++)(Aa[E]['getType']()===i["default"].AUDIO||Aa[E]['getType']()===i["default"].VIDEO||Aa[E]['getType']()===i["default"].FRAGMENTED_TEXT||Aa[E]['getType']()===i["default"].MUXED)&&La['initializeForMedia'](Aa[E]['getMediaInfo']());pa['trigger'](s["default"].STREAM_INITIALIZED,{'streamInfo':Ua,'error':n}),ga['isPlaybackStarted']()||pa['trigger'](s["default"].STREAM_OPEN_COMPLETE,{'lowLatencyMode':va['getLowLatencyEnabled'](),'streamInfo':Ua})}}function $(a){for(var e=Aa.length,n=null,l=0;e>l;l++)if(n=Aa[l],n['getType']()===a)return n['getMediaInfo']();return null}function _(a){for(var e={},n=0,l=Aa.length;l>n;n++)e[Aa[n]['getType']()]=Aa[n]['createBuffer'](a)['getBuffer']();return e}function aa(a){if(a['streamInfo']===Ua){var e=la(),n=e.length;if(0===n)return void ua['warn']("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");for(var l=0;n>l;l++)if(!e[l]['isBufferingCompleted']()&&(e[l]['getType']()===i["default"].AUDIO||e[l]['getType']()===i["default"].VIDEO))return void ua['warn']("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor "+e[l]['getType']()+" is not buffering completed");ua['debug']("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),pa['trigger'](s["default"].STREAM_BUFFERING_COMPLETED,{'streamInfo':Ua})}}function ea(a){var e=a['sender']['getStreamProcessor']();e['getStreamInfo']()===Ua&&(Ia[e['getType']()]=a.error,Z())}function na(a){if(!a)return null;var e=la();return e['filter'](function(e){return e['getType']()===a.type})[0]}function la(){for(var a=Aa.length,e=[],n=void 0,l=void 0,E=0;a>E;E++)l=Aa[E],n=l['getType'](),(n===i["default"].AUDIO||n===i["default"].VIDEO||n===i["default"].FRAGMENTED_TEXT||n===i["default"].TEXT||n===i["default"].MUXED)&&e['push'](l);return e}function Ea(a){ua['info']("Manifest updated... updating data system wide."),Ra=!1,Ja=!0,Ua=a,Va&&H(),Y(i["default"].VIDEO),Y(i["default"].AUDIO);for(var e=0,n=Aa.length;n>e;e++){var l=Aa[e],E=ha['getMediaInfoForType'](Ua,l['getType']());fa['updateTopQualityIndex'](E),l['resetForUpdateData'](),l['addMediaInfo'](E,!0)}if(qa){var o=qa.newMediaInfo;if("fragmentedText"!==o.type){var t=na(qa.oldMediaInfo);if(!t)return;t['switchTrackAsked'](),qa=void 0}}Ja=!1,Z()}function oa(a){return ia(a,i["default"].VIDEO)&&ia(a,i["default"].AUDIO)}function ia(a,e){if(!a)return!1;var n=a['getStreamInfo'](),l=M();if(!n||!l)return!1;var E=xa['getAdaptationForType'](wa['getValue'](),n.index,e,n),o=xa['getAdaptationForType'](wa['getValue'](),l.index,e,l);if(!E||!o)return!E&&!o;if(E.ContentProtection&&!o.ContentProtection||!E.ContentProtection&&o.ContentProtection)return!1;var i=E&&o&&E['mimeType']===o.mimeType,t=o['Representation_asArray']['map'](function(a){return a.codecs}),r=E['Representation_asArray']['map'](function(a){return a.codecs}),b=r['some'](function(a){return t['indexOf'](a)>-1}),d=r['some'](function(a){return t['some'](function(e){return ta(e,a)})});return b||d&&i}function ta(a,e){var n=a['split'](".")[0],l=Ba['find'](function(a){return a['codec']===n}),E=0===e['indexOf'](n);return l?E||l['compatibleCodecs']['some'](function(a){return 0===e['indexOf'](a)}):E}function ra(a){ja=a}function ba(){return ja}function da(a,e){G(),Q(a),_(e),pa['on'](s["default"].CURRENT_TRACK_CHANGED,q,Ta);for(var n=0;n<Aa.length&&Aa[n];n++)Aa[n]['getScheduleController']()['start']();ra(!0)}a=a||{};var ca=this.context,pa=y["default"](ca)['getInstance'](),wa=a.manifestModel,xa=a.dashManifestModel,va=a.mediaPlayerModel,ya=a.manifestUpdater,ha=a.adapter,sa=a.capabilities,Da=a.errHandler,ma=a.timelineConverter,Ca=a.metricsModel,fa=a.abrController,ga=a.playbackController,ka=a.mediaController,Ma=a.textController,Pa=a.videoModel,Ta=void 0,ua=void 0,Aa=void 0,Ra=void 0,Sa=void 0,Ua=void 0,Ia=void 0,Ja=void 0,La=void 0,Na=void 0,Oa=void 0,Va=void 0,ja=void 0,qa=void 0,za=void 0,Ba=[{'codec':"avc1",'compatibleCodecs':["avc3"]},{'codec':"avc3",'compatibleCodecs':["avc1"]}];return Ta={'initialize':t,'activate':b,'deactivate':c,'isActive':w,'getDuration':C,'getStartTime':g,'getId':k,'getStreamInfo':M,'preload':da,'getFragmentController':T,'getThumbnailController':u,'getBitrateListFor':R,'startEventController':S,'stopEventController':U,'updateData':Ea,'reset':D,'getProcessors':la,'setMediaSource':v,'isCompatibleWithStream':oa,'getPreloaded':ba,'addInbandEvents':K},e(),Ta}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(77),r=l(t),b=a(86),d=l(b),c=a(87),p=l(c),w=a(174),x=l(w),v=a(18),y=l(v),h=a(24),s=l(h),D=a(17),m=l(D),C=a(21),f=l(C),g=a(19),k=l(g),M=a(194),P=l(M);E['__visualon_factory_name']="Stream",n["default"]=k["default"]['getClassFactory'](E)},{'17':17,'174':174,'18':18,'19':19,'194':194,'21':21,'24':24,'77':77,'79':79,'86':86,'87':87}],'77':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){la&&la['getIsDynamic']()&&(ya=r["default"](K)['create']({'timelineConverter':Z,'streamProcessor':ca})),b()}function n(e){Q=m["default"](K)['create']({'mimeType':Y,'timelineConverter':Z,'dashMetrics':ba,'metricsModel':ra,'mediaPlayerModel':aa,'baseURLController':a.baseURLController,'errHandler':X}),Q['initialize'](ca),na['registerStreamType'](W,ca),sa=ea['getFragmentController']()['getModel'](W),sa['setStreamProcessor'](ca),xa=F(W),va=x["default"](K)['create']({'type':W,'mimeType':Y,'metricsModel':ra,'adapter':$,'dashMetrics':ba,'dashManifestModel':da,'timelineConverter':Z,'mediaPlayerModel':aa,'abrController':na,'playbackController':la,'streamController':Ea,'textController':ia,'streamProcessor':ca,'mediaController':oa}),ha=y["default"](K)['create'](),ha['setConfig']({'abrController':na,'domStorage':ta,'metricsModel':ra,'dashMetrics':ba,'dashManifestModel':da,'manifestModel':_,'playbackController':la,'timelineConverter':Z,'streamProcessor':ca}),xa['initialize'](e),va['initialize'](),ha['initialize']()}function l(a){Da['push'](a)}function E(a){var e=Da['indexOf'](a);-1!==e&&Da['splice'](e,1)}function o(){return Da}function t(){Da=[]}function b(){wa=[],pa=null,t()}function c(a,e){Q['reset'](),xa&&(xa['reset'](a,e),xa=null),va&&(va['reset'](),va=null),ha&&(ha['reset'](),ha=null),na&&na['unRegisterStreamType'](W),Da['forEach'](function(a){a['reset']()}),b(),W=null,ea=null,ya&&(ya['reset'](),ya=null)}function w(){return ha?ha['isUpdating']():!1}function v(){return W}function h(){return ha}function s(){return Q}function D(){return ea?ea['getFragmentController']():null}function C(){return xa['getBuffer']()}function f(a){xa['setBuffer'](a)}function g(){return xa}function k(){return sa}function M(){return ya}function P(){return ea?ea['getStreamInfo']():null}function T(a){ea&&ea['addInbandEvents'](a)}function u(a){a===pa||a&&pa&&a.type!==pa.type||(pa=a),$['updateData'](this)}function A(a,e){-1===wa['indexOf'](a)&&wa['push'](a),e&&this['selectMediaInfo'](a)}function R(){return wa}function S(){return pa}function U(){return xa['getMediaSource']()}function I(a){xa['setMediaSource'](a,S())}function J(){xa['dischargePreBuffer']()}function L(){return va}function N(a){return $['getRepresentationInfo'](ha,a)}function O(){return xa?xa['getIsBufferingCompleted']():!1}function V(a){return xa?null!==xa['getRangeAt'](a,0):!1}function j(){return xa['getBufferLevel']()}function q(a,e){xa&&xa.switchInitData&&xa['switchInitData'](P().id,a,e)}function z(a){return xa['getBuffer']()||xa['createBuffer'](pa,a)}function B(){va['switchTrackAsked']()}function F(a){var e=null;return e=a===i["default"].VIDEO||a===i["default"].AUDIO||a===i["default"].MUXED?d["default"](K)['create']({'type':a,'metricsModel':ra,'mediaPlayerModel':aa,'manifestModel':_,'errHandler':X,'streamController':Ea,'mediaController':oa,'adapter':$,'textController':ia,'abrController':na,'playbackController':la,'streamProcessor':ca}):p["default"](K)['create']({'type':a,'mimeType':Y,'metricsModel':ra,'mediaPlayerModel':aa,'manifestModel':_,'errHandler':X,'streamController':Ea,'mediaController':oa,'adapter':$,'textController':ia,'abrController':na,'playbackController':la,'streamProcessor':ca})}function G(){return la}function H(a,e){wa=[]}a=a||{};var K=this.context,Q=void 0,W=a.type,X=a.errHandler,Y=a.mimeType,Z=a.timelineConverter,$=a.adapter,_=a.manifestModel,aa=a.mediaPlayerModel,ea=a.stream,na=a.abrController,la=a.playbackController,Ea=a.streamController,oa=a.mediaController,ia=a.textController,ta=a.domStorage,ra=a.metricsModel,ba=a.dashMetrics,da=a.dashManifestModel,ca=void 0,pa=void 0,wa=void 0,xa=void 0,va=void 0,ya=void 0,ha=void 0,sa=void 0,Da=void 0;return ca={'initialize':n,'isUpdating':w,'getType':v,'getBufferController':g,'getFragmentModel':k,'getScheduleController':L,'getLiveEdgeFinder':M,'getFragmentController':D,'getRepresentationController':h,'getIndexHandler':s,'getPlaybackController':G,'getRepresentationInfo':N,'getBufferLevel':j,'switchInitData':q,'isBufferingCompleted':O,'timeIsBuffered':V,'createBuffer':z,'getStreamInfo':P,'selectMediaInfo':u,'addMediaInfo':A,'switchTrackAsked':B,'getMediaInfoArr':R,'getMediaInfo':S,'getMediaSource':U,'setMediaSource':I,'dischargePreBuffer':J,'getBuffer':C,'setBuffer':f,'registerExternalController':l,'unregisterExternalController':E,'getExternalControllers':o,'unregisterAllExternalController':t,'addInbandEvents':T,'resetForUpdateData':H,'reset':c},e(),ca}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(186),r=l(t),b=a(85),d=l(b),c=a(171),p=l(c),w=a(91),x=l(w),v=a(32),y=l(v),h=a(19),s=l(h),D=a(27),m=l(D);E['__visualon_factory_name']="StreamProcessor",n["default"]=s["default"]['getClassFactory'](E)},{'171':171,'186':186,'19':19,'27':27,'32':32,'79':79,'85':85,'91':91}],'78':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e,n){var E=function(l,E){e['resolved']=!0,e['resolvedContent']=l?l:null,o['trigger'](v["default"].XLINK_ELEMENT_LOADED,{'element':e,'resolveObject':n,'error':l||E?null:new i["default"](D["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,D["default"].XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+a)})};if(a===l)E(null,!0);else{var r=new c["default"](a,b.HTTPRequest.XLINK_EXPANSION_TYPE);t['load']({'request':r,'success':function(a){E(a)},'error':function(){E(null)}})}}function n(){t&&(t['abort'](),t=null)}a=a||{};var l="urn:mpeg:dash:resolve-to-zero:2013",E=this.context,o=w["default"](E)['getInstance'](),t=r["default"](E)['create']({'errHandler':a.errHandler,'metricsModel':a.metricsModel,'mediaPlayerModel':a.mediaPlayerModel,'requestModifier':a.requestModifier,'errors':D["default"],'useFetch':a['mediaPlayerModel']['getUseFetch']()}),d=void 0;return d={'load':e,'reset':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(194),i=l(o),t=a(128),r=l(t),b=a(214),d=a(205),c=l(d),p=a(18),w=l(p),x=a(24),v=l(x),y=a(19),h=l(y),s=a(21),D=l(s);E['__visualon_factory_name']="XlinkLoader",n["default"]=h["default"]['getClassFactory'](E)},{'128':128,'18':18,'19':19,'194':194,'205':205,'21':21,'214':214,'24':24}],'79':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a),this['init']()}return E(a,[{'key':"init",'value':function(){this['STREAM']="stream",this['VIDEO']="video",this['AUDIO']="audio",this['TEXT']="text",this['FRAGMENTED_TEXT']="fragmentedText",this['EMBEDDED_TEXT']="embeddedText",this['MUXED']="muxed",this['IMAGE']="image",this['LOCATION']="Location",this['INITIALIZE']="initialize",this['TEXT_SHOWING']="showing",this['TEXT_HIDDEN']="hidden",this['CC1']="CC1",this['CC3']="CC3",this['STPP']="stpp",this['TTML']="ttml",this['VTT']="vtt",this['WVTT']="wvtt",this['UTF8']="utf-8",this['SUGGESTED_PRESENTATION_DELAY']="suggestedPresentationDelay",this['SCHEME_ID_URI']="schemeIdUri",this['START_TIME']="starttime",this['ABR_STRATEGY_DYNAMIC']="abrDynamic",this['ABR_STRATEGY_BOLA']="abrBola",this['ABR_STRATEGY_THROUGHPUT']="abrThroughput",this['MOVING_AVERAGE_SLIDING_WINDOW']="slidingWindow",this['MOVING_AVERAGE_EWMA']="ewma",this['BAD_ARGUMENT_ERROR']="Invalid Arguments",this['MISSING_CONFIG_ERROR']="Missing config parameter(s)",this['SERVICE_DESCRIPTION_LL_SCHEME']="urn:dvb:dash:lowlatency:scope:2019",this['SUPPLEMENTAL_PROPERTY_LL_SCHEME']="urn:dvb:dash:lowlatency:critical:2019",this['XML']="XML",this['ARRAY_BUFFER']="ArrayBuffer",this['TEXT_KIND']="subtitles",this['VTTBOX']="vttbox"}}]),a}(),i=new o;n["default"]=i},{}],'80':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a),this['init']()}return E(a,[{'key':"init",'value':function(){this['TCP_CONNECTION']="TcpList",this['HTTP_REQUEST']="HttpList",this['TRACK_SWITCH']="RepSwitchList",this['BUFFER_LEVEL']="BufferLevel",this['BUFFER_LOADED']="bufferLoaded",this['ABANDON_LOAD']="abandonload",this['ALLOW_LOAD']="allowload",this['BUFFER_EMPTY']="bufferStalled",this['BUFFER_STATE']="BufferState",this['DVR_INFO']="DVRInfo",this['DROPPED_FRAMES']="DroppedFrames",this['SCHEDULING_INFO']="SchedulingInfo",this['REQUESTS_QUEUE']="RequestsQueue",this['MANIFEST_UPDATE']="ManifestUpdate",this['MANIFEST_UPDATE_STREAM_INFO']="ManifestUpdatePeriodInfo",this['MANIFEST_UPDATE_TRACK_INFO']="ManifestUpdateRepresentationInfo",this['PLAY_LIST']="PlayList",this['DVB_ERRORS']="DVBErrors"}}]),a}(),i=new o;n["default"]=i},{}],'81':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a),this['init']()}return E(a,[{'key':"init",'value':function(){this['CLEARKEY_KEYSTEM_STRING']="org.w3.clearkey",this['WIDEVINE_KEYSTEM_STRING']="com.widevine.alpha",this['PLAYREADY_KEYSTEM_STRING']="com.microsoft.playready",this['PLAYREADY_KEYSTEM_STRING_CAST']="com.chromecast.playready"}}]),a}(),i=new o;n["default"]=i},{}],'82':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){Ma=fa['getLogger'](ka),E()}function e(a,e){Xa[a]=P["default"](Ca)['create'](),Ia[a]=e,Ja[a]=Ja[a]||{},Ja[a]['state']=N,$a[a]=!1,ga['on'](s["default"].LOADING_PROGRESS,ma,this),a==r["default"].VIDEO&&(ga['on'](s["default"].QUALITY_CHANGE_RENDERED,c,this),Ya=u["default"](Ca)['create'](),sa()),ga['on'](s["default"].METRIC_ADDED,w,this),ga['on'](s["default"].PERIOD_SWITCH_COMPLETED,l,this),Za=R["default"](Ca)['create']({'mediaPlayerModel':Ka,'logger':Ma})}function n(a){delete Ia[a]}function l(){Pa=i["default"](Ca)['create']({'metricsModel':_a,'dashMetrics':ae,'mediaPlayerModel':Ka,'adapter':Ga}),Pa['initialize']()}function E(){ua={'video':!0,'audio':!0},Aa={},Ra={},Sa={},Ua={},Ja={},Ia={},Xa={},$a={},Na=!1,ee=!0,Oa=!1,Va=!1,void 0===ja&&(ja=!1),Wa=void 0,Ya=void 0,Za=void 0,clearTimeout(La),La=null}function o(){E(),ga['off'](s["default"].LOADING_PROGRESS,ma,this),ga['off'](s["default"].QUALITY_CHANGE_RENDERED,c,this),ga['off'](s["default"].METRIC_ADDED,w,this),ga['off'](s["default"].PERIOD_SWITCH_COMPLETED,l,this),Pa&&Pa['reset']()}function t(a){a&&(a.streamController&&(Ta=a.streamController),a.domStorage&&(Qa=a.domStorage),a.mediaPlayerModel&&(Ka=a.mediaPlayerModel),a.metricsModel&&(_a=a.metricsModel),a.dashMetrics&&(ae=a.dashMetrics),a.dashManifestModel&&(Fa=a.dashManifestModel),a.adapter&&(Ga=a.adapter),a.manifestModel&&(Ba=a.manifestModel),a.videoModel&&(Ha=a.videoModel))}function b(){if(!Qa||!Qa['hasOwnProperty']("getSavedBitrateSettings"))throw new Error(r["default"].MISSING_CONFIG_ERROR)}function c(a){a.mediaType!==r["default"].VIDEO||a.isFromMoov||(Wa=a.oldQuality,Ya['push'](Wa,Ha['getPlaybackQuality']()))}function w(a){a.metric!==d["default"].HTTP_REQUEST||!a.value||a.value.type!==S.HTTPRequest.MEDIA_SEGMENT_TYPE||a.mediaType!==r["default"].AUDIO&&a.mediaType!==r["default"].VIDEO&&a.mediaType!==r["default"].MUXED||Za['push'](a.mediaType,a.value,ee,pa(a.mediaType)),a.metric!==d["default"].BUFFER_LEVEL||a.mediaType!==r["default"].AUDIO&&a.mediaType!==r["default"].VIDEO&&a.mediaType!==r["default"].MUXED||ta(a.mediaType,.001*a.value.level)}function v(a,e){var n=void 0;return Aa[e]=Aa[e]||{},Aa[e]['hasOwnProperty'](a)||(Aa[e][a]=0),n=va(Aa[e][a],a),n=ya(n,a,Aa[e][a]),n=Da(n,a)}function h(a){if(a&&Ia&&Ia[a]){var e=Ia[a]['getStreamInfo']();if(e&&e.id){var n=v(a,e.id),l=ia(Ia[a]['getMediaInfo']());return l[n]?l[n]:null}}return null}function D(a){b();var e=Qa['getSavedBitrateSettings'](a);if(!Sa['hasOwnProperty'](a))if(Ua['hasOwnProperty'](a)){var n=Ba['getValue'](),l=Fa['getAdaptationForType'](n,0,a).Representation;if(Array['isArray'](l)){var E=Math['max'](Math['round'](l.length*Ua[a])-1,0);Sa[a]=l[E].bandwidth}else Sa[a]=0}else isNaN(e)?Sa[a]=a===r["default"].VIDEO?O:V:Sa[a]=e;return Sa[a]}function m(a,e){J['checkIsVideoOrAudioType'](a),J['checkParameterType'](e,"number"),Sa[a]=e,Va=!0}function C(){return Va}function g(a){return Ua['hasOwnProperty'](a)?Ua[a]:null}function M(a,e){Ua[a]=e}function T(a){return H(a)&&Sa['hasOwnProperty']("max")&&Sa['max']['hasOwnProperty'](a)?Sa['max'][a]:NaN}function A(a){return H(a)&&Sa['hasOwnProperty']("min")&&Sa['min']['hasOwnProperty'](a)?Sa['min'][a]:NaN}function U(a,e){J['checkParameterType'](e,"number"),J['checkIsVideoOrAudioType'](a),Sa['max']=Sa.max||{},Sa['max'][a]=e}function q(a,e){J['checkParameterType'](e,"number"),J['checkIsVideoOrAudioType'](a),Sa['min']=Sa.min||{},Sa['min'][a]=e}function z(a){var e=T(a);return e?oa(Ia[a]['getMediaInfo'](),e):void 0}function B(a){var e=A(a);if(e){var n=Ia[a]['getMediaInfo'](),l=ia(n),E=oa(n,e);return l[E]&&E<l.length-1&&l[E].bitrate<1e3*e&&E++,E}return void 0}function F(a){return Ua['hasOwnProperty']("max")&&Ua['max']['hasOwnProperty'](a)?Ua['max'][a]:1}function G(a,e){Ua['max']=Ua.max||{},Ua['max'][a]=e}function H(a){return ua[a]}function K(a,e){J['checkParameterType'](e,"boolean"),J['checkIsVideoOrAudioType'](a),ua[a]=e}function Q(){return Na}function W(a){J['checkParameterType'](a,"boolean"),Na=a}function X(){return Oa}function Y(a){J['checkParameterType'](a,"boolean"),Oa=a}function Z(){return ee}function $(a){J['checkParameterType'](a,"boolean"),ee=a}function _(a){if(a&&Ia&&Ia[a]){var e=Ia[a]['getStreamInfo'](),n=e?e.id:null,l=pa(a),E=f["default"](Ca)['create']({'abrController':ka,'streamProcessor':Ia[a],'currentValue':l,'switchHistory':Xa[a],'droppedFramesHistory':Ya,'useBufferOccupancyABR':ra(a)});if(Ya){var o=Ha['getPlaybackQuality']();o&&Ya['push'](Wa,o)}if(H(a)){var i=B(a),t=v(a,n),r=Pa['getMaxQuality'](E),b=r.quality;if(0>b&&(b=l),void 0!==i&&i>b&&(b=i),b>t&&(b=t),Xa[a]['push']({'oldValue':l,'newValue':b}),b>k["default"].NO_CHANGE&&b!=l)(Ja[a]['state']===N||b>l)&&ea(a,l,b,t,r.reason);else if(fa['getLogToBrowserConsole']()){var d=ae['getCurrentBufferLevel'](_a['getReadOnlyMetricsFor'](a));Ma['debug']("AbrController ("+a+") stay on "+l+"/"+t+" (buffer: "+d+")")}}}}function aa(a,e,n,l){var E=e.id,o=pa(a);J['checkInteger'](n);var i=v(a,E);n!==o&&n>=0&&i>=n&&ea(a,o,n,i,l)}function ea(a,e,n,l,E){if(a&&Ia[a]){var o=Ia[a]['getStreamInfo'](),i=o?o.id:null;if(fa['getLogToBrowserConsole']()){var t=ae['getCurrentBufferLevel'](_a['getReadOnlyMetricsFor'](a));Ma['info']("AbrController ("+a+") switch from "+e+" to "+n+"/"+l+" (buffer: "+t+") "+(E?JSON['stringify'](E):"."))}wa(a,i,n),ga['trigger'](s["default"].QUALITY_CHANGE_REQUESTED,{'mediaType':a,'streamInfo':o,'oldQuality':e,'newQuality':n,'reason':E})}}function na(a,e){Ja[a]['state']=e}function la(a){return Ja[a]?Ja[a].state:null}function Ea(a,e){for(var n=1e3*D(a),l=ia(e),E=j,o=0;o<l.length;o++){if(o===l.length-1){E=o;break}if(l[o+1].bitrate>n&&l[o+1].bitrate-n>=n-l[o].bitrate){E=o;break}}return Ma['info']("choose startup bitrate, "+a+" "+l.length+" level(s) found, first bitrate:"+l[E].bitrate),E}function oa(a,e,n){var l=a&&a.type?Ia[a.type]['getRepresentationInfo']():null;if(ee&&n&&l&&l.fragmentDuration){n/=1e3;var E=l.fragmentDuration;if(n>E)return 0;var o=n/E;e*=1-o}for(var i=ia(a),t=i.length-1;t>=0;t--){var r=i[t];if(1e3*e>=r.bitrate)return t}return j}function ia(a){var e=[];if(!a||!a.bitrateList)return e;for(var n=a.bitrateList,l=a.type,E=void 0,o=0,i=n.length;i>o;o++)E=new p["default"],E['mediaType']=l,E['qualityIndex']=o,E['bitrate']=n[o].bandwidth,E['width']=n[o].width,E['height']=n[o].height,E['scanType']=n[o].scanType,e['push'](E);return e}function ta(a,e){var n=Ka['getABRStrategy']();if(n===r["default"].ABR_STRATEGY_BOLA)return void($a[a]=!0);if(n===r["default"].ABR_STRATEGY_THROUGHPUT)return void($a[a]=!1);var l=Ka['getStableBufferTime'](),E=l,o=.5*l,i=$a[a],t=e>(i?o:E);$a[a]=t,t!==i&&(t?Ma['info']("AbrController ("+a+") switching from throughput to buffer occupancy ABR rule (buffer: "+e['toFixed'](3)+")."):Ma['info']("AbrController ("+a+") switching from buffer occupancy to throughput ABR rule (buffer: "+e['toFixed'](3)+")."));
}function ra(a){return $a[a]}function ba(){return Za}function da(a){var e=a.type,n=a.streamInfo.id,l=a.representationCount-1;return xa(e,n,l),l}function ca(a){var e=a.id,n=pa(r["default"].AUDIO),l=pa(r["default"].VIDEO),E=n===v(r["default"].AUDIO,e)&&l===v(r["default"].VIDEO,e);return E}function pa(a,e){if(a&&Ia[a]){var n=Ia[a]['getStreamInfo'](),l=n?n.id:null,E=void 0;if(l)return Ra[l]=Ra[l]||{},Ra[l]['hasOwnProperty'](a)||wa(a,l,j),E=Ra[l][a].quality,e?Ra[l][a]:E}return e?{'quality':j,'ts':Date['now']()}:j}function wa(a,e,n){Ra[e]=Ra[e]||{},Ra[e][a]={'quality':n,'ts':Date['now']()}}function xa(a,e,n){Aa[e]=Aa[e]||{},Aa[e][a]=n}function va(a,e){var n=a;if(!Ia[e])return n;var l=B(e);void 0!==l&&(n=Math['max'](a,l));var E=z(e);return void 0!==E&&(n=Math['min'](n,E)),n}function ya(a,e,n){var l=F(e);return isNaN(l)||l>=1||0>l?a:Math['min'](a,Math['round'](n*l))}function ha(a){ja=a}function sa(){if(Ha){var a=Oa&&window['hasOwnProperty']("devicePixelRatio"),e=a?window.devicePixelRatio:1;qa=Ha['getClientWidth']()*e,za=Ha['getClientHeight']()*e}}function Da(a,e){if(e!==r["default"].VIDEO||!Na||!Ia[e]||!H(e))return a;ja||sa();var n=Ba['getValue'](),l=Fa['getAdaptationForType'](n,0,e).Representation,E=a;if(qa>0&&za>0){for(;E>0&&l[E]&&qa<l[E].width&&qa-l[E-1].width<l[E].width-qa;)E-=1;l.length-2>=E&&l[E]['width']===l[E+1].width&&(E=Math['min'](a,E+1))}return E}function ma(a){var e=a.request.mediaType;if(H(e)){var n=Ia[e];if(!n)return;var l=f["default"](Ca)['create']({'abrController':ka,'streamProcessor':n,'currentRequest':a.request,'useBufferOccupancyABR':ra(e)}),E=Pa['shouldAbandonFragment'](l);if(E.quality>k["default"].NO_CHANGE){var o=n['getFragmentModel'](),i=o['getRequests']({'state':x["default"].FRAGMENT_MODEL_LOADING,'index':a.request.index})[0];if(i){var t=Ga['getIndexHandlerTime'](n),r=i.startTime+1e-4;Ma['debug']("onFragmentLoadProgress, old time: "+t+", reset dash index handler time: "+r),Ga['setIndexHandlerTime'](n,r),o['abortRequests'](),na(e,L),Xa[e]['reset'](),Xa[e]['push']({'oldValue':pa(e),'newValue':E.quality,'confidence':1,'reason':E.reason}),aa(e,Ta['getActiveStreamInfo'](),E.quality,E.reason),clearTimeout(La),La=setTimeout(function(){na(e,N),La=null},Ka['getAbandonLoadTimeout']())}}}}var Ca=this.context,fa=I["default"](Ca)['getInstance'](),ga=y["default"](Ca)['getInstance'](),ka=void 0,Ma=void 0,Pa=void 0,Ta=void 0,ua=void 0,Aa=void 0,Ra=void 0,Sa=void 0,Ua=void 0,Ia=void 0,Ja=void 0,La=void 0,Na=void 0,Oa=void 0,Va=void 0,ja=void 0,qa=void 0,za=void 0,Ba=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ka=void 0,Qa=void 0,Wa=void 0,Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,_a=void 0,ae=void 0,ee=void 0;return ka={'isPlayingAtTopQuality':ca,'updateTopQualityIndex':da,'getThroughputHistory':ba,'getBitrateList':ia,'getQualityForBitrate':oa,'getMaxAllowedBitrateFor':T,'getTopBitrateInfoFor':h,'getMinAllowedBitrateFor':A,'setMaxAllowedBitrateFor':U,'setMinAllowedBitrateFor':q,'getMaxAllowedIndexFor':z,'getMinAllowedIndexFor':B,'getMaxAllowedRepresentationRatioFor':F,'setMaxAllowedRepresentationRatioFor':G,'getInitialBitrateFor':D,'setInitialBitrateFor':m,'isUseInitialBitrateByPortal':C,'getStartupQualityFor':Ea,'getInitialRepresentationRatioFor':g,'setInitialRepresentationRatioFor':M,'setAutoSwitchBitrateFor':K,'getAutoSwitchBitrateFor':H,'getUseDeadTimeLatency':Z,'setUseDeadTimeLatency':$,'setLimitBitrateByPortal':W,'getLimitBitrateByPortal':Q,'getUsePixelRatioInLimitBitrateByPortal':X,'setUsePixelRatioInLimitBitrateByPortal':Y,'getQualityFor':pa,'getAbandonmentStateFor':la,'setPlaybackQuality':aa,'checkPlaybackQuality':_,'getTopQualityIndexFor':v,'setElementSize':sa,'setWindowResizeEventCalled':ha,'createAbrRulesCollection':l,'registerStreamType':e,'unRegisterStreamType':n,'setConfig':t,'reset':o},a(),ka}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(159),i=l(o),t=a(79),r=l(t),b=a(80),d=l(b),c=a(193),p=l(c),w=a(119),x=l(w),v=a(18),y=l(v),h=a(24),s=l(h),D=a(19),m=l(D),C=a(155),f=l(C),g=a(156),k=l(g),M=a(157),P=l(M),T=a(154),u=l(T),A=a(158),R=l(A),S=a(214),U=a(17),I=l(U),J=a(189),L="abandonload",N="allowload",O=1e3,V=100,j=0;E['__visualon_factory_name']="AbrController";var q=m["default"]['getSingletonFactory'](E);q['ABANDON_LOAD']=L,q['QUALITY_DEFAULT']=j,m["default"]['updateSingletonFactory'](E.__visualon_factory_name,q),n["default"]=q},{'119':119,'154':154,'155':155,'156':156,'157':157,'158':158,'159':159,'17':17,'18':18,'189':189,'19':19,'193':193,'214':214,'24':24,'79':79,'80':80}],'83':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){h['invalidateSelectedIndexes'](a.entry)}function e(){h=i["default"](w)['create'](),D=r["default"](w)['create'](),x['on'](s["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,a,b)}function n(a){a.baseURLTreeModel&&(h=a.baseURLTreeModel),a.baseURLSelector&&(D=a.baseURLSelector),a.dashManifestModel&&(c=a.dashManifestModel)}function l(a){h['update'](a),D['chooseSelectorFromManifest'](a)}function E(a){var e=h['getForPath'](a),n=e['reduce'](function(a,e){var n=D['select'](e);return n?(v['isRelative'](n.url)?a['url']=v['resolve'](n.url,a.url):(a['url']=n.url,a['serviceLocation']=n.serviceLocation),a['availabilityTimeOffset']=n.availabilityTimeOffset,a['availabilityTimeComplete']=n.availabilityTimeComplete,a):new p["default"]},new p["default"]);return v['isRelative'](n.url)?void 0:n}function o(){h['reset'](),D['reset']()}function t(a){h['setConfig']({'dashManifestModel':c}),D['setConfig']({'dashManifestModel':c}),l(a)}var b=void 0,c=void 0,w=this.context,x=y["default"](w)['getInstance'](),v=d["default"](w)['getInstance'](),h=void 0,D=void 0;return b={'reset':o,'initialize':t,'resolve':E,'setConfig':n},e(),b}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(118),i=l(o),t=a(176),r=l(t),b=a(190),d=l(b),c=a(53),p=l(c),w=a(19),x=l(w),v=a(18),y=l(v),h=a(24),s=l(h);E['__visualon_factory_name']="BaseURLController",n["default"]=x["default"]['getClassFactory'](E)},{'118':118,'176':176,'18':18,'19':19,'190':190,'24':24,'53':53}],'84':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){return i.length&&a&&a.length?-1!==i['indexOf'](a):!1}function n(a){-1===i['indexOf'](a)&&(i['push'](a),t['trigger'](b,{'entry':a}))}function l(a){n(a.entry)}function E(){d&&t['on'](d,l,this)}function o(){i=[]}a=a||{};var i=[],t=r["default"](this.context)['getInstance'](),b=a.updateEventName,d=a.addBlacklistEventName;return E(),{'add':n,'contains':e,'reset':o}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(18),r=l(t);E['__visualon_factory_name']="BlackListController",n["default"]=i["default"]['getClassFactory'](E)},{'18':18,'19':19}],'85':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){Ha=P["default"](Ra)['getInstance']()['getLogger'](Ga),Ee=u["default"](Ra)['getInstance'](),ua()}function n(){return B}function l(a){Da(a),Ka=ja['getQualityFor'](za),Sa['on'](m["default"].DATA_UPDATE_COMPLETED,ra,this),Sa['on'](m["default"].INIT_FRAGMENT_LOADED,b,this),Sa['on'](m["default"].MEDIA_FRAGMENT_LOADED,w,this),Sa['on'](m["default"].QUALITY_CHANGE_REQUESTED,C,this),Sa['on'](m["default"].STREAM_COMPLETED,ba,this),Sa['on'](m["default"].PLAYBACK_PLAYING,Q,this),Sa['on'](m["default"].PLAYBACK_PROGRESS,H,this),Sa['on'](m["default"].PLAYBACK_TIME_UPDATED,H,this),Sa['on'](m["default"].PLAYBACK_RATE_CHANGED,pa,this),Sa['on'](m["default"].PLAYBACK_SEEKING,g,this),Sa['on'](m["default"].PLAYBACK_SEEKED,T,this),Sa['on'](m["default"].PLAYBACK_STALLED,K,this),Sa['on'](m["default"].WALLCLOCK_TIME_UPDATED,ca,this),Sa['on'](m["default"].CURRENT_TRACK_CHANGED,da,this,s["default"].EVENT_PRIORITY_HIGH),Sa['on'](m["default"].SOURCEBUFFER_REMOVE_COMPLETED,ia,this)}function E(a,e){if(!Ee||!a||!Ba)return null;if(Ya)try{_a=e&&e[za]?d["default"](Ra)['create'](Ya,a,D['bind'](this),e[za]):d["default"](Ra)['create'](Ya,a,D['bind'](this)),_a&&_a['getBuffer']()&&"function"==typeof _a['getBuffer']().initialize&&_a['getBuffer']()['initialize'](za,Ba)}catch(n){return Ha['fatal']("Caught error on create SourceBuffer: "+n),Ja['mediaSourceError']("Error creating "+za+" source buffer."),Ja['error'](new R["default"](U["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,U["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+za)),_a}else _a=p["default"](Ra)['create'](D['bind'](this));return ta(Ba['getRepresentationInfo'](Ka).MSETimeOffset),_a}function o(){_a&&ae&&"function"==typeof ae.discharge&&!function(){var a=ae['getAllBufferRanges']();if(a&&a.length>0){for(var e="Beginning "+za+"PreBuffer discharge, adding buffer for:",n=0;n<a.length;n++)e+=" start: "+a['start'](n)+", end: "+a['end'](n)+";";Ha['debug'](e)}else Ha['debug']("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var l=ae['discharge'](),E=null,o=function(a){var e=l[a],n=Ee['extract'](e.streamId,za,e.representationId);n['forEach'](function(a){a&&(E!==a&&(_a['append'](a),E=a),_a['append'](e))})},i=0;i<l.length;i++)o(i);ae['reset'](),ae=null}()}function t(){return Ba&&La&&Ba['getStreamInfo']()}function b(a){a['fragmentModel']===Ba['getFragmentModel']()&&a.chunk&&a['chunk']['representationId']===Ba['getRepresentationInfo']().id&&(Ha['info']("Init fragment finished loading saving to",za+"'s init cache"),a.chunk.bytes&&(Ee['save'](a.chunk),Ha['debug']("[load]Append Init fragment",za," with representationId:",a.chunk.representationId," and quality:",a.chunk.quality),v(a.chunk)))}function c(a,e,n){var l=Ee['extract'](a,za,e),E=!1;l['forEach'](function(a){be=n===!0?n:!1,a&&(Ha['info']("[extract]Append Init fragment",za," with representationId:",a.representationId," and quality:",a.quality),v(a),E=!0)}),E||Sa['trigger'](m["default"].INIT_REQUESTED,{'sender':Ga})}function w(a){if(a['fragmentModel']===Ba['getFragmentModel']()){var e=a.chunk,n=e.bytes,l=e.quality,E=Ba['getRepresentationInfo'](l);if(e){if(e.representationId!==E.id)return Ba['getFragmentModel']()['cleanupRequests'](),isNaN(e.start)||Oa['setIndexHandlerTime'](Ba,e.start+1e-4),void Sa['trigger'](m["default"].FRAGMENT_LOADING_ABANDONED,{'streamProcessor':Ba,'bDiscard':!0,'droppedBytes':e.bytes?e.bytes.byteLength:0});if(void 0!==ie)if(!_a.setTextTrack&&M()&&k(),Pa(E.quality,e.index)||Ta(E.quality,e.index)&&0===ie||ie+F>=e.start&&ie+F<e.start+e.duration)ie=void 0;else{if(!(qa['getTrickPlayRate']()<0&&e.start<qa['getTime']()))return Ba['getFragmentModel']()['cleanupRequests'](),void 0!==ie&&Oa['setIndexHandlerTime'](Ba,ie),void Sa['trigger'](m["default"].FRAGMENT_LOADING_ABANDONED,{'streamProcessor':Ba,'bDiscard':!0,'loadBytes':e.bytes?e.bytes.byteLength:0});Ha['info']("don't need to reset time handler!")}var o=Oa['getEventsFor'](E.mediaInfo,Ba),i=Oa['getEventsFor'](E,Ba);if(o&&o.length>0||i&&i.length>0){var t=Ba['getFragmentModel']()['getRequests']({'state':r["default"].FRAGMENT_MODEL_EXECUTED,'quality':l,'index':e.index})[0],b=ea(n,t,o,i);Ba['addInbandEvents'](b)}if(be){de=e;var d=_a&&_a['getAllBufferRanges']();d&&d.length>0&&qa['getTimeToStreamEnd']()>V&&(Ha['debug']("Clearing buffer because track changed - "+(d['end'](d.length-1)+j)),Ea([{'start':0,'end':d['end'](d.length-1)+j,'force':!0}]))}else v(e)}}}function v(a){if(ce){var e=Ba['getRepresentationInfo'](),n=Ba['getType']();"video"===n&&e.bandwidth>12e6?G=!0:"video"===n&&(G=!1),G&&na()}_a['append'](a),!a.bytes.byteLength||a.mediaInfo.type!==i["default"].VIDEO&&a.mediaInfo.type!==i["default"].MUXED||Sa['trigger'](m["default"].VIDEO_CHUNK_RECEIVED,{'chunk':a})}function h(a){if(a&&a.length>0)for(var e=0,n=a.length;n>e;e++)Ha['debug']("Buffered Range for type:",za,":",a['start'](e)," - ",a['end'](e)," currentTime = ",qa['getTime']())}function D(a){if(a.error){if(a['error']['code']===z&&(Xa=.8*ga(),Ha['warn']("Quota exceeded for type: "+za+", Critical Buffer: "+Xa),Xa>0)){var e=Math['max'](.2*Xa,1),n=Xa-e;Ia['setBufferToKeep'](parseFloat(e['toFixed'](5))),Ia['setBufferAheadToKeep'](parseFloat(n['toFixed'](5)))}return void(a.error.code!==z&&ka()||(Ha['warn']("Clearing playback buffer to overcome quota exceed situation for type: "+za),Sa['trigger'](m["default"].QUOTA_EXCEEDED,{'sender':Ga,'criticalBufferLevel':Xa}),A()))}var l=a.chunk;l&&!isNaN(l.index)&&(Za=Math['max'](l.index,Za),$());var E=_a['getAllBufferRanges']();if(l['segmentType']===I.HTTPRequest.MEDIA_SEGMENT_TYPE)h(E),H();else if(be){var o=qa['getTime']();Ha['debug']("AppendToBuffer seek target should be "+o),Ba['getScheduleController']()['setSeekTarget'](o),Oa['setIndexHandlerTime'](Ba,o)}var i={'sender':Ga,'segmentType':l.segmentType,'quality':l.quality,'startTime':l.start,'index':l.index,'bufferedRanges':E};l&&!l.endFragment?Sa['trigger'](m["default"].BYTES_APPENDED,i):l&&Sa['trigger'](m["default"].BYTES_APPENDED_END_FRAGMENT,i)}function C(a){Ka!==a.newQuality&&za===a.mediaType&&Ba['getStreamInfo']()['id']===a.streamInfo.id&&(ta(Ba['getRepresentationInfo'](a.newQuality).MSETimeOffset),Ka=a.newQuality)}function g(a){Qa&&(te=!0,Qa=!1,$a=Number.POSITIVE_INFINITY),ie=a.seekTime,H(),qa['getTrickPlayRate']()>0&&(_a['clearChunk'](),za!==i["default"].FRAGMENTED_TEXT&&A()),qa['isPaused']()&&ee===O&&Sa['trigger'](m["default"].PLAYBACK_WAITING)}function k(){var a=_a['getAllBufferRanges']();if(a)for(var e=0;e<a.length;++e)_a['remove'](a['start'](e),a['end'](e),!0)}function M(){return qa['getTrickPlayRate']()<0?!1:(Wa=X(qa['getTime']()||0),Wa>0?!1:Wa>0?!1:!0)}function T(){oe=void 0}function A(){var a=S();a&&0!==a.length||H(),Ea(a)}function S(){var a=[],e=_a['getAllBufferRanges']();if(!e||0===e.length)return a;var n=qa['getTime'](),l=e['end'](e.length-1)+j,E=Ba['getFragmentModel']()['getRequests']({'state':r["default"].FRAGMENT_MODEL_EXECUTED,'time':n,'threshold':q})[0];if(E){var o={'start':0,'end':E.startTime-V},i=Ba['getFragmentModel']()['getRequests']({'state':r["default"].FRAGMENT_MODEL_EXECUTED,'time':E.startTime-E.duration/2,'threshold':q})[0];i&&i.startTime!=E.startTime&&(o['end']=i.startTime),o.start<o.end&&o.end>e['start'](0)&&a['push'](o);var t={'start':E.startTime+E.duration+V,'end':l},b=Ba['getFragmentModel']()['getRequests']({'state':r["default"].FRAGMENT_MODEL_EXECUTED,'time':E.startTime+E.duration+V,'threshold':q})[0];b&&b.startTime!==E.startTime&&(t['start']=b.startTime+b.duration+V),t.start<t.end&&t.start<l&&a['push'](t)}else Ha['debug']("getAllRangesWithSafetyFactor for",za,"- No request found in current time position, removing full buffer 0 -",l),a['push']({'start':0,'end':l});return a}function J(){var a=qa['getTime']();if(oe){var e=_a['getAllBufferRanges']();e&&e.length&&(a=Math['max'](e['start'](0),oe,a))}return a}function H(){(!be||za===i["default"].FRAGMENTED_TEXT&&Va&&Va['isTextEnabled']())&&(Y(),Z())}function K(){_()}function Q(){_()}function W(a,e){var n=_a['getAllBufferRanges'](),l=0,E=0,o=null,i=null,t=0,r=void 0,b=void 0,d=e||.15;if(null!==n&&void 0!==n){for(b=0,r=n.length;r>b;b++)if(l=n['start'](b),E=n['end'](b),null===o)t=Math['abs'](l-a),a>=l&&E>a?(o=l,i=E):d>=t&&(o=l,i=E);else{if(t=l-i,!(d>=t))break;i=E}if(null!==o)return{'start':o,'end':i}}return null}function X(a,e){var n=void 0,l=void 0;return n=W(a,e),l=null===n?0:qa['getTrickPlayRate']()<0?a-n.start:n.end-a}function Y(){qa&&(Wa=X(J()||0),Ha['debug']("Buffer level: "+Wa+" for type: "+za+" , time: "+J()+", latency: "+qa['getCurrentLiveLatency']()+(", target latency: "+Ia['getLiveDelay']()+" , curPlaybackRate: "+qa['getPlaybackRate']())),Sa['trigger'](m["default"].BUFFER_LEVEL_UPDATED,{'sender':Ga,'bufferLevel':Wa}),_())}function Z(){t()&&(Ua['addBufferState'](za,ee,Ba['getScheduleController']()['getBufferTarget']()),Ua['addBufferLevel'](za,new Date,1e3*Wa))}function $(){var a=Za>=$a-1;a&&!Qa&&void 0===_a.discharge&&(Qa=!0,Ha['debug']("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),Sa['trigger'](m["default"].BUFFERING_COMPLETED,{'sender':Ga,'streamInfo':Ba['getStreamInfo']()}))}function _(){("audio"===za||"video"===za)&&(te&&!Qa&&Wa>0&&qa&&qa['getTrickPlayRate']()>0&&qa['getTimeToStreamEnd']()-Wa<V&&(te=!1,Qa=!0,Ha['debug']("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),Sa['trigger'](m["default"].BUFFERING_COMPLETED,{'sender':Ga,'streamInfo':Ba['getStreamInfo']()})),Wa=X(J()||0),!(!Ia['getUseFetch']()&&V>Wa||0===Wa)||Qa||qa['getTrickPlayRate']()<0&&qa['getTime']()<V?(Qa||Wa>=Ia['getStableBufferTime']())&&aa(N):aa(O))}function aa(a){ee===a||a===O&&0===qa['getTime']()||za===i["default"].FRAGMENTED_TEXT&&Va&&!Va['isTextEnabled']()||(ee=a,_a['setBufferState'](a),Z(),Sa['trigger'](m["default"].BUFFER_LEVEL_STATE_CHANGED,{'sender':Ga,'state':a,'mediaType':za,'streamInfo':Ba['getStreamInfo']()}),Sa['trigger'](a===N?m["default"].BUFFER_LOADED:m["default"].BUFFER_EMPTY,{'mediaType':za}),Ha['debug'](a===N?"Got enough buffer to start for "+za:"Waiting for more buffer before starting playback for "+za))}function ea(a,e,n,l){for(var E=Math['max'](!e||isNaN(e.startTime)?0:e.startTime,0),o=[],i=[],t=n['concat'](l),r=0,b=t.length;b>r;r++)o[t[r].schemeIdUri]=t[r];for(var d=f["default"](Ra)['getInstance']()['parse'](a),c=d['getBoxes']("emsg"),p=0,w=c.length;w>p;p++){var x=Oa['getEvent'](c[p],o,E);x&&i['push'](x)}return i}function na(){_a&&za!==i["default"].FRAGMENTED_TEXT&&(Qa||Ea(la()))}function la(){var a=[],e=_a['getAllBufferRanges']();if(!e||0===e.length)return a;var n=qa['getTime'](),l={};qa['getTrickPlayRate']()>0?(l['start']=Math['max'](0,n-Ia['getBufferToKeep']()),l['end']=e['end'](e.length-1)):(l['start']=Math['max'](0,n-Ia['getBufferAheadToKeep']()),l['end']=n+Ia['getBufferToKeep']());var E=Ba['getFragmentModel']()['getRequests']({'state':r["default"].FRAGMENT_MODEL_EXECUTED,'time':n,'threshold':q})[0];if(E)l['start']=Math['min'](E.startTime,l.start),l['end']=Math['max'](E.startTime+E.duration,l.end);else if(0===n&&qa['getIsDynamic']())return[];if(ce&&G){var o=Ba['getRepresentationInfo']();n%o.fragmentDuration<=1?l['start']=n-o.fragmentDuration/2:l['start']=n-o.fragmentDuration,l['end']=n+20}if(e['start'](0)<=l.start){for(var i={'start':0,'end':l.start},t=0;t<e.length&&e['end'](t)<=l.start;t++)i['end']=e['end'](t);i.start<i.end&&a['push'](i)}if(e['end'](e.length-1)>l.end){var b={'start':l.end,'end':e['end'](e.length-1)+q};b.start<b.end&&a['push'](b)}return a}function Ea(a){a&&_a&&0!==a.length&&(re['push']['apply'](re,a),le||oa())}function oa(){if(0===re.length||!_a)return Ha['debug']("Nothing to prune, halt pruning"),re=[],void(le=!1);var a=_a['getBuffer']();if(!a||!a.buffered||0===a.buffered.length)return Ha['debug']("SourceBuffer is empty (or does not exist), halt pruning"),re=[],void(le=!1);var e=re['shift']();Ha['debug']("Removing",za,"buffer from:",e.start,"to",e.end),le=!0;var n=qa['getTime']();n<e.end&&(Qa=!1,Za=0,be||(Ba['getScheduleController']()['setSeekTarget'](n),Oa['setIndexHandlerTime'](Ba,n))),_a['remove'](e.start,e.end,e.force)}function ia(a){if(_a===a.buffer){Ha['debug']("onRemoved buffer from:",a.from,"to",a.to);var e=_a['getAllBufferRanges']();h(e),0===re.length&&(le=!1),a.unintended&&(Ha['warn']("Detected unintended removal from:",a.from,"to",a.to,"setting index handler time to",a.from),Oa['setIndexHandlerTime'](Ba,a.from)),le?oa():(be?(be=!1,de&&v(de)):(Ha['debug']("onRemoved : call updateBufferLevel"),Y()),Sa['trigger'](m["default"].BUFFER_CLEARED,{'sender':Ga,'from':a.from,'to':a.to,'unintended':a.unintended,'hasEnoughSpaceToAppend':ka()}))}}function ta(a){_a&&_a.updateTimestampOffset&&_a['updateTimestampOffset'](a)}function ra(a){a['sender']['getStreamProcessor']()!==Ba||a.error||ta(a.currentRepresentation.MSETimeOffset)}function ba(a){a['fragmentModel']===Ba['getFragmentModel']()&&($a=a.request.index,$())}function da(a){var e=_a&&_a['getAllBufferRanges']();e&&a['newMediaInfo']['type']===za&&a.newMediaInfo['streamInfo']['id']===Ba['getStreamInfo']().id&&(Ha['info']("Track change asked"),Na['getSwitchMode'](za)===y["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&e&&e.length>0&&qa['getTimeToStreamEnd']()>V&&(Qa=!1,$a=Number.POSITIVE_INFINITY))}function ca(a){if(a&&a.expectedPlaying){ne++;var e=ne*(Ia['getWallclockTimeUpdateInterval']()/1e3);if(e>=Ia['getBufferPruningInterval']()){if(ne=0,qa['getTrickPlayRate']()<0)return;na()}}}function pa(){_()}function wa(){return za}function xa(){return Ba}function va(a){oe=a}function ya(){return _a}function ha(a){_a=a}function sa(){return Wa}function Da(a,e){Ya=a,_a&&e&&"function"==typeof _a.discharge&&(ae=_a,E(e))}function ma(){return Ya}function Ca(){return Qa}function fa(){return le}function ga(){var a=_a['getAllBufferRanges'](),e=0,n=void 0,l=void 0;if(!a)return e;for(l=0,n=a.length;n>l;l++)e+=a['end'](l)-a['start'](l);return e}function ka(){var a=ga();return Xa>a}function Ma(){return _a?_a['isTrackInfoFromMoov']():!1}function Pa(a,e){if(qa['getIsDynamic']())return!1;var n=Ba['getRepresentationController']()['getRepresentationForQuality'](a);return n['segmentInfoType']===L["default"].SEGMENT_TEMPLATE&&e+1===n.availableSegmentsNumber?!0:!1}function Ta(a,e){if(qa['getIsDynamic']())return!1;var n=Ba['getRepresentationController']()['getRepresentationForQuality'](a);return n['segmentInfoType']===L["default"].SEGMENT_TIMELINE&&0===e?!0:!1}function ua(a,e){Xa=Number.POSITIVE_INFINITY,ee=void 0,Ka=x["default"].QUALITY_DEFAULT,$a=Number.POSITIVE_INFINITY,Za=0,Qa=!1,le=!1,te=!1,Wa=0,ne=0,re=[],_a&&(a||_a['abort'](e),qa&&0==qa['getTime']()&&k(),_a['reset'](e),_a=null),be=!1,ie=void 0}function Aa(a,e){Sa['off'](m["default"].DATA_UPDATE_COMPLETED,ra,this),Sa['off'](m["default"].QUALITY_CHANGE_REQUESTED,C,this),Sa['off'](m["default"].INIT_FRAGMENT_LOADED,b,this),Sa['off'](m["default"].MEDIA_FRAGMENT_LOADED,w,this),Sa['off'](m["default"].STREAM_COMPLETED,ba,this),Sa['off'](m["default"].CURRENT_TRACK_CHANGED,da,this),Sa['off'](m["default"].PLAYBACK_PLAYING,Q,this),Sa['off'](m["default"].PLAYBACK_PROGRESS,H,this),Sa['off'](m["default"].PLAYBACK_TIME_UPDATED,H,this),Sa['off'](m["default"].PLAYBACK_RATE_CHANGED,pa,this),Sa['off'](m["default"].PLAYBACK_SEEKING,g,this),Sa['off'](m["default"].PLAYBACK_SEEKED,T,this),Sa['off'](m["default"].PLAYBACK_STALLED,K,this),Sa['off'](m["default"].WALLCLOCK_TIME_UPDATED,ca,this),Sa['off'](m["default"].SOURCEBUFFER_REMOVE_COMPLETED,ia,this),ua(a,e)}a=a||{};var Ra=this.context;Ra['BoxParser']=f["default"];var Sa=s["default"](Ra)['getInstance'](),Ua=a.metricsModel,Ia=a.mediaPlayerModel,Ja=a.errHandler,La=a.streamController,Na=a.mediaController,Oa=a.adapter,Va=a.textController,ja=a.abrController,qa=a.playbackController,za=a.type,Ba=a.streamProcessor,Fa=Ra.commonUtil;Ra['mediaPlayerModel']=Ia;var Ga=void 0,Ha=void 0,Ka=void 0,Qa=void 0,Wa=void 0,Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,_a=void 0,ae=void 0,ee=void 0,ne=void 0,le=void 0,Ee=void 0,oe=void 0,ie=void 0,te=void 0,re=void 0,be=void 0,de=void 0,ce=Fa['isWebOSApp']();return Ga={'getBufferControllerType':n,'initialize':l,'createBuffer':E,'dischargePreBuffer':o,'getType':wa,'getStreamProcessor':xa,'setSeekStartTime':va,'getBuffer':ya,'setBuffer':ha,'getBufferLevel':sa,'getRangeAt':W,'setMediaSource':Da,'getMediaSource':ma,'getIsBufferingCompleted':Ca,'switchInitData':c,'getIsPruningInProgress':fa,'reset':Aa,'clearAllBuffers':k,'isTrackInfoFromMoov':Ma},e(),Ga}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(119),r=l(t),b=a(75),d=l(b),c=a(74),p=l(c),w=a(82),x=l(w),v=a(88),y=l(v),h=a(18),s=l(h),D=a(24),m=l(D),C=a(177),f=l(C),g=a(19),k=l(g),M=a(17),P=l(M),T=a(184),u=l(T),A=a(194),R=l(A),S=a(21),U=l(S),I=a(214),J=a(31),L=l(J),N="bufferLoaded",O="bufferStalled",V=.5,j=.5,q=.01,z=22,B="BufferController",F=.01,G=!1;E['__visualon_factory_name']=B;var H=k["default"]['getClassFactory'](E);H['BUFFER_LOADED']=N,H['BUFFER_EMPTY']=O,k["default"]['updateClassFactory'](E.__visualon_factory_name,H),n["default"]=H},{'119':119,'17':17,'177':177,'18':18,'184':184,'19':19,'194':194,'21':21,'214':214,'24':24,'31':31,'74':74,'75':75,'79':79,'82':82,'88':88}],'86':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){k=r["default"](D)['getInstance']()['getLogger'](g),e()}function e(){I=!1,M={},P={},T={},u=null,A=f?500:100,R=A/1e3}function n(){if(!S||!U)throw new Error("setConfig function has to be called previously")}function l(){null!==u&&I&&(clearInterval(u),u=null,I=!1)}function E(){n(),k['debug']("Start Event Controller"),I||isNaN(A)||(I=!0,clearInterval(u),u=setInterval(c,A))}function o(a){if(n(),M={},a)for(var e=0;e<a.length;e++){var l=a[e];M[l.id]=l,k['debug']("Add inline event with id "+l.id)}k['debug']("Added "+a.length+" inline events")}function i(a){n();for(var e=0;e<a.length;e++){var l=a[e];l.id in P?k['debug']("Repeated event with id "+l.id):(l['eventStream']['schemeIdUri']===h&&void 0===P[l.id]&&t(l),P[l.id]=l,k['debug']("Add inband event with id "+l.id))}}function t(a){if(a['eventStream']['value']==s){var e=a.eventStream.timescale||1,n=a.presentationTime/e,l=void 0;l=4294967295==a.presentationTime?NaN:(a.presentationTime+a.duration)/e,k['info']("Manifest validity changed: Valid until: "+n+"; remaining duration: "+l),C['trigger'](p["default"].MANIFEST_VALIDITY_CHANGED,{'id':a.id,'validUntil':n,'newDuration':l,'newManifestValidAfter':NaN})}}function b(){if(T)for(var a=U['getTime'](),e=Object['keys'](T),n=0;n<e.length;n++){var l=e[n],E=T[l];null!==E&&(E.duration+E.presentationTime)/E.eventStream.timescale<a&&(k['debug']("Remove Event "+l+" at time "+a),E=null,delete T[l])}}function c(){x(P),x(M),b()}function w(){n(),S['refreshManifest']()}function x(a){var e=U['getTime'](),n=void 0;if(a)for(var l=Object['keys'](a),E=0;E<l.length;E++){var o=l[E],i=a[o];void 0!==i&&(n=i.presentationTime/i.eventStream.timescale,(0===n||e>=n&&n+R>e)&&(k['debug']("Start Event "+o+" at "+e),i.duration>0&&(T[o]=i),i['eventStream']['schemeIdUri']==h&&i['eventStream']['value']==s?(0!==i.duration||0!==i.presentationTimeDelta)&&w():C['trigger'](i.eventStream.schemeIdUri,{'event':i}),delete a[o]))}}function v(a){a&&(a.manifestUpdater&&(S=a.manifestUpdater),a.playbackController&&(U=a.playbackController))}function y(){l(),e()}var h="urn:mpeg:dash:event:2012",s=1,D=this.context,m=D.commonUtil,C=d["default"](D)['getInstance'](),f=m['isWebOSApp']()||m['isTizenApp']()||m['isChromecast'](),g=void 0,k=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=void 0,I=void 0;return g={'addInlineEvents':o,'addInbandEvents':i,'stop':l,'start':E,'setConfig':v,'reset':y},a(),g}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(17),r=l(t),b=a(18),d=l(b),c=a(24),p=l(c);E['__visualon_factory_name']="EventController",n["default"]=i["default"]['getClassFactory'](E)},{'17':17,'18':18,'19':19,'24':24}],'87':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){g=M["default"](p)['getInstance']()['getLogger'](f),E(),x['on'](C["default"].FRAGMENT_LOADING_COMPLETED,d,f),x['on'](C["default"].FRAGMENT_LOADING_PROGRESS,d,f)}function n(e){var n=k[e];return n||(n=w["default"](p)['create']({'metricsModel':m,'mediaPlayerModel':s,'fragmentLoader':v["default"](p)['create']({'metricsModel':m,'mediaPlayerModel':s,'errHandler':y,'requestModifier':h["default"](p)['getInstance'](),'constants':i["default"],'dashConstants':r["default"],'dashMetrics':a.dashMetrics,'urlUtils':a.urlUtils})}),k[e]=n),n}function l(a){return a&&a.type&&a['type']===b.HTTPRequest.INIT_SEGMENT_TYPE}function E(){for(var a in k)k[a]['reset']();k={}}function o(){x['off'](C["default"].FRAGMENT_LOADING_COMPLETED,d,this),x['off'](C["default"].FRAGMENT_LOADING_PROGRESS,d,this),E()}function t(a,e,n,l){var E=new c["default"];return E['streamId']=n,E['mediaInfo']=e.mediaInfo,E['segmentType']=e.type,E['start']=e.startTime,E['duration']=e.duration,E['end']=E.start+E.duration,E['bytes']=a,E['index']=e.index,E['quality']=e.quality,E['representationId']=e.representationId,E['endFragment']=l,E}function d(a){if(k[a.request.mediaType]===a.sender){var e=a.request,n=a.response,E=l(e),o=e.mediaInfo.streamInfo;if(!n||!o)return void g['warn']("No "+e.mediaType+" bytes to push or stream is inactive.");var i=t(n,e,o.id,a.type!==C["default"].FRAGMENT_LOADING_PROGRESS);x['trigger'](E?C["default"].INIT_FRAGMENT_LOADED:C["default"].MEDIA_FRAGMENT_LOADED,{'chunk':i,'fragmentModel':a.sender})}}a=a||{};var p=this.context,x=D["default"](p)['getInstance'](),y=a.errHandler,s=a.mediaPlayerModel,m=a.metricsModel,f=void 0,g=void 0,k=void 0;return f={'getModel':n,'isInitializationRequest':l,'reset':o},e(),f}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(31),r=l(t),b=a(214),d=a(195),c=l(d),p=a(119),w=l(p),x=a(69),v=l(x),y=a(188),h=l(y),s=a(18),D=l(s),m=a(24),C=l(m),f=a(19),g=l(f),k=a(17),M=l(k);E['__visualon_factory_name']="FragmentController",n["default"]=g["default"]['getClassFactory'](E)},{'119':119,'17':17,'18':18,'188':188,'19':19,'195':195,'214':214,'24':24,'31':31,'69':69,'79':79}],'88':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){L=x["default"](U)['getInstance']()['getLogger'](J),M()}function e(a,e){var n=c(a),E=l(a,e),o=[];return a===i["default"].FRAGMENTED_TEXT?void t(E[0]):(n||(n=q['getSavedMediaSettings'](a),b(a,n)),void(E&&0!==E.length&&(n&&E['forEach'](function(a){T(n,a)&&o['push'](a)}),t(0===o.length?R(E):o.length>1?R(o):o[0]))))}function n(a){if(a){var e=a.type;if(f(e)){var n=a.streamInfo.id;N[n]||(N[n]=S());for(var l=N[n][e].list,o=0,i=l.length;i>o;++o)if(g(l[o],a))return;l['push'](a);var r=c(e);r&&T(r,a)&&!E(e,a.streamInfo)&&t(a)}}}function l(a,e){if(!a||!e)return[];var n=e.id;return N[n]&&N[n][a]?N[n][a].list:[]}function E(a,e){return!a||!e||e&&!N[e.id]?null:N[e.id][a].current}function o(a){if(!a)return!1;var e=a.type,n=a.streamInfo.id;return N[n]&&N[n][e]&&g(N[n][e].current,a)}function t(a){if(a){var e=a.type,n=a.streamInfo,l=n.id,o=E(e,n);if(N[l]&&N[l][e]&&!g(a,o)){N[l][e]['current']=a,N[l][e].current&&I['trigger'](r["default"].CURRENT_TRACK_CHANGED,{'oldMediaInfo':o,'newMediaInfo':a,'switchMode':j[e]});var i=P(a);i&&N[l][e].storeLastSettings&&(i.roles&&(i['role']=i['roles'][0],delete i.roles),i.accessibility&&(i['accessibility']=i['accessibility'][0]),i.audioChannelConfiguration&&(i['audioChannelConfiguration']=i['audioChannelConfiguration'][0]),q['setSavedMediaSettings'](e,i))}}}function b(a,e){a&&e&&(O[a]=e)}function c(a){return a?O[a]:null}function p(a,e){var n=-1!==z['indexOf'](e);return n?void(j[a]=e):void L['warn']("Track switch mode is not supported: "+e)}function w(a){return j[a]}function m(a){var e=-1!==B['indexOf'](a);return e?void(V=a):void L['warn']("Track selection mode is not supported: "+a)}function C(){return V||D}function f(a){return a===i["default"].AUDIO||a===i["default"].VIDEO||a===i["default"].TEXT||a===i["default"].FRAGMENTED_TEXT||a===i["default"].IMAGE||a===i["default"].MUXED}function g(a,e){if(!a&&!e)return!0;if(!a||!e)return!1;var n=a['id']===e.id,l=a['viewpoint']===e.viewpoint,E=a['lang']===e.lang,o=a['roles']['toString']()===e['roles']['toString'](),i=a['accessibility']['toString']()===e['accessibility']['toString'](),t=a['audioChannelConfiguration']['toString']()===e['audioChannelConfiguration']['toString']();return n&&l&&E&&o&&i&&t}function k(a){a&&a.domStorage&&(q=a.domStorage)}function M(){N={},A(),u()}function P(a){var e={'lang':a.lang,'viewpoint':a.viewpoint,'roles':a.roles,'accessibility':a.accessibility,'audioChannelConfiguration':a.audioChannelConfiguration},n=e.lang||e.viewpoint||e.role&&e.role.length>0||e.accessibility&&e.accessibility.length>0||e.audioChannelConfiguration&&e.audioChannelConfiguration.length>0;return n?e:null}function T(a,e){var n=!a.lang||a['lang']===e.lang,l=!a.viewpoint||a['viewpoint']===e.viewpoint,E=!a.role||!!e['roles']['filter'](function(e){return e===a.role})[0],o=!a.accessibility||!!e['accessibility']['filter'](function(e){return e===a.accessibility})[0],i=!a.audioChannelConfiguration||!!e['audioChannelConfiguration']['filter'](function(e){return e===a.audioChannelConfiguration})[0];return n&&l&&E&&o&&i}function u(){j={'audio':y,'video':v}}function A(){O={'audio':null,'video':null}}function R(a){var e=C(),n=[],l=function(a){var e=0,n=[],l=void 0;return a['forEach'](function(a){l=Math['max']['apply'](Math,a['bitrateList']['map'](function(a){return a.bandwidth})),l>e?(e=l,n=[a]):l===e&&n['push'](a)}),n},E=function(a){var e=0,n=[],l=void 0;return a['forEach'](function(a){l=a.representationCount,l>e?(e=l,n=[a]):l===e&&n['push'](a)}),n};switch(e){case h:n=l(a),n.length>1&&(n=E(n));break;case s:n=E(a),n.length>1&&(n=l(a));break;default:L['warn']("Track selection mode is not supported: "+e)}return n[0]}function S(){return{'audio':{'list':[],'storeLastSettings':!0,'current':null},'video':{'list':[],'storeLastSettings':!0,'current':null},'muxed':{'list':[],'storeLastSettings':!0,'current':null},'text':{'list':[],'storeLastSettings':!0,'current':null},'fragmentedText':{'list':[],'storeLastSettings':!0,'current':null},'image':{'list':[],'storeLastSettings':!0,'current':null}}}var U=this.context,I=d["default"](U)['getInstance'](),J=void 0,L=void 0,N=void 0,O=void 0,V=void 0,j=void 0,q=void 0,z=[y,v],B=[h,s];return J={'checkInitialMediaSettingsForType':e,'addTrack':n,'getTracksFor':l,'getCurrentTrackFor':E,'isCurrentTrack':o,'setTrack':t,'setInitialSettings':b,'getInitialSettings':c,'setSwitchMode':p,'getSwitchMode':w,'setSelectionModeForInitialTrack':m,'getSelectionModeForInitialTrack':C,'isMultiTrackSupportedByType':f,'isTracksEqual':g,'setConfig':k,'reset':M},a(),J}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(24),r=l(t),b=a(18),d=l(b),c=a(19),p=l(c),w=a(17),x=l(w),v="neverReplace",y="alwaysReplace",h="highestBitrate",s="widestRange",D=h;E['__visualon_factory_name']="MediaController";var m=p["default"]['getSingletonFactory'](E);m['TRACK_SWITCH_MODE_NEVER_REPLACE']=v,m['TRACK_SWITCH_MODE_ALWAYS_REPLACE']=y,m['TRACK_SELECTION_MODE_HIGHEST_BITRATE']=h,m['TRACK_SELECTION_MODE_WIDEST_RANGE']=s,m['DEFAULT_INIT_TRACK_SELECTION_MODE']=D,p["default"]['updateSingletonFactory'](E.__visualon_factory_name,m),n["default"]=m},{'17':17,
18:18,'19':19,'24':24,'79':79}],'89':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){b=r["default"](d)['getInstance']()['getLogger'](t)}function e(){var a="WebKitMediaSource"in window,e="MediaSource"in window;return e?new MediaSource:a?new WebKitMediaSource:null}function n(a,e){var n=window['URL']['createObjectURL'](a);return e['setSource'](n),n}function l(a){a['setSource'](null)}function E(a,e){return a.duration!=e&&(a['duration']=e),a.duration}function o(a,e,n){a&&"function"==typeof a.setLiveSeekableRange&&"function"==typeof a.clearLiveSeekableRange&&"open"===a.readyState&&e>=0&&n>e&&(a['clearLiveSeekableRange'](),a['setLiveSeekableRange'](e,n))}function i(a){var e=a.sourceBuffers,n=e.length;if("open"===a.readyState){for(var l=0;n>l;l++){if(e[l].updating)return;if(0===e[l].buffered.length)return}b['info']("call to mediaSource endOfStream"),a['endOfStream']()}}var t=void 0,b=void 0,d=this.context;return t={'createMediaSource':e,'attachMediaSource':n,'detachMediaSource':l,'setDuration':E,'setSeekable':o,'signalEndOfStream':i},a(),t}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(17),r=l(t);E['__visualon_factory_name']="MediaSourceController",n["default"]=i["default"]['getSingletonFactory'](E)},{'17':17,'19':19}],'90':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){Ya=y["default"](Ga)['getInstance']()['getLogger'](Xa),j()}function e(a,e,l){de=a,Ba(),ce=de.manifestInfo.isDynamic,he=!1,se=!1,oe=de.start,ye=e;var E=Ka['isSafari']();De=E?.25:.02,ue=l,Ha['on'](p["default"].DATA_UPDATE_COMPLETED,W,this),Ha['on'](p["default"].BYTES_APPENDED_END_FRAGMENT,ha,this),Ha['on'](p["default"].BYTES_APPENDED,ha,this),Ha['on'](p["default"].LOADING_PROGRESS,sa,this),Ha['on'](p["default"].BUFFER_LEVEL_STATE_CHANGED,Da,this),Ha['on'](p["default"].PERIOD_SWITCH_STARTED,n,this),Ha['on'](p["default"].PLAYBACK_PROGRESS,pa,this),Ha['on'](p["default"].PLAYBACK_TIME_UPDATED,pa,this),Ha['on'](p["default"].PLAYBACK_ENDED,ra,this),Ha['on'](p["default"].STREAM_INITIALIZING,Ca,this),we&&(we=!1,o())}function n(a){!ce&&a.fromStreamInfo&&void 0!==te[a.fromStreamInfo.id]&&(delete be[a.fromStreamInfo.id],delete te[a.fromStreamInfo.id])}function l(){return parseFloat((E()-v())['toFixed'](5))}function E(){var a=F(!0),e=ce?a-de.start:0;return a+(de.duration-e)}function o(a){return de&&le&&le['getElement']()?a?(le['removeEventListener']("play",Y),le['play'](),setTimeout(function(){le['addEventListener']("play",Y)},300),void 0):le['play']():(we=!0,{'name':"OtherError",'message':"Initialization is not completed !"})}function t(){return de&&le?le['isPaused']():null}function b(a){de&&le&&(a?(le['removeEventListener']("pause",_),Ha['trigger'](p["default"].PLAYBACK_WAITING),le['pause'](),setTimeout(function(){le['addEventListener']("pause",_)},300)):le['pause']())}function c(){return de&&le?le['isSeeking']():null}function w(a,e,n){if(le&&!(0>a)){var l=Oa(a);de&&le&&(n===!0?l!==le['getTime']()&&(le['removeEventListener']("seeking",aa),Ya['info']("Requesting internal seek to time: "+l),le['setCurrentTime'](l,e)):(Ha['trigger'](p["default"].PLAYBACK_SEEK_ASKED),le['addEventListener']("seeking",aa),Ya['info']("Requesting seek to time: "+l),le['setCurrentTime'](l,e)))}}function x(){var a=$a['getReadOnlyMetricsFor'](i["default"].VIDEO)||$a['getReadOnlyMetricsFor'](i["default"].AUDIO),e=_a['getCurrentDVRInfo'](a),n=e?e.range:null;w(n.end-pe['getLiveDelay'](),!0,!1)}function v(){return de&&le?le['getTime']():null}function h(){return le?le['getBufferRange']():void 0}function k(){return le?le['getEnded']():void 0}function M(){var a=v();if(ce&&!isNaN(ve)){var e=ve/1e3;a>e&&(a-=e)}return a}function P(){return de&&le?le['getPlaybackRate']():null}function T(){return de&&le?le['getPlayedRanges']():null}function u(){return de&&le?le['getEnded']():null}function A(){return ce}function R(){return Za}function S(a){oe=a}function U(){return oe}function I(a){Te=a}function J(){return Te}function L(a,e){var n=ee['getMpd'](ae['getValue']()),l=void 0,E=void 0,o=10;if(l=pe['getUseFetch']()?0:pe['getLiveDelay']()?pe['getLiveDelay']():pe['getUseSuggestedPresentationDelay']()&&n['hasOwnProperty'](i["default"].SUGGESTED_PRESENTATION_DELAY)&&null!==n.suggestedPresentationDelay&&!isNaN(n.suggestedPresentationDelay)&&n.suggestedPresentationDelay>0?n.suggestedPresentationDelay:isNaN(a)?2*de.manifestInfo.minBufferTime:a*pe['getLiveDelayFragmentCount'](),n.availabilityStartTime&&(ve=n['availabilityStartTime']['getTime']()),e>0){var t=Math['max'](e-o,e/2);E=Math['min'](l,t)}else E=l;return re=E,E}function N(){return re}function O(){if(!ce||isNaN(ve))return NaN;var a=M();if(isNaN(a)||0===a)return 0;var e=(new Date)['getTime']()+1e3*Ee['getClientTimeOffset']();return Math['max'](((e-ve-1e3*a)/1e3)['toFixed'](3),0)}function V(){if(!v())return NaN;var a=(1e3*v()+ve-1e3*Ee['getClientTimeOffset']())['toFixed'](3);return new Date(parseFloat(a))}function j(){oe=NaN,we=!1,te={},re=0,ve=0,be={},ge=!1,ke=1,fe=!1,Pe=!1,ue=NaN,Ce=!1,Te=NaN,le&&(Ha['off'](p["default"].DATA_UPDATE_COMPLETED,W,this),Ha['off'](p["default"].BYTES_APPENDED_END_FRAGMENT,ha,this),Ha['off'](p["default"].BYTES_APPENDED,ha,this),Ha['off'](p["default"].LOADING_PROGRESS,sa,this),Ha['off'](p["default"].BUFFER_LEVEL_STATE_CHANGED,Da,this),Ha['off'](p["default"].PERIOD_SWITCH_STARTED,n,this),Ha['off'](p["default"].PLAYBACK_PROGRESS,pa,this),Ha['off'](p["default"].PLAYBACK_TIME_UPDATED,pa,this),Ha['off'](p["default"].PLAYBACK_ENDED,ra,this),Ha['off'](p["default"].STREAM_INITIALIZING,Ca,this),Fa()),K(),le=null,de=null,ce=null}function q(a){return null!==a&&void 0!==a&&(a['cancel'](),a=null),a}function z(a){a&&(a.streamController&&(Za=a.streamController),a.metricsModel&&($a=a.metricsModel),a.dashMetrics&&(_a=a.dashMetrics),a.manifestModel&&(ae=a.manifestModel),a.dashManifestModel&&(ee=a.dashManifestModel),a.mediaPlayerModel&&(pe=a.mediaPlayerModel,Qa&&pe['setWallclockTimeUpdateInterval'](800)),a.adapter&&(ne=a.adapter),a.videoModel&&(le=a.videoModel),a.timelineConverter&&(Ee=a.timelineConverter),a.uriFragmentModel&&(me=a.uriFragmentModel))}function B(){var a=me['getURIFragmentData'](),e=void 0;if(a){e={};var n=parseInt(a.r,10);n>=0&&de&&n<de.manifestInfo.DVRWindowSize&&null===a.t&&(a['t']=Math['floor'](Date['now']()/1e3)-de.manifestInfo.DVRWindowSize+n),e['fragS']=parseFloat(a.s),e['fragT']=parseFloat(a.t)}return e}function F(a,e,n){if(!de)return 0;var l=void 0,E=NaN;if(a)E=de.start;else{var o=B();E=o?isNaN(o.fragS)?o.fragT:o.fragS:0}if(ce)isNaN(E)||(l=E-de.manifestInfo['availableFrom']['getTime']()/1e3,(l>oe||l<(isNaN(e)?NaN:e-de.manifestInfo.DVRWindowSize))&&(l=null)),l=l||oe;else if(!isNaN(E)&&E<Math['max'](de.manifestInfo.duration,de.duration)&&E>=0)l=E;else{var i=te[de.id];l=void 0!==i?Math['max'](void 0!==i.audio?i.audio:0,void 0!==i.video?i.video:0,de.start):de.start}return l=n&&!isNaN(ue)?ue:l}function G(a){var e=$a['getReadOnlyMetricsFor'](i["default"].VIDEO)||$a['getReadOnlyMetricsFor'](i["default"].AUDIO),n=_a['getCurrentDVRInfo'](e),l=n?n.range:null,E=void 0;if(!l)return NaN;if(0===a)return a;if(pe['getUseFetch']()){if(!(a>l.end||a<l.start))return a;E=l.end}else if(a>l.end)E=Math['max'](l.end-2*de.manifestInfo.minBufferTime,l.start);else{if(!(a+.25<l.start))return a;E=l.start}return E}function H(){if(null===ie){var a=function(){da()};ie=setInterval(a,pe['getWallclockTimeUpdateInterval']())}}function K(){clearInterval(ie),ie=null}function Q(){if(!t()&&ce&&0!==le['getReadyState']()){var a=M(),e=G(a),n=!isNaN(e)&&e!==a;n&&w(e)}}function W(a){if(!a.error){var e=ne['convertDataToRepresentationInfo'](a.currentRepresentation),n=e.mediaInfo.type;if(n===i["default"].AUDIO||n===i["default"].VIDEO||n===i["default"].MUXED){var l=e.mediaInfo.streamInfo;de['id']===l.id&&(de=l,ce=de.manifestInfo.isDynamic,oe=de.start,Za['setMediaDuration'](),ge||Q())}}}function X(){Pe||(Pe=!0,I(NaN)),Ha['trigger'](p["default"].CAN_PLAY)}function Y(){Ya['info']("Native video element event: play"),Q(),H(),ua()<0&&Ta(ke),ue=NaN,Ha['trigger'](p["default"].PLAYBACK_STARTED,{'startTime':v()})}function Z(){Ya['info']("Native video element event: waiting"),Ha['trigger'](p["default"].PLAYBACK_WAITING,{'playingTime':v()})}function $(){Ya['info']("Native video element event: playing"),Ha['trigger'](p["default"].PLAYBACK_PLAYING,{'playingTime':v()})}function _(){Ya['info']("Native video element event: pause"),Ha['trigger'](p["default"].PLAYBACK_PAUSED,{'ended':u()})}function aa(){var a=v();Ya['info']("Seeking to: "+a),H(),Ha['trigger'](p["default"].PLAYBACK_SEEKING,{'seekTime':a})}function ea(){Ya['info']("Native video element event: seeked"),Ha['trigger'](p["default"].PLAYBACK_SEEKED)}function na(){Qa&&Date['now']()-Wa<800||(Ha['trigger'](p["default"].PLAYBACK_TIME_UPDATED),Wa=Date['now']())}function la(){var a=Date['now']();(!xe||a>xe+D)&&(xe=a,na())}function Ea(){Ha['trigger'](p["default"].PLAYBACK_PROGRESS)}function oa(){var a=P();Ya['info']("Native video element event: ratechange: ",a),Ha['trigger'](p["default"].PLAYBACK_RATE_CHANGED,{'playbackRate':a});var e=fe||ua()<0?0:ua();1!==ua()&&P()&&P()!==e&&Ta(P())}function ia(){Ya['info']("Native video element event: loadedmetadata"),Ha['trigger'](p["default"].PLAYBACK_METADATA_LOADED),H()}function ta(){Ya['info']("Native video element event: ended"),b(),K(),Ha['trigger'](p["default"].PLAYBACK_ENDED,{'isLast':Za&&Za['getActiveStreamInfo']()?Za['getActiveStreamInfo']().isLast:void 0})}function ra(a){ie&&a.isLast&&(Ya['info']("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),le['setCurrentTime'](E()),b(),K())}function ba(a){var e=a.target||a.srcElement;Ha['trigger'](p["default"].PLAYBACK_ERROR,{'error':e.error})}function da(){var a=h(),e=!(t()||k()||!a||0===a.length);e&&Ra(),Ha['trigger'](p["default"].WALLCLOCK_TIME_UPDATED,{'isDynamic':ce,'time':new Date,'expectedPlaying':e}),A()&&t()&&la()}function ca(a,e){if(e&&e.length>0)for(var n=0,l=e.length;l>n;n++)if(a>=e['start'](n)&&a<e['end'](n))return!0;return!1}function pa(){!ce||void 0===pe['getLiveDelay']()||t()||c()||(xa()?va():ya())}function wa(){var a=null;return Za['getActiveStreamProcessors']()['forEach'](function(e){var n=e['getBufferLevel']();a=null===a?n:Math['min'](a,n)}),a}function xa(){return pe['getCatchUpPlaybackRate']()>0&&v()>0&&Math['abs'](O()-pe['getLiveDelay']())>pe['getLowLatencyMinDrift']()}function va(){if(le){var a=pe['getCatchUpPlaybackRate'](),e=pe['getLiveDelay'](),n=O()-e,l=5*n,E=2*a/(1+Math['pow'](Math.E,-l)),o=1-a+E,i=wa();pe['getLowLatencyEnabled']()&&0>n&&i>=Math['min'](e,f)/2?(se=!1,o=1):i>Math['min'](e,f)?se=!1:i>=Math['min'](e,f)/2?(se=!1,o=1):o=.8,Math['abs'](le['getPlaybackRate']()-o)>De&&le['setPlaybackRate'](o),pe['getLowLatencyMaxDriftBeforeSeeking']()>0&&!he&&n>pe['getLowLatencyMaxDriftBeforeSeeking']()?(Ya['info']("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),he=!0,x()):he=!1}}function ya(){le&&le['setPlaybackRate'](1)}function ha(a){var e=void 0,n=void 0,l=a.bufferedRanges;if(l&&l.length&&(!te[de.id]||te[de.id].started!==!0)){var E=a['sender']['getType']();void 0===be[de.id]&&(be[de.id]=[]),be[de.id][E]=l,void 0===te[de.id]&&(te[de.id]=[],te[de.id]['started']=!1),void 0===te[de.id][E]&&(te[de.id][E]=Math['max'](l['start'](0),de.start));var o=Za['isTrackTypePresent'](i["default"].VIDEO),t=Za['isTrackTypePresent'](i["default"].AUDIO);if(n=F(!1),t&&o){if(!isNaN(te[de.id].audio)&&!isNaN(te[de.id].video)&&(te[de.id].audio<te[de.id].video?(e=te[de.id].video>n?te[de.id].video:n,l=be[de.id].audio):(e=te[de.id].audio>n?te[de.id].audio:n,l=be[de.id].video),ca(e,l))){if(!c()&&!ye&&0!==e){if(pe['getLowLatencyEnabled']()&&pe['getStartWithLowestLatency']()){var r=$a['getReadOnlyMetricsFor'](i["default"].VIDEO)||$a['getReadOnlyMetricsFor'](i["default"].AUDIO),b=_a['getCurrentDVRInfo'](r),d=b?b.range:null;d&&(Ya['info']("startWithLowestLatency is true,seek to live edge earliestTime = "+e+" liveedge = "+d.end),e=d.end)}Ya['info']("seek to earliestTime = "+e),w(e,!0,!0)}te[de.id]['started']=!0}}else if(te[de.id][E]){if(e=te[de.id][E]>n?te[de.id][E]:n,!c()&&!ye){if(pe['getLowLatencyEnabled']()&&pe['getStartWithLowestLatency']()){var p=$a['getReadOnlyMetricsFor'](i["default"].VIDEO)||$a['getReadOnlyMetricsFor'](i["default"].AUDIO),x=_a['getCurrentDVRInfo'](p),v=x?x.range:null;v&&(Ya['info']("startWithLowestLatency is true,seek to live edge earliestTime = "+e+" liveedge = "+v.end),e=v.end)}w(e,!1,!0)}te[de.id]['started']=!0}}}function sa(a){if(a['stream']===!1&&pe['getUseFetch']()&&!isNaN(a.request.duration)){var e=1.2*a.request.duration;e>pe['getLiveDelay']()&&(Ya['warn']("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e['toFixed'](2)),pe['setLiveDelay'](e))}}function Da(a){a['streamInfo']['id']===de.id&&(a.state!==r["default"].BUFFER_EMPTY||c()||se||(se=!0,pe['getUseFetch']()&&P()>1&&ya()))}function ma(a){Ha['trigger'](p["default"].PLAYBACK_STALLED,{'e':a})}function Ca(a){fa(a.streamInfo,a.mediaInfo)}function fa(a,e){if(a&&a.manifestInfo&&a.manifestInfo.serviceDescriptions){for(var n=void 0,l=0;l<a.manifestInfo.serviceDescriptions.length;l++){var E=a['manifestInfo']['serviceDescriptions'][l];if(E['schemeIdUri']===i["default"].SERVICE_DESCRIPTION_LL_SCHEME){n=E;break}}n&&e&&e.supplementalProperties&&"true"===e['supplementalProperties'][i["default"].SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&n.latency.target>0&&(Ya['debug']("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),pe['setLowLatencyEnabled'](!0),pe['setLiveDelay'](n.latency.target/1e3)),n.playbackRate&&n.playbackRate.max>1&&(Ya['debug']("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),pe['setLowLatencyEnabled'](!0)))}}function ga(){Ha['trigger'](p["default"].VO_DASH_MEDIA_VOLUME_CHANGED)}function ka(){Ha['trigger'](p["default"].VO_DASH_MEDIA_LOADEDDATA)}function Ma(){Ha['trigger'](p["default"].VO_DASH_MEDIA_LOADSTART)}function Pa(a){ge!==a&&(ge=a,Ha['trigger'](p["default"].VO_DASH_TRICK_MODE_CHANGING,{'mode':a}))}function Ta(a){Ya['info']("[setTrickModeRate] bBuffering: "+fe+", rate: "+a);var e=ke;ke=a;var n=fe&&1!==ke||0>ke?0:ke;if(le['setTrickModeRate'](ke),le['setPlaybackRate'](n),Me=q(Me),!A()&&v()<g)return void(0>ke&&(b(),w(0,!1,!0)));if(!fe&&0>ke){var l=function(){return v()+ke/2>0?v()+ke/2:0},E=function(){if(v()<g)return b(),Me=q(Me),void w(0,!1,!0);if(ua()>=1||t())return void(Me=q(Me));var a=l();w(a,!1,!0)},o=l();if(0>o)return;e>=0&&w(o),Me=new s["default"](E),Me['scheduleRepeated'](500)}}function ua(){return ke}function Aa(a){Ta(a),Pa(1!=a),Ha['trigger'](p["default"].VO_DASH_TRICK_PLAY_RATE_CHANGED,{'rate':a})}function Ra(){var a=h(),e=Sa(a,v()),n=Ua(a),E=Ia(n||0),o=La()?La().range:null;if(Na(o),fe){var i=Math['min'](Math['min'](ae['getValue']()?ae['getValue']().minBufferTime:0,C),l());(E||e>=i||e>0&&ua()<0)&&Ja(!1)}else!E&&m>e&&Ja(!0)}function Sa(a,e){if(!a||!a.length)return 0;if(1===a.length&&a['end'](0)-a['start'](0)<1e-6)return 0;var n=0;if(ua()<0)for(var l=a.length-1;l>=0;--l)a['start'](l)<e&&(n+=Math['min'](e,a['end'](l))-a['start'](l));else for(var E=a.length-1;E>=0;--E)a['end'](E)>e&&(n+=a['end'](E)-Math['max'](a['start'](E),e));return n}function Ua(a){return a?1===a.length&&a['end'](0)-a['start'](0)<1e-6?null:a.length?a['end'](a.length-1):null:null}function Ia(a){return ce&&La()&&La().range&&a>=La().range.end||Za['isEnded']()||k()||!ce&&ua()<0&&v()<g}function Ja(a){a!==fe&&(fe=a,1!==ua()&&Ta(ke))}function La(){var a=$a['getReadOnlyMetricsFor']("video")||$a['getReadOnlyMetricsFor']("audio");return _a['getCurrentDVRInfo'](a)}function Na(a){if(!ce||!a||1===ua())return!1;var e=v();return e<=a.start||e>=a.end?(Ya['info']("[checkIfExceedDVRWindow] cancelTrickPlay range start: "+a.start+", end: "+a.end+", time: "+e),Aa(1),!0):!1}function Oa(a){var e=La()?La().range:null;return e&&A()?(a<=e.start&&(a=e.start+pe['getLiveFastLimit']()),Ya['info']("[checkSeekTime] adjust seek to time: "+a+", dvrRange: ["+e.start+", "+e.end+"]"),a):a}function Va(){return Pe}function ja(){return Za['isTrackTypePresent'](i["default"].AUDIO)&&!Za['isTrackTypePresent'](i["default"].VIDEO)}function qa(){return Ce}function za(a){Ce=a}function Ba(){le['addEventListener']("canplay",X),le['addEventListener']("play",Y),le['addEventListener']("waiting",Z),le['addEventListener']("playing",$),le['addEventListener']("pause",_),le['addEventListener']("error",ba),le['addEventListener']("seeking",aa),le['addEventListener']("seeked",ea),le['addEventListener']("timeupdate",na),le['addEventListener']("progress",Ea),le['addEventListener']("ratechange",oa),le['addEventListener']("loadedmetadata",ia),le['addEventListener']("stalled",ma),le['addEventListener']("ended",ta),le['addEventListener']("volumechange",ga),le['addEventListener']("loadeddata",ka),le['addEventListener']("loadstart",Ma)}function Fa(){le['removeEventListener']("canplay",X),le['removeEventListener']("play",Y),le['removeEventListener']("waiting",Z),le['removeEventListener']("playing",$),le['removeEventListener']("pause",_),le['removeEventListener']("error",ba),le['removeEventListener']("seeking",aa),le['removeEventListener']("seeked",ea),le['removeEventListener']("timeupdate",na),le['removeEventListener']("progress",Ea),le['removeEventListener']("ratechange",oa),le['removeEventListener']("loadedmetadata",ia),le['removeEventListener']("stalled",ma),le['removeEventListener']("ended",ta),le['removeEventListener']("volumechange",ga),le['removeEventListener']("loadeddata",ka),le['removeEventListener']("loadstart",Ma)}var Ga=this.context,Ha=d["default"](Ga)['getInstance'](),Ka=Ga.commonUtil,Qa=Ka['isWebOSApp']()||Ka['isTizenApp']()||Ka['isChromecast'](),Wa=Date['now'](),Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,_a=void 0,ae=void 0,ee=void 0,ne=void 0,le=void 0,Ee=void 0,oe=void 0,ie=void 0,te=void 0,re=void 0,be=void 0,de=void 0,ce=void 0,pe=void 0,we=void 0,xe=void 0,ve=void 0,ye=void 0,he=void 0,se=void 0,De=void 0,me=void 0,Ce=void 0,fe=void 0,ge=void 0,ke=void 0,Me=void 0,Pe=void 0,Te=void 0,ue=void 0;return Xa={'initialize':e,'setConfig':z,'getStartTimeFromUriParameters':B,'getStreamStartTime':F,'getTimeToStreamEnd':l,'getTime':v,'getNormalizedTime':M,'getPlaybackRate':P,'getPlayedRanges':T,'getEnded':u,'getIsDynamic':A,'getStreamController':R,'setLiveStartTime':S,'getLiveStartTime':U,'computeLiveDelay':L,'getLiveDelay':N,'getCurrentLiveLatency':O,'play':o,'isPaused':t,'pause':b,'isSeeking':c,'seek':w,'setTrickPlayRate':Aa,'getTrickPlayRate':ua,'getCurrentTimeForLocal':V,'isCanPlay':Va,'isAudioOnlyStream':ja,'checkIfExceedDVRWindow':Na,'getBuffered':h,'isPlaybackStarted':qa,'setPlaybackStarted':za,'setLiveStartPosition':I,'getLiveStartPosition':J,'reset':j},a(),Xa}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(85),r=l(t),b=a(18),d=l(b),c=a(24),p=l(c),w=a(19),x=l(w),v=a(17),y=l(v),h=a(310),s=l(h),D=500,m=.5,C=.5,f=3,g=.2;E['__visualon_factory_name']="PlaybackController",n["default"]=x["default"]['getSingletonFactory'](E)},{'17':17,'18':18,'19':19,'24':24,'310':310,'79':79,'85':85}],'91':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){Ra=M["default"](wa)['getInstance']()['getLogger'](Aa),ta()}function n(){Sa=Pa['getFragmentModel'](),Ba=w["default"](wa)['create']({'abrController':Ca,'dashMetrics':ha,'metricsModel':va,'mediaPlayerModel':ma,'textController':ka}),Fa=v["default"](wa)['create']({'adapter':ya,'textController':ka}),sa['getIsTextTrack'](a.mimeType)&&xa['on'](C["default"].TIMED_TEXT_REQUESTED,Q,this),xa['on'](C["default"].QUALITY_CHANGE_REQUESTED,A,this),xa['on'](C["default"].DATA_UPDATE_STARTED,B,this),xa['on'](C["default"].DATA_UPDATE_COMPLETED,U,this),xa['on'](C["default"].FRAGMENT_LOADING_COMPLETED,N,this),xa['on'](C["default"].STREAM_COMPLETED,L,this),xa['on'](C["default"].STREAM_INITIALIZED,I,this),xa['on'](C["default"].BUFFER_LEVEL_STATE_CHANGED,G,this),xa['on'](C["default"].BUFFER_CLEARED,F,this),xa['on'](C["default"].BYTES_APPENDED_END_FRAGMENT,V,this),xa['on'](C["default"].INIT_REQUESTED,m,this),xa['on'](C["default"].QUOTA_EXCEEDED,H,this),xa['on'](C["default"].PLAYBACK_SEEKING,X,this),xa['on'](C["default"].PLAYBACK_STARTED,W,this),xa['on'](C["default"].PLAYBACK_RATE_CHANGED,Y,this),xa['on'](C["default"].PLAYBACK_TIME_UPDATED,O,this),xa['on'](C["default"].URL_RESOLUTION_FAILED,K,this),xa['on'](C["default"].FRAGMENT_LOADING_ABANDONED,q,this),xa['on'](C["default"].PLAYBACK_METADATA_LOADED,z,this),xa['on'](C["default"].VO_DASH_TRICK_MODE_CHANGED,R,this),xa['on'](C["default"].PLAYBACK_START,j,this)}function l(){return Ja===!1}function E(){return!Ua||Pa['isBufferingCompleted']()?void Ra['warn']("Start denied to Schedule Controller"):(Ra['debug']("Schedule Controller starts"),ia(),Ja=!1,Ia&&(Ia=!1),void s(0))}function o(){Ja||(Ra['debug']("Schedule Controller stops"),Ja=!0,clearTimeout(qa))}function r(a,e){Ha[e]=Ha[e]||{};var n=Ca['getTopQualityIndexFor'](a,e);return Ha[e][a]!=n?(Ra['info']("Top quality "+a+" index has changed from "+Ha[e][a]+" to "+n),Ha[e][a]=n,!0):!1}function d(){return 1!==fa['getTrickPlayRate']()?!0:Ba['execute'](Pa,ga['isTrackTypePresent'](i["default"].VIDEO))}function p(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,e=!1,n=function(){!a&&_a&&(_a=!1,fa['getTrickPlayRate']()>0&&fa['seek'](fa['getTime']()+.001))};return(Ua.quality!==Ka||a)&&(Ka=Ua.quality,Qa=[],Pa['switchInitData'](Ua.id),e=!0),n(),e}function x(){var a=Pa['getBufferController']();if(Ja||Va||!a||fa['isPaused']()&&!ma['getScheduleWhilePaused']()||(Ma===i["default"].FRAGMENTED_TEXT||Ma===i["default"].TEXT)&&ka&&!ka['isTextEnabled']())return void Ra['debug']("Schedule stop!");if(a['getIsBufferingCompleted']())return void Ra['debug']("Schedule stop because buffering is completed!");y();var e=Qa.length>0,n=Pa['getStreamInfo']();if(Xa||isNaN(Ka)||Wa||e||r(Ua.mediaInfo.type,n.id)||d()){var l=function(){var a=Pa['getFragmentController']();if(p())Ra['debug']("Quality has changed, get init request for representationid = "+Ua.id);else if(Wa)Ra['debug']("Switch track has been asked, get init request for "+Ma+" with representationid = "+Ua.id),Xa=Ta['getSwitchMode'](Ma)===T["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE?!0:!1,Pa['switchInitData'](Ua.id,Xa),Ka=Ua.quality,Wa=!1;else{var e=Qa['shift']();if(a['isInitializationRequest'](e))Pa['switchInitData'](e.representationId);else{var l=void 0;Pa['getBufferController']()['getIsPruningInProgress']()||(l=Fa['execute'](Pa,e),!l&&n.manifestInfo&&n.manifestInfo.isDynamic&&(Ra['debug']("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),da())),l?(Ra['debug']("Next fragment request url is "+l.url+", index: "+l.index+", range: "+l.range+", ["+l.startTime+", "+(l.startTime+l.duration)+"]"),Sa['executeRequest'](l)):(f(!1),s(ma['getUseFetch']()?100:500))}}};f(!0),e||Wa||Ca['checkPlaybackQuality'](Ma),l()}else s(500)}function y(){var a=1.5*Ua.fragmentDuration,e=Sa['getRequests']({'state':h["default"].FRAGMENT_MODEL_EXECUTED,'time':fa['getTime']()+a,'threshold':0})[0];if(e&&-1===Qa['indexOf'](e)&&!sa['getIsTextTrack'](Ma)){var n=ma['getFastSwitchEnabled'](),l=Pa['getBufferLevel'](),E=Ca['getAbandonmentStateFor'](Ma),o=!Ta['isCurrentTrack'](e.mediaInfo)&&Ta['getSwitchMode'](e.mediaInfo.type)===T["default"].TRACK_SWITCH_MODE_NEVER_REPLACE,i=e.quality<Ua.quality;n&&(o||i)&&l>=a&&E!==b["default"].ABANDON_LOAD?(P(e),Ra['debug']("Reloading outdated fragment at index: ",e.index)):e.quality>Ua.quality&&$(fa['getTime']()+Pa['getBufferLevel']())}}function s(a){clearTimeout(qa),qa=setTimeout(x,a)}function m(a){a.sender&&a['sender']['getStreamProcessor']()===Pa&&g(Ua.quality)}function f(a){Va!==a?Va=a:Ra['debug']("isFragmentProcessingInProgress is already equal to",a)}function g(a){var e=ya['getInitRequest'](Pa,a);e&&(f(!0),e['url']=u['replaceTokenForTemplate'](e.url,"Bandwidth",Ua?Ua.bandwidth:null),Sa['executeRequest'](e))}function k(){Wa=!0}function P(a){Qa['push'](a)}function A(a){if(Ma===a.mediaType&&Pa['getStreamInfo']()['id']===a.streamInfo.id){if(Ua=Pa['getRepresentationInfo'](a.newQuality),null===Ua||void 0===Ua)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");oa(new Date,t.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ia()}}function R(a){if(Ra['info']("trick mode change mode: "+a.mode),!a.mode){var e=Pa['getBufferController']();e&&(Ra['debug']("clear all buffers"),e['clearAllBuffers']())}Ma===i["default"].VIDEO&&(Ua=Pa['getRepresentationInfo'](),_a=!0,oa(new Date,t.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ia(),p(!0),fa['getTrickPlayRate']()>0&&da())}function S(a){if(fa&&Sa){var e=Sa['getRequests']({'state':h["default"].FRAGMENT_MODEL_EXECUTED,'time':fa['getTime'](),'threshold':0})[0];e&&fa['getTime']()>=e.startTime&&(ra(e),(!Ga.mediaInfo||e['mediaInfo']['type']===Ga.mediaInfo.type&&e.mediaInfo.id!==Ga.mediaInfo.id)&&a&&xa['trigger'](C["default"].TRACK_CHANGE_RENDERED,{'mediaType':Ma,'oldMediaInfo':Ga.mediaInfo,'newMediaInfo':e.mediaInfo}),Pa['getBufferController']()&&Pa['getBufferController']().isTrackInfoFromMoov&&!Pa['getBufferController']()['isTrackInfoFromMoov']()&&(e['quality']===Ga.quality&&e['adaptationIndex']===Ga.adaptationIndex||!a||ba(e)),Ga={'mediaInfo':e.mediaInfo,'quality':e.quality,'adaptationIndex':e.adaptationIndex})}}function U(a){a.error||a['sender']['getStreamProcessor']()!==Pa||(Ua=ya['convertDataToRepresentationInfo'](a.currentRepresentation))}function I(a){a.error||Pa['getStreamInfo']().id!==a.streamInfo.id||(Ua=Pa['getRepresentationInfo'](),Ia&&(fa['getIsDynamic']()?(Da['setTimeSyncCompleted'](!0),ua=!0):(za=fa['getStreamStartTime'](!1,void 0,!0),Pa['getBufferController']()['setSeekStartTime'](za))),Ja&&(ma['getPreloadMode']()!==i["default"].PRELOAD_METADATA||fa['isPlaybackStarted']())&&E())}function J(a){var e=Pa['getLiveEdgeFinder']();if(e){var n=void 0,l=fa['isCanPlay'](),E=e['getLiVeEdgeStart'](),o=e['getLiveEdge']();if(o&&void 0!==E&&null!==E){if(l){var t=Ua.fragmentDuration?ma['getLiveFastFragmentCount']()*Ua.fragmentDuration:ma['getLiveFastLimit']();n=Math['min'](Math['max'](E,a?a:0)+t,o)}else if(isNaN(fa['getLiveStartPosition']())){var r=Ua.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2;n=o-fa['computeLiveDelay'](Ua.fragmentDuration,r)}else n=E+fa['getLiveStartPosition']();var b=ya['getFragmentRequest'](Pa,Ua,n,{'timeThreshold':.1,'ignoreIsFinished':!0,'bQuery':!0});if(b)if(ma['getUseFetch']()){var d=b.duration<ma['getLiveDelay']()?b.startTime:b.startTime+b.duration-ma['getLiveDelay']();d=d>o?b.startTime:d,fa['setLiveStartTime'](d)}else fa['setLiveStartTime'](b.startTime);else Ra['debug']("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");za=l?n:fa['getStreamStartTime'](!1,o),Pa['getBufferController']()['setSeekStartTime'](za),za>Ua.mediaInfo.streamInfo.start+Ua.mediaInfo.streamInfo.duration&&fa['seek'](za);var c=ha['getCurrentManifestUpdate'](va['getMetricsFor'](i["default"].STREAM));va['updateManifestUpdateInfo'](c,{'currentTime':za,'presentationStartTime':l?E:o,'latency':o-za,'clientTimeOffset':Da['getClientTimeOffset']()})}}}function L(a){a['fragmentModel']===Sa&&(o(),f(!1),Ra['info']("Stream is complete"))}function N(a){a['sender']===Sa&&(Ra['info']("OnFragmentLoadingCompleted - Url:",a.request?a.request.url:"undefined",", Range:",a.request.range?a.request.range:"undefined"),sa['getIsTextTrack'](Ma)&&f(!1),a.error&&a.request.serviceLocation&&!Ja&&(f(!1),a.error.fatal?o():s(0)),Xa&&(Ya=a.request))}function O(){S(!0)}function V(a){a['sender']['getStreamProcessor']()===Pa&&(Xa&&!isNaN(a.startTime)&&(Xa=!1,Sa['addExecutedRequest'](Ya)),f(!1),ua||s(0))}function j(){E(),void 0!==Za&&(g(Za),Za=void 0)}function q(a){a['streamProcessor']===Pa&&(Ra['info']("onFragmentLoadingAbandoned for "+Ma+", request: "+(a.request?a.request.url:NaN)+" has been aborted"),fa['isSeeking']()||Wa||a.bDiscard||(Ra['info']("onFragmentLoadingAbandoned for "+Ma+", request: "+a.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),P(a.request)),f(!1),s(0))}function z(){ua&&(ua=!1,J(),s(0))}function B(a){a['sender']['getStreamProcessor']()===Pa&&o()}function F(a){a['sender']['getStreamProcessor']()===Pa&&(a.unintended?Pa['getFragmentModel']()['removeExecutedRequestsAfterTime'](a.from,Pa['getStreamInfo']().duration):Pa['getFragmentModel']()['syncExecutedRequestsWithBufferedRange'](Pa['getBufferController']()['getBuffer']()['getAllBufferRanges'](),Pa['getStreamInfo']().duration),a.hasEnoughSpaceToAppend&&Ja&&E())}function G(a){a['sender']['getStreamProcessor']()!==Pa||a.state!==c["default"].BUFFER_EMPTY||fa['isSeeking']()||(Ra['info']("Buffer is empty! Stalling!"),oa(new Date,t.PlayListTrace.REBUFFERING_REASON))}function H(a){a['sender']['getStreamProcessor']()===Pa&&(o(),f(!1))}function K(){Sa['abortRequests'](),o()}function Q(a){a['sender']['getStreamProcessor']()===Pa&&ka&&ka['isTextEnabled']()&&(ma['getPreloadMode']()!==i["default"].PRELOAD_METADATA||fa['isPlaybackStarted']()?g(a.index):Za=a.index)}function W(){(Ja||!ma['getScheduleWhilePaused']())&&E()}function X(a){za=a.seekTime,_(0),Sa['cleanupRequests'](),Ja&&E();var e=ha['getCurrentManifestUpdate'](va['getMetricsFor'](i["default"].STREAM)),n=Ua.DVRWindow&&fa?Ua.DVRWindow.end-fa['getTime']():NaN;va['updateManifestUpdateInfo'](e,{'latency':n}),Va?(Ra['debug']("onPlaybackSeeking for "+Ma+", call fragmentModel.abortRequests in order to seek quicker"),Sa['abortRequests']()):s(0)}function Y(a){Na&&(Na['playbackspeed']=a['playbackRate']['toString']())}function Z(){return za}function $(a){za=a}function _(a){ja=a}function aa(){return ja}function ea(){return Ba['getBufferTarget'](Pa,ga['isTrackTypePresent'](i["default"].VIDEO))}function na(){return Ma}function la(a){La=a}function Ea(a,e){oa(a,e),La=null}function oa(a,e){if(La&&Oa===!1){var n=Na.start,l=a['getTime']()-n['getTime']();Na['duration']=l,Na['stopreason']=e,La['trace']['push'](Na),Oa=!0}}function ia(){La&&Oa===!0&&Ua&&(Oa=!1,Na=new t.PlayListTrace,Na['representationid']=Ua.id,Na['start']=new Date,Na['mstart']=1e3*fa['getTime'](),Na['playbackspeed']=fa['getPlaybackRate']()['toString']())}function ta(){Va=!1,ja=0,za=NaN,La=null,Na=null,Oa=!0,Ia=!0,Ka=NaN,Ga={'mediaInfo':void 0,'quality':NaN,'adaptationIndex':NaN},Ha={},Qa=[],Ja=!0,Wa=!1,Xa=!1,Ya=null,$a=NaN,_a=!1,Za=void 0}function ra(a){Ma===i["default"].VIDEO&&$a!==a.index&&(Ra['debug']("Trigger fragment model executed. type:"+Ma+",'bytesLoaded':"+a.bytesLoaded+",'duration':"+a.duration+",'url':"+a.url+",index"+a.index),xa['trigger'](C["default"].VO_DASH_REPORT_STREAM_BITRATE,{'Bitrate':Math['round'](8*a.bytesLoaded/a.duration)}),$a=a.index)}function ba(a){var e=a['mediaInfo']['bitrateList'][a.quality];Ra['debug']("[reportQualityChanged][BA]["+Ma+"] new BA["+a.quality+"]: resolution: "+e.width+" X "+e.height+(", bandwidth: "+Math['round'](e.bandwidth/1e3)+" kbps")),xa['trigger'](C["default"].QUALITY_CHANGE_RENDERED,{'mediaType':Ma,'oldQuality':Ga.quality,'newQuality':a.quality,'oldBandwidth':isFinite(Ga.quality)&&a['mediaInfo']['bitrateList'][Ga.quality]?a['mediaInfo']['bitrateList'][Ga.quality].bandwidth:NaN,'newBandwidth':e.bandwidth,'id':e.id,'width':e.width,'height':e.height,'codec':a.mediaInfo.codec,'lang':a.mediaInfo.lang})}function da(){if(fa['getIsDynamic']()&&!fa['isPaused']()&&fa['isCanPlay']()&&(Ma===i["default"].VIDEO||Ma===i["default"].AUDIO)){Ua=Pa['getRepresentationInfo']();var a=Ua?Ua.DVRWindow:null;if(!a)return!1;if(parseFloat(fa['getTime']()['toFixed'](2))<parseFloat(a['start']['toFixed'](2))&&(J(a.start),za))return Va=!1,fa['seek'](za),!0}return!1}function ca(){return fa['getCurrentLiveLatency']()}function pa(){xa['off'](C["default"].DATA_UPDATE_STARTED,B,this),xa['off'](C["default"].DATA_UPDATE_COMPLETED,U,this),xa['off'](C["default"].BUFFER_LEVEL_STATE_CHANGED,G,this),xa['off'](C["default"].QUALITY_CHANGE_REQUESTED,A,this),xa['off'](C["default"].FRAGMENT_LOADING_COMPLETED,N,this),xa['off'](C["default"].STREAM_COMPLETED,L,this),xa['off'](C["default"].STREAM_INITIALIZED,I,this),xa['off'](C["default"].QUOTA_EXCEEDED,H,this),xa['off'](C["default"].BYTES_APPENDED_END_FRAGMENT,V,this),xa['off'](C["default"].BUFFER_CLEARED,F,this),xa['off'](C["default"].INIT_REQUESTED,m,this),xa['off'](C["default"].PLAYBACK_RATE_CHANGED,Y,this),xa['off'](C["default"].PLAYBACK_SEEKING,X,this),xa['off'](C["default"].PLAYBACK_STARTED,W,this),xa['off'](C["default"].PLAYBACK_TIME_UPDATED,O,this),xa['off'](C["default"].URL_RESOLUTION_FAILED,K,this),xa['off'](C["default"].FRAGMENT_LOADING_ABANDONED,q,this),xa['off'](C["default"].PLAYBACK_METADATA_LOADED,z,this),sa['getIsTextTrack'](Ma)&&xa['off'](C["default"].TIMED_TEXT_REQUESTED,Q,this),xa['off'](C["default"].VO_DASH_TRICK_MODE_CHANGED,R,this),xa['off'](C["default"].PLAYBACK_START,j,this),o(),S(!1),ta()}a=a||{};var wa=this.context,xa=D["default"](wa)['getInstance'](),va=a.metricsModel,ya=a.adapter,ha=a.dashMetrics,sa=a.dashManifestModel,Da=a.timelineConverter,ma=a.mediaPlayerModel,Ca=a.abrController,fa=a.playbackController,ga=a.streamController,ka=a.textController,Ma=a.type,Pa=a.streamProcessor,Ta=a.mediaController,ua=!1,Aa=void 0,Ra=void 0,Sa=void 0,Ua=void 0,Ia=void 0,Ja=void 0,La=void 0,Na=void 0,Oa=void 0,Va=void 0,ja=void 0,qa=void 0,za=void 0,Ba=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ka=void 0,Qa=void 0,Wa=void 0,Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,_a=void 0;return Aa={'initialize':n,'getType':na,'getSeekTarget':Z,'setSeekTarget':$,'setTimeToLoadDelay':_,'getTimeToLoadDelay':aa,'replaceRequest':P,'switchTrackAsked':k,'isStarted':l,'start':E,'stop':o,'reset':pa,'setPlayList':la,'getBufferTarget':ea,'finalisePlayList':Ea,'getCurrentLiveLatency':ca},e(),Aa}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(216),r=a(82),b=l(r),d=a(85),c=l(d),p=a(167),w=l(p),x=a(168),v=l(x),y=a(119),h=l(y),s=a(18),D=l(s),m=a(24),C=l(m),f=a(19),g=l(f),k=a(17),M=l(k),P=a(88),T=l(P),u=a(48);
E['__visualon_factory_name']="ScheduleController",n["default"]=g["default"]['getClassFactory'](E)},{'119':119,'167':167,'168':168,'17':17,'18':18,'19':19,'216':216,'24':24,'48':48,'79':79,'82':82,'85':85,'88':88}],'92':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){sa=C["default"](xa)['getInstance']()['getLogger'](ha),ua=A["default"](xa)['getInstance'](),Ta=U["default"](xa)['getInstance'](),Ja=g["default"](xa)['getInstance'](),La=M["default"](xa)['getInstance'](),da()}function e(a,e){na(),Ba=a,za=e,Oa['initialize'](),ma=p["default"](xa)['create'](),ma['setConfig']({'manifestModel':fa,'dashManifestModel':ga,'mediaPlayerModel':Xa,'manifestLoader':Ca,'errHandler':Na}),ma['initialize'](),Aa['setConfig']({'dashManifestModel':ga}),n()}function n(){va['on'](y["default"].PLAYBACK_TIME_UPDATED,o,this),va['on'](y["default"].PLAYBACK_SEEKING,v,this),va['on'](y["default"].PLAYBACK_ERROR,_,this),va['on'](y["default"].PLAYBACK_STARTED,h,this),va['on'](y["default"].PLAYBACK_PAUSED,s,this),va['on'](y["default"].PLAYBACK_ENDED,O,this),va['on'](y["default"].MANIFEST_UPDATED,W,this),va['on'](y["default"].BUFFERING_COMPLETED,P,this),va['on'](y["default"].STREAM_BUFFERING_COMPLETED,u,this),va['on'](y["default"].MANIFEST_VALIDITY_CHANGED,ia,this),va['on'](y["default"].TIME_SYNCHRONIZATION_COMPLETED,Q,this),va['on'](y["default"].WALLCLOCK_TIME_UPDATED,t,this),va['on'](T["default"].METRIC_ADDED,pa,this)}function l(){va['off'](y["default"].PLAYBACK_TIME_UPDATED,o,this),va['off'](y["default"].PLAYBACK_SEEKING,v,this),va['off'](y["default"].PLAYBACK_ERROR,_,this),va['off'](y["default"].PLAYBACK_STARTED,h,this),va['off'](y["default"].PLAYBACK_PAUSED,s,this),va['off'](y["default"].PLAYBACK_ENDED,O,this),va['off'](y["default"].MANIFEST_UPDATED,W,this),va['off'](y["default"].BUFFERING_COMPLETED,P,this),va['off'](y["default"].STREAM_BUFFERING_COMPLETED,u,this),va['off'](y["default"].MANIFEST_VALIDITY_CHANGED,ia,this),va['off'](y["default"].TIME_SYNCHRONIZATION_COMPLETED,Q,this),va['off'](y["default"].WALLCLOCK_TIME_UPDATED,t,this),va['off'](T["default"].METRIC_ADDED,pa,this)}function E(){return Ka?"ended"===Ka.readyState:!0}function o(){if(X(i["default"].VIDEO)){var a=Qa['getPlaybackQuality']();a&&Ma['addDroppedFrames'](i["default"].VIDEO,a)}}function t(a){if(!(!Xa['getJumpGaps']()||!ja||0===ja['getProcessors']().length||Wa['isSeeking']()||Ya||Fa||Ga||Ha)&&a.expectedPlaying&&(Ee++,Ee>=wa)){var e=Wa['getTime']();re===e?b(e):re=e,Ee=0}}function b(a){for(var e=ja['getProcessors'](),n=Xa['getSmallGapLimit'](),l=void 0,E=0;E<e.length;E++){var o=e[E]['getBuffer'](),i=o['getAllBufferRanges'](),t=void 0;if(i&&!(i.length<=1)){if(Wa['getTrickPlayRate']()>0){for(var r=0;r<i.length;r++)if(a<i['start'](r)){t=i['start'](r);break}}else for(var b=i.length-1;b>=0;b--)if(a>i['end'](b)){t=i['end'](b);break}if(t>0){var d=Wa['getTrickPlayRate']()>0?t-a:a-t;d>0&&(void 0===l||t>l)&&(l=t)}}}var p=Wa['getTimeToStreamEnd']();void 0===l&&!isNaN(p)&&n>p&&(l=a+p),l>0?!isNaN(p)&&l>=a+p?(sa['info']("Jumping media gap (discontinuity) at time ",a,". Jumping to end of the stream"),va['trigger'](y["default"].PLAYBACK_ENDED,{'isLast':aa().isLast})):(sa['info']("Jumping media gap (discontinuity) at time ",a,". Jumping to time position",l),Wa['seek'](l,!1,!0)):c(p,a)}function c(a,e){for(var n=Wa['getBuffered'](),l=void 0,E=function(a){var l=0;return Wa['getTrickPlayRate']()>0&&e>=n['start'](a)&&e<n['end'](a)-l||Wa['getTrickPlayRate']()<0&&e>n['start'](a)+l&&e<=n['end'](a)},o=0;o<n.length;o++)if(E(o)){sa['info']("[handleStall]The media pipeline due to stall inside buffered range"),l=Wa['getTrickPlayRate']()<0?e-.1:e+.1,w(a,l,e)?(sa['info']("[handleStall]Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),Ya===!1&&k()):(sa['info']("[handleStall]Jumping media gap (discontinuity) at time ",e,". Jumping to time position",l),Wa['seek'](l,!1,!0));break}}function w(a,e,n){return!isNaN(a)&&e>=n+a}function v(a){var e=S(a.seekTime);ne&&(m(),ee=!1),le&&f(),e===ja&&te&&te['deactivate'](!0),e&&(e!==ja||te&&!ja['isActive']())?(Z(D.PlayListTrace.END_OF_PERIOD_STOP_REASON),j(ja,e,a.seekTime)):Z(D.PlayListTrace.USER_REQUEST_STOP_REASON),$(D.PlayList.SEEK_START_REASON)}function h(){sa['debug']("[onPlaybackStarted]"),Za?(Za=!1,$(D.PlayList.INITIAL_PLAYOUT_START_REASON)):Ya&&(Ya=!1,$(D.PlayList.RESUME_FROM_PAUSE_START_REASON),k())}function s(a){sa['debug']("[onPlaybackPaused]"),a.ended||(Ya=!0,Z(D.PlayListTrace.USER_REQUEST_STOP_REASON),k())}function m(){sa['debug']("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(ne),ne=void 0}function f(){sa['debug']("[PreloadTimer] stop period preload timer."),clearTimeout(le),le=void 0}function k(){if(ee)if(ne)m();else{var a=Wa['getTimeToStreamEnd'](),e=a>0?1e3*a:0;sa['debug']("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in "+e+" milliseconds");var n=2e3>e?e/4:e-2e3;sa['info']("[StreamController][toggleEndPeriodTimer] Going to fire preload in "+n),le=setTimeout(R,n),ne=setTimeout(function(){va['trigger'](y["default"].PLAYBACK_ENDED,{'isLast':aa().isLast})},e)}}function P(a){if(a.sender&&(a['sender']['getType']()===i["default"].AUDIO||a['sender']['getType']()===i["default"].VIDEO||a['sender']['getType']()===i["default"].MUXED)){var e=aa().isLast;Ka&&!e&&void 0===ne&&(sa['info']("[onTrackBufferingCompleted] end of period detected. Track",a['sender']['getType'](),"has finished"),ee=!0,Ya===!1&&k())}}function u(){var a=aa().isLast;Ka&&a&&(sa['info']("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Ta['signalEndOfStream'](Ka))}function R(){var a=aa().isLast;if(Ka&&!a){var e=V();ie=ja['isCompatibleWithStream'](e),ie&&(sa['info']("[StreamController][onStreamCanLoadNext] Preloading next stream"),e['preload'](Ka,oe),te=e,e['getProcessors']()['forEach'](function(a){ka['setIndexHandlerTime'](a,e['getStartTime']())}))}}function S(a){var e=0,n=null,l=Va.length;l>0&&(e+=Va[0]['getStartTime']());for(var E=0;l>E;E++)if(n=Va[E],e=parseFloat((e+n['getDuration']())['toFixed'](5)),e>a)return n;return null}function I(a,e){for(var n=null,l=0,E=0,o=null,i=Va.length,t=0;i>t;t++){if(n=Va[t],E=n['getStartTime'](),o=n['getDuration'](),Number['isFinite'](E)&&(l=E),n['getId']()===e)return a-l;Number['isFinite'](o)&&(l+=o)}return null}function L(){return ja?ja['getProcessors']():[]}function O(){var a=V();a?(ae=void 0,_a=void 0,j(ja,a,NaN)):sa['debug']("StreamController no next stream found"),Z(a?D.PlayListTrace.END_OF_PERIOD_STOP_REASON:D.PlayListTrace.END_OF_CONTENT_STOP_REASON),ne=void 0,ee=!1}function V(){if(ja&&aa()){var a=aa().start,e=aa().duration;return Va['filter'](function(n){return n['getStreamInfo']()['start']===parseFloat((a+e)['toFixed'](5))})[0]}}function j(a,e,n){Fa||!e||a===e&&e['isActive']()||(Fa=!0,va['trigger'](y["default"].PERIOD_SWITCH_STARTED,{'fromStreamInfo':a?a['getStreamInfo']():null,'toStreamInfo':e['getStreamInfo']()}),ie=!1,a&&(a['stopEventController'](),ie=ja['isCompatibleWithStream'](e)&&!n||e['getPreloaded'](),a['deactivate'](ie)),ja=e,te=!1,Wa['initialize'](aa(),ie,n),Qa['getElement']()?B(n,a,!1,ie):q(n))}function q(a){F(a,ie)}function z(a){ja&&(Wa['initialize'](aa()),B(a,null,!0,!1))}function B(a,e,n,l){function E(){Ka&&(sa['debug']("MediaSource is open!"),window['URL']['revokeObjectURL'](o),Ka['removeEventListener']("sourceopen",E),Ka['removeEventListener']("webkitsourceopen",E),G(),e||va['trigger'](y["default"].SOURCE_INITIALIZED),n?ja['setMediaSource'](Ka):F(a,l))}var o=void 0;Ka?l?(F(a,l),e||va['trigger'](y["default"].SOURCE_INITIALIZED)):(Ta['detachMediaSource'](Qa),Ka['addEventListener']("sourceopen",E,!1),Ka['addEventListener']("webkitsourceopen",E,!1),o=Ta['attachMediaSource'](Ka,Qa),sa['debug']("MediaSource attached to element.  Waiting on open...")):(Ka=Ta['createMediaSource'](),Ka['addEventListener']("sourceopen",E,!1),Ka['addEventListener']("webkitsourceopen",E,!1),o=Ta['attachMediaSource'](Ka,Qa),sa['debug']("MediaSource attached to element.  Waiting on open..."))}function F(a,e){if(ja){if(oe=ja['activate'](Ka,e?oe:void 0),ae=Y(i["default"].AUDIO),_a=Y(i["default"].VIDEO),ba(),!Za)if(isNaN(a)){var n=Wa['getStreamStartTime'](!0);e||ja['getProcessors']()['forEach'](function(a){ka['setIndexHandlerTime'](a,n)})}else Wa['seek'](a);ja['startEventController'](),Fa=!1,va['trigger'](y["default"].PERIOD_SWITCH_COMPLETED,{'toStreamInfo':aa()})}}function G(a){if(ja&&Ka&&"open"===Ka.readyState){var e=a?a:aa().manifestInfo.duration;if(e!==Ka.duration){var n=!1,l=function t(){if(Ka.sourceBuffers)for(var a=0;a<Ka.sourceBuffers.length;a++){if(sa['debug']("sourceBuffers1 "+a+", updating:"+Ka['sourceBuffers'][a].updating),Ka['sourceBuffers'][a].updating)return;Ka['sourceBuffers'][a]['removeEventListener']("updateend",t,!1)}var n=Ta['setDuration'](Ka,e);sa['debug']("After updating, duration successfully set to: "+n)};if(Ka.sourceBuffers)for(var E=0;E<Ka.sourceBuffers.length;E++)if(sa['debug']("sourceBuffers "+E+", updating:"+Ka['sourceBuffers'][E].updating),Ka['sourceBuffers'][E].updating){n=!0;try{Ka['sourceBuffers'][E]['addEventListener']("updateend",l,!1)}catch(o){sa['debug']("addEventListener updateend fail")}break}if(!n){var i=Ta['setDuration'](Ka,e);sa['debug']("Duration successfully set to: "+i),ya['isSafari']()&&Wa['getIsDynamic']()&&0===Qa['getElement']().seekable.length&&Ka['setLiveSeekableRange'](0,isFinite(i)?i:Number.MAX_VALUE)}}}}function H(a){for(var e=0,n=Va.length;n>e;e++)if(Va[e]['getId']()===a.id)return Va[e];return null}function K(){try{var a=ka['getStreamsInfo']();if(0===a.length)throw new Error("There are no streams");var e=Pa['getCurrentManifestUpdate'](Ma['getMetricsFor'](i["default"].STREAM));Ma['updateManifestUpdateInfo'](e,{'currentTime':Wa['getTime'](),'buffered':Qa['getBufferRange'](),'presentationStartTime':a[0].start,'clientTimeOffset':Oa['getClientTimeOffset']()});for(var n=0,l=a.length;l>n;n++){var E=a[n],o=H(E);o?o['updateData'](E):(o=d["default"](xa)['create']({'manifestModel':fa,'dashManifestModel':ga,'mediaPlayerModel':Xa,'metricsModel':Ma,'dashMetrics':Pa,'manifestUpdater':ma,'adapter':ka,'timelineConverter':Oa,'capabilities':Da,'errHandler':Na,'baseURLController':Aa,'domStorage':Ra,'abrController':Sa,'playbackController':Wa,'mediaController':Ua,'textController':Ia,'videoModel':Qa,'streamController':ha,'urlUtils':La}),Va['push'](o),o['initialize'](E,qa)),Ma['addManifestUpdateStreamInfo'](e,E.id,E.index,E.start,E.duration)}if(!ja){var t=Wa['getStartTimeFromUriParameters'](),r=null;if(t){var b=isNaN(t.fragS)?t.fragT:t.fragS;r=S(b)}j(null,null!==r?r:Va[0],NaN)}va['trigger'](y["default"].STREAMS_COMPOSED)}catch(c){Na['manifestError'](c.message,"nostreamscomposed",fa['getValue']()),Na['error'](new J["default"](N["default"].MANIFEST_ERROR_ID_NOSTREAMS_CODE,c.message+"nostreamscomposed",fa['getValue']())),Ha=!0,ca()}}function Q(){var a=fa['getValue']();qa&&(va['trigger'](y["default"].PROTECTION_CREATED,{'controller':qa,'manifest':a}),qa['resetForUpdateData'](),qa['setMediaElement'](Qa['getElement']()),za&&qa['setProtectionData'](za)),K()}function W(a){if(a.error)Ha=!0,ca();else{var e=a.manifest;ka['updatePeriods'](e);var n=ka['getStreamsInfo'](void 0,1)[0],l=ka['getMediaInfoForType'](n,i["default"].VIDEO)||ka['getMediaInfoForType'](n,i["default"].AUDIO),E=void 0;l&&(E=ga['getUseCalculatedLiveEdgeTimeForAdaptation'](ka['getDataForMedia'](l)),E&&(sa['debug']("SegmentTimeline detected using calculated Live Edge Time"),Xa['setUseManifestDateHeaderTimeSource'](!1)));var o=ga['getUTCTimingSources'](a.manifest),t=!ga['getIsDynamic'](e)||E?o:o['concat'](Xa['getUTCTimingSources']()),r=La['isHTTPS'](a.manifest.url);t['forEach'](function(a){a['value']['replace'](/.*?:\/\//g,"")===Xa['getDefaultUtcTimingSource']()['value']['replace'](/.*?:\/\//g,"")&&(a['value']=a['value']['replace'](r?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),r?"https://":"http://"),sa['debug']("Matching default timing source protocol to manifest protocol: ",a.value))}),Aa['initialize'](e),ua['setConfig']({'metricsModel':Ma,'dashMetrics':Pa,'baseURLController':Aa}),ua['initialize'](t,Xa['getUseManifestDateHeaderTimeSource']())}}function X(a){var e=void 0;if(!a)return e;switch(a){case i["default"].VIDEO:e=_a;break;case i["default"].AUDIO:e=ae}return e}function Y(a){var e=!1;return ja&&ja['getProcessors']()['forEach'](function(n){n['getMediaInfo']()['type']===a&&(e=!0)}),e}function Z(a,e){e=e||new Date,$a&&(ja&&ja['getProcessors']()['forEach'](function(n){var l=n['getScheduleController']();l&&l['finalisePlayList'](e,a)}),Ma['addPlayList']($a),$a=null)}function $(a){$a=new D.PlayList,$a['start']=new Date,$a['mstart']=1e3*Wa['getTime'](),$a['starttype']=a,ja&&ja['getProcessors']()['forEach'](function(a){var e=a['getScheduleController']();e&&e['setPlayList']($a)})}function _(a){if(a.error){var e="";switch(a.error.code){case 1:e="MEDIA_ERR_ABORTED";break;case 2:e="MEDIA_ERR_NETWORK";break;case 3:e="MEDIA_ERR_DECODE";break;case 4:e="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:e="MEDIA_ERR_ENCRYPTED";break;default:e="UNKNOWN"}Ga=!0,a.error.message&&(e+=" ("+a.error.message+")"),a.error.msExtendedCode&&(e+=" (0x"+(a.error.msExtendedCode>>>0)['toString'](16)['toUpperCase']()+")"),sa['fatal']("Video Element Error: "+e),a.error&&sa['fatal'](a.error),Na['mediaSourceError'](e),Na['error'](new J["default"](a.error.code,e)),ca()}}function aa(){return ja?ja['getStreamInfo']():null}function ea(a){return Va['filter'](function(e){return e['getId']()===a})[0]}function na(){if(!(Ca&&Ca['hasOwnProperty']("load")&&Oa&&Oa['hasOwnProperty']("initialize")&&Oa['hasOwnProperty']("reset")&&Oa['hasOwnProperty']("getClientTimeOffset")&&fa&&Na&&Ma&&Wa))throw new Error("setConfig function has to be called previously")}function la(){if(!ma||!ma['hasOwnProperty']("setManifest"))throw new Error("initialize function has to be called previously")}function Ea(a){na(),Ca['load'](a)}function oa(a){la(),ma['setManifest'](a)}function ia(a){isNaN(a.newDuration)||G(a.newDuration)}function ta(a){a&&(a.capabilities&&(Da=a.capabilities),a.manifestLoader&&(Ca=a.manifestLoader),a.manifestModel&&(fa=a.manifestModel),a.dashManifestModel&&(ga=a.dashManifestModel),a.mediaPlayerModel&&(Xa=a.mediaPlayerModel),a.protectionController&&(qa=a.protectionController),a.adapter&&(ka=a.adapter),a.metricsModel&&(Ma=a.metricsModel),a.dashMetrics&&(Pa=a.dashMetrics),a.errHandler&&(Na=a.errHandler),a.timelineConverter&&(Oa=a.timelineConverter),a.videoModel&&(Qa=a.videoModel),a.playbackController&&(Wa=a.playbackController),a.domStorage&&(Ra=a.domStorage),a.abrController&&(Sa=a.abrController),a.mediaController&&(Ua=a.mediaController),a.textController&&(Ia=a.textController),a.baseURLController&&(Aa=a.baseURLController))}function ra(a){za=a}function ba(){va['trigger'](y["default"].VO_DASH_REPORT_STREAM_TYPE,{'audioTrackDetected':ae,'videoTrackDetected':_a})}function da(){Va=[],qa=null,Fa=!1,ja=null,Ga=!1,Ha=!1,_a=void 0,ae=void 0,Za=!0,Ya=!1,Ba=!0,$a=null,ne=void 0,ee=!1,Ee=0}function ca(){na(),ua['reset'](),Z(Ga||Ha?D.PlayListTrace.FAILURE_STOP_REASON:D.PlayListTrace.USER_REQUEST_STOP_REASON);for(var a=0,e=Va?Va.length:0;e>a;a++){var n=Va[a];n['reset'](Ga)}l(),Aa['reset'](),ma['reset'](),Ma['clearAllCurrentMetrics'](),fa['setValue'](null),Ca['reset'](),Oa['reset'](),Ja['reset'](),Ka&&(Ta['detachMediaSource'](Qa),Ka=null),Qa=null,qa&&(qa['setMediaElement'](null),qa=null,za=null,fa['getValue']()&&va['trigger'](y["default"].PROTECTION_DESTROYED,{'data':fa['getValue']().url})),va['trigger'](y["default"].STREAM_TEARDOWN_COMPLETE),ja&&ja['stopEventController'](),da()}function pa(a){a['metric']===r["default"].DVR_INFO&&a['mediaType']===i["default"].AUDIO&&Ta['setSeekable'](Ka,a.value.range.start,a.value.range.end)}var wa=40,xa=this.context,va=x["default"](xa)['getInstance'](),ya=xa.commonUtil,ha=void 0,sa=void 0,Da=void 0,ma=void 0,Ca=void 0,fa=void 0,ga=void 0,ka=void 0,Ma=void 0,Pa=void 0,Ta=void 0,ua=void 0,Aa=void 0,Ra=void 0,Sa=void 0,Ua=void 0,Ia=void 0,Ja=void 0,La=void 0,Na=void 0,Oa=void 0,Va=void 0,ja=void 0,qa=void 0,za=void 0,Ba=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ka=void 0,Qa=void 0,Wa=void 0,Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,_a=void 0,ae=void 0,ee=void 0,ne=void 0,le=void 0,Ee=void 0,oe=void 0,ie=void 0,te=void 0,re=void 0;return ha={'initialize':e,'getActiveStreamInfo':aa,'isTrackTypePresent':X,'switchToVideoElement':z,'getStreamById':ea,'getStreamForTime':S,'getTimeRelativeToStreamId':I,'load':Ea,'loadWithManifest':oa,'getActiveStreamProcessors':L,'setConfig':ta,'setProtectionData':ra,'reset':ca,'setMediaDuration':G,'isEnded':E},a(),ha}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(80),r=l(t),b=a(76),d=l(b),c=a(71),p=l(c),w=a(18),x=l(w),v=a(24),y=l(v),h=a(19),s=l(h),D=a(216),m=a(17),C=l(m),f=a(184),g=l(f),k=a(190),M=l(k),P=a(73),T=l(P),u=a(93),A=l(u),R=a(83),S=(l(R),a(89)),U=l(S),I=a(194),J=l(I),L=a(21),N=l(L);E['__visualon_factory_name']="StreamController",n["default"]=s["default"]['getSingletonFactory'](E)},{'17':17,'18':18,'184':184,'19':19,'190':190,'194':194,'21':21,'216':216,'24':24,'71':71,'73':73,'76':76,'79':79,'80':80,'83':83,'89':89,'93':93}],'93':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){L=D["default"](S)['getInstance']()['getLogger'](J)}function e(a,e){j=e,N=0,O=!1,V=!1,q={"urn:mpeg:dash:utc:http-head:2014":M,"urn:mpeg:dash:utc:http-xsdate:2014":k['bind'](null,y),"urn:mpeg:dash:utc:http-iso:2014":k['bind'](null,h),"urn:mpeg:dash:utc:direct:2014":g,"urn:mpeg:dash:utc:http-head:2012":M,"urn:mpeg:dash:utc:http-xsdate:2012":k['bind'](null,y),"urn:mpeg:dash:utc:http-iso:2012":k['bind'](null,h),"urn:mpeg:dash:utc:direct:2012":g,"urn:mpeg:dash:utc:http-ntp:2014":m,"urn:mpeg:dash:utc:ntp:2014":m,"urn:mpeg:dash:utc:sntp:2014":m},o()||(A(a),t(!0))}function n(a){a&&(a.metricsModel&&(z=a.metricsModel),a.dashMetrics&&(B=a.dashMetrics),a.baseURLController&&(F=a.baseURLController))}function l(){return p()}function E(a){O=a}function o(){return O}function t(a){V=a}function d(a){N=a}function p(){return N}function x(a){var e=60,n=60,l=1e3,E=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,o=void 0,i=void 0,t=E['exec'](a);return t?(o=Date['UTC'](parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&(parseInt(t[6],10)||0),t[7]&&parseFloat(t[7])*l||0),t[9]&&t[10]&&(i=parseInt(t[9],10)*n+parseInt(t[10],10),o+=("+"===t[8]?-1:1)*i*e*l),new Date(o)['getTime']()):NaN}function y(a){var e=Date['parse'](a);return isNaN(e)&&(e=x(a)),e}function h(a){return Date['parse'](a)}function s(a){return Date['parse'](a)}function m(a,e,n){n()}function g(a,e,n){var l=y(a);return isNaN(l)?void n():void e(l)}function k(a,e,n,l,E){var o=void 0,i=void 0,t=!1,r=new XMLHttpRequest,d=E?b.HTTPRequest.HEAD:b.HTTPRequest.GET,c=e['match'](/\S+/g);e=c['shift']();var p=(new Date)['getTime']();if(o=function(){t||(t=!0,c.length?k(a,c['join'](" "),n,l,E):l())},i=function(){var e=void 0,l=void 0;if(200===r.status){var o=((new Date)['getTime']()-p)/2;e=E?r['getResponseHeader']("Date"):r.response,l=a(e),isNaN(l)||(n(l+o),t=!0)}},I['isRelative'](e)){var w=F['resolve']();w&&(e=I['resolve'](e,w.url))}r['open'](d,e),r['timeout']=f||0,r['onload']=i,r['onloadend']=o,r['send']()}function M(a,e,n){k(s,a,e,n,!0)}function P(){var a=z['getReadOnlyMetricsFor'](i["default"].STREAM),e=B['getLatestMPDRequestHeaderValueByID'](a,"Date"),n=null!==e?new Date(e)['getTime']():Number.NaN;isNaN(n)?T(!0):(d(n-(new Date)['getTime']()),T(!1,n/1e3,N))}function T(a,e,n){E(!1),U['trigger'](w["default"].TIME_SYNCHRONIZATION_COMPLETED,{'time':e,'offset':n,'error':a?new r["default"](v["default"].TIME_SYNC_FAILED_ERROR_CODE,v["default"].TIME_SYNC_FAILED_ERROR_MESSAGE):null})}function u(a,e){return a-e}function A(a,e){var n=e||0,l=a[n],o=function(a,e){var n=!a||!e;n&&j?P():T(n,a,e)};E(!0),l?q['hasOwnProperty'](l.schemeIdUri)?q[l.schemeIdUri](l.value,function(a){var e=(new Date)['getTime'](),n=u(a,e);d(n),L['info']("Local time: "+new Date(e)),L['info']("Server time: "+new Date(a)),L['info']("Server Time - Local Time (ms): "+n),o(a,n)},function(){A(a,n+1)}):A(a,n+1):(d(0),o())}function R(){t(!1),E(!1)}var S=this.context,U=c["default"](S)['getInstance'](),I=C["default"](S)['getInstance'](),J=void 0,L=void 0,N=void 0,O=void 0,V=void 0,j=void 0,q=void 0,z=void 0,B=void 0,F=void 0;return J={'initialize':e,'getOffsetToDeviceTimeMs':l,'setConfig':n,'reset':R},a(),J}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(194),r=l(t),b=a(214),d=a(18),c=l(d),p=a(24),w=l(p),x=a(21),v=l(x),y=a(19),h=l(y),s=a(17),D=l(s),m=a(190),C=l(m),f=5e3;E['__visualon_factory_name']="TimeSyncController";var g=h["default"]['getSingletonFactory'](E);g['HTTP_TIMEOUT_MS']=f,h["default"]['updateSingletonFactory'](E.__visualon_factory_name,g),n["default"]=g},{'17':17,'18':18,'19':19,'190':190,'194':194,'21':21,'214':214,'24':24,'79':79}],'94':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){k['on'](d["default"].XLINK_ELEMENT_LOADED,b,P),S=i["default"](g)['create']({'errHandler':a.errHandler,'metricsModel':a.metricsModel,'mediaPlayerModel':a.mediaPlayerModel,'requestModifier':a.requestModifier})}function n(a){a&&(T=a)}function l(a){a&&(u=a)}function E(a){var e=void 0;R=new x["default"]({'escapeMode':!1,'attributePrefix':"",'arrayAccessForm':"property",'emptyNodeForm':"object",'stripWhitespaces':!1,'enableToStringFunc':!1,'ignoreRoot':!0,'matchers':T}),A=a,e=p(A.Period_asArray,A,s["default"].PERIOD,D),t(e,s["default"].PERIOD,D)}function o(){k['off'](d["default"].XLINK_ELEMENT_LOADED,b,P),S&&(S['reset'](),S=null)}function t(a,e,n){var l={},E=void 0,o=void 0;l['elements']=a,l['type']=e,l['resolveType']=n,0===l.elements.length&&c(l);for(var i=0;i<l.elements.length;i++)E=l['elements'][i],o=M['isHTTPURL'](E.url)?E.url:E.originalContent.BaseURL+E.url,S['load'](o,E,l)}function b(a){var e=void 0,n=void 0,l="<response>",E="</response>",o="";if(e=a.element,n=a.resolveObject,e.resolvedContent){var i=0;0===e['resolvedContent']['indexOf']("<?xml")&&(i=e['resolvedContent']['indexOf']("?>")+2),o=e['resolvedContent']['substr'](0,i)+l+e['resolvedContent']['substr'](i)+E,e['resolvedContent']=R['xml_str2json'](o)}h(n)&&c(n)}function c(a){var e=[],n=void 0,l=void 0;if(w(a),a['resolveType']===m&&k['trigger'](d["default"].XLINK_READY,{'manifest':A,'sender':P}),a['resolveType']===D)switch(a.type){case s["default"].PERIOD:for(n=0;n<A[s["default"].PERIOD+"_asArray"].length;n++)l=A[s["default"].PERIOD+"_asArray"][n],l['hasOwnProperty'](s["default"].ADAPTATION_SET+"_asArray")&&(e=e['concat'](p(l[s["default"].ADAPTATION_SET+"_asArray"],l,s["default"].ADAPTATION_SET,D))),l['hasOwnProperty'](s["default"].EVENT_STREAM+"_asArray")&&(e=e['concat'](p(l[s["default"].EVENT_STREAM+"_asArray"],l,s["default"].EVENT_STREAM,D)));t(e,s["default"].ADAPTATION_SET,D);break;case s["default"].ADAPTATION_SET:k['trigger'](d["default"].XLINK_READY,{'manifest':A,'sender':P})}}function p(a,e,n,l){var E=[],o=void 0,i=void 0,t=void 0;for(i=a.length-1;i>=0;i--)o=a[i],o['hasOwnProperty']("xlink:href")&&o["xlink:href"]===C&&a['splice'](i,1);for(i=0;i<a.length;i++)o=a[i],o['hasOwnProperty']("xlink:href")&&o['hasOwnProperty']("xlink:actuate")&&o["xlink:actuate"]===l&&(t=v(o["xlink:href"],e,n,i,l,o),E['push'](t));return E}function w(a){var e=[],n=void 0,l=void 0,E=void 0,o=void 0,i=void 0,t=void 0;for(o=a.elements.length-1;o>=0;o--){if(n=a['elements'][o],l=n.type+"_asArray",!n.resolvedContent||f())delete n['originalContent']["xlink:actuate"],delete n['originalContent']["xlink:href"],e['push'](n.originalContent);else if(n.resolvedContent)for(i=0;i<n['resolvedContent'][l].length;i++)E=n['resolvedContent'][l][i],e['push'](E);for(n['parentElement'][l]['splice'](n.index,1),t=0;t<e.length;t++)n['parentElement'][l]['splice'](n.index+t,0,e[t]);e=[]}a.elements.length>0&&u['run'](A)}function v(a,e,n,l,E,o){return{'url':a,'parentElement':e,'type':n,'index':l,'resolveType':E,'originalContent':o,'resolvedContent':null,'resolved':!1}}function h(a){var e=void 0,n=void 0;for(e=0;e<a.elements.length;e++)if(n=a['elements'][e],n['resolved']===!1)return!1;return!0}function f(){return!1}a=a||{};var g=this.context,k=r["default"](g)['getInstance'](),M=y["default"](g)['getInstance'](),P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0;return P={'resolveManifestOnLoad':E,'setMatchers':n,'setIron':l,'reset':o},e(),P}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(78),i=l(o),t=a(18),r=l(t),b=a(24),d=l(b),c=a(19),p=l(c),w=a(16),x=l(w),v=a(190),y=l(v),h=a(31),s=l(h),D="onLoad",m="onActuate",C="urn:mpeg:dash:resolve-to-zero:2013";E['__visualon_factory_name']="XlinkController",n["default"]=p["default"]['getClassFactory'](E)},{'16':16,'18':18,'19':19,'190':190,'24':24,'31':31,'78':78}],'95':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){return o=i["default"](l)['getInstance']({'eventBus':a.eventBus,'metricsModel':a.metricsModel,'metricsConstants':a.metricsConstants,'events':a.events}),d["default"](l)['create'](a)}function e(){return x["default"](l)['getInstance']()}function n(){return p["default"](l)['getInstance']()}var l=this.context,E=void 0,o=void 0;return E={'createMetricsReporting':a,'getReportingFactory':e,'getMetricsHandlerFactory':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(109),i=l(o),t=a(96),r=l(t),b=a(97),d=l(b),c=a(102),p=l(c),w=a(107),x=l(w),v=a(19),y=l(v);E['__visualon_factory_name']="MetricsReporting";var h=y["default"]['getClassFactory'](E);h['events']=r["default"],y["default"]['updateClassFactory'](E.__visualon_factory_name,h),n["default"]=h},{'102':102,'107':107,'109':109,'19':19,'96':96,'97':97}],'96':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(25),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['METRICS_INITIALISATION_COMPLETE']="internal_metricsReportingInitialized",a['BECAME_REPORTING_PLAYER']="internal_becameReportingPlayer",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'25':25}],'97':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(e){if(!e.error){var n=Object['keys'](o),l=r["default"](t)['getInstance']({'dashManifestModel':a.dashManifestModel,'constants':a.constants})['getMetrics'](e.manifest);l['forEach'](function(e){var l=JSON['stringify'](e);if(o['hasOwnProperty'](l))n['splice'](l,1);else try{var E=i["default"](t)['create'](a);E['initialize'](e),o[l]=E}catch(r){}}),n['forEach'](function(a){o[a]['reset'](),delete o[a]}),b['trigger'](d["default"].METRICS_INITIALISATION_COMPLETE)}}function n(){Object['keys'](o)['forEach'](function(a){o[a]['reset']()}),o={}}function l(){b['on'](c.MANIFEST_UPDATED,e),b['on'](c.STREAM_TEARDOWN_COMPLETE,n)}function E(){b['off'](c.MANIFEST_UPDATED,e),b['off'](c.STREAM_TEARDOWN_COMPLETE,n)}a=a||{};var o={},t=this.context,b=a.eventBus,c=a.events;return l(),{'reset':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(98),i=l(o),t=a(111),r=l(t),b=a(96),d=l(b),c=a(19),p=l(c);E['__visualon_factory_name']="MetricsCollectionController",n["default"]=p["default"]['getClassFactory'](E)},{'111':111,'19':19,'96':96,'98':98}],'98':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(e){try{o=i["default"](b)['create']({'mediaElement':a.mediaElement}),o['initialize'](e.Range),E=r["default"](b)['create']({'debug':a.debug,'metricsConstants':a.metricsConstants}),E['initialize'](e.Reporting,o),l=d["default"](b)['create']({'debug':a.debug,'eventBus':a.eventBus,'metricsConstants':a.metricsConstants,'events':a.events}),l['initialize'](e.metrics,E)}catch(t){throw n(),t}}function n(){l&&l['reset'](),E&&E['reset'](),o&&o['reset']()}a=a||{};var l=void 0,E=void 0,o=void 0,t=void 0,b=this.context;return t={'initialize':e,'reset':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(100),i=l(o),t=a(101),r=l(t),b=a(99),d=l(b),c=a(19),p=l(c);E['__visualon_factory_name']="MetricsController",n["default"]=p["default"]['getClassFactory'](E)},{'100':100,'101':101,'19':19,'99':99}],'99':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){E['forEach'](function(e){e['handleNewMetric'](a.metric,a.value,a.mediaType)})}function n(a,n){a['split'](",")['forEach'](function(a,e,l){var o=void 0;if(-1!==a['indexOf']("(")&&-1===a['indexOf'](")")){var i=l[e+1];i&&-1===i['indexOf']("(")&&-1!==i['indexOf'](")")&&(a+=","+i,delete l[e+1])}o=d['create'](a,n),o&&E['push'](o)}),r['on'](b.METRIC_ADDED,e,o),r['on'](b.METRIC_UPDATED,e,o)}function l(){r['off'](b.METRIC_ADDED,e,o),r['off'](b.METRIC_UPDATED,e,o),E['forEach'](function(a){return a['reset']()}),E=[]}a=a||{};var E=[],o=void 0,t=this.context,r=a.eventBus,b=a.events,d=i["default"](t)['getInstance']({'debug':a.debug,'eventBus':a.eventBus,'metricsConstants':a.metricsConstants});return o={'initialize':n,'reset':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(102),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="MetricsHandlersController",n["default"]=r["default"]['getClassFactory'](E)},{'102':102,'19':19}],'100':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){a&&a.length&&(a['forEach'](function(a){var e=a.starttime,n=e+a.duration;b['add'](e,n)}),o=!!a[0]._useWallClockTime)}function n(){b['clear']()}function l(){b=i["default"](t)['create']()}function E(){var a=b.length,e=void 0;if(!a)return!0;e=o?(new Date)['getTime']()/1e3:d.currentTime;for(var n=0;a>n;n+=1){var l=b['start'](n),E=b['end'](n);if(e>=l&&E>e)return!0}return!1}a=a||{};var o=!1,t=this.context,r=void 0,b=void 0,d=a.mediaElement;return r={'initialize':e,'reset':n,'isEnabled':E},l(),r}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(179),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="RangeController",n["default"]=r["default"]['getClassFactory'](E)},{'179':179,'19':19}],'101':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e){a['some'](function(a){var n=t['create'](a,e);return n?(E['push'](n),!0):void 0})}function n(){E['forEach'](function(a){return a['reset']()}),E=[]}function l(a,e){E['forEach'](function(n){return n['report'](a,e)})}var E=[],o=void 0,t=i["default"](this.context)['getInstance'](a);return o={'initialize':e,'reset':n,'report':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(107),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="ReportingController",n["default"]=r["default"]['getClassFactory'](E)},{'107':107,'19':19}],'102':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(e,n){var l=e['match'](t),E=void 0;if(l){try{E=c[l[1]](b)['create']({'eventBus':a.eventBus,'metricsConstants':a.metricsConstants}),E['initialize'](l[1],n,l[3],l[5])}catch(i){E=null,o['error']("MetricsHandlerFactory: Could not create handler for type "+l[1]+" with args "+l[3]+", "+l[5]+" ("+i.message+")")}return E}}function n(a,e){c[a]=e}function l(a){delete c[a]}a=a||{};var E=void 0,o=a.debug,t=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,b=this.context,c={'BufferLevel':i["default"],'DVBErrors':r["default"],'HttpList':d["default"],'PlayList':p["default"],'RepSwitchList':p["default"],'TcpList':p["default"]};return E={'create':e,'register':n,'unregister':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(103),i=l(o),t=a(104),r=l(t),b=a(106),d=l(b),c=a(105),p=l(c),w=a(19),x=l(w);E['__visualon_factory_name']="MetricsHandlerFactory",n["default"]=x["default"]['getSingletonFactory'](E)},{'103':103,'104':104,'105':105,'106':106,'19':19}],'103':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){try{return Object['keys'](v)['map'](function(a){return v[a]})['reduce'](function(a,e){return a.level<e.level?a:e})}catch(a){return}}function n(){var a=e();a&&p!==a.t&&(p=a.t,r['report'](d,a))}function l(a,e,l){e&&(b=x['validateN'](l),r=e,d=x['reconstructFullMetricName'](a,l),clearInterval(c),c=setInterval(n,b))}function E(){clearInterval(c),c=null,b=0,r=null,p=null}function o(a,e,n){a===y.BUFFER_LEVEL&&(v[n]=e)}a=a||{};var t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=void 0,w=this.context,x=i["default"](w)['getInstance'](),v=[],y=a.metricsConstants;return t={'initialize':l,'reset':E,'handleNewMetric':o}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(110),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="BufferLevelHandler",n["default"]=r["default"]['getClassFactory'](E)},{'110':110,'19':19}],'104':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){r['off'](i["default"].METRICS_INITIALISATION_COMPLETE,e,this),r['trigger'](i["default"].BECAME_REPORTING_PLAYER)}function n(a,n){n&&(t=n,r['on'](i["default"].METRICS_INITIALISATION_COMPLETE,e,this))}function l(){t=null}function E(a,e){a===b.DVB_ERRORS&&t&&t['report'](a,e)}a=a||{};
var o=void 0,t=void 0,r=a.eventBus,b=a.metricsConstants;return o={'initialize':n,'reset':l,'handleNewMetric':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(96),i=l(o),t=a(19),r=l(t);n["default"]=r["default"]['getClassFactory'](E)},{'19':19,'96':96}],'105':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){E=a,o=e}function e(){o=null,E=void 0}function n(a,e){a===E&&o&&o['report'](E,e)}var l=void 0,E=void 0,o=void 0;return l={'initialize':a,'reset':e,'handleNewMetric':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="GenericMetricHandler",n["default"]=i["default"]['getClassFactory'](E)},{'19':19}],'106':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){var a=p;a.length&&t&&t['report'](d,a),p=[]}function n(a,n,l,E){n&&(r=w['validateN'](l),t=n,E&&E.length&&(b=E),d=w['reconstructFullMetricName'](a,l,E),clearInterval(c),c=setInterval(e,r))}function l(){clearInterval(c),c=null,r=null,b=null,p=[],t=null}function E(a,e){a===x.HTTP_REQUEST&&(b&&b!==e.type||p['push'](e))}a=a||{};var o=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=[],w=i["default"](this.context)['getInstance'](),x=a.metricsConstants;return o={'initialize':n,'reset':l,'handleNewMetric':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(110),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="HttpListHandler",n["default"]=r["default"]['getClassFactory'](E)},{'110':110,'19':19}],'107':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e){var n=void 0;try{n=E[a.schemeIdUri](o)['create']({'metricsConstants':r}),n['initialize'](a,e)}catch(l){n=null,t['error']("ReportingFactory: could not create Reporting with schemeIdUri "+a.schemeIdUri+" ("+l.message+")")}return n}function n(a,e){E[a]=e}function l(a){delete E[a]}a=a||{};var E={"urn:dvb:dash:reporting:2014":i["default"]},o=this.context,t=a.debug,r=a.metricsConstants,b=void 0;return b={'create':e,'register':n,'unregister':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(108),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="ReportingFactory",n["default"]=r["default"]['getSingletonFactory'](E)},{'108':108,'19':19}],'108':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e,n){var l=new XMLHttpRequest,E=function(){var a=h['indexOf'](l);-1!==a&&(h['splice'](a,1),l.status>=200&&l.status<300?e&&e():n&&n())};h['push'](l);try{l['open']("GET",a),l['onloadend']=E,l['onerror']=E,l['send']()}catch(o){l['onerror']()}}function n(a,n){Array['isArray'](n)||(n=[n]),p&&v['isEnabled']()&&n['forEach'](function(n){var l=b['serialise'](n);c&&a!==s.DVB_ERRORS&&(l="metricname="+a+"&"+l),l=x+"?"+l,e(l,null,function(){p=!1})})}function l(a,e){var n=void 0;if(v=e,x=a["dvb:reportingUrl"],!x)throw new Error("required parameter missing (dvb:reportingUrl)");w||(n=a["dvb:probability"]||a["dvb:priority"]||0,n&&(1e3===n||n/1e3>=d['random']())&&(p=!0),w=!0)}function E(){y||(h['forEach'](function(a){return a['abort']()}),h=[]),w=!1,p=!1,x=null,v=null}a=a||{};var o=void 0,t=this.context,b=i["default"](t)['getInstance'](),d=r["default"](t)['getInstance'](),c=!0,p=!1,w=!1,x=null,v=null,y=!0,h=[],s=a.metricsConstants;return o={'report':n,'initialize':l,'reset':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(112),i=l(o),t=a(113),r=l(t),b=a(19),d=l(b);E['__visualon_factory_name']="DVBReporting",n["default"]=d["default"]['getClassFactory'](E)},{'112':112,'113':113,'19':19}],'109':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){var e=new i["default"];if(v){for(var n in a)a['hasOwnProperty'](n)&&(e[n]=a[n]);e.mpdurl||(e['mpdurl']=v.originalUrl||v.url),e.terror||(e['terror']=new Date),x['addDVBErrors'](e)}}function n(a){a.error||(v=a.manifest)}function l(a){e({'errorcode':i["default"].BASE_URL_CHANGED,'servicelocation':a.entry})}function E(){e({'errorcode':i["default"].BECAME_REPORTER})}function o(a){(0===a.responsecode||a.responsecode>=400||a.responsecode<100||a.responsecode>=600)&&e({'errorcode':a.responsecode||i["default"].CONNECTION_ERROR,'url':a.url,'terror':a.tresponse,'servicelocation':a._serviceLocation})}function t(a){switch(a.metric){case y.HTTP_REQUEST:o(a.value)}}function b(a){var n=a.error?a.error.code:0,l=void 0;switch(n){case MediaError.MEDIA_ERR_NETWORK:l=i["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:l=i["default"].CORRUPT_MEDIA_OTHER;break;default:return}e({'errorcode':l})}function d(){w['on'](h.MANIFEST_UPDATED,n,p),w['on'](h.SERVICE_LOCATION_BLACKLIST_CHANGED,l,p),w['on'](h.METRIC_ADDED,t,p),w['on'](h.METRIC_UPDATED,t,p),w['on'](h.PLAYBACK_ERROR,b,p),w['on'](r["default"].BECAME_REPORTING_PLAYER,E,p)}function c(){w['off'](h.MANIFEST_UPDATED,n,p),w['off'](h.SERVICE_LOCATION_BLACKLIST_CHANGED,l,p),w['off'](h.METRIC_ADDED,t,p),w['off'](h.METRIC_UPDATED,t,p),w['off'](h.PLAYBACK_ERROR,b,p),w['off'](r["default"].BECAME_REPORTING_PLAYER,E,p)}a=a||{};var p=void 0,w=a.eventBus,x=a.metricsModel,v=void 0,y=a.metricsConstants,h=a.events;return p={'initialise':d,'reset':c},d(),p}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(114),i=l(o),t=a(96),r=l(t),b=a(19),d=l(b);E['__visualon_factory_name']="DVBErrorsTranslator",n["default"]=d["default"]['getSingletonFactory'](E)},{'114':114,'19':19,'96':96}],'110':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){return{'reconstructFullMetricName':function(a,e,n){var l=a;return e&&(l+="("+e,n&&n.length&&(l+=","+n),l+=")"),l},'validateN':function(a){if(!a)throw new Error("missing n");if(isNaN(a))throw new Error("n is NaN");if(0>a)throw new Error("n must be positive");return a}}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="HandlerHelpers",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'111':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e,n){var l=E['getMpd'](a),i=void 0,t=0,r=void 0;return e?t=l['availabilityStartTime']['getTime']()/1e3:(i=this['getRegularPeriods'](l),i.length&&(t=i[0].start)),r=t,n&&n['hasOwnProperty'](o.START_TIME)&&(r+=n.starttime),r}function n(a){var n=[];return a.Metrics_asArray&&a['Metrics_asArray']['forEach'](function(l){var t=new i["default"],b=E['getIsDynamic'](a);l['hasOwnProperty']("metrics")&&(t['metrics']=l.metrics,l.Range_asArray&&l['Range_asArray']['forEach'](function(n){var l=new r["default"];l['starttime']=e(a,b,n),n['hasOwnProperty']("duration")?l['duration']=n.duration:l['duration']=E['getDuration'](a),l['_useWallClockTime']=b,t['Range']['push'](l)}),l.Reporting_asArray&&(l['Reporting_asArray']['forEach'](function(a){var e=new d["default"];if(a['hasOwnProperty'](o.SCHEME_ID_URI)){e['schemeIdUri']=a.schemeIdUri;for(var n in a)a['hasOwnProperty'](n)&&(e[n]=a[n]);t['Reporting']['push'](e)}}),n['push'](t)))}),n}a=a||{};var l=void 0,E=a.dashManifestModel,o=a.constants;return l={'getMetrics':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(115),i=l(o),t=a(116),r=l(t),b=a(117),d=l(b),c=a(19),p=l(c);E['__visualon_factory_name']="ManifestParsing",n["default"]=p["default"]['getSingletonFactory'](E)},{'115':115,'116':116,'117':117,'19':19}],'112':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(e){var n=[],l=[],E=void 0,o=void 0;for(E in e)if(e['hasOwnProperty'](E)&&0!==E['indexOf']("_")){if(o=e[E],(void 0===o||null===o)&&(o=""),Array['isArray'](o)){if(!o.length)continue;l=[],o['forEach'](function(e){var n="Object"!==Object.prototype['toString']['call'](e)['slice'](8,-1);l['push'](n?e:a(e))}),o=l['map'](encodeURIComponent)['join'](",")}else"string"==typeof o?o=encodeURIComponent(o):o instanceof Date?o=o['toISOString']():"number"==typeof o&&(o=Math['round'](o));n['push'](E+"="+o)}return n['join']("&")}return{'serialise':a}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="MetricSerialiser",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'113':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){n&&(i||(i=new l(o)),n['getRandomValues'](i),t=0)}function e(e,l){var o=void 0;return e||(e=0),l||(l=1),n?(t===i.length&&a(),o=i[t]/E,t+=1):o=Math['random'](),o*(l-e)+e}var n=window.crypto||window.msCrypto,l=Uint32Array,E=Math['pow'](2,8*l.BYTES_PER_ELEMENT)-1,o=10,i=void 0,t=void 0,r=void 0;return r={'random':e},a(),r}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="RNG",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'114':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['mpdurl']=null,this['errorcode']=null,this['terror']=null,this['url']=null,this['ipaddress']=null,this['servicelocation']=null};E['SSL_CONNECTION_FAILED_PREFIX']="SSL",E['DNS_RESOLUTION_FAILED']="C00",E['HOST_UNREACHABLE']="C01",E['CONNECTION_REFUSED']="C02",E['CONNECTION_ERROR']="C03",E['CORRUPT_MEDIA_ISOBMFF']="M00",E['CORRUPT_MEDIA_OTHER']="M01",E['BASE_URL_CHANGED']="F00",E['BECAME_REPORTER']="S00",n["default"]=E},{}],'115':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['metrics']="",this['Range']=[],this['Reporting']=[]};n["default"]=E},{}],'116':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['starttime']=0,this['duration']=1/0,this['_useWallClockTime']=!1};n["default"]=E},{}],'117':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['schemeIdUri']="",this['value']=""};n["default"]=E},{}],'118':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){function a(){b()}function e(a){a.dashManifestModel&&(v=a.dashManifestModel)}function n(){if(!v||!v['hasOwnProperty']("getBaseURLsFromElement")||!v['hasOwnProperty']("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}function l(a,e,n){var l=v['getBaseURLsFromElement'](n);a[e]?h['areEqual'](l,a[e].data.baseUrls)||(a[e]['data']['baseUrls']=l,a[e]['data']['selectedIdx']=d):a[e]=new c(l)}function E(a){n();var e=v['getBaseURLsFromElement'](a);h['areEqual'](e,x.data.baseUrls)||(x['data']['baseUrls']=e,x['data']['selectedIdx']=d),a&&a.Period_asArray&&a['Period_asArray']['forEach'](function(a,e){l(x.children,e,a),a.AdaptationSet_asArray&&a['AdaptationSet_asArray']['forEach'](function(a,n){l(x['children'][e].children,n,a),a.Representation_asArray&&a['Representation_asArray']['sort'](v['getRepresentationSortFunction']())['forEach'](function(a,E){l(x['children'][e]['children'][n].children,E,a)})})})}function o(a,e){var n=e||x;a(n.data),n.children&&n['children']['forEach'](function(e){return o(a,e)})}function i(a){o(function(e){isNaN(e.selectedIdx)||a===e['baseUrls'][e.selectedIdx].serviceLocation&&(e['selectedIdx']=d)})}function r(a){E(a)}function b(){x=new c}function p(a){var e=x,n=[e.data];return a&&a['forEach'](function(a){e&&e.children&&e['children'][a]&&(e=e['children'][a]),e&&n['push'](e.data)}),n['filter'](function(a){return a.baseUrls.length})}var w=void 0,x=void 0,v=void 0,y=this.context,h=t["default"](y)['getInstance']();return w={'reset':b,'update':r,'getForPath':p,'invalidateSelectedIndexes':i,'setConfig':e},a(),w}Object['defineProperty'](n,"__esModule",{'value':!0});var i=a(187),t=l(i),r=a(19),b=l(r),d=NaN,c=function p(a,e){E(this,p),this['data']={'baseUrls':a||null,'selectedIdx':e||d},this['children']=[]};o['__visualon_factory_name']="BaseURLTreeModel",n["default"]=b["default"]['getClassFactory'](o)},{'187':187,'19':19}],'119':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){q=x["default"](J)['getInstance']()['getLogger'](j),R(),L['on'](r["default"].LOADING_COMPLETED,P,j),L['on'](r["default"].LOADING_DATA_PROGRESS,T,j),L['on'](r["default"].LOADING_ABANDONED,u,j)}function n(a){z=a}function l(){return z}function E(a){var e=function(a,e){return a['action']===p["default"].ACTION_COMPLETE&&a['action']===e.action},n=function(a,e){return!isNaN(a.index)&&a['startTime']===e.startTime&&a['adaptationIndex']===e.adaptationIndex&&a['type']===e.type},l=function(a,e){return isNaN(a.index)&&isNaN(e.index)&&a['quality']===e.quality},E=function(E){var o=!1;return E['some'](function(E){return n(a,E)||l(a,E)||e(a,E)?o=!0:void 0}),o};return a?E(B):!1}function o(a){var e=!1,n=0,l=void 0;if(e=E(a),!e)for(n=0;n<F.length;n++)l=F[n],a['url']===l.url&&a['startTime']===l.startTime&&(e=!0);return e}function t(a){var e=a?a.state instanceof Array?a.state:[a.state]:[],n=[];return e['forEach'](function(e){var l=k(e);n=n['concat'](g(l,a))}),n}function b(a){return isNaN(a.duration)?.25:Math['min'](a.duration/8,.5)}function d(a){B=B['filter'](function(e){var n=b(e);return isNaN(e.startTime)||(void 0!==a?e.startTime>=a-n:!1)})}function c(a){B=B['filter'](function(e){var n=b(e);return isNaN(e.startTime)||(void 0!==a?e.startTime+e.duration<a+n:!1)})}function w(a,e){a+.5>=e||(B=B['filter'](function(n){var l=b(n);return isNaN(n.startTime)||n.startTime>=e-l||isNaN(n.duration)||n.startTime+2*n.duration<=a+l}))}function h(a,e){if(!a||0===a.length)return void d();for(var n=0,l=0,E=a.length;E>l;l++)w(n,a['start'](l)),n=a['end'](l);e>0&&w(n,e)}function D(){O['abort'](),F=[]}function m(a){switch(a.action){case p["default"].ACTION_COMPLETE:B['push'](a),M(a,y),q['debug']("executeRequest trigger STREAM_COMPLETED"),L['trigger'](r["default"].STREAM_COMPLETED,{'request':a,'fragmentModel':this});break;case p["default"].ACTION_DOWNLOAD:M(a,v),F['push'](a),C(a);break;default:q['warn']("Unknown request action.")}}function C(a){L['trigger'](r["default"].FRAGMENT_LOADING_STARTED,{'sender':j,'request':a}),O['load'](a)}function f(a,e,n){for(var l=a.length-1,E=l;E>=0;E--){var o=a[E],i=o.startTime,t=i+o.duration;if(n=isNaN(n)?b(o):n,!isNaN(i)&&!isNaN(t)&&e+n>=i&&t>e-n||isNaN(i)&&isNaN(e))return o}return null}function g(a,e){return e['hasOwnProperty']("time")?[f(a,e.time,e.threshold)]:a['filter'](function(a){for(var n in e)if("state"!==n&&e['hasOwnProperty'](n)&&a[n]!=e[n])return!1;return!0})}function k(a){var e=void 0;switch(a){case v:e=F;break;case y:e=B;break;default:e=[]}return e}function M(a,e){N['addSchedulingInfo'](a.mediaType,new Date,a.type,a.startTime,a.availabilityStartTime,a.duration,a.quality,a.range,e),N['addRequestsQueue'](a.mediaType,F,B)}function P(a){a['sender']===O&&(F['splice'](F['indexOf'](a.request),1),B['push'](a.request),V['getUseFetch']()||M(a.request,a.error?s:y),A(!1),L['trigger'](r["default"].FRAGMENT_LOADING_COMPLETED,{'request':a.request,'response':a.response,'error':a.error,'sender':this}))}function T(a){a['sender']===O&&(!G&&V['getUseFetch']()&&M(a.request,a.error?s:y),A(!0),L['trigger'](r["default"].FRAGMENT_LOADING_PROGRESS,{'request':a.request,'response':a.response,'error':a.error,'sender':this}))}function u(a){a['sender']===O&&(A(!1),L['trigger'](r["default"].FRAGMENT_LOADING_ABANDONED,{'url':a.request.url,'droppedBytes':a.request.bytesLoaded,'downloadTime':Date['now']()-a.request['requestStartDate']['getTime'](),'streamProcessor':this['getStreamProcessor'](),'request':a.request,'mediaType':a.mediaType}))}function A(a){G!==a?G=a:q['debug']("isLoadingInProgress is already equal to",a)}function R(){B=[],F=[],G=!1}function S(){L['off'](r["default"].LOADING_COMPLETED,P,this),L['off'](r["default"].LOADING_DATA_PROGRESS,T,this),L['off'](r["default"].LOADING_ABANDONED,u,this),O&&O['reset'](),R()}function U(a){B['push'](a)}function I(){B=[],F=[],A(!1)}a=a||{};var J=this.context,L=i["default"](J)['getInstance'](),N=a.metricsModel,O=a.fragmentLoader,V=a.mediaPlayerModel,j=void 0,q=void 0,z=void 0,B=void 0,F=void 0,G=void 0;return j={'setStreamProcessor':n,'getStreamProcessor':l,'getRequests':t,'isFragmentLoaded':E,'isFragmentLoadedOrPending':o,'removeExecutedRequestsBeforeTime':d,'removeExecutedRequestsAfterTime':c,'syncExecutedRequestsWithBufferedRange':h,'abortRequests':D,'executeRequest':m,'reset':S,'addExecutedRequest':U,'cleanupRequests':I},e(),j}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(18),i=l(o),t=a(24),r=l(t),b=a(19),d=l(b),c=a(196),p=l(c),w=a(17),x=l(w),v="loading",y="executed",h="canceled",s="failed";E['__visualon_factory_name']="FragmentModel";var D=d["default"]['getClassFactory'](E);D['FRAGMENT_MODEL_LOADING']=v,D['FRAGMENT_MODEL_EXECUTED']=y,D['FRAGMENT_MODEL_CANCELED']=h,D['FRAGMENT_MODEL_FAILED']=s,d["default"]['updateClassFactory'](E.__visualon_factory_name,D),n["default"]=D},{'17':17,'18':18,'19':19,'196':196,'24':24}],'120':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){return o}function e(a){o=a,a&&l['trigger'](r["default"].MANIFEST_LOADED,{'data':a})}var n=this.context,l=i["default"](n)['getInstance'](),E=void 0,o=void 0;return E={'getValue':a,'setValue':e}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(18),i=l(o),t=a(24),r=l(t),b=a(19),d=l(b);E['__visualon_factory_name']="ManifestModel",n["default"]=d["default"]['getSingletonFactory'](E)},{'18':18,'19':19,'24':24}],'121':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(){function a(){var a,e;qe=[],je=!0,Ve=!0,He=!0,rn=p["default"].ABR_STRATEGY_DYNAMIC,bn=!0,cn=!1,Xe={'enabled':!0,'ttl':C},Ye={'enabled':!0,'ttl':f},ze=y,Fe=h,Ge=s,Ke=M,Qe=P,We=T,Ze=NaN,$e=R,_e=S,an=U,en=I,nn=g,ln=k,tn=Y,vn=!1,yn=J,Dn=L,dn={"default":Z},pn=[],wn=p["default"].MOVING_AVERAGE_SLIDING_WINDOW,Cn=Q,fn=W,Sn=X,a={},E(a,d.HTTPRequest.MPD_TYPE,q),E(a,d.HTTPRequest.XLINK_EXPANSION_TYPE,B),E(a,d.HTTPRequest.MEDIA_SEGMENT_TYPE,V),E(a,d.HTTPRequest.INIT_SEGMENT_TYPE,V),E(a,d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,V),E(a,d.HTTPRequest.INDEX_SEGMENT_TYPE,V),E(a,d.HTTPRequest.OTHER_TYPE,V),En=a,e={},E(e,d.HTTPRequest.MPD_TYPE,z),E(e,d.HTTPRequest.XLINK_EXPANSION_TYPE,F),E(e,d.HTTPRequest.MEDIA_SEGMENT_TYPE,j),E(e,d.HTTPRequest.INIT_SEGMENT_TYPE,j),E(e,d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,j),E(e,d.HTTPRequest.INDEX_SEGMENT_TYPE,j),E(e,d.HTTPRequest.OTHER_TYPE,j),on=e,xn={},xn[p["default"].VIDEO]=N,xn[p["default"].AUDIO]=O,mn=!1,Mn=D,Pn=.3,me()}function e(a){if(a!==p["default"].ABR_STRATEGY_DYNAMIC&&a!==p["default"].ABR_STRATEGY_BOLA&&a!==p["default"].ABR_STRATEGY_THROUGHPUT)throw p["default"].BAD_ARGUMENT_ERROR;rn=a}function n(){return rn}function l(a){v['checkParameterType'](a,"boolean"),bn=a}function o(){return bn}function i(a){var e=void 0;for(e=0;e<pn.length;e++)if(pn[e]['rulename']===a)return e;return-1}function r(){return pn}function b(a,e,n){if("string"!=typeof a||a!==x["default"].ABANDON_FRAGMENT_RULES&&a!==x["default"].QUALITY_SWITCH_RULES||"string"!=typeof e)throw p["default"].BAD_ARGUMENT_ERROR;var l=i(e);-1===l?pn['push']({'type':a,'rulename':e,'rule':n}):(pn[l]['type']=a,pn[l]['rule']=n)}function c(a){if(a){var e=i(a);-1!==e&&pn['splice'](e,1)}else pn=[]}function w(a){v['checkParameterType'](a,"number"),nn=a}function $(){return nn}function _(a){v['checkParameterType'](a,"number"),ln=a}function aa(){return ln}function ea(a){v['checkParameterType'](a,"number"),Ze=a}function na(){return Ee()?isNaN(Ze)?.6*(Na()>G?Na():G):Ze:isNaN(Ze)?cn?A:u:Ze}function la(a){v['checkParameterType'](a,"number"),Pn=a}function Ea(){return Pn}function oa(a){v['checkParameterType'](a,"number"),$e=a}function ia(){return $e}function ta(a){v['checkParameterType'](a,"number"),_e=a}function ra(){return _e}function ba(a){v['checkParameterType'](a,"number"),an=a}function da(){return an}function ca(a){v['checkParameterType'](a,"number"),en=a}function pa(){return en}function wa(a,e){v['checkParameterType'](e,"number"),v['checkIsVideoOrAudioType'](a),xn[a]=e}function xa(a){return xn[a]}function va(a){v['checkParameterType'](a,"number"),Ke=a}function ya(){return Ke}function ha(a){v['checkParameterType'](a,"number"),Qe=a}function sa(){return Qe}function Da(a,e){if("boolean"!=typeof a||void 0!==e&&("number"!=typeof e||isNaN(e)))throw p["default"].BAD_ARGUMENT_ERROR;Xe['enabled']=a,void 0!==e&&(Xe['ttl']=e)}function ma(){return Xe}function Ca(a,e){if("boolean"!=typeof a||void 0!==e&&("number"!=typeof e||isNaN(e)))throw p["default"].BAD_ARGUMENT_ERROR;Ye['enabled']=a,void 0!==e&&(Ye['ttl']=e)}function fa(){return Ye}function ga(a){v['checkParameterType'](a,"number"),We=a}function ka(){return We}function Ma(a,e){if("number"!=typeof e||"string"!=typeof a||a!==d.HTTPRequest.MPD_TYPE&&a!==d.HTTPRequest.MEDIA_SEGMENT_TYPE&&a!==d.HTTPRequest.INIT_SEGMENT_TYPE)throw p["default"].BAD_ARGUMENT_ERROR;En[a]=e}function Pa(a){return Ee()?En[a]*K:En[a]}function Ta(a,e){v['checkParameterType'](e,"number"),on[a]=e}function ua(a){return Ee()?on[a]/H:on[a]}function Aa(a){v['checkParameterType'](a,"number"),tn=a}function Ra(){return tn}function Sa(a){v['checkParameterType'](a,"boolean"),He=a}function Ua(){return He}function Ia(a){v['checkParameterType'](a,"number"),ze=a}function Ja(){return ze}function La(a){void 0!==a&&v['checkParameterType'](a,"number"),Be=a}function Na(){return Ee()?Be||G:Be}function Oa(a){v['checkParameterType'](a,"number"),Tn=a}function Va(){return Tn}function ja(a){v['checkParameterType'](a,"boolean"),Ve=a}function qa(){return Ve}function za(a){v['checkParameterType'](a,"boolean"),je=a}function Ba(){return je}function Fa(a,e){Ha(a,e);var n=new t["default"];n['schemeIdUri']=a,n['value']=e,qe['splice'](0,0,n)}function Ga(){return qe}function Ha(a,e){v['checkParameterType'](a,"string"),v['checkParameterType'](e,"string"),qe['forEach'](function(n,l){n['schemeIdUri']===a&&n['value']===e&&qe['splice'](l,1)})}function Ka(){qe=[]}function Qa(){Fa(Un.scheme,Un.value)}function Wa(a,e){a?dn[a]=!!e:Object['keys'](dn)['forEach'](function(a){Wa(a,e)})}function Xa(a){var e=dn[a];return void 0===e?dn["default"]:e}function Ya(){return cn}function Za(a){v['checkParameterType'](a,"boolean"),cn=a}function $a(a){if(a!==p["default"].MOVING_AVERAGE_SLIDING_WINDOW&&a!==p["default"].MOVING_AVERAGE_EWMA)throw p["default"].BAD_ARGUMENT_ERROR;wn=a}function _a(){return wn}function ae(a){v['checkParameterType'](a,"boolean"),vn=a}function ee(){return vn}function ne(a){v['checkParameterType'](a,"number"),yn=a}function le(){return yn}function Ee(){return hn}function oe(a){v['checkParameterType'](a,"boolean"),hn=a}function ie(a){v['checkParameterType'](a,"boolean"),sn=a,oe(a)}function te(){return sn}function re(a){v['checkParameterType'](a,"number"),v['checkRange'](a,0,.5),Sn=a}function be(){return Sn}function de(a){v['checkParameterType'](a,"number"),Cn=a}function ce(){return Cn}function pe(a){v['checkParameterType'](a,"number"),fn=a}function we(){return fn}function xe(a){v['checkParameterType'](a,"number"),Dn=a}function ve(){return Dn}function ye(a){v['checkParameterType'](a,"boolean"),mn=a}function he(){return mn}function se(){return Un}function De(){me()}function me(){An=p["default"].PRELOAD_AUTO,Rn=!0,Tn=m,hn=!1,sn=!1,gn=!1,kn=!1,Be=void 0,Ka(),Qa(),un=void 0}function Ce(a){gn=a}function fe(){return gn}function ge(a){kn=a}function ke(){return kn}function Me(a){Fe=a}function Pe(){return Fe}function Te(a){Ge=a}function ue(){return Ge}function Ae(a){v['checkParameterType'](a,"number"),Mn=a}function Re(){return Mn}function Se(a){v['checkParameterType'](a,"object"),un=a}function Ue(){return un}function Ie(a){v['checkParameterType'](a,"string"),An=a}function Je(){return An}function Le(a){Rn=a}function Ne(){return Rn}var Oe=void 0,Ve=void 0,je=void 0,qe=void 0,ze=void 0,Be=void 0,Fe=void 0,Ge=void 0,He=void 0,Ke=void 0,Qe=void 0,We=void 0,Xe=void 0,Ye=void 0,Ze=void 0,$e=void 0,_e=void 0,an=void 0,en=void 0,nn=void 0,ln=void 0,En=void 0,on=void 0,tn=void 0,rn=void 0,bn=void 0,dn=void 0,cn=void 0,pn=void 0,wn=void 0,xn=void 0,vn=void 0,yn=void 0,hn=void 0,sn=void 0,Dn=void 0,mn=void 0,Cn=void 0,fn=void 0,gn=void 0,kn=void 0,Mn=void 0,Pn=void 0,Tn=void 0,un=void 0,An=void 0,Rn=void 0,Sn=void 0,Un={'scheme':"urn:mpeg:dash:utc:http-xsdate:2014",'value':"http://time.akamai.com/?iso&ms"};return Oe={'setABRStrategy':e,'getABRStrategy':n,'setUseDefaultABRRules':l,'getUseDefaultABRRules':o,'getABRCustomRules':r,'addABRCustomRule':b,'removeABRCustomRule':c,'setBandwidthSafetyFactor':w,'getBandwidthSafetyFactor':$,'setAbandonLoadTimeout':_,'getAbandonLoadTimeout':aa,'setLastBitrateCachingInfo':Da,'getLastBitrateCachingInfo':ma,'setLastMediaSettingsCachingInfo':Ca,'getLastMediaSettingsCachingInfo':fa,'setStableBufferTime':ea,'getStableBufferTime':na,'setShiftThresholdForABR':la,'getShiftThresholdForABR':Ea,'setBufferTimeAtTopQuality':oa,'getBufferTimeAtTopQuality':ia,'setBufferTimeAtTopQualityLongForm':ta,'getBufferTimeAtTopQualityLongForm':ra,'setLongFormContentDurationThreshold':ba,'getLongFormContentDurationThreshold':da,'setSegmentOverlapToleranceTime':ca,'getSegmentOverlapToleranceTime':pa,'getCacheLoadThresholdForType':xa,'setCacheLoadThresholdForType':wa,'setBufferToKeep':va,'getBufferToKeep':ya,'setBufferAheadToKeep':ha,'getBufferAheadToKeep':sa,'setBufferPruningInterval':ga,'getBufferPruningInterval':ka,'setRetryAttemptsForType':Ma,'getRetryAttemptsForType':Pa,'setRetryIntervalForType':Ta,'getRetryIntervalForType':ua,'setWallclockTimeUpdateInterval':Aa,'getWallclockTimeUpdateInterval':Ra,'setScheduleWhilePaused':Sa,'getScheduleWhilePaused':Ua,'getUseSuggestedPresentationDelay':Ba,'setUseSuggestedPresentationDelay':za,'setLiveDelayFragmentCount':Ia,'getLiveDelayFragmentCount':Ja,'getLiveDelay':Na,'setLiveDelay':La,'setMinBufferToAppendData':Oa,'getMinBufferToAppendData':Va,'setUseManifestDateHeaderTimeSource':ja,'getUseManifestDateHeaderTimeSource':qa,'addUTCTimingSource':Fa,'removeUTCTimingSource':Ha,'getUTCTimingSources':Ga,'clearDefaultUTCTimingSources':Ka,'restoreDefaultUTCTimingSources':Qa,'setXHRWithCredentialsForType':Wa,'getXHRWithCredentialsForType':Xa,'setFastSwitchEnabled':Za,'getFastSwitchEnabled':Ya,'setMovingAverageMethod':$a,'getMovingAverageMethod':_a,'setJumpGaps':ae,'getJumpGaps':ee,'setSmallGapLimit':ne,'getSmallGapLimit':le,'getUseFetch':Ee,'setUseFetch':oe,'setLowLatencyEnabled':ie,'getLowLatencyEnabled':te,'setCatchUpPlaybackRate':re,'getCatchUpPlaybackRate':be,'setLowLatencyMinDrift':de,'getLowLatencyMinDrift':ce,'setLowLatencyMaxDriftBeforeSeeking':pe,'getLowLatencyMaxDriftBeforeSeeking':we,'setManifestUpdateRetryInterval':xe,'getManifestUpdateRetryInterval':ve,'setKeepProtectionMediaKeys':ye,'getKeepProtectionMediaKeys':he,'getDefaultUtcTimingSource':se,'reset':De,'setAutoPlay':Le,'getAutoPlay':Ne,'setPreloadMode':Ie,'getPreloadMode':Je,'setStartWithLowestLatency':Ce,'getStartWithLowestLatency':fe,'setTrickPlayMode':ge,'isSupportTrickPlay':ke,'setLiveFastFragmentCount':Me,'getLiveFastFragmentCount':Pe,'setLiveFastLimit':Te,'getLiveFastLimit':ue,'setMaxFailedSegments':Ae,'getMaxFailedSegments':Re,'setHTTPHeaders':Se,'getHTTPHeaders':Ue},a(),Oe}Object['defineProperty'](n,"__esModule",{'value':!0});var i=a(60),t=l(i),r=a(19),b=l(r),d=a(214),c=a(79),p=l(c),w=a(159),x=l(w),v=a(189),y=4,h=1,s=2,D=10,m=3,C=36e4,f=36e4,g=.9,k=1e4,M=20,P=80,T=10,u=12,A=20,R=30,S=60,U=600,I=.2,J=.8,L=100,N=50,O=5,V=3,j=1e3,q=3,z=500,B=1,F=500,G=3,H=10,K=5,Q=.02,W=0,X=.5,Y=50,Z=!1;o['__visualon_factory_name']="MediaPlayerModel",n["default"]=b["default"]['getSingletonFactory'](o)},{'159':159,'189':189,'19':19,'214':214,'60':60,'79':79}],'122':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){Q={}}function e(a){}function n(){H['trigger'](U["default"].METRICS_CHANGED)}function l(a){H['trigger'](U["default"].METRIC_CHANGED,{'mediaType':a}),n()}function E(a,e,n){H['trigger'](U["default"].METRIC_UPDATED,{'mediaType':a,'metric':e,'value':n}),l(a)}function o(a,e,n){H['trigger'](U["default"].METRIC_ADDED,{'mediaType':a,'metric':e,'value':n}),l(a)}function t(a){delete Q[a],l(a)}function b(){Q={},n()}function c(a){return Q['hasOwnProperty'](a)?Q[a]:null}function x(a){var e=void 0;return Q['hasOwnProperty'](a)?e=Q[a]:(e=new d["default"],Q[a]=e),e}function y(a,e,n){var l=x(a);l[e]['push'](n),l[e].length>F&&l[e]['shift']()}function s(a,e,n,l,E,o){var i=new p["default"];return i['tcpid']=e,i['dest']=n,i['topen']=l,i['tclose']=E,i['tconnect']=o,T(a,r["default"].TCP_CONNECTION,i),i}function m(a,e,n,l){var E=new w.HTTPRequestTrace;return E['s']=e,E['d']=n,E['b']=l,a['trace']['push'](E),a.interval||(a['interval']=0),a.interval+=n,E}function f(a,e,n,l,E,o,i,t,b,d,c,p,x,v){var y=new w.HTTPRequest;return E&&E!==l&&(f(a,null,n,l,null,null,i,t,null,null,null,p,null,null),y['actualurl']=E),y['tcpid']=e,y['type']=n,y['url']=l,y['range']=i,y['trequest']=t,y['tresponse']=b,y['responsecode']=c,y['_tfinish']=d,y['_stream']=a,y['_mediaduration']=p,y['_responseHeaders']=x,y['_serviceLocation']=o,v?v['forEach'](function(a){m(y,a.s,a.d,a.b)}):(delete y.interval,delete y.trace),T(a,r["default"].HTTP_REQUEST,y),y}function M(a,e,n,l,E){var o=new v["default"];return o['t']=e,o['mt']=n,o['to']=l,E?o['lto']=E:delete o.lto,T(a,r["default"].TRACK_SWITCH,o),o}function T(a,e,n){y(a,e,n),o(a,e,n)}function A(a,e,n){var l=new h["default"];return l['t']=e,l['level']=n,T(a,r["default"].BUFFER_LEVEL,l),l}function S(a,e,n){var l=new D["default"];return l['target']=n,l['state']=e,T(a,r["default"].BUFFER_STATE,l),l}function I(a,e,n,l){var E=new C["default"];return E['time']=e,E['range']=l,E['manifestInfo']=n,T(a,r["default"].DVR_INFO,E),E}function J(a,e){var n=new g["default"],l=x(a).DroppedFrames;return n['time']=e.creationTime,n['droppedFrames']=e.droppedVideoFrames,l.length>0&&l[l.length-1]==n?l[l.length-1]:(T(a,r["default"].DROPPED_FRAMES,n),n)}function L(a,e,n,l,E,o,i,t,b){var d=new P["default"];return d['mediaType']=a,d['t']=e,d['type']=n,d['startTime']=l,d['availabilityStartTime']=E,d['duration']=o,d['quality']=i,d['range']=t,d['state']=b,T(a,r["default"].SCHEDULING_INFO,d),d}function N(a,e,n){var l=new R["default"];l['loadingRequests']=e,l['executedRequests']=n,x(a)['RequestsQueue']=l,o(a,r["default"].REQUESTS_QUEUE,l)}function O(a,e,n,l,E,t,b,d,c,p){var w=new k.ManifestUpdate;return w['mediaType']=a,w['type']=e,w['requestTime']=n,w['fetchTime']=l,w['availabilityStartTime']=E,w['presentationStartTime']=t,w['clientTimeOffset']=b,w['currentTime']=d,w['buffered']=c,w['latency']=p,y(i["default"].STREAM,r["default"].MANIFEST_UPDATE,w),o(a,r["default"].MANIFEST_UPDATE,w),w}function V(a,e){if(a){for(var n in e)a[n]=e[n];E(a.mediaType,r["default"].MANIFEST_UPDATE,a)}}function j(a,e,n,l,o){if(a){var i=new k.ManifestUpdateStreamInfo;return i['id']=e,i['index']=n,i['start']=l,i['duration']=o,a['streamInfo']['push'](i),E(a.mediaType,r["default"].MANIFEST_UPDATE_STREAM_INFO,a),i}return null}function q(a,e,n,l,o,i,t,b){if(a){var d=new k.ManifestUpdateRepresentationInfo;return d['id']=e,d['index']=n,d['streamIndex']=l,d['mediaType']=o,d['startNumber']=t,d['fragmentInfoType']=b,d['presentationTimeOffset']=i,a['representationInfo']['push'](d),E(a.mediaType,r["default"].MANIFEST_UPDATE_TRACK_INFO,a),d}return null}function z(a){var e=i["default"].STREAM;return a.trace&&Array['isArray'](a.trace)?a['trace']['forEach'](function(a){a['hasOwnProperty']("subreplevel")&&!a.subreplevel&&delete a.subreplevel}):delete a.trace,T(e,r["default"].PLAY_LIST,a),a}function B(a){var e=i["default"].STREAM;return T(e,r["default"].DVB_ERRORS,a),a}var F=1e3,G=this.context,H=u["default"](G)['getInstance'](),K=void 0,Q=void 0;return K={'clearCurrentMetricsForType':t,'clearAllCurrentMetrics':b,'getReadOnlyMetricsFor':c,'getMetricsFor':x,'addTcpConnection':s,'addHttpRequest':f,'addRepresentationSwitch':M,'addBufferLevel':A,'addBufferState':S,'addDVRInfo':I,'addDroppedFrames':J,'addSchedulingInfo':L,'addRequestsQueue':N,'addManifestUpdate':O,'updateManifestUpdateInfo':V,'addManifestUpdateStreamInfo':j,'addManifestUpdateRepresentationInfo':q,'addPlayList':z,'addDVBErrors':B,'setConfig':e},a(),K}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(80),r=l(t),b=a(202),d=l(b),c=a(220),p=l(c),w=a(214),x=a(217),v=l(x),y=a(210),h=l(y),s=a(211),D=l(s),m=a(212),C=l(m),f=a(213),g=l(f),k=a(215),M=a(219),P=l(M),T=a(18),u=l(T),A=a(218),R=l(A),S=a(24),U=l(S),I=a(19),J=l(I);E['__visualon_factory_name']="MetricsModel",n["default"]=J["default"]['getSingletonFactory'](E)},{'18':18,'19':19,'202':202,'210':210,'211':211,'212':212,'213':213,'214':214,'215':215,'217':217,'218':218,'219':219,'220':220,'24':24,'79':79,'80':80}],'123':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){if(l=new i["default"],!a)return null;var e=a['indexOf']("#");if(-1!==e)for(var n=a['substr'](e+1)['split']("&"),E=0,o=n.length;o>E;++E){var t=n[E],r=t['indexOf']("=");if(-1!==r){var b=t['substring'](0,r);l['hasOwnProperty'](b)&&(l[b]=t['substr'](r+1))}}}function e(){return l}var n=void 0,l=void 0;return n={'initialize':a,'getURIFragmentData':e}}Object['defineProperty'](n,"__esModule",{
value:!0});var o=a(209),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="URIFragmentModel",n["default"]=r["default"]['getSingletonFactory'](E)},{'19':19,'209':209}],'124':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){$=p["default"](oa)['getInstance']()['getLogger'](Z)}function e(){la=1,ia['on'](d["default"].PLAYBACK_PLAYING,P,this)}function n(){ia['off'](d["default"].PLAYBACK_PLAYING,P,this)}function l(){_&&(_['playbackRate']=t(),_['removeEventListener']("canplay",l))}function E(a){_&&(_.readyState<=2&&a>0?_['addEventListener']("canplay",l):_['playbackRate']=a)}function o(a){la=a}function i(){return la}function t(){return 0>la?0:la>1?la:na||1}function b(a,e){if(_){if(_['currentTime']['toFixed'](3)==a['toFixed'](3))return;try{a=e?c(a):a,_['currentTime']=a}catch(n){0===_.readyState&&n['code']===n.INVALID_STATE_ERR&&setTimeout(function(){_['currentTime']=a},400)}}}function c(a){var e=j(),n=a,l=9999999999;if(e)for(var E=0;E<e.length;E++){var o=e['start'](E),i=e['end'](E),t=Math['abs'](o-a),r=Math['abs'](i-a);if(a>=o&&i>=a)return a;l>t&&(l=t,n=o),l>r&&(l=r,n=i)}return n}function w(){return _}function x(a){if(!(null===a||void 0===a||a&&/^(VIDEO|AUDIO)$/i['test'](a.nodeName)))throw Ea;_=a,_&&(_['preload']="auto")}function v(a){_&&(a?_['src']=a:(_['removeAttribute']("src"),_['load']()))}function y(){return _?_.src:null}function h(){return ea}function s(a){ea=a}function D(){return aa}function m(a){aa=a,aa['style']['position']="absolute",aa['style']['display']="flex",aa['style']['overflow']="hidden",aa['style']['pointerEvents']="none",aa['style']['top']=0,aa['style']['left']=0}function C(a,e){M(a,e)}function f(){return ta.length>0}function g(a){var e=void 0;null===a||_.seeking||-1!==ta['indexOf'](a)||0>la&&0===_.currentTime||(ta['push'](a),_&&1===ta.length&&(e=document['createEvent']("Event"),e['initEvent']("waiting",!0,!1),na=_.playbackRate,E(0),_['dispatchEvent'](e)))}function k(a){var e=ta['indexOf'](a),n=void 0;null!==a&&(-1!==e&&ta['splice'](e,1),_&&f()===!1&&0===_.playbackRate&&(E(t()),_.paused||(n=document['createEvent']("Event"),n['initEvent']("playing",!0,!1),_['dispatchEvent'](n))))}function M(a,e){e?g(a):k(a)}function P(){if(_&&f()&&0===_.playbackRate&&la>0){var a=document['createEvent']("Event");a['initEvent']("waiting",!0,!1),_['dispatchEvent'](a)}}function T(){if(!_)return null;var a="webkitDroppedFrameCount"in _&&"webkitDecodedFrameCount"in _,e="getVideoPlaybackQuality"in _,n=null;return e?n=_['getVideoPlaybackQuality']():a&&(n={'droppedVideoFrames':_.webkitDroppedFrameCount,'totalVideoFrames':_.webkitDroppedFrameCount+_.webkitDecodedFrameCount,'creationTime':new Date}),n}function u(){return _?(_['autoplay']=!0,_['play']()):void 0}function A(){return _?_.paused:null}function R(){_&&(_['pause'](),_['autoplay']=!1)}function S(){return _?_.seeking:null}function U(){return _?_.currentTime:null}function I(){return _?_.playbackRate:null}function J(){return _?_.played:null}function L(){return _?_.ended:null}function N(a,e){_&&_['addEventListener'](a,e)}function O(a,e){_&&_['removeEventListener'](a,e)}function V(){return _?_.readyState:NaN}function j(){return _?_.buffered:null}function q(){return _?_.clientWidth:NaN}function z(){return _?_.clientHeight:NaN}function B(){return _?_.videoWidth:NaN}function F(){return _?_.videoHeight:NaN}function G(){return _&&_.parentNode?_['getBoundingClientRect']().top-_['parentNode']['getBoundingClientRect']().top:NaN}function H(){return _&&_.parentNode?_['getBoundingClientRect']().left-_['parentNode']['getBoundingClientRect']().left:NaN}function K(){return _?_.textTracks:[]}function Q(a,e,n,l,E){if(_)for(var o=0;o<_.textTracks.length;o++)if(_['textTracks'][o]['kind']===a&&(e?_['textTracks'][o]['label']==e:!0)&&_['textTracks'][o]['language']===n&&_['textTracks'][o]['isTTML']===l&&_['textTracks'][o]['isEmbedded']===E)return _['textTracks'][o];return null}function W(a,e,n){return _?_['addTextTrack'](a,e,n):null}function X(a){_&&(_['appendChild'](a),void 0!==a.isTTML&&(_['textTracks'][_.textTracks.length-1]['isTTML']=a.isTTML,_['textTracks'][_.textTracks.length-1]['isEmbedded']=a.isEmbedded))}function Y(a){_&&_['removeChild'](a)}var Z=void 0,$=void 0,_=void 0,aa=void 0,ea=void 0,na=void 0,la=void 0,Ea="element is not video or audio DOM type!",oa=this.context,ia=r["default"](oa)['getInstance'](),ta=[];return Z={'initialize':e,'setCurrentTime':b,'play':u,'isPaused':A,'pause':R,'isSeeking':S,'getTime':U,'getPlaybackRate':I,'setPlaybackRate':E,'getPlayedRanges':J,'getEnded':L,'setStallState':C,'getElement':w,'setElement':x,'setSource':v,'getSource':y,'getVideoContainer':h,'setVideoContainer':s,'getTTMLRenderingDiv':D,'setTTMLRenderingDiv':m,'getPlaybackQuality':T,'addEventListener':N,'removeEventListener':O,'getReadyState':V,'getBufferRange':j,'getClientWidth':q,'getClientHeight':z,'getTextTracks':K,'getTextTrack':Q,'addTextTrack':W,'appendChild':X,'removeChild':Y,'getVideoWidth':B,'getVideoHeight':F,'getVideoRelativeOffsetTop':G,'getVideoRelativeOffsetLeft':H,'reset':n,'setTrickModeRate':o,'getTrickModeRate':i},a(),Z}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(18),r=l(t),b=a(24),d=l(b),c=a(17),p=l(c);E['__visualon_factory_name']="VideoModel",n["default"]=i["default"]['getSingletonFactory'](E)},{'17':17,'18':18,'19':19,'24':24}],'125':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){var e=new Date,E=a.request,o=new Headers;if(E.range&&o['append']("Range","bytes="+E.range),E.headers)for(var r in E.headers)o['append'](r,E['headers'][r]);E.requestStartDate||(E['requestStartDate']=e),i&&i['modifyRequestHeader']({'setRequestHeader':function(a,e){o['append'](a,e)}});var b=void 0;"function"==typeof window.AbortController&&(b=new AbortController,a['abortController']=b);var d={'method':a.method,'headers':o,'credentials':a.withCredentials?"include":void 0,'signal':b?b.signal:void 0};fetch(a.url,d)['then'](function(e){a.response||(a['response']={}),a['response']['status']=e.status,a['response']['statusText']=e.statusText,a['response']['responseURL']=e.url,e.ok||a['onerror']();var E="",o=!0,i=!1,r=void 0;try{for(var b,d=e['headers']['keys']()[Symbol.iterator]();!(o=(b=d['next']()).done);o=!0){var c=b.value;E+=c+": "+e['headers']['get'](c)+"\n"}}catch(p){i=!0,r=p}finally{try{!o&&d["return"]&&d["return"]()}finally{if(i)throw r}}if(a['response']['responseHeaders']=E,!e.body)return e['arrayBuffer']()['then'](function(e){a['response']['response']=e;var n={'loaded':e.byteLength,'total':e.byteLength,'stream':!1};a['progress'](n),a['onload'](),a['onend']()});var w=parseInt(e['headers']['get']("Content-Length"),10),x=0,v=!1,y=new Uint8Array,h=0;a['reader']=e['body']['getReader']();var s=[],D=function m(e){var E=e.value,o=e.done;if(o){if(y){var i=s.length>1?s[s.length-1].ts-s[0].ts:1===s.length?s[0].time:null;a['progress']({'loaded':x,'total':isNaN(w)?x:w,'lengthComputable':!0,'time':i,'stream':!0}),a['response']['response']=y.buffer}return a['onload']({'bytesReceived':x}),void a['onend']()}if(E&&E.length>0){y=l(y,E),x+=E.length,s['push']({'ts':Date['now'](),'bytes':E.length});var r=t['findLastTopIsoBoxCompleted'](["moov","mdat"],y,h);if(r.found){var b=r.lastCompletedOffset+r.size,d=void 0;b===y.length?(d=y,y=new Uint8Array):(d=new Uint8Array(y['subarray'](0,b)),y=y['subarray'](b)),a['progress']({'data':d.buffer,'lengthComputable':!1,'noTrace':!0}),h=0}else h=r.lastCompletedOffset,v||(a['progress']({'lengthComputable':!1,'noTrace':!0}),v=!0)}n(a,m)};n(a,D)})["catch"](function(e){a.onerror&&a['onerror'](e)})}function n(a,e){a['reader']['read']()['then'](e)["catch"](function(e){a.onerror&&200===a.response.status&&a['onerror'](e)})}function l(a,e){if(0===a.length)return e;var n=new Uint8Array(a.length+e.length);return n['set'](a),n['set'](e,a.length),n}function E(a){if(a.abortController)a['abortController']['abort']();else if(a.reader)try{a['reader']['cancel']()}catch(e){}}function o(a,e){if(a=a['filter'](function(n){return n.bytes>e/4/a.length}),a.length>1){var n=0;return a['forEach'](function(e,l){var E=a[l+1];if(E){var o=E.ts-e.ts;n+=o}}),n}return null}a=a||{};var i=a.requestModifier,t=a.boxParser,r=void 0;return r={'load':e,'abort':E,'calculateDownloadedTime':o}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(17);l(t);E['__visualon_factory_name']="FetchLoader";var r=i["default"]['getClassFactory'](E);n["default"]=r},{'17':17,'19':19}],'126':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(a){function e(){var a,e;k=[],M=[],P=[],A=0,a={},E(a,d.HTTPRequest.MPD_TYPE,x["default"].DOWNLOAD_ERROR_ID_MANIFEST),E(a,d.HTTPRequest.XLINK_EXPANSION_TYPE,x["default"].DOWNLOAD_ERROR_ID_XLINK),E(a,d.HTTPRequest.INIT_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_INITIALIZATION),E(a,d.HTTPRequest.MEDIA_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT),E(a,d.HTTPRequest.INDEX_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT),E(a,d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT),E(a,d.HTTPRequest.OTHER_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT),T=a,e={},E(e,d.HTTPRequest.MPD_TYPE,x["default"].DOWNLOAD_ERROR_ID_MANIFEST_CODE),E(e,d.HTTPRequest.XLINK_EXPANSION_TYPE,x["default"].DOWNLOAD_ERROR_ID_XLINK_CODE),E(e,d.HTTPRequest.INIT_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),E(e,d.HTTPRequest.MEDIA_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),E(e,d.HTTPRequest.INDEX_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),E(e,d.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),E(e,d.HTTPRequest.OTHER_TYPE,x["default"].DOWNLOAD_ERROR_ID_CONTENT_CODE),u=e}function n(a,e){var l=a.request,E=[],x=!0,s=!0,g=new Date,R=g,S=0,U=void 0;if(!h||!w||!p)throw new Error("config object is not correct or missing");var I=function(a){s=!1,l['requestStartDate']=g,l['requestEndDate']=new Date,l['firstByteDate']=l.firstByteDate||g,l.checkExistenceOnly||w['addHttpRequest'](l.mediaType,null,l.type,l.url,U.response?U.response.responseURL:null,l.serviceLocation||null,l.range||null,l.requestStartDate,l.firstByteDate,l.requestEndDate,U.response?U.response.status:null,l.duration,U.response&&U.response.getAllResponseHeaders?U['response']['getAllResponseHeaders']():U.response?U.response.responseHeaders:[],a?E:null)},J=function(E){if(-1!==k['indexOf'](U)&&(k['splice'](k['indexOf'](U),1),s))if(I(!1),e>0)e--,P['push'](setTimeout(function(){n(a,e)},v['getRetryIntervalForType'](l.type)));else{var i=U.response?{'code':U.response.status,'text':U.response.statusText}:{'err':E};A++,r()&&o(),p['downloadError'](T[l.type],l.url,l,i,r()),p['error'](new y["default"](u[l.type],l.url+" is not available",{'request':l,'response':U.response?U.response:E})),a.error&&(a['error'](l,"error",U.response?U.response.statusText:"",r()),f['trigger'](m["default"].VO_DASH_REPORT_DOWNLOADED_INFO,{'downloadBytes':null,'downloadTime':null,'errorStatus':U.response?U.response.status:void 0,'errorStatusText':U.response?U.response.statusText:""})),a.complete&&a['complete'](l,U.response?U.response.statusText:"")}},L=function(e){var n=new Date;x&&(x=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(l['firstByteDate']=n)),e.lengthComputable&&(l['bytesLoaded']=e.loaded,l['bytesTotal']=e.total),e.noTrace||(E['push']({'s':R,'d':e.time?e.time:n['getTime']()-R['getTime'](),'b':[e.loaded?e.loaded-S:0]}),R=n,S=e.loaded),a.progress&&e&&a['progress'](e)},N=function(e){U.response.status>=200&&U.response.status<=299&&(I(!0),a.success&&(i(),a['success'](U.response.response,U.response.statusText,U.response.responseURL),U.response&&U.response.response&&f['trigger'](m["default"].VO_DASH_REPORT_DOWNLOADED_INFO,{'downloadBytes':e.bytesReceived?e.bytesReceived:U.response.response.byteLength?U.response.response.byteLength:U.response.response.length,'downloadTime':l['requestEndDate']['getTime']()-l['requestStartDate']['getTime'](),'errorStatus':null,'errorStatusText':null,'url':l.url,'mediaType':U.request?U.request.mediaType:null})),a.complete&&a['complete'](l,U.response.statusText))},O=function(){a.abort&&a['abort'](l)},V=void 0;V=C&&window.fetch&&"arraybuffer"===l.responseType?b["default"](c)['create']({'requestModifier':h,'boxParser':D}):t["default"](c)['create']({'requestModifier':h,'boxParser':D});var j=h['modifyRequestURL'](l.url),q=l.checkExistenceOnly?d.HTTPRequest.HEAD:d.HTTPRequest.GET,z=v['getXHRWithCredentialsForType'](l.type);U={'url':j,'method':q,'withCredentials':z,'headers':v['getHTTPHeaders'](),'request':l,'onload':N,'onend':J,'onerror':J,'progress':L,'onabort':O,'loader':V};var B=(new Date)['getTime']();if(isNaN(l.delayLoadingTime)||B>=l.delayLoadingTime)k['push'](U),V['load'](U);else{var F={'httpRequest':U};M['push'](F),F['delayTimeout']=setTimeout(function(){if(-1!==M['indexOf'](F)){M['splice'](M['indexOf'](F),1);try{g=new Date,R=g,k['push'](F.httpRequest),V['load'](F.httpRequest)}catch(a){F['httpRequest']['onerror']()}}},l.delayLoadingTime-B)}}function l(a){r()||a.request&&n(a,v['getRetryAttemptsForType'](a.request.type))}function o(){P['forEach'](function(a){return clearTimeout(a)}),P=[],M['forEach'](function(a){return clearTimeout(a.delayTimeout)}),M=[],k['forEach'](function(a){a['onloadend']=a['onerror']=a['onprogress']=void 0,a['loader']['abort'](a),a['onabort']()}),k=[]}function i(){A=0}function r(){return A>=v['getMaxFailedSegments']()}a=a||{};var c=this.context,p=a.errHandler,w=a.metricsModel,v=a.mediaPlayerModel,h=a.requestModifier,D=a.boxParser,C=a.useFetch||!1,f=s["default"](c)['getInstance'](),g=void 0,k=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0;return g={'load':l,'abort':o},e(),g}Object['defineProperty'](n,"__esModule",{'value':!0});var i=a(129),t=l(i),r=a(125),b=l(r),d=a(214),c=a(19),p=l(c),w=a(21),x=l(w),v=a(194),y=l(v),h=a(18),s=l(h),D=a(24),m=l(D);o['__visualon_factory_name']="HTTPLoader";var C=p["default"]['getClassFactory'](o);n["default"]=C},{'125':125,'129':129,'18':18,'19':19,'194':194,'21':21,'214':214,'24':24}],'127':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){t[a]=e}function e(a){t[a]&&delete t[a]}function n(){t={}}function l(a){for(var e in t)if(t['hasOwnProperty'](e)&&a['startsWith'](e))return t[e];return r["default"]}function E(){n()}function o(){E()}var i=void 0,t=void 0;return o(),i={'getLoader':l,'registerLoader':a,'unregisterLoader':e,'unregisterAllLoader':n,'reset':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(126),r=l(t);E['__visualon_factory_name']="SchemeLoaderFactory";var b=i["default"]['getSingletonFactory'](E);n["default"]=b},{'126':126,'19':19}],'128':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(e){var n=o['getLoader'](e&&e.request?e.request.url:null);i=n(l)['create']({'errHandler':a.errHandler,'mediaPlayerModel':a.mediaPlayerModel,'requestModifier':a.requestModifier,'useFetch':a.useFetch||null,'dashMetrics':a.dashMetrics,'metricsModel':a.metricsModel,'boxParser':a.boxParser?a.boxParser:null,'constants':a.constants?a.constants:null,'dashConstants':a.dashConstants?a.dashConstants:null,'urlUtils':a.urlUtils?a.urlUtils:null,'errors':a.errors}),i['load'](e)}function n(){i&&i['abort']()}a=a||{};var l=this.context,E=void 0,o=void 0,i=void 0;return o=r["default"](l)['getInstance'](),E={'load':e,'abort':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(127),r=l(t);E['__visualon_factory_name']="URLLoader";var b=i["default"]['getClassFactory'](E);n["default"]=b},{'127':127,'19':19}],'129':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){var e=new Date,n=a.request,E=new XMLHttpRequest;if(E['open'](a.method,a.url,!0),n.responseType&&(E['responseType']=n.responseType),n.range&&E['setRequestHeader']("Range","bytes="+n.range),a.headers)for(var o in a.headers)E['setRequestHeader'](o,a['headers'][o]);n.requestStartDate||(n['requestStartDate']=e),l&&(E=l['modifyRequestHeader'](E)),E['withCredentials']=a.withCredentials,E['onload']=a.onload,E['onloadend']=a.onend,E['onerror']=a.onerror,E['onprogress']=a.progress,E['onabort']=a.onabort,E['send'](),a['response']=E}function n(a){var e=a.response;e['onloadend']=e['onerror']=e['onprogress']=void 0,e['abort']()}a=a||{};var l=a.requestModifier,E=void 0;return E={'load':e,'abort':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="XHRLoader";var t=i["default"]['getClassFactory'](E);n["default"]=t},{'19':19}],'130':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a)}return E(a,null,[{'key':"findCencContentProtection",'value':function(a){for(var e=null,n=0;n<a.length;++n){var l=a[n];"urn:mpeg:dash:mp4protection:2011"===l['schemeIdUri']['toLowerCase']()&&"cenc"===l['value']['toLowerCase']()&&(e=l)}return e}},{'key':"getPSSHData",'value':function(a){var e=8,n=new DataView(a),l=n['getUint8'](e);return e+=20,l>0&&(e+=4+16*n['getUint32'](e)),e+=4,a['slice'](e)}},{'key':"getPSSHForKeySystem",'value':function(e,n){var l=a['parsePSSHList'](n);return l['hasOwnProperty'](e['uuid']['toLowerCase']())?l[e['uuid']['toLowerCase']()]:null}},{'key':"parseInitDataFromContentProtection",'value':function(a,e){return"pssh"in a?e['decodeArray'](a.pssh.__text).buffer:null}},{'key':"parsePSSHList",'value':function(a){if(null===a)return[];for(var e=new DataView(a.buffer||a),n=!1,l={},E=0;!n;){var o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=E;if(E>=e.buffer.byteLength)break;if(o=e['getUint32'](E),i=E+o,E+=4,1886614376===e['getUint32'](E))if(E+=4,t=e['getUint8'](E),0===t||1===t){E++,E+=3,r="";var c=void 0,p=void 0;for(c=0;4>c;c++)p=e['getUint8'](E+c)['toString'](16),r+=1===p.length?"0"+p:p;for(E+=4,r+="-",c=0;2>c;c++)p=e['getUint8'](E+c)['toString'](16),r+=1===p.length?"0"+p:p;for(E+=2,r+="-",c=0;2>c;c++)p=e['getUint8'](E+c)['toString'](16),r+=1===p.length?"0"+p:p;for(E+=2,r+="-",c=0;2>c;c++)p=e['getUint8'](E+c)['toString'](16),r+=1===p.length?"0"+p:p;for(E+=2,r+="-",c=0;6>c;c++)p=e['getUint8'](E+c)['toString'](16),r+=1===p.length?"0"+p:p;E+=6,r=r['toLowerCase'](),b=e['getUint32'](E),E+=4,l[r]=e['buffer']['slice'](d,i),E=i}else E=i;else E=i}return l}}]),a}();n["default"]=o},{}],'131':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){var n=null,l=r["default"](E)['getInstance']();l['setConfig']({'debug':a.debug,'BASE64':a.BASE64}),l['initialize']();var o=e(a);return!n&&o&&(n=i["default"](E)['create']({'protectionModel':o,'protectionKeyController':l,'eventBus':a.eventBus,'debug':a.debug,'events':a.events,'BASE64':a.BASE64,'constants':a.constants}),a['capabilities']['setEncryptedMediaSupported'](!0)),n}function e(a){var e=a.debug,o=e['getLogger'](l),i=a.eventBus,t=a.errHandler,r=a.videoModel?a['videoModel']['getElement']():null;return r&&void 0===r.onencrypted||r&&void 0===r.mediaKeys?n(r,f)?(o['info']("EME detected on this user agent! (ProtectionModel_3Feb2014)"),y["default"](E)['create']({'debug':e,'eventBus':i,'events':a.events,'api':n(r,f)})):n(r,C)?(o['info']("EME detected on this user agent! (ProtectionModel_01b)"),s["default"](E)['create']({'debug':e,'eventBus':i,'errHandler':t,'events':a.events,'api':n(r,C)})):(o['warn']("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(o['info']("EME detected on this user agent! (ProtectionModel_21Jan2015)"),x["default"](E)['create']({'debug':e,'eventBus':i,'events':a.events}))}function n(a,e){for(var n=0;n<e.length;n++){var l=e[n];if("function"==typeof a[l[Object['keys'](l)[0]]])return l}return null}var l=void 0,E=this.context;return l={'createProtectionSystem':a}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(133),i=l(o),t=a(134),r=l(t),b=a(132),d=l(b),c=a(139),p=l(c),w=a(141),x=l(w),v=a(142),y=l(v),h=a(140),s=l(h),D=a(19),m=l(D),C=[{'generateKeyRequest':"generateKeyRequest",'addKey':"addKey",'cancelKeyRequest':"cancelKeyRequest",'needkey':"needkey",'keyerror':"keyerror",'keyadded':"keyadded",'keymessage':"keymessage"},{'generateKeyRequest':"webkitGenerateKeyRequest",'addKey':"webkitAddKey",'cancelKeyRequest':"webkitCancelKeyRequest",'needkey':"webkitneedkey",'keyerror':"webkitkeyerror",'keyadded':"webkitkeyadded",'keymessage':"webkitkeymessage"}],f=[{'setMediaKeys':"setMediaKeys",'MediaKeys':"MediaKeys",'release':"close",'needkey':"needkey",'error':"keyerror",'message':"keymessage",'ready':"keyadded",'close':"keyclose"},{'setMediaKeys':"msSetMediaKeys",'MediaKeys':"MSMediaKeys",'release':"close",'needkey':"msneedkey",'error':"mskeyerror",'message':"mskeymessage",'ready':"mskeyadded",'close':"mskeyclose"}];E['__visualon_factory_name']="Protection";var g=m["default"]['getClassFactory'](E);g['events']=d["default"],g['errors']=p["default"],m["default"]['updateClassFactory'](E.__visualon_factory_name,g),n["default"]=g},{'132':132,'133':133,'134':134,'139':139,'140':140,'141':141,'142':142,'19':19}],'132':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(25),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['INTERNAL_KEY_MESSAGE']="internalKeyMessage",a['INTERNAL_KEY_SYSTEM_SELECTED']="internalKeySystemSelected",a['INTERNAL_KEY_STATUS_CHANGED']="internalkeyStatusChanged",a['KEY_ADDED']="public_keyAdded",a['KEY_ERROR']="public_keyError",a['KEY_MESSAGE']="public_keyMessage",a['KEY_SESSION_CLOSED']="public_keySessionClosed",a['KEY_SESSION_CREATED']="public_keySessionCreated",a['KEY_SESSION_REMOVED']="public_keySessionRemoved",a['KEY_STATUSES_CHANGED']="public_keyStatusesChanged",a['KEY_SYSTEM_ACCESS_COMPLETE']="public_keySystemAccessComplete",a['KEY_SYSTEM_SELECTED']="public_keySystemSelected",a['LICENSE_REQUEST_COMPLETE']="public_licenseRequestComplete",a['NEED_KEY']="needkey",a['PROTECTION_CREATED']="public_protectioncreated",a['PROTECTION_DESTROYED']="public_protectiondestroyed",a['SERVER_CERTIFICATE_UPDATED']="serverCertificateUpdated",a['TEARDOWN_COMPLETE']="protectionTeardownComplete",a['VIDEO_ELEMENT_SELECTED']="videoElementSelected",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'25':25}],'133':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(a){function e(){aa=H['getLogger'](_),ea=[],na=[],Ea="temporary",Y=[],oa=""}function n(a){Y=a}function l(a){$=a,B['setOfflineDownload'](a)}function o(){if(!(F&&F['hasOwnProperty']("on")&&z&&z['hasOwnProperty']("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function t(a){if(!a)throw new Error("mediaInfo can not be null or undefined");o(),F['on'](G.INTERNAL_KEY_MESSAGE,L,this),F['on'](G.INTERNAL_KEY_STATUS_CHANGED,J,this),na['push'](a);var e=z['getSupportedKeySystemsFromContentProtection'](a.contentProtection,la);e&&e.length>0&&U(e,!0)}function b(a){return z['getSupportedKeySystemsFromContentProtection'](a,la)}function c(a,e){var n=r["default"]['getPSSHForKeySystem'](ia,a),l=A(ia);if(n){for(var E=B['getAllInitData'](),o=0;o<E.length;o++)if(z['initDataEquals'](n,E[o]))return void aa['warn']("DRM: Ignoring initData because we have already seen it!");try{B['createKeySession'](n,l,S(ia),e)}catch(i){F['trigger'](G.KEY_SESSION_CREATED,{'offlineDownload':$,'data':null,'error':new y["default"](x["default"].KEY_SESSION_CREATED_ERROR_CODE,x["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+i.message)})}}else a?B['createKeySession'](a,l,S(ia),e):F['trigger'](G.KEY_SESSION_CREATED,{'offlineDownload':$,'data':null,'error':new y["default"](x["default"].KEY_SESSION_CREATED_ERROR_CODE,x["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+ia.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function w(a,e,n){n?B['loadKeySession'](a,e,n):B['loadKeySession'](a,e,S(ia))}function v(a){B['removeKeySession'](a)}function h(a){B['closeKeySession'](a)}function s(a){B['setServerCertificate'](a)}function f(a){if(B){var e=B['getMediaElement']();if(e===a)return}a?(B&&B['setMediaElement'](a),F['on'](G.NEED_KEY,O,this)):null===a&&(B&&B['setMediaElement'](a),F['off'](G.NEED_KEY,O,this))}function g(a){Ea=a}function k(a){oa=a}function M(a){la=a,z['setProtectionData'](a)}function P(){B&&B['stop']()}function T(){F['off'](G.INTERNAL_KEY_MESSAGE,L,this),F['off'](G.INTERNAL_KEY_STATUS_CHANGED,J,this),f(null),ia=void 0,B&&(B['reset'](),B=null),j(),W['forEach'](function(a){return clearTimeout(a)}),W=[],na=[],Y=[],Ea="temporary"}function u(){F['off'](G.INTERNAL_KEY_MESSAGE,L,this),F['off'](G.INTERNAL_KEY_STATUS_CHANGED,J,this),na=[]}function A(a){var e=null;if(a){var n=a.systemString;la&&(e=n in la?la[n]:null)}return e}function R(a){var e=A(a),n=[],l=[],E=e&&e.audioRobustness&&e.audioRobustness.length>0?e.audioRobustness:oa,o=e&&e.videoRobustness&&e.videoRobustness.length>0?e.videoRobustness:oa,i=S(a),t=e&&e.distinctiveIdentifier?e.distinctiveIdentifier:"optional",r=e&&e.persistentState?e.persistentState:"temporary"===i?"optional":"required";return na['forEach'](function(a){a['type']===Q.AUDIO?(window.cast&&window.cast.__platform__&&'audio/webm; codecs="opus"'===a.codec&&(a['codec']='audio/mp4; codecs="mp4a.40.2"'),n['push'](new d["default"](a.codec,E))):(a['type']===Q.VIDEO||a['type']===Q.MUXED)&&l['push'](new d["default"](a.codec,o))}),new p["default"](n,l,t,r,[i])}function S(a){if(q()&&Y.length>0)return Z;var e=A(a),n=e&&e.sessionType?e.sessionType:Ea;return n}function U(a,e){var n=this,l=[],E=void 0;if(ia){for(E=0;E<a.length;E++)if(ia===a[E].ks){var o=function(){l['push']({'ks':a[E].ks,'configs':[R(ia)]});var o=function i(l){F['off'](G.KEY_SYSTEM_ACCESS_COMPLETE,i,n),l.error?e||F['trigger'](G.KEY_SYSTEM_SELECTED,{'offlineDownload':$,'error':new y["default"](x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+l.error)}):(aa['info']("DRM: KeySystem Access Granted"),F['trigger'](G.KEY_SYSTEM_SELECTED,{'data':l.data}),Y.length>0&&q()?Y['forEach'](function(e,n){w(e,a[E].initData,S(ia))}):a[E].sessionId?w(a[E].sessionId,a[E].initData):a[E].initData&&c(a[E].initData,a[E].cdmData))};return F['on'](G.KEY_SYSTEM_ACCESS_COMPLETE,o,n),B['requestKeySystemAccess'](l),"break"}();if("break"===o)break}}else if(void 0===ia){ia=null,ea['push'](a);for(var i=0;i<a.length;i++)l['push']({'ks':a[i].ks,'configs':[R(a[i].ks)]});var t=void 0,r=function d(a){F['off'](G.KEY_SYSTEM_ACCESS_COMPLETE,d,n),a.error?(ia=void 0,F['off'](G.INTERNAL_KEY_SYSTEM_SELECTED,b,n),e||F['trigger'](G.KEY_SYSTEM_SELECTED,{'offlineDownload':$,'data':null,'error':new y["default"](x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+a.error)})):(t=a.data,aa['info']("DRM: KeySystem Access Granted ("+t.keySystem.systemString+")!  Selecting key system..."),B['selectKeySystem'](t))},b=function p(a){if(F['off'](G.INTERNAL_KEY_SYSTEM_SELECTED,p,n),F['off'](G.KEY_SYSTEM_ACCESS_COMPLETE,r,n),a.error)ia=void 0,e||F['trigger'](G.KEY_SYSTEM_SELECTED,{'offlineDownload':$,'data':null,'error':new y["default"](x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+a.error)});else{if(!B)return;ia=B['getKeySystem'](),F['trigger'](G.KEY_SYSTEM_SELECTED,{'data':t});var l=A(ia);l&&l.serverCertificate&&l.serverCertificate.length>0&&B['setServerCertificate'](K['decodeArray'](l.serverCertificate).buffer);for(var o=0;o<ea.length;o++)for(E=0;E<ea[o].length;E++)if(ia===ea[o][E].ks){if(z['isClearKey'](ia)&&l&&l['hasOwnProperty']("clearkeys")){var i={'kids':Object['keys'](l.clearkeys)};ea[o][E]['initData']=(new TextEncoder)['encode'](JSON['stringify'](i))}Y.length>0&&q()?Y['forEach'](function(a,e){w(a,ea[e][E].initData,S(ia))}):ea[o][E].sessionId?w(ea[o][E].sessionId,ea[o][E].initData):null!==ea[o][E].initData&&c(ea[o][E].initData,ea[o][E].cdmData);break}}};F['on'](G.INTERNAL_KEY_SYSTEM_SELECTED,b,n),F['on'](G.KEY_SYSTEM_ACCESS_COMPLETE,r,n),B['requestKeySystemAccess'](l)}else ea['push'](a)}function I(a,e){F['trigger'](G.LICENSE_REQUEST_COMPLETE,E({'offlineDownload':$,'data':a,'error':e},"offlineDownload",$))}function J(a){a.error?F['trigger'](G.KEY_STATUSES_CHANGED,{'offlineDownload':$,'data':null,'error':a.error}):aa['debug']("DRM: key status = "+a.status)}function L(a){aa['debug']("DRM: onKeyMessage");var e=a.data;F['trigger'](G.KEY_MESSAGE,{'data':e});var n=e.messageType?e.messageType:"license-request",l=e.message,E=e.sessionToken,o=A(ia),t=ia?ia.systemString:null,b=z['getLicenseServer'](ia,o,n),d={'sessionToken':E,'messageType':n};if(!l||0===l.byteLength)return void I(d,new y["default"](x["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,x["default"].MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE));if(!b)return aa['debug']("DRM: License server request not required for this message (type = "+a.data.messageType+").  Session ID = "+E['getSessionID']()),void I(d);if(z['isClearKey'](ia)){var c=z['processClearKeyLicenseRequest'](ia,o,l);if(c)return aa['debug']("DRM: ClearKey license request handled by application!"),I(d),void B['updateKeySession'](E,c)}var p=null;if(o&&o.serverURL){var w=o.serverURL;"string"==typeof w&&""!==w?p=w:"object"===("undefined"==typeof w?"undefined":i(w))&&w['hasOwnProperty'](n)&&(p=w[n])}else o&&o.laURL&&""!==o.laURL?p=o.laURL:(p=ia['getLicenseServerURLFromInitData'](r["default"]['getPSSHData'](E.initData)),!p&&a&&a.data&&(p=a.data.laURL));if(p=b['getServerURLFromMessage'](p,l,n),!p)return void I(d,new y["default"](x["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,x["default"].MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));var v={},h=!1,s=function(a){if(a)for(var e in a)"authorization"===e['toLowerCase']()&&(h=!0),v[e]=a[e]};o&&s(o.httpRequestHeaders),s(ia['getRequestHeadersFromMessage'](l)),o&&"boolean"==typeof o.withCredentials&&(h=o.withCredentials);var D=function(a,e,n,l){var E=a.response?b['getErrorResponse'](a.response,n,l):"NONE";I(e,new y["default"](x["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,x["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+a.statusText+'" ('+a.status+"), readyState is "+a.readyState+".  Response is "+E))},m=function(a){if(B)if(200===a.status){var e=b['getLicenseMessage'](a.response,t,n);null!==e?(I(d),B['updateKeySession'](E,e)):D(a,d,t,n)}else D(a,d,t,n)},f=function(a){I(d,new y["default"](x["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,x["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+t+' update, XHR aborted. status is "'+a.statusText+'" ('+a.status+"), readyState is "+a.readyState))},g=function(a){I(d,new y["default"](x["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,x["default"].MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+t+' update, XHR error. status is "'+a.statusText+'" ('+a.status+"), readyState is "+a.readyState))},k=ia['getLicenseRequestFromMessage'](l),M=b['getHTTPMethod'](n),P=b['getResponseType'](t,n),T=o&&!isNaN(o.httpTimeout)?o.httpTimeout:C,u=o&&!isNaN(o.licenseRequestRetryDelay)?o.licenseRequestRetryDelay:C,R=o&&o.maxLicenseRequestRetries;N(p,v,M,P,h,k,R,u,T,m,f,g)}function N(a,e,n,l,E,o,i,t,r,b,d,c){var p=new XMLHttpRequest;p['open'](n,a,!0),p['responseType']=l,p['withCredentials']=E,r>0&&(p['timeout']=r);for(var w in e)p['setRequestHeader'](w,e[w]);var x=function(){i--,X['push'](setTimeout(function(){N(a,e,n,l,E,o,i,t,r,b,d,c)},t))};p['onload']=function(){200===this.status||0>=i?b(this):(aa['warn']("License request failed ("+this.status+"). Retrying it... Pending retries: "+i),x())},p['onerror']=function(){0>=i?c(this):(aa['warn']("License request network request failed . Retrying it... Pending retries: "+i),x())},p['onabort']=function(){0>=i?d(this):(aa['warn']("License request network request aborted . Retrying it... Pending retries: "+i),x())},p['send'](o)}function O(a,e){if(!$||!(ia||ea.length>0)){if(aa['debug']("DRM: onNeedKey"),"cenc"!==a.key.initDataType)return void aa['warn']("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+a.key.initDataType);if(0===na.length&&(aa['warn']("DRM: onNeedKey called before initializeForMedia, wait until initialized"),e="undefined"==typeof e?1:e+1,D>e))return void W['push'](setTimeout(function(){O(a,e)},m));var n=a.key.initData;if(ArrayBuffer['isView'](n)&&(n=n.buffer),ia){var l=r["default"]['getPSSHForKeySystem'](ia,n);if(l)for(var E=B['getAllInitData'](),o=0;o<E.length;o++)if(z['initDataEquals'](l,E[o]))return void aa['warn']("DRM: Ignoring initData because we have already seen it!");
}aa['debug']("DRM: initData:",String['fromCharCode']['apply'](null,new Uint8Array(n)));var i=z['getSupportedKeySystems'](n,la);return 0===i.length?(aa['debug']("DRM: Received needkey event with initData, but we don't support any of the key systems!"),void F['trigger'](G.KEY_SYSTEM_SELECTED,{'data':null,'error':new y["default"](x["default"].KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,"DRM: Error, Unsupported for "+(la?Object['keys'](la):void 0)+" or supportedConfigurations!"),'offlineDownload':$})):void U(i,!1)}}function V(){return z?z['getKeySystems']():[]}function j(){X['forEach'](function(a){return clearTimeout(a)}),X=[]}function q(){return!window.navigator.onLine}a=a||{};var z=a.protectionKeyController,B=a.protectionModel,F=a.eventBus,G=a.events,H=a.debug,K=a.BASE64,Q=a.constants,W=[],X=[],Y=[],Z="persistent-license",$=void 0,_=void 0,aa=void 0,ea=void 0,na=void 0,la=void 0,Ea=void 0,oa=void 0,ia=void 0;return _={'initializeForMedia':t,'createKeySession':c,'loadKeySession':w,'removeKeySession':v,'closeKeySession':h,'setServerCertificate':s,'setMediaElement':f,'setSessionType':g,'setRobustnessLevel':k,'setProtectionData':M,'getSupportedKeySystemsFromContentProtection':b,'getKeySystems':V,'stop':P,'resetForUpdateData':u,'reset':T,'setOfflineDownload':l,'setOfflineSessionIds':n,'onNeedKey':O},e(),_}Object['defineProperty'](n,"__esModule",{'value':!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},t=a(130),r=l(t),b=a(152),d=l(b),c=a(151),p=l(c),w=a(139),x=l(w),v=a(194),y=l(v),h=a(19),s=l(h),D=5,m=500,C=8e3;o['__visualon_factory_name']="ProtectionController",n["default"]=s["default"]['getClassFactory'](o)},{'130':130,'139':139,'151':151,'152':152,'19':19,'194':194}],'134':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){a&&(a.debug&&(g=a.debug,M=g['getLogger'](C)),a.BASE64&&(T=a.BASE64))}function e(){P=[];var a=void 0;a=x["default"](D)['getInstance']({'BASE64':T}),P['push'](a),a=p["default"](D)['getInstance']({'BASE64':T}),P['push'](a),a=r["default"](D)['getInstance']({'BASE64':T}),P['push'](a),u=a,a=d["default"](D)['getInstance']({'BASE64':T,'debug':g}),P['push'](a),A=a}function n(){return P}function l(a){for(var e=0;e<P.length;e++)if(P[e]['systemString']===a)return P[e];return null}function E(a){return a===u||a===A}function o(a,e){if(a['byteLength']===e.byteLength){for(var n=new Uint8Array(a),l=new Uint8Array(e),E=0;E<n.length;E++)if(n[E]!==l[E])return!1;return!0}return!1}function t(a,e){var n=void 0,l=void 0,E=void 0,o=void 0,i=[];if(a)for(E=0;E<P.length;++E)if(l=P[E],b(l.systemString,e))for(o=0;o<a.length;++o)if(n=a[o],n['schemeIdUri']['toLowerCase']()===l.schemeIdURI){var t=l['getInitData'](n);t?i['push']({'ks':P[E],'initData':t,'cdmData':l['getCDMData'](),'sessionId':l['getSessionId'](n)}):this['isClearKey'](l)&&i['push']({'ks':l,'initData':null})}return i}function b(a,e){return e?a in e:!0}function c(a,e){for(var n=[],l=i["default"]['parsePSSHList'](a),E=void 0,o=void 0,t=void 0,r=0;r<P.length;++r)E=P[r],o=E.systemString,t=b(o,e),E.uuid in l&&t&&n['push']({'ks':E,'initData':l[E.uuid],'cdmData':E['getCDMData'](),'sessionId':E['getSessionId']()});return n}function w(a,e,n){if("license-release"===n||"individualization-request"===n||!a)return null;var l=null;return e&&e['hasOwnProperty']("drmtoday")?l=y["default"](D)['getInstance']({'BASE64':T}):a['systemString']===k["default"].WIDEVINE_KEYSTEM_STRING?l=m["default"](D)['getInstance']():a['systemString']===k["default"].PLAYREADY_KEYSTEM_STRING?l=s["default"](D)['getInstance']():a['systemString']===k["default"].PLAYREADY_KEYSTEM_STRING_CAST?l=s["default"](D)['getInstance']():a['systemString']===k["default"].CLEARKEY_KEYSTEM_STRING&&(l=f["default"](D)['getInstance']()),l}function v(a,e,n){try{return a['getClearKeysFromProtectionData'](e,n)}catch(l){return M['error']("Failed to retrieve clearkeys from ProtectionData"),null}}function h(a){for(var e=(function(e){var n=null;return a&&(n=e in a?a[e]:null),n}),n=0;n<P.length;n++){var l=P[n];l['hasOwnProperty']("init")&&l['init'](e(l.systemString))}}var D=this.context,C=void 0,g=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0;return C={'initialize':e,'setProtectionData':h,'isClearKey':E,'initDataEquals':o,'getKeySystems':n,'getKeySystemBySystemString':l,'getSupportedKeySystemsFromContentProtection':t,'getSupportedKeySystems':c,'getLicenseServer':w,'processClearKeyLicenseRequest':v,'setConfig':a}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(130),i=l(o),t=a(135),r=l(t),b=a(137),d=l(b),c=a(138),p=l(c),w=a(136),x=l(w),v=a(144),y=l(v),h=a(145),s=l(h),D=a(146),m=l(D),C=a(143),f=l(C),g=a(81),k=l(g),M=a(19),P=l(M);E['__visualon_factory_name']="ProtectionKeyController",n["default"]=P["default"]['getSingletonFactory'](E)},{'130':130,'135':135,'136':136,'137':137,'138':138,'143':143,'144':144,'145':145,'146':146,'19':19,'81':81}],'135':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e){var n=null;if(a){for(var l=JSON['parse'](String['fromCharCode']['apply'](null,new Uint8Array(e))),E=[],o=0;o<l.kids.length;o++){var t=l['kids'][o],b=a.clearkeys&&a['clearkeys']['hasOwnProperty'](t)?a['clearkeys'][t]:null;if(!b)throw new Error("DRM: ClearKey keyID ("+t+") is not known!");E['push'](new i["default"](t,b))}n=new r["default"](E)}return n}function n(a){return d["default"]['parseInitDataFromContentProtection'](a,p)}function l(){return null}function E(a){return new Uint8Array(a)}function o(){return null}function t(){return null}function b(){return null}a=a||{};var c=void 0,p=a.BASE64;return c={'uuid':v,'schemeIdURI':h,'systemString':y,'getInitData':n,'getRequestHeadersFromMessage':l,'getLicenseRequestFromMessage':E,'getLicenseServerURLFromInitData':o,'getCDMData':t,'getSessionId':b,'getClearKeysFromProtectionData':e}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(149),i=l(o),t=a(147),r=l(t),b=a(130),d=l(b),c=a(81),p=l(c),w=a(19),x=l(w),v="e2719d58-a985-b3c9-781a-b030af78d30e",y=p["default"].CLEARKEY_KEYSTEM_STRING,h="urn:uuid:"+v;E['__visualon_factory_name']="KeySystemClearKey",n["default"]=x["default"]['getSingletonFactory'](E)},{'130':130,'147':147,'149':149,'19':19,'81':81}],'136':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){if(!D||!D['hasOwnProperty']("decodeArray")||!D['hasOwnProperty']("decodeArray"))throw new Error("Missing config parameter(s)")}function n(a){var e={};if(w["default"]['isChromecast']())e["Content-Type"]="text/xml; charset=utf-8";else if(w["default"]['isWebOSApp']())e["Content-Type"]="text/xml; charset=utf-8";else{var n=void 0,l=void 0,E=new DOMParser,o="utf16"===s?new Uint16Array(a):new Uint8Array(a);n=String['fromCharCode']['apply'](null,o),l=E['parseFromString'](n,"application/xml");for(var i=l['getElementsByTagName']("name"),t=l['getElementsByTagName']("value"),r=0;r<i.length;r++)e[i[r]['childNodes'][0].nodeValue]=t[r]['childNodes'][0].nodeValue;e['hasOwnProperty']("Content")&&(e["Content-Type"]=e.Content,delete e.Content),e['hasOwnProperty']("Content-Type")||(e["Content-Type"]="text/xml; charset="+s)}return e}function l(a){if(window.cast&&window.cast.__platform__)return new Uint8Array(a);if(navigator['userAgent']['indexOf']("Web0S")>-1)return new Uint8Array(a);var n=null,l=new DOMParser,E="utf16"===s?new Uint16Array(a):new Uint8Array(a);e();var o=String['fromCharCode']['apply'](null,E),i=l['parseFromString'](o,"application/xml");if(i['getElementsByTagName']("Challenge")[0]){var t=i['getElementsByTagName']("Challenge")[0]['childNodes'][0].nodeValue;t&&(n=D['decode'](t))}else if(i['getElementsByTagName']("parsererror").length)return a;return n}function E(a){if(a)for(var e=new DataView(a),n=e['getUint16'](4,!0),l=6,E=new DOMParser,o=0;n>o;o++){var i=e['getUint16'](l,!0);l+=2;var t=e['getUint16'](l,!0);if(l+=2,1===i){var r=a['slice'](l,l+t),b=String['fromCharCode']['apply'](null,new Uint16Array(r)),d=E['parseFromString'](b,"application/xml");if(d['getElementsByTagName']("LA_URL")[0]){var c=d['getElementsByTagName']("LA_URL")[0]['childNodes'][0].nodeValue;if(c)return c}if(d['getElementsByTagName']("LUI_URL")[0]){var p=d['getElementsByTagName']("LUI_URL")[0]['childNodes'][0].nodeValue;if(p)return p}}else l+=t}return null}function i(a){var n=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),E=0,o=null,i=void 0,r=void 0,b=void 0,d=void 0,c=void 0;if(e(),"pssh"in a)return t["default"]['parseInitDataFromContentProtection'](a,D);if("pro"in a)o=D['decodeArray'](a.pro.__text);else{if(!("prheader"in a))return null;o=D['decodeArray'](a.prheader.__text)}return i=o.length,r=4+n.length+l.length+4+i,b=new ArrayBuffer(r),d=new Uint8Array(b),c=new DataView(b),c['setUint32'](E,r),E+=4,d['set'](n,E),E+=n.length,d['set'](l,E),E+=l.length,c['setUint32'](E,i),E+=4,d['set'](o,E),E+=i,d.buffer}function r(a){if("utf8"!==a&&"utf16"!==a)throw new Error("Illegal PlayReady message format! -- "+a);s=a}function b(a){a&&(h=a)}function d(){var a=void 0,n=void 0,l=void 0,E=void 0;if(e(),h&&h.cdmData){for(a=[],E=0;E<h.cdmData.length;++E)a['push'](h['cdmData']['charCodeAt'](E)),a['push'](0);for(a=String['fromCharCode']['apply'](null,a),a=D['encode'](a),n=y['replace']("%CUSTOMDATA%",a),l=[],E=0;E<n.length;++E)l['push'](n['charCodeAt'](E)),l['push'](0);return new Uint8Array(l).buffer}return null}function c(){return null}a=a||{};var p=void 0,s="utf16",D=a.BASE64;return p={'uuid':x,'schemeIdURI':v,'systemString':o,'getInitData':i,'getRequestHeadersFromMessage':n,'getLicenseRequestFromMessage':l,'getLicenseServerURLFromInitData':E,'getCDMData':d,'getSessionId':c,'setPlayReadyMessageFormat':r,'init':b}}Object['defineProperty'](n,"__esModule",{'value':!0});var o,i=a(130),t=l(i),r=a(81),b=l(r),d=a(19),c=l(d),p=a(303),w=l(p),x="9a04f079-9840-4286-ab92-e65be0885f95";o=window.cast&&window.cast.__platform__?b["default"].PLAYREADY_KEYSTEM_STRING_CAST:b["default"].PLAYREADY_KEYSTEM_STRING;var v="urn:uuid:"+x,y='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',h=void 0;E['__visualon_factory_name']="KeySystemPlayReady",n["default"]=c["default"]['getSingletonFactory'](E)},{'130':130,'19':19,'303':303,'81':81}],'137':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a,e){var n=null;if(a){for(var l=JSON['parse'](String['fromCharCode']['apply'](null,new Uint8Array(e))),E=[],o=0;o<l.kids.length;o++){var t=l['kids'][o],b=a.clearkeys&&a['clearkeys']['hasOwnProperty'](t)?a['clearkeys'][t]:null;if(!b)throw new Error("DRM: ClearKey keyID ("+t+") is not known!");E['push'](new i["default"](t,b))}n=new r["default"](E),w['warn']("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}function n(a){return d["default"]['parseInitDataFromContentProtection'](a,p)}function l(){return null}function E(a){return new Uint8Array(a)}function o(){return null}function t(){return null}function b(){return null}var c=void 0,p=a.BASE64,w=a['debug']['getLogger'](c);return c={'uuid':v,'schemeIdURI':h,'systemString':y,'getInitData':n,'getRequestHeadersFromMessage':l,'getLicenseRequestFromMessage':E,'getLicenseServerURLFromInitData':o,'getCDMData':t,'getSessionId':b,'getClearKeysFromProtectionData':e}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(149),i=l(o),t=a(147),r=l(t),b=a(130),d=l(b),c=a(81),p=l(c),w=a(19),x=l(w),v="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",y=p["default"].CLEARKEY_KEYSTEM_STRING,h="urn:uuid:"+v;E['__visualon_factory_name']="KeySystemW3CClearKey",n["default"]=x["default"]['getSingletonFactory'](E)},{'130':130,'147':147,'149':149,'19':19,'81':81}],'138':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){a&&(d=a)}function n(a){return i["default"]['parseInitDataFromContentProtection'](a,x)}function l(){return null}function E(a){return new Uint8Array(a)}function o(){return null}function t(){return null}function r(a){return d&&d.sessionId?d.sessionId:a&&a.sessionId?a.sessionId:null}a=a||{};var b=void 0,d=null,x=a.BASE64;return b={'uuid':c,'schemeIdURI':w,'systemString':p,'init':e,'getInitData':n,'getRequestHeadersFromMessage':l,'getLicenseRequestFromMessage':E,'getLicenseServerURLFromInitData':o,'getCDMData':t,'getSessionId':r}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(130),i=l(o),t=a(81),r=l(t),b=a(19),d=l(b),c="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",p=r["default"].WIDEVINE_KEYSTEM_STRING,w="urn:uuid:"+c;E['__visualon_factory_name']="KeySystemWidevine",n["default"]=d["default"]['getSingletonFactory'](E)},{'130':130,'19':19,'81':81}],'139':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(22),r=l(t),b=function(a){function e(){E(this,e);var a=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return a['MEDIA_KEYERR_CODE']=100,a['MEDIA_KEYERR_UNKNOWN_CODE']=101,a['MEDIA_KEYERR_CLIENT_CODE']=102,a['MEDIA_KEYERR_SERVICE_CODE']=103,a['MEDIA_KEYERR_OUTPUT_CODE']=104,a['MEDIA_KEYERR_HARDWARECHANGE_CODE']=105,a['MEDIA_KEYERR_DOMAIN_CODE']=106,a['MEDIA_KEY_MESSAGE_ERROR_CODE']=107,a['MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE']=108,a['SERVER_CERTIFICATE_UPDATED_ERROR_CODE']=109,a['KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE']=110,a['MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE']=111,a['KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE']=112,a['KEY_SESSION_CREATED_ERROR_CODE']=113,a['MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE']=114,a['MEDIA_KEYERR_UNKNOWN_MESSAGE']="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",a['MEDIA_KEYERR_CLIENT_MESSAGE']="The Key System could not be installed or updated.",a['MEDIA_KEYERR_SERVICE_MESSAGE']="The message passed into update indicated an error from the license service.",a['MEDIA_KEYERR_OUTPUT_MESSAGE']="There is no available output device with the required characteristics for the content protection system.",a['MEDIA_KEYERR_HARDWARECHANGE_MESSAGE']="A hardware configuration change caused a content protection error.",a['MEDIA_KEYERR_DOMAIN_MESSAGE']="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",a['MEDIA_KEY_MESSAGE_ERROR_MESSAGE']="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",a['MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE']="DRM: Empty key message from CDM",a['SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE']="Error updating server certificate -- ",a['KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE']="DRM: KeyStatusChange error! -- License has expired",a['MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE']="DRM: No license server URL specified!",a['KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE']="DRM: KeySystem Access Denied! -- ",a['KEY_SESSION_CREATED_ERROR_MESSAGE']="DRM: unable to create session! --",a['MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE']="DRM: licenser error! --",a}return i(e,a),e}(r["default"]),d=new b;n["default"]=d},{'22':22}],'140':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){I=A['getLogger'](U),J=null,L=null,O=[],V=[],N=i["default"](P)['getInstance'](),q=f()}function n(){J&&k();for(var a=0;a<V.length;a++)h(V[a]);T['trigger'](u.TEARDOWN_COMPLETE)}function l(){return L}function E(){for(var a=[],e=0;e<O.length;e++)a['push'](O[e].initData);for(var n=0;n<V.length;n++)a['push'](V[n].initData);return a}function o(a){var e=J;e||(e=document['createElement']("video"));for(var n=!1,l=0;l<a.length;l++)for(var E=a[l].ks.systemString,o=a[l].configs,i=null,t=null,r=0;r<o.length;r++){var b=o[r].videoCapabilities;if(b&&0!==b.length){t=[];for(var d=0;d<b.length;d++)""!==e['canPlayType'](b[d].contentType,E)&&t['push'](b[d])}if(!(!i&&!t||i&&0===i.length||t&&0===t.length)){n=!0;var c=new x["default"](i,t),p=N['getKeySystemBySystemString'](E);T['trigger'](u.KEY_SYSTEM_ACCESS_COMPLETE,{'data':new y["default"](p,c)});break}}n||T['trigger'](u.KEY_SYSTEM_ACCESS_COMPLETE,{'error':"Key system access denied! -- No valid audio/video content configurations detected!"})}function t(a){L=a.keySystem,T['trigger'](u.INTERNAL_KEY_SYSTEM_SELECTED)}function b(a){if(J!==a){if(J){k();for(var e=0;e<V.length;e++)h(V[e]);V=[]}J=a,J&&(J['addEventListener'](R.keyerror,q),J['addEventListener'](R.needkey,q),J['addEventListener'](R.keymessage,q),J['addEventListener'](R.keyadded,q),T['trigger'](u.VIDEO_ELEMENT_SELECTED))}}function c(){return J}function w(a){if(!L)throw new Error("Can not create sessions until you have selected a key system");if(j||0===V.length){var e={'sessionID':null,'initData':a,'getSessionID':function(){return this.sessionID},'getExpirationTime':function(){return NaN},'getSessionType':function(){return"temporary"}};return O['push'](e),J[R.generateKeyRequest](L.systemString,new Uint8Array(a)),e}throw new Error("Multiple sessions not allowed!")}function v(a,e){var n=a.sessionID;if(N['isClearKey'](L))for(var l=0;l<e.keyPairs.length;l++)J[R.addKey](L.systemString,e['keyPairs'][l].key,e['keyPairs'][l].keyID,n);else J[R.addKey](L.systemString,new Uint8Array(e),new Uint8Array(a.initData),n)}function h(a){try{J[R.cancelKeyRequest](L.systemString,a.sessionID)}catch(e){T['trigger'](u.KEY_SESSION_CLOSED,{'data':null,'error':"Error closing session ("+a.sessionID+") "+e.message})}}function D(){}function m(){}function C(){}function f(){return{'handleEvent':function(a){var e=null;switch(a.type){case R.needkey:var n=ArrayBuffer['isView'](a.initData)?a.initData.buffer:a.initData;T['trigger'](u.NEED_KEY,{'key':new r["default"](n,"cenc")});break;case R.keyerror:if(e=g(V,a.sessionId),e||(e=g(O,a.sessionId)),e){var l=s["default"].MEDIA_KEYERR_CODE,E="";switch(a.errorCode.code){case 1:l=s["default"].MEDIA_KEYERR_UNKNOWN_CODE,E+="MEDIA_KEYERR_UNKNOWN - "+s["default"].MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:l=s["default"].MEDIA_KEYERR_CLIENT_CODE,E+="MEDIA_KEYERR_CLIENT - "+s["default"].MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:l=s["default"].MEDIA_KEYERR_SERVICE_CODE,E+="MEDIA_KEYERR_SERVICE - "+s["default"].MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:l=s["default"].MEDIA_KEYERR_OUTPUT_CODE,E+="MEDIA_KEYERR_OUTPUT - "+s["default"].MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:l=s["default"].MEDIA_KEYERR_HARDWARECHANGE_CODE,E+="MEDIA_KEYERR_HARDWARECHANGE - "+s["default"].MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:l=s["default"].MEDIA_KEYERR_DOMAIN_CODE,E+="MEDIA_KEYERR_DOMAIN - "+s["default"].MEDIA_KEYERR_DOMAIN_MESSAGE}E+="  System Code = "+a.systemCode,T['trigger'](u.KEY_ERROR,{'data':new d["default"](l,E,e),'offlineDownload':z})}else I['error']("No session token found for key error");break;case R.keyadded:e=g(V,a.sessionId),e||(e=g(O,a.sessionId)),e?(I['debug']("DRM: Key added."),T['trigger'](u.KEY_ADDED,{'data':e})):I['debug']("No session token found for key added");break;case R.keymessage:if(j=null!==a.sessionId&&void 0!==a.sessionId)e=g(V,a.sessionId),!e&&O.length>0&&(e=O['shift'](),V['push'](e),e['sessionID']=a.sessionId,T['trigger'](u.KEY_SESSION_CREATED,{'data':e}),z&&z['storeSessionId'](e['getSessionID']()));else if(O.length>0&&(e=O['shift'](),V['push'](e),0!==O.length)){S['mediaKeyMessageError'](s["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE),S['error'](new d["default"](s["default"].MEDIA_KEY_MESSAGE_ERROR_CODE,s["default"].MEDIA_KEY_MESSAGE_ERROR_MESSAGE));break}if(e){var o=ArrayBuffer['isView'](a.message)?a.message.buffer:a.message;e['keyMessage']=o,T['trigger'](u.INTERNAL_KEY_MESSAGE,{'data':new p["default"](e,o,a.defaultURL)})}else I['warn']("No session token found for key message")}}}}function g(a,e){if(e&&a){for(var n=a.length,l=0;n>l;l++)if(a[l]['sessionID']==e)return a[l];return null}return null}function k(){J['removeEventListener'](R.keyerror,q),J['removeEventListener'](R.needkey,q),J['removeEventListener'](R.keymessage,q),J['removeEventListener'](R.keyadded,q)}function M(a){z=a}a=a||{};var P=this.context,T=a.eventBus,u=a.events,A=a.debug,R=a.api,S=a.errHandler,U=void 0,I=void 0,J=void 0,L=void 0,N=void 0,O=void 0,V=void 0,j=void 0,q=void 0,z=void 0;return U={'getAllInitData':E,'requestKeySystemAccess':o,'getKeySystem':l,'selectKeySystem':t,'setMediaElement':b,'getMediaElement':c,'createKeySession':w,'updateKeySession':v,'closeKeySession':h,'setServerCertificate':D,'loadKeySession':m,'removeKeySession':C,'stop':n,'reset':n,'setOfflineDownload':M},e(),U}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(134),i=l(o),t=a(153),r=l(t),b=a(194),d=l(b),c=a(148),p=l(c),w=a(151),x=l(w),v=a(150),y=l(v),h=a(139),s=l(h),D=a(19),m=l(D);E['__visualon_factory_name']="ProtectionModel_01b",n["default"]=m["default"]['getClassFactory'](E)},{'134':134,'139':139,'148':148,'150':150,'151':151,'153':153,'19':19,'194':194}],'141':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){N=I['getLogger'](L),O=null,V=null,j=null,q=[],B=i["default"](R)['getInstance'](),z=M()}function n(){var a=q.length,e=void 0;0!==a?!function(){for(var n=function(a){P(a),0===q.length&&(V?(V['removeEventListener']("encrypted",z),V['setMediaKeys'](null)['then'](function(){S['trigger'](U.TEARDOWN_COMPLETE)})):S['trigger'](U.TEARDOWN_COMPLETE))},l=0;a>l;l++)e=q[l],function(a){e.session['closed']['then'](function(){n(a)}),k(e)["catch"](function(){n(a)})}(e)}():S['trigger'](U.TEARDOWN_COMPLETE)}function l(){for(var a=void 0,e=0;e<q.length;e++)a=q[e],a['getUsable']()||k(a)["catch"](function(){P(a)})}function E(){return O}function o(){for(var a=[],e=0;e<q.length;e++)q[e].initData&&a['push'](q[e].initData);return a}function t(a){g(a,0)}function b(a){a['mksa']['createMediaKeys']()['then'](function(e){O=a.keySystem,j=e,V?V['setMediaKeys'](j)['then'](function(){S['trigger'](U.INTERNAL_KEY_SYSTEM_SELECTED)}):S['trigger'](U.INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){S['trigger'](U.INTERNAL_KEY_SYSTEM_SELECTED,{'error':"Error selecting keys system ("+a.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function c(a){V!==a&&(V&&(V['removeEventListener']("encrypted",z),V.setMediaKeys&&V['setMediaKeys'](null)),V=a,V&&(V['addEventListener']("encrypted",z),V.setMediaKeys&&j&&V['setMediaKeys'](j)))}function w(){return V}function v(a){if(!O||!j)throw new Error("Can not set server certificate until you have selected a key system");j['setServerCertificate'](a)['then'](function(){N['info']("DRM: License server certificate successfully updated."),S['trigger'](U.SERVER_CERTIFICATE_UPDATED)})["catch"](function(a){S['trigger'](U.SERVER_CERTIFICATE_UPDATED,{'error':new p["default"](d["default"].SERVER_CERTIFICATE_UPDATED_ERROR_CODE,d["default"].SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+a.name)})})}function h(a,e,n){if(!O||!j)throw new Error("Can not create sessions until you have selected a key system");var l=j['createSession'](n),E=u(l,a,n),o=this['getKeySystem'](),i=o['systemString']===s["default"].CLEARKEY_KEYSTEM_STRING&&e&&e.clearkeys?"keyids":"cenc";l['generateRequest'](i,a)['then'](function(){N['debug']("DRM: Session created.  SessionID = "+E['getSessionID']()),F&&F['storeSessionId'](E['getSessionID']()),S['trigger'](U.KEY_SESSION_CREATED,{'data':E})})["catch"](function(a){P(E),S['trigger'](U.KEY_SESSION_CREATED,{'offlineDownload':F,'data':null,'error':new p["default"](d["default"].KEY_SESSION_CREATED_ERROR_CODE,d["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+a.name)})})}function D(a,e){var l=a.session;B['isClearKey'](O)&&(e=e['toJWK']()),l['update'](e)['then'](function(){if(F){var e=a['getKeyStatuses']()['values']();setTimeout(function(){var a=!0,l=!1,E=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i['next']()).done);a=!0){var t=o.value;if("usable"===t){n();break}}}catch(r){l=!0,E=r}finally{try{!a&&i["return"]&&i["return"]()}finally{if(l)throw E}}},1e3)}})["catch"](function(e){S['trigger'](U.KEY_ERROR,{'data':new p["default"](d["default"].MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,a),'offlineDownload':F})})}function m(a,e,n){if(!O||!j)throw new Error("Can not load sessions until you have selected a key system");for(var l=0;l<q.length;l++)if(a===q[l].sessionId)return void N['warn']("DRM: Ignoring session ID because we have already seen it!");var E=j['createSession'](n),o=u(E,e,n,a);E['load'](a)['then'](function(e){e?(N['debug']("DRM: Session loaded.  SessionID = "+o['getSessionID']()),S['trigger'](U.KEY_SESSION_CREATED,{'data':o})):(P(o),S['trigger'](U.KEY_SESSION_CREATED,{'offlineDownload':F,'data':null,'error':new p["default"](d["default"].KEY_SESSION_CREATED_ERROR_CODE,d["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+a+")")}))})["catch"](function(e){P(o),S['trigger'](U.KEY_SESSION_CREATED,{'offlineDownload':F,'data':null,'error':new p["default"](d["default"].KEY_SESSION_CREATED_ERROR_CODE,d["default"].KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+a+")! "+e.name)})})}function C(a){var e=a.session;e['remove']()['then'](function(){N['debug']("DRM: Session removed.  SessionID = "+a['getSessionID']()),S['trigger'](U.KEY_SESSION_REMOVED,{'data':a['getSessionID']()})},function(e){S['trigger'](U.KEY_SESSION_REMOVED,{'data':null,'error':"Error removing session ("+a['getSessionID']()+"). "+e.name})})}function f(a){k(a)["catch"](function(e){P(a),S['trigger'](U.KEY_SESSION_CLOSED,{'data':null,'error':"Error closing session ("+a['getSessionID']()+") "+e.name})})}function g(a,e){return void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess?void S['trigger'](U.KEY_SYSTEM_ACCESS_COMPLETE,{'error':"Insecure origins are not allowed"}):void function(e){J&&a[e].ks['systemString']['toLowerCase']()['indexOf']("playready")>=0&&e+1<a.length&&e++;var n=a[e].ks,l=a[e].configs,E=n.systemString;E===s["default"].PLAYREADY_KEYSTEM_STRING&&"required"===l[0].persistentState&&(E+=".recommendation"),navigator['requestMediaKeySystemAccess'](E,l)['then'](function(a){var e="function"==typeof a.getConfiguration?a['getConfiguration']():null,l=new y["default"](n,e);l['mksa']=a,S['trigger'](U.KEY_SYSTEM_ACCESS_COMPLETE,{'data':l})})["catch"](function(n){++e<a.length?g(a,e):S['trigger'](U.KEY_SYSTEM_ACCESS_COMPLETE,{'error':"Key system access denied! "+n.message})})}(e)}function k(a){var e=a.session;return e['removeEventListener']("keystatuseschange",a),e['removeEventListener']("message",a),e['close']()}function M(){return{'handleEvent':function(a){switch(a.type){case"encrypted":if(a.initData){var e=ArrayBuffer['isView'](a.initData)?a.initData.buffer:a.initData;S['trigger'](U.NEED_KEY,{'key':new r["default"](e,a.initDataType)})}}}}}function P(a){for(var e=0;e<q.length;e++)if(q[e]===a){q['splice'](e,1);break}}function T(a){var e=void 0,n=void 0;return a&&a.length>0&&(a[0]&&("string"==typeof a[0]?e=a[0]:n=a[0]),a[1]&&("string"==typeof a[1]?e=a[1]:n=a[1])),{'status':e,'keyId':n}}function u(a,e,n,l){var E={'session':a,'initData':e,'sessionId':l,'handleEvent':function(a){switch(a.type){case"keystatuseschange":S['trigger'](U.KEY_STATUSES_CHANGED,{'data':this}),a.target['keyStatuses']['forEach'](function(){var a=T(arguments);switch(a.status){case"expired":S['trigger'](U.INTERNAL_KEY_STATUS_CHANGED,{'error':new p["default"](d["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,d["default"].KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;case"output-restricted":G=!0,S['trigger'](U.VO_DASH_HDCP_OUTPUT_POLICY,{'restricted':!0});break;case"usable":G===!0&&(G=!1,S['trigger'](U.VO_DASH_HDCP_OUTPUT_POLICY,{'restricted':!1}));break;default:S['trigger'](U.INTERNAL_KEY_STATUS_CHANGED,a)}});break;case"message":var e=ArrayBuffer['isView'](a.message)?a.message.buffer:a.message;S['trigger'](U.INTERNAL_KEY_MESSAGE,{'data':new x["default"](this,e,void 0,a.messageType)})}},'getSessionID':function(){return a.sessionId},'getExpirationTime':function(){return a.expiration},'getKeyStatuses':function(){return a.keyStatuses},'getUsable':function(){var e=!1;return a['keyStatuses']['forEach'](function(){var a=T(arguments);"usable"===a.status&&(e=!0)}),e},'getSessionType':function(){return n}};return a['addEventListener']("keystatuseschange",E),a['addEventListener']("message",E),a['closed']['then'](function(){P(E),N['debug']("DRM: Session closed.  SessionID = "+E['getSessionID']()),S['trigger'](U.KEY_SESSION_CLOSED,{'data':E['getSessionID']()})}),q['push'](E),E}function A(a){F=a}a=a||{};var R=this.context,S=a.eventBus,U=a.events,I=a.debug,J=R['commonUtil']['isWebOSApp'](),L=void 0,N=void 0,O=void 0,V=void 0,j=void 0,q=void 0,z=void 0,B=void 0,F=void 0,G=void 0;return L={'getAllInitData':o,'requestKeySystemAccess':t,'getKeySystem':E,'selectKeySystem':b,'setMediaElement':c,'getMediaElement':w,'setServerCertificate':v,'createKeySession':h,'updateKeySession':D,'loadKeySession':m,'removeKeySession':C,'closeKeySession':f,'stop':l,'reset':n,'setOfflineDownload':A},e(),L}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(134),i=l(o),t=a(153),r=l(t),b=a(139),d=l(b),c=a(194),p=l(c),w=a(148),x=l(w),v=a(150),y=l(v),h=a(81),s=l(h),D=a(19),m=l(D);E['__visualon_factory_name']="ProtectionModel_21Jan2015",n["default"]=m["default"]['getClassFactory'](E)},{'134':134,'139':139,'148':148,'150':150,'153':153,'19':19,'194':194,'81':81}],'142':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){U=A['getLogger'](S),I=null,J=null,L=null,N=null,O=[],j=i["default"](P)['getInstance'](),V=f()}function n(){try{for(var a=0;a<O.length;a++)h(O[a]);I&&I['removeEventListener'](R.needkey,V),T['trigger'](u.TEARDOWN_COMPLETE)}catch(e){T['trigger'](u.TEARDOWN_COMPLETE,{'error':"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function l(){return J}function E(){for(var a=[],e=0;e<O.length;e++)a['push'](O[e].initData);return a}function o(a){for(var e=!1,n=0;n<a.length;n++)for(var l=a[n].ks.systemString,E=a[n].configs,o=null,i=null,t=0;t<E.length;t++){var r=E[t].audioCapabilities,b=E[t].videoCapabilities;if(r&&0!==r.length){o=[];for(var d=0;d<r.length;d++)window[R.MediaKeys]['isTypeSupported'](l,r[d].contentType)&&o['push'](r[d])}if(b&&0!==b.length){i=[];for(var c=0;c<b.length;c++)window[R.MediaKeys]['isTypeSupported'](l,b[c].contentType)&&i['push'](b[c])}if(!(!o&&!i||o&&0===o.length||i&&0===i.length)){e=!0;var p=new y["default"](o,i),w=j['getKeySystemBySystemString'](l);T['trigger'](u.KEY_SYSTEM_ACCESS_COMPLETE,{'data':new s["default"](w,p)});break}}e||T['trigger'](u.KEY_SYSTEM_ACCESS_COMPLETE,{'error':"Key system access denied! -- No valid audio/video content configurations detected!"})}function t(a){try{L=a['mediaKeys']=new window[R.MediaKeys](a.keySystem.systemString),J=a.keySystem,N=a,I&&g(),T['trigger'](u.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){T['trigger'](u.INTERNAL_KEY_SYSTEM_SELECTED,{'offlineDownload':q,'error':"Error selecting keys system ("+J.systemString+")! Could not create MediaKeys -- TODO"})}}function b(a){I!==a&&(I&&I['removeEventListener'](R.needkey,V),I=a,I&&(I['addEventListener'](R.needkey,V),L&&g()))}function c(){return I}function w(a,e,n,l){if(!J||!L||!N)throw new Error("Can not create sessions until you have selected a key system");var E=null;if(N.ksConfiguration.videoCapabilities&&N.ksConfiguration.videoCapabilities.length>0&&(E=N['ksConfiguration']['videoCapabilities'][0]),null===E&&N.ksConfiguration.audioCapabilities&&N.ksConfiguration.audioCapabilities.length>0&&(E=N['ksConfiguration']['audioCapabilities'][0]),null===E)throw new Error("Can not create sessions for unknown content types.");var o=E.contentType,i=L['createSession'](o,new Uint8Array(a),l?new Uint8Array(l):null),t=k(i,a);i['addEventListener'](R.error,t),i['addEventListener'](R.message,t),i['addEventListener'](R.ready,t),i['addEventListener'](R.close,t),O['push'](t),U['debug']("DRM: Session created.  SessionID = "+t['getSessionID']()),T['trigger'](u.KEY_SESSION_CREATED,{'data':t}),q&&q['storeSessionId'](t['getSessionID']())}function v(a,e){var n=a.session;j['isClearKey'](J)?n['update'](new Uint8Array(e['toJWK']())):n['update'](new Uint8Array(e))}function h(a){var e=a.session;e['removeEventListener'](R.error,a),e['removeEventListener'](R.message,a),e['removeEventListener'](R.ready,a),e['removeEventListener'](R.close,a);for(var n=0;n<O.length;n++)if(O[n]===a){O['splice'](n,1);break}e[R.release]()}function D(){}function m(){}function C(){}function f(){return{'handleEvent':function(a){switch(a.type){case R.needkey:if(a.initData){var e=ArrayBuffer['isView'](a.initData)?a.initData.buffer:a.initData;T['trigger'](u.NEED_KEY,{'key':new r["default"](e,"cenc")})}}}}}function g(){var a=null,e=function(){
I['removeEventListener']("loadedmetadata",a),I[R.setMediaKeys](L),T['trigger'](u.VIDEO_ELEMENT_SELECTED)};I.readyState>=1?e():(a=e['bind'](this),I['addEventListener']("loadedmetadata",a))}function k(a,e){return{'session':a,'initData':e,'getSessionID':function(){return this.session.sessionId},'getExpirationTime':function(){return NaN},'getSessionType':function(){return"temporary"},'handleEvent':function(a){switch(a.type){case R.error:var e="KeyError";T['trigger'](u.KEY_ERROR,{'data':new d["default"](p["default"].MEDIA_KEYERR_CODE,e,this),'offlineDownload':q});break;case R.message:var n=ArrayBuffer['isView'](a.message)?a.message.buffer:a.message;T['trigger'](u.INTERNAL_KEY_MESSAGE,{'data':new x["default"](this,n,a.destinationURL)});break;case R.ready:U['debug']("DRM: Key added."),T['trigger'](u.KEY_ADDED);break;case R.close:U['debug']("DRM: Session closed.  SessionID = "+this['getSessionID']()),T['trigger'](u.KEY_SESSION_CLOSED,{'data':this['getSessionID']()})}}}}function M(a){q=a}a=a||{};var P=this.context,T=a.eventBus,u=a.events,A=a.debug,R=a.api,S=void 0,U=void 0,I=void 0,J=void 0,L=void 0,N=void 0,O=void 0,V=void 0,j=void 0,q=void 0;return S={'getAllInitData':E,'requestKeySystemAccess':o,'getKeySystem':l,'selectKeySystem':t,'setMediaElement':b,'getMediaElement':c,'createKeySession':w,'updateKeySession':v,'closeKeySession':h,'setServerCertificate':D,'loadKeySession':m,'removeKeySession':C,'stop':n,'reset':n,'setOfflineDownload':M},e(),S}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(134),i=l(o),t=a(153),r=l(t),b=a(194),d=l(b),c=a(139),p=l(c),w=a(148),x=l(w),v=a(151),y=l(v),h=a(150),s=l(h),D=a(19),m=l(D);E['__visualon_factory_name']="ProtectionModel_3Feb2014",n["default"]=m["default"]['getClassFactory'](E)},{'134':134,'139':139,'148':148,'150':150,'151':151,'153':153,'19':19,'194':194}],'143':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){return a}function e(){return"POST"}function n(){return"arraybuffer"}function l(a){if(a=JSON['parse'](String['fromCharCode']['apply'](null,new Uint8Array(a))),!a['hasOwnProperty']("keys"))return null;for(var e=[],n=0;n<a.keys.length;n++){var l=a['keys'][n],E=l['kid']['replace'](/=/g,""),o=l['k']['replace'](/=/g,"");e['push'](new i["default"](E,o))}return new r["default"](e,a.type)}function E(a){return String['fromCharCode']['apply'](null,new Uint8Array(a))}var o=void 0;return o={'getServerURLFromMessage':a,'getHTTPMethod':e,'getResponseType':n,'getLicenseMessage':l,'getErrorResponse':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(149),i=l(o),t=a(147),r=l(t),b=a(19),d=l(b);E['__visualon_factory_name']="ClearKey",n["default"]=d["default"]['getSingletonFactory'](E)},{'147':147,'149':149,'19':19}],'144':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){if(!r||!r['hasOwnProperty']("decodeArray"))throw new Error("Missing config parameter(s)")}function n(a){return a}function l(){return"POST"}function E(a){return b[a].responseType}function o(a,n){return e(),b[n]['getLicenseMessage'](a)}function t(a,e){return b[e]['getErrorResponse'](a)}a=a||{};var r=a.BASE64,b={};b[i["default"].WIDEVINE_KEYSTEM_STRING]={'responseType':"json",'getLicenseMessage':function(a){return r['decodeArray'](a.license)},'getErrorResponse':function(a){return a}},b[i["default"].PLAYREADY_KEYSTEM_STRING]={'responseType':"arraybuffer",'getLicenseMessage':function(a){return a},'getErrorResponse':function(a){return String['fromCharCode']['apply'](null,new Uint8Array(a))}};var d=void 0;return d={'getServerURLFromMessage':n,'getHTTPMethod':l,'getResponseType':E,'getLicenseMessage':o,'getErrorResponse':t}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(81),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="DRMToday",n["default"]=r["default"]['getSingletonFactory'](E)},{'19':19,'81':81}],'145':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){var e=String['fromCharCode']['apply'](null,new Uint8Array(a)),n=decodeURIComponent(escape(e));return n}function e(e){if(window.DOMParser){var n=a(e),l=new window.DOMParser,E=l['parseFromString'](n,"text/xml"),o=E?E['getElementsByTagNameNS'](b,"Envelope")[0]:null,i=o?o['getElementsByTagNameNS'](b,"Body")[0]:null,t=i?i['getElementsByTagNameNS'](b,"Fault")[0]:null;if(t)return null}return e}function n(e){var n="",l="",E="",o=-1,i=-1;if(window.DOMParser){var t=a(e),r=new window.DOMParser,d=r['parseFromString'](t,"text/xml"),c=d?d['getElementsByTagNameNS'](b,"Envelope")[0]:null,p=c?c['getElementsByTagNameNS'](b,"Body")[0]:null,w=p?p['getElementsByTagNameNS'](b,"Fault")[0]:null,x=w?w['getElementsByTagName']("detail")[0]:null,v=x?x['getElementsByTagName']("Exception")[0]:null,y=null;if(null===w)return t;y=w['getElementsByTagName']("faultstring")[0].firstChild,n=y?y.nodeValue:null,null!==v&&void 0!==v&&(y=v['getElementsByTagName']("StatusCode")[0],l=y?y.firstChild.nodeValue:null,y=v['getElementsByTagName']("Message")[0],E=y?y.firstChild.nodeValue:null,o=E?E['lastIndexOf']("[")+1:-1,i=E?E['indexOf']("]"):-1,E=E?E['substring'](o,i):"")}var h="code: "+l+", name: "+n;return E&&(h+=", message: "+E),h}function l(a){return a}function E(){return"POST"}function o(){return"arraybuffer"}function i(a){return e['call'](this,a)}function t(a){return n['call'](this,a)}var r=void 0,b="http://schemas.xmlsoap.org/soap/envelope/";return r={'getServerURLFromMessage':l,'getHTTPMethod':E,'getResponseType':o,'getLicenseMessage':i,'getErrorResponse':t}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="PlayReady",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'146':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){return a}function e(){return"POST"}function n(){return"arraybuffer"}function l(a){return a}function E(a){return String['fromCharCode']['apply'](null,new Uint8Array(a))}var o=void 0;return o={'getServerURLFromMessage':a,'getHTTPMethod':e,'getResponseType':n,'getLicenseMessage':l,'getErrorResponse':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="Widevine",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'147':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e,n){if(l(this,a),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this['keyPairs']=e,this['type']=n}return E(a,[{'key':"toJWK",'value':function(){var a=void 0,e=this.keyPairs.length,n={'keys':[]};for(a=0;e>a;a++){var l={'kty':"oct",'alg':"A128KW",'kid':this['keyPairs'][a].keyID,'k':this['keyPairs'][a].key};n['keys']['push'](l)}this.type&&(n['type']=this.type);var E=JSON['stringify'](n),o=E.length,i=new ArrayBuffer(o),t=new Uint8Array(i);for(a=0;o>a;a++)t[a]=E['charCodeAt'](a);return i}}]),a}();n["default"]=o},{}],'148':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e,n,E){l(this,o),this['sessionToken']=a,this['message']=e,this['defaultURL']=n,this['messageType']=E?E:"license-request"};n["default"]=E},{}],'149':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e){l(this,o),this['keyID']=a,this['key']=e};n["default"]=E},{}],'150':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e){l(this,o),this['keySystem']=a,this['ksConfiguration']=e};n["default"]=E},{}],'151':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e,n,E,i){l(this,o),this['initDataTypes']=["cenc"],a&&a.length&&(this['audioCapabilities']=a),e&&e.length&&(this['videoCapabilities']=e),this['distinctiveIdentifier']=n,this['persistentState']=E,this['sessionTypes']=i};n["default"]=E},{}],'152':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e){l(this,o),this['contentType']=a,this['robustness']=e};n["default"]=E},{}],'153':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e){l(this,o),this['initData']=a,this['initDataType']=e};n["default"]=E},{}],'154':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){var n=e&&e.droppedVideoFrames?e.droppedVideoFrames:0,i=e&&e.totalVideoFrames?e.totalVideoFrames:0,t=n-E;E=n;var r=i-o;o=i,isNaN(a)||(l[a]?(l[a].droppedVideoFrames+=t,l[a].totalVideoFrames+=r):l[a]={'droppedVideoFrames':t,'totalVideoFrames':r})}function e(){return l}function n(a){l=[],E=a.droppedVideoFrames,o=a.totalVideoFrames}var l=[],E=0,o=0;return{'push':a,'getFrameHistory':e,'reset':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="DroppedFramesHistory";var t=i["default"]['getClassFactory'](E);n["default"]=t},{'19':19}],'155':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){var a=l();return a?a.type:null}function n(){var a=l();return a?a.streamInfo:null}function l(){return s?s.mediaInfo:null}function E(){return s}function o(){return h}function i(){return p}function t(){return w}function r(){return x}function b(){return v}function d(){return y}a=a||{};var c=void 0,p=a.abrController,w=a.switchHistory,x=a.droppedFramesHistory,v=a.currentRequest,y=a.useBufferOccupancyABR,h=a.streamProcessor?a['streamProcessor']['getScheduleController']():null,s=a.streamProcessor?a['streamProcessor']['getRepresentationInfo']():null;return c={'getMediaType':e,'getMediaInfo':l,'getDroppedFramesHistory':r,'getCurrentRequest':b,'getSwitchHistory':t,'getStreamInfo':n,'getScheduleController':o,'getAbrController':i,'getRepresentationInfo':E,'useBufferOccupancyABR':d}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="RulesContext",n["default"]=i["default"]['getClassFactory'](E)},{'19':19}],'156':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){function l(a){var e=r.DEFAULT;return(a===r.DEFAULT||a===r.STRONG||a===r.WEAK)&&(e=a),e}var E=void 0,o=void 0,i=void 0,b=void 0;return o=void 0===a?t:a,i=l(n),b=void 0===e?null:e,E={'quality':o,'reason':b,'priority':i}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=-1,r={'DEFAULT':.5,'STRONG':1,'WEAK':0};E['__visualon_factory_name']="SwitchRequest";var b=i["default"]['getClassFactory'](E);b['NO_CHANGE']=t,b['PRIORITY']=r,i["default"]['updateClassFactory'](E.__visualon_factory_name,b),n["default"]=b},{'19':19}],'157':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){a['newValue']===r["default"].NO_CHANGE&&(a['newValue']=a.oldValue),l[a.oldValue]||(l[a.oldValue]={'noDrops':0,'drops':0,'dropSize':0});var e=a.newValue-a.oldValue,n=0>e?1:0,o=n?-e:0,i=n?0:1;if(l[a.oldValue].drops+=n,l[a.oldValue].dropSize+=o,l[a.oldValue].noDrops+=i,E['push']({'idx':a.oldValue,'noDrop':i,'drop':n,'dropSize':o}),E.length>b){var t=E['shift']();l[t.idx].drops-=t.drop,l[t.idx].dropSize-=t.dropSize,l[t.idx].noDrops-=t.noDrop}}function e(){return l}function n(){l=[],E=[]}var l=[],E=[];return{'push':a,'getSwitchRequests':e,'reset':n}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(156),r=l(t),b=8;E['__visualon_factory_name']="SwitchRequestHistory";var d=i["default"]['getClassFactory'](E);n["default"]=d},{'156':156,'19':19}],'158':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){O={'throughputHalfLife':{'fast':T,'slow':P},'latencyHalfLife':{'fast':A,'slow':u}},s()}function n(a,e,n){return a===i["default"].VIDEO?n<R['getCacheLoadThresholdForType'](i["default"].VIDEO):a===i["default"].AUDIO?n<R['getCacheLoadThresholdForType'](i["default"].AUDIO):void 0}function l(a,e,l,o){if(e.trace&&e.trace.length){var i=e['tresponse']['getTime']()-e['trequest']['getTime']()||1,t=e['_tfinish']['getTime']()-e['tresponse']['getTime']()||1,r=e['trace']['reduce'](function(a,e){return a+e['b'][0]},0),b=void 0;b=R['getUseFetch']()?e['trace']['reduce'](function(a,e){return a+e.d},0):l?t:i+t;var d=Math['round'](8*r/b);if(S['info']("[push][BA] type: "+a+", throughput: "+d+", downloadBytes: "+r+", throughputMeasureTime: "+b+", useDeadTimeLatency: "+l+", latencyTimeInMilliseconds: "+i+", url: "+e.url),w(a),y(a,o),N[a][o]['push'](parseFloat(((1e3*e._mediaduration-(i+t))/(1e3*e._mediaduration))['toFixed'](3))),n(a,i,t)){if(U[a].length>0&&!U[a].hasCachedEntries)return;U[a]['hasCachedEntries']=!0}else U[a]&&U[a].hasCachedEntries&&x(a);U[a]['push'](d),U[a].length>D&&U[a]['shift'](),I[a]['push'](i),I[a].length>D&&I[a]['shift'](),N[a][o].length>D&&N[a][o]['shift'](),E(J[a],d,.001*t,O.throughputHalfLife),E(L[a],i,1,O.latencyHalfLife)}}function E(a,e,n,l){var E=Math['pow'](.5,n/l.fast);a['fastEstimate']=(1-E)*e+E*a.fastEstimate;var o=Math['pow'](.5,n/l.slow);a['slowEstimate']=(1-o)*e+o*a.slowEstimate,a.totalWeight+=n}function o(a,e,n,l){var E=void 0,o=void 0;if("throughput"===a?(E=U[e],o=n?m:C):"latency"===a?(E=I[e],o=f):(E=N[e][l],o=g),E){if(o>=E.length)o=E.length;else if("throughput"===a)for(var i=1;o>i;++i){var t=E[i]/E[i-1];if((t>=M||1/k>=t)&&(o+=1,o===E.length))break}}else o=0;return o}function t(a,e,n,l){return R['getMovingAverageMethod']()!==i["default"].MOVING_AVERAGE_SLIDING_WINDOW?b(a,e):r(a,e,n,l)}function r(a,e,n,l){var E=o(a,e,n,l),i="throughput"===a?U[e]:"efficiency"===a?N[e][l]:I[e];return 0!==E&&i&&0!==i.length?(i=i['slice'](-E),i['reduce'](function(a,e){return a+e})/i.length):NaN}function b(a,e){var n="throughput"===a?O.throughputHalfLife:"latency"===a?O.latencyHalfLife:null,l="throughput"===a?J[e]:"latency"===a?L[e]:null;if(!l||l.totalWeight<=0)return NaN;var E=l.fastEstimate/(1-Math['pow'](.5,l.totalWeight/n.fast)),o=l.slowEstimate/(1-Math['pow'](.5,l.totalWeight/n.slow));return"throughput"===a?Math['min'](E,o):"latency"===a?Math['max'](E,o):null}function d(a,e,n){return t("throughput",a,e,n)}function c(a,e){var n=d(a,e);return isNaN(n)||(n*=R['getBandwidthSafetyFactor']()),n}function p(a){return t("latency",a)}function w(a){U[a]=U[a]||[],I[a]=I[a]||[],J[a]=J[a]||{'fastEstimate':0,'slowEstimate':0,'totalWeight':0},L[a]=L[a]||{'fastEstimate':0,'slowEstimate':0,'totalWeight':0}}function x(a){delete U[a],delete I[a],delete J[a],delete L[a],w(a)}function v(a){N[a]=[]}function y(a,e){N[a]=N[a]||{},N[a][e]=N[a][e]||[]}function h(a,e){return t("efficiency",a,!1,e)}function s(){U={},I={},J={},L={},N={}}a=a||{};var D=20,m=3,C=4,f=4,g=6,k=1.3,M=1.3,P=8,T=3,u=2,A=1,R=a.mediaPlayerModel,S=a.logger,U=void 0,I=void 0,J=void 0,L=void 0,N=void 0,O=void 0,V={'push':l,'getAverageThroughput':d,'getSafeAverageThroughput':c,'getAverageLatency':p,'getAverageEfficiency':h,'clearEfficiencyDict':v,'reset':s};return e(),V}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="ThroughputHistory",n["default"]=r["default"]['getClassFactory'](E)},{'19':19,'79':79}],'159':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){D=[],m=[],c['getUseDefaultABRRules']()&&(c['getUseFetch']()?D['push'](d["default"](b)['create']({'metricsModel':w,'dashMetrics':v,'mediaPlayerModel':c})):(D['push'](s["default"](b)['create']({'metricsModel':w,'dashMetrics':v,'mediaPlayerModel':c})),D['push'](i["default"](b)['create']({'metricsModel':w,'dashMetrics':v})),D['push'](r["default"](b)['create']({'metricsModel':w,'dashMetrics':v,'mediaPlayerModel':c})),D['push'](x["default"](b)['create']())),D['push'](y["default"](b)['create']()),m['push'](p["default"](b)['create']({'metricsModel':w,'dashMetrics':v,'mediaPlayerModel':c})));var a=c['getABRCustomRules']();a['forEach'](function(a){a['type']===g&&D['push'](a['rule'](b)['create']()),a['type']===k&&m['push'](a['rule'](b)['create']())})}function n(a){return a['filter'](function(a){return a.quality>f["default"].NO_CHANGE})}function l(a){var e={},n=void 0,l=void 0,E=void 0,o=void 0,i=void 0;if(0!==a.length){for(e[f["default"].PRIORITY.STRONG]=f["default"].NO_CHANGE,e[f["default"].PRIORITY.WEAK]=f["default"].NO_CHANGE,e[f["default"].PRIORITY.DEFAULT]=f["default"].NO_CHANGE,n=0,l=a.length;l>n;n+=1)E=a[n],E.quality!==f["default"].NO_CHANGE&&(e[E.priority]=e[E.priority]>f["default"].NO_CHANGE?Math['min'](e[E.priority],E.quality):E.quality);return e[f["default"].PRIORITY.WEAK]!==f["default"].NO_CHANGE&&(o=e[f["default"].PRIORITY.WEAK]),e[f["default"].PRIORITY.DEFAULT]!==f["default"].NO_CHANGE&&(o=e[f["default"].PRIORITY.DEFAULT]),e[f["default"].PRIORITY.STRONG]!==f["default"].NO_CHANGE&&(o=e[f["default"].PRIORITY.STRONG]),o!==f["default"].NO_CHANGE&&(i=o),f["default"](b)['create'](i)}}function E(a){var e=D['map'](function(e){return e['getMaxIndex'](a)}),E=n(e),o=l(E);return o||f["default"](b)['create']()}function o(a){var e=m['map'](function(e){return e['shouldAbandon'](a)}),E=n(e),o=l(E);return o||f["default"](b)['create']()}function t(){[D,m]['forEach'](function(a){a&&a.length&&a['forEach'](function(a){return a.reset&&a['reset']()})}),D=[],m=[]}a=a||{};var b=this.context,c=a.mediaPlayerModel,w=a.metricsModel,v=a.dashMetrics,h=void 0,D=void 0,m=void 0;return h={'initialize':e,'reset':t,'getMaxQuality':E,'shouldAbandonFragment':o}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(165),i=l(o),t=a(163),r=l(t),b=a(166),d=l(b),c=a(160),p=l(c),w=a(162),x=l(w),v=a(164),y=l(v),h=a(161),s=l(h),D=a(19),m=l(D),C=a(156),f=l(C),g="qualitySwitchRules",k="abandonFragmentRules";E['__visualon_factory_name']="ABRRulesCollection";var M=m["default"]['getClassFactory'](E);M['QUALITY_SWITCH_RULES']=g,M['ABANDON_FRAGMENT_RULES']=k,m["default"]['updateSingletonFactory'](E.__visualon_factory_name,M),n["default"]=M},{'156':156,'160':160,'161':161,'162':162,'163':163,'164':164,'165':165,'166':166,'19':19}],'160':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){h=d["default"](p)['getInstance']()['getLogger'](y),t()}function n(a,e){s[a]=s[a]||{},s[a][e]=s[a][e]||{}}function l(a,e){m[a]=m[a]||[],m[a]['push'](e)}function o(a){var e=i["default"](p)['create'](i["default"].NO_CHANGE,{'name':E.__visualon_factory_name});if(!(a&&a['hasOwnProperty']("getMediaInfo")&&a['hasOwnProperty']("getMediaType")&&a['hasOwnProperty']("getCurrentRequest")&&a['hasOwnProperty']("getRepresentationInfo")&&a['hasOwnProperty']("getAbrController")))return e;var o=a['getMediaInfo'](),t=a['getMediaType'](),d=a['getCurrentRequest']();if(!isNaN(d.index)){n(t,d.index);var y=w['getStableBufferTime'](),C=v['getCurrentBufferLevel'](x['getReadOnlyMetricsFor'](t));if(C>y)return e;var f=s[t][d.index];if(null===f||null===d.firstByteDate||D['hasOwnProperty'](f.id))return e;if(void 0===f.firstByteTime&&(m[t]=[],f['firstByteTime']=d['firstByteDate']['getTime'](),f['segmentDuration']=d.duration,f['bytesTotal']=d.bytesTotal,f['id']=d.index),f['bytesLoaded']=d.bytesLoaded,f['elapsedTime']=(new Date)['getTime']()-f.firstByteTime,f.bytesLoaded>0&&f.elapsedTime>0&&l(t,Math['round'](8*f.bytesLoaded/f.elapsedTime)),m[t].length>=c&&f.elapsedTime>b&&f.bytesLoaded<f.bytesTotal){var g=m[t]['reduce'](function(a,e){return a+e},0);if(f['measuredBandwidthInKbps']=Math['round'](g/m[t].length),f['estimatedTimeOfDownload']=+(8*f.bytesTotal/f.measuredBandwidthInKbps/1e3)['toFixed'](2),f.estimatedTimeOfDownload<f.segmentDuration*r||0===a['getRepresentationInfo']().quality)return e;if(!D['hasOwnProperty'](f.id)){var k=a['getAbrController'](),M=f.bytesTotal-f.bytesLoaded,P=k['getBitrateList'](o),T=k['getQualityForBitrate'](o,f.measuredBandwidthInKbps*w['getBandwidthSafetyFactor']()),u=f.bytesTotal*P[T].bitrate/P[k['getQualityFor'](t)].bitrate;M>u&&(e['quality']=T,e['reason']['throughput']=f.measuredBandwidthInKbps,e['reason']['fragmentID']=f.id,D[f.id]=f,h['debug']("( ",t,"frag id",f.id,") is asking to abandon and switch to quality to ",T," measured bandwidth was",f.measuredBandwidthInKbps),delete s[t][f.id])}}else f['bytesLoaded']===f.bytesTotal&&delete s[t][f.id]}return e}function t(){s={},D={},m=[]}a=a||{};var r=1.8,b=500,c=5,p=this.context,w=a.mediaPlayerModel,x=a.metricsModel,v=a.dashMetrics,y=void 0,h=void 0,s=void 0,D=void 0,m=void 0;return y={'shouldAbandon':o,'reset':t},e(),y}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(156),i=l(o),t=a(19),r=l(t),b=a(17),d=l(b);E['__visualon_factory_name']="AbandonRequestsRule",n["default"]=r["default"]['getClassFactory'](E)},{'156':156,'17':17,'19':19}],'161':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){z=h["default"](L)['getInstance']()['getLogger'](q),I(),j['on'](v["default"].BUFFER_EMPTY,k,q),j['on'](v["default"].PLAYBACK_SEEKING,M,q),j['on'](v["default"].PERIOD_SWITCH_STARTED,P,q),j['on'](v["default"].MEDIA_FRAGMENT_LOADED,T,q),j['on'](v["default"].METRIC_ADDED,u,q),j['on'](v["default"].QUALITY_CHANGE_REQUESTED,R,q),j['on'](v["default"].FRAGMENT_LOADING_ABANDONED,S,q)}function n(a){return a['map'](function(a){return Math['log'](a)})}function l(a,e,n){var l=n['reduce'](function(a,e,l){return e>n[a]?l:a},0);if(0===l)return null;var E=Math['max'](a,C+f*e.length),o=(n[l]-1)/(E/C-1),i=C/o;return{'gp':o,'Vp':i}}function E(a){var e={},E=a['getMediaInfo'](),i=E['bitrateList']['map'](function(a){return a.bandwidth}),t=n(i);t=t['map'](function(a){return a-t[0]+1});var r=V['getStableBufferTime'](),b=l(r,i,t);return b?(e['state']=D,e['bitrates']=i,e['utilities']=t,e['stableBufferTime']=r,e['Vp']=b.Vp,e['gp']=b.gp,e['lastQuality']=0,o(e)):e['state']=s,e}function o(a){a['placeholderBuffer']=0,a['mostAdvancedSegmentStart']=NaN,a['lastSegmentWasReplacement']=!1,a['lastSegmentStart']=NaN,a['lastSegmentDurationS']=NaN,a['lastSegmentRequestTimeMs']=NaN,a['lastSegmentFinishTimeMs']=NaN}function t(a,e){var n=V['getStableBufferTime']();if(a.stableBufferTime!==n){var E=l(n,a.bitrates,a.utilities);if(E.Vp!==a.Vp||E.gp!==a.gp){var o=N['getCurrentBufferLevel'](O['getReadOnlyMetricsFor'](e)),i=o+a.placeholderBuffer;i-=C,i*=E.Vp/a.Vp,i+=C,a['stableBufferTime']=n,a['Vp']=E.Vp,a['gp']=E.gp,a['placeholderBuffer']=Math['max'](0,i-o)}}}function b(a){var e=a['getMediaType'](),n=B[e];return n?n.state!==s&&t(n,e):(n=E(a),B[e]=n),n}function d(a,e){for(var n=a.bitrates.length,l=NaN,E=NaN,o=0;n>o;++o){var i=(a.Vp*(a['utilities'][o]+a.gp)-e)/a['bitrates'][o];(isNaN(E)||i>=E)&&(E=i,l=o)}return l}function p(a,e){return a.Vp*(a['utilities'][e]+a.gp)}function x(a,e){for(var n=a['bitrates'][e],l=a['utilities'][e],E=0,o=e-1;o>=0;--o)if(a['utilities'][o]<a['utilities'][e]){var i=a['bitrates'][o],t=a['utilities'][o],r=a.Vp*(a.gp+(n*t-i*l)/(n-i));E=Math['max'](E,r)}return E}function y(a,e){var n=Date['now']();if(isNaN(a.lastSegmentFinishTimeMs)){if(!isNaN(a.lastCallTimeMs)){var l=.001*(n-a.lastCallTimeMs);a.placeholderBuffer+=Math['max'](0,l)}}else{var E=.001*(n-a.lastSegmentFinishTimeMs);a.placeholderBuffer+=Math['max'](0,E)}a['lastCallTimeMs']=n,a['lastSegmentStart']=NaN,a['lastSegmentRequestTimeMs']=NaN,a['lastSegmentFinishTimeMs']=NaN,t(a,e)}function k(){for(var a in B)B['hasOwnProperty'](a)&&B[a]['state']===m&&(B[a]['placeholderBuffer']=0)}function M(){for(var a in B)if(B['hasOwnProperty'](a)){var e=B[a];e.state!==s&&(e['state']=D,o(e))}}function P(){}function T(a){if(a&&a.chunk&&a.chunk.mediaInfo){var e=B[a.chunk.mediaInfo.type];if(e&&e.state!==s){var n=a.chunk.start;isNaN(e.mostAdvancedSegmentStart)||n>e.mostAdvancedSegmentStart?(e['mostAdvancedSegmentStart']=n,e['lastSegmentWasReplacement']=!1):V['getUseFetch']()&&n===e.mostAdvancedSegmentStart?e['lastSegmentWasReplacement']=!1:e['lastSegmentWasReplacement']=!0,e['lastSegmentStart']=n,e['lastSegmentDurationS']=a.chunk.duration,e['lastQuality']=a.chunk.quality,A(e,a.chunk.mediaInfo.type)}}}function u(a){if(a&&a['metric']===i["default"].HTTP_REQUEST&&a.value&&a['value']['type']===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&a.value.trace&&a.value.trace.length){var e=B[a.mediaType];e&&e.state!==s&&(e['lastSegmentRequestTimeMs']=a.value['trequest']['getTime'](),e['lastSegmentFinishTimeMs']=a.value['_tfinish']['getTime'](),A(e,a.mediaType))}}function A(a,e){if(!isNaN(a.lastSegmentStart)&&!isNaN(a.lastSegmentRequestTimeMs)&&!isNaN(a.placeholderBuffer)){if(a.placeholderBuffer*=g,!isNaN(a.lastSegmentFinishTimeMs)){var n=N['getCurrentBufferLevel'](O['getReadOnlyMetricsFor'](e)),l=n+.001*(a.lastSegmentFinishTimeMs-a.lastSegmentRequestTimeMs),E=p(a,a.lastQuality),o=Math['max'](0,E-l);a['placeholderBuffer']=Math['min'](o,a.placeholderBuffer)}a.lastSegmentWasReplacement&&!isNaN(a.lastSegmentDurationS)&&(a.placeholderBuffer+=a.lastSegmentDurationS),a['lastSegmentStart']=NaN,a['lastSegmentRequestTimeMs']=NaN}}function R(a){if(a){var e=B[a.mediaType];e&&e.state!==s&&(e['abrQuality']=a.newQuality)}}function S(a){if(a){var e=B[a.mediaType];if(e&&e.state!==s){var n=N['getCurrentBufferLevel'](O['getReadOnlyMetricsFor'](a.mediaType)),l=void 0;l=e.abrQuality>0?x(e,e.abrQuality):C;var E=Math['max'](0,l-n);e['placeholderBuffer']=Math['min'](e.placeholderBuffer,E)}}}function U(a){var e=a['getMediaInfo'](),n=a['getMediaType'](),l=O['getReadOnlyMetricsFor'](n),E=a['getScheduleController'](),i=a['getStreamInfo'](),t=a['getAbrController'](),c=t['getThroughputHistory'](),w=i?i.id:null,v=i&&i.manifestInfo&&i.manifestInfo.isDynamic,h=a['useBufferOccupancyABR'](),C=r["default"](L)['create']();if(C['reason']=C.reason||{},!h)return C;E['setTimeToLoadDelay'](0);var f=b(a);if(f['state']===s)return C;var g=N['getCurrentBufferLevel'](l),k=c['getAverageThroughput'](n,v),M=c['getSafeAverageThroughput'](n,v),P=c['getAverageLatency'](n),T=void 0;if(C['reason']['state']=f.state,C['reason']['throughput']=k,C['reason']['latency']=P,isNaN(k))return C;switch(f.state){case D:T=t['getQualityForBitrate'](e,M,P),C['quality']=T,C['reason']['throughput']=M,f['placeholderBuffer']=Math['max'](0,x(f,T)-g),f['lastQuality']=T,!isNaN(f.lastSegmentDurationS)&&g>=f.lastSegmentDurationS&&(f['state']=m);break;case m:y(f,n),T=d(f,g+f.placeholderBuffer);var u=t['getQualityForBitrate'](e,M,P);T>f.lastQuality&&T>u&&(T=Math['max'](u,f.lastQuality));var A=Math['max'](0,g+f.placeholderBuffer-p(f,T));A<=f.placeholderBuffer?(f.placeholderBuffer-=A,A=0):(A-=f.placeholderBuffer,f['placeholderBuffer']=0,T<t['getTopQualityIndexFor'](n,w)?E['setTimeToLoadDelay'](1e3*A):A=0),C['quality']=T,C['reason']['throughput']=k,C['reason']['latency']=P,C['reason']['bufferLevel']=g,C['reason']['placeholderBuffer']=f.placeholderBuffer,C['reason']['delay']=A,f['lastQuality']=T;break;default:z['debug']("BOLA ABR rule invoked in bad state."),C['quality']=t['getQualityForBitrate'](e,M,P),C['reason']['state']=f.state,C['reason']['throughput']=M,C['reason']['latency']=P,f['state']=D,o(f)}return C}function I(){B={}}function J(){I(),j['off'](v["default"].BUFFER_EMPTY,k,q),j['off'](v["default"].PLAYBACK_SEEKING,M,q),j['off'](v["default"].PERIOD_SWITCH_STARTED,P,q),j['off'](v["default"].MEDIA_FRAGMENT_LOADED,T,q),j['off'](v["default"].METRIC_ADDED,u,q),j['off'](v["default"].QUALITY_CHANGE_REQUESTED,R,q),j['off'](v["default"].FRAGMENT_LOADING_ABANDONED,S,q)}a=a||{};var L=this.context,N=a.dashMetrics,O=a.metricsModel,V=a.mediaPlayerModel,j=w["default"](L)['getInstance'](),q=void 0,z=void 0,B=void 0;return q={'getMaxIndex':U,'reset':J},e(),q}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(80),i=l(o),t=a(156),r=l(t),b=a(19),d=l(b),c=a(214),p=a(18),w=l(p),x=a(24),v=l(x),y=a(17),h=l(y),s=0,D=1,m=2,C=10,f=2,g=.99;E['__visualon_factory_name']="BolaRule",n["default"]=d["default"]['getClassFactory'](E)},{'156':156,'17':17,'18':18,'19':19,'214':214,'24':24,'80':80}],'162':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){E=d["default"](n)['getInstance']()['getLogger'](l)}function e(a){var e=a['getDroppedFramesHistory']();if(e){for(var l=e['getFrameHistory'](),t=0,b=0,d=r["default"].NO_CHANGE,c=1;c<l.length;c++)if(l[c]&&(t=l[c].droppedVideoFrames,b=l[c].totalVideoFrames,b>i&&t/b>o)){d=c-1,E['debug']("index: "+d+" Dropped Frames: "+t+" Total Frames: "+b);break}return r["default"](n)['create'](d,{'droppedFrames':t})}return r["default"](n)['create']()}var n=this.context,l=void 0,E=void 0,o=.15,i=375;return l={'getMaxIndex':e},a(),l}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(156),r=l(t),b=a(17),d=l(b);E['__visualon_factory_name']="DroppedFramesRule",n["default"]=i["default"]['getClassFactory'](E)},{'156':156,'17':17,'19':19}],'163':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){m=x["default"](p)['getInstance']()['getLogger'](D),o(),w['on'](d["default"].PLAYBACK_SEEKING,t,D)}function n(){if(!(v&&v['hasOwnProperty']("getReadOnlyMetricsFor")&&h&&h['hasOwnProperty']("getCurrentBufferLevel")))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function l(a){var e=y["default"](p)['create']();if(!a||!a['hasOwnProperty']("getMediaType"))return e;n();var l=a['getMediaType'](),o=v['getReadOnlyMetricsFor'](l),t=o.BufferState.length>0?o['BufferState'][o.BufferState.length-1]:null,r=a['getRepresentationInfo'](),b=r.fragmentDuration;if(!t||!E(l,t)||!b)return e;if(t['state']===i["default"].BUFFER_EMPTY)m['debug']("Switch to index 0; buffer is empty."),e['quality']=0,e['reason']="InsufficientBufferRule: Buffer is empty";else{var d=a['getMediaInfo'](),w=a['getAbrController'](),x=w['getThroughputHistory'](),s=h['getCurrentBufferLevel'](o),D=x['getAverageThroughput'](l),C=x['getAverageLatency'](l),f=D*(s/b)*c;e['quality']=w['getQualityForBitrate'](d,f,C),e['reason']="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return e}function E(a,e){C[a]=C[a]||{};var n=!1;return C[a].firstBufferLoadedEvent?n=!0:e&&e['state']===i["default"].BUFFER_LOADED&&(C[a]['firstBufferLoadedEvent']=!0,n=!0),n}function o(){C={}}function t(){o()}function b(){o(),w['off'](d["default"].PLAYBACK_SEEKING,t,D)}a=a||{};var c=.5,p=this.context,w=r["default"](p)['getInstance'](),v=a.metricsModel,h=a.dashMetrics,D=void 0,m=void 0,C=void 0;return D={'getMaxIndex':l,'reset':b},e(),D}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(85),i=l(o),t=a(18),r=l(t),b=a(24),d=l(b),c=a(19),p=l(c),w=a(17),x=l(w),v=a(156),y=l(v),h=a(79),s=l(h);E['__visualon_factory_name']="InsufficientBufferRule",n["default"]=p["default"]['getClassFactory'](E)},{'156':156,'17':17,'18':18,'19':19,'24':24,'79':79,'85':85}],'164':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){E=r["default"](n)['getInstance']()['getLogger'](l)}function e(a){for(var e=a?a['getSwitchHistory']():null,l=e?e['getSwitchRequests']():[],t=0,r=0,b=0,c=d["default"](n)['create'](),p=0;p<l.length;p++)if(void 0!==l[p]&&(t+=l[p].drops,r+=l[p].noDrops,b+=l[p].dropSize,t+r>=i&&t/r>o)){c['quality']=p>0&&l[p].drops>0?p-1:p,c['reason']={'index':c.quality,'drops':t,'noDrops':r,'dropSize':b},E['debug']("Switch history rule index: "+c.quality+" samples: "+(t+r)+" drops: "+t);break}return c}var n=this.context,l=void 0,E=void 0,o=.075,i=6;return l={'getMaxIndex':e},a(),l}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(17),r=l(t),b=a(156),d=l(b);E['__visualon_factory_name']="SwitchHistoryRule",n["default"]=i["default"]['getClassFactory'](E)},{'156':156,'17':17,'19':19}],'165':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){d=p["default"](o)['getInstance']()['getLogger'](b)}function n(){if(!t||!t['hasOwnProperty']("getReadOnlyMetricsFor"))throw new Error(y["default"].MISSING_CONFIG_ERROR)}function l(a){var e=x["default"](o)['create']();if(!(a&&a['hasOwnProperty']("getMediaInfo")&&a['hasOwnProperty']("getMediaType")&&a['hasOwnProperty']("useBufferOccupancyABR")&&a['hasOwnProperty']("getAbrController")&&a['hasOwnProperty']("getScheduleController")))return e;n();var l=a['getMediaInfo'](),E=a['getMediaType'](),b=t['getReadOnlyMetricsFor'](E),c=a['getScheduleController'](),p=a['getAbrController'](),w=a['getStreamInfo'](),v=w&&w.manifestInfo?w.manifestInfo.isDynamic:null,y=p['getThroughputHistory'](),h=y['getSafeAverageThroughput'](E,v),s=y['getAverageLatency'](E),D=b.BufferState.length>0?b['BufferState'][b.BufferState.length-1]:null,m=a['useBufferOccupancyABR']();return!b||isNaN(h)||!D||m?e:(p['getAbandonmentStateFor'](E)!==r["default"].ABANDON_LOAD&&(D['state']===i["default"].BUFFER_LOADED||v)&&(e['quality']=p['getQualityForBitrate'](l,h,s),c['setTimeToLoadDelay'](0),d['debug']("requesting switch to index: ",e.quality,"type: ",E,"Average throughput",Math['round'](h),"kbps"),e['reason']={'throughput':h,'latency':s}),e)}function E(){}a=a||{};var o=this.context,t=a.metricsModel,b=void 0,d=void 0;return b={'getMaxIndex':l,'reset':E},
e(),b}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(85),i=l(o),t=a(82),r=l(t),b=a(19),d=l(b),c=a(17),p=l(c),w=a(156),x=l(w),v=a(79),y=l(v);E['__visualon_factory_name']="ThroughputRule",n["default"]=d["default"]['getClassFactory'](E)},{'156':156,'17':17,'19':19,'79':79,'82':82,'85':85}],'166':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){M=x["default"](D)['getInstance']()['getLogger'](k),b(),m['on'](d["default"].PLAYBACK_SEEKING,c,k)}function n(){if(!(C&&C['hasOwnProperty']("getReadOnlyMetricsFor")&&f&&f['hasOwnProperty']("getCurrentBufferLevel")))throw new Error(s["default"].MISSING_CONFIG_ERROR)}function l(a){var e=y["default"](D)['create']();if(!a||!a['hasOwnProperty']("getMediaType"))return e;n();var l=a['getMediaType'](),E=C['getReadOnlyMetricsFor'](l),r=E.BufferState.length>0?E['BufferState'][E.BufferState.length-1]:null,b=a['getRepresentationInfo'](),d=b.fragmentDuration;if(!r||!t(l,r)||!d)return e;if(r['state']===i["default"].BUFFER_EMPTY)M['debug']("[test][ThroughputRuleForLowlatency: getMaxIndex] type: "+l+", Switch to index 0; buffer is empty."),e['quality']=0,e['reason']="ThroughputRuleForLowlatency: Buffer is empty";else{var c=a['getMediaInfo'](),p=a['getAbrController'](),w=p['getThroughputHistory'](),x=f['getCurrentBufferLevel'](E),v=f['getAverageBufferLevel'](E),h=w['getAverageThroughput'](l),s=a['getStreamInfo'](),m=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,g=w['getSafeAverageThroughput'](l,m),k=w['getAverageLatency'](l),T=a['getScheduleController']()['getCurrentLiveLatency'](),u=p['getQualityFor'](l,!0);P[l]['lastQualityInfo']=p['getQualityFor'](l,!0);var A=p['getQualityForBitrate'](c,g,k);e['quality']=o({'bufferLevel':x,'aveBufferLevel':v,'estimateQuality':A,'lastQualityInfo':u,'topQuality':p['getTopQualityIndexFor'](l,s.id),'latency':k/1e3,'throughputHistory':w,'fragmentDuration':d,'curLiveLatency':T,'mediaType':l}),e['reason']="ThroughputRuleForLowlatency: being conservative to avoid immediate rebuffering",M['info']("type: "+l+" [ThroughputRuleForLowlatency: getMaxIndex]type: "+l+", quality: "+e.quality+", throughput: "+h+", latency: "+k+", bufferLevel: "+x+", aveBufferLevel: "+v+", fragmentDuration: "+d+(", lastQuality: "+u.quality+", curLiveLatency: "+T))}return e}function E(a){var e=a.mediaType;P[e]=P[e]||{},P[e]['BAAction']={'action':a.action},P[e]['BAReason']=a.reason}function o(a){var e=parseFloat(a['bufferLevel']['toFixed'](1)),n=parseFloat(a['aveBufferLevel']['toFixed'](2)),l=a.estimateQuality,o=a.lastQualityInfo.quality,i=a.mediaType,t=a['throughputHistory']['getAverageEfficiency'](i,o),r=parseFloat(a['curLiveLatency']['toFixed'](1)),b=g['getLiveDelay'](),d=g['getShiftThresholdForABR'](),c=g['getStableBufferTime'](),p=0,x=function(e){return e===a.topQuality},y=function(a){return E({'mediaType':i,'action':v.KEEP,'reason':a}),o},s=function(e){var n=1e3*(e||30),l=Date['now']();return M['info']("[test]type: "+i+" [ThroughputRuleForLowlatency][checkLastBAStable] keepTime: "+n+", gap: "+(l-a.lastQualityInfo.ts)),Date['now']()-a.lastQualityInfo.ts>=n},D=function(a){return o?(E({'mediaType':i,'action':v.DOWNSHIFT,'reason':a}),o-1):y()},m=function(){return n>=c&&e>Math['min'](n*w,(1+d)*c)},C=function(){var a=void 0;return a=x(o)?y():A(o+1)},f=function(){return n<=a.latency?(M['info']("[test]type: "+i+" [ThroughputRuleForLowlatency][checkPoorSourceBuffer] bufferLevel: "+e+", latency: "+a.latency),e>a.latency?y():(E({'mediaType':i,'action':o>0?v.DOWNSHIFT:v.KEEP,'reason':h.BADLATENCY}),0)):-1},k=function(){return h['BADLATENCY']===P[i].reason},T=function(){var n=void 0;return k()&&(!s(60)||(1-d)*c>e)?y(h.BADLATENCY):(Math['min'](5,Math['max'](b,2.5*a.fragmentDuration,c))<r?e>=(1-d)*c?n=y():(n=0,E({'mediaType':i,'action':o>0?v.DOWNSHIFT:v.KEEP,'reason':h.BADLATENCY})):n=-1,n)},u=function(){if(0>t){if(M['info']("[test]type: "+i+" [ThroughputRuleForLowlatency][checkEfficiency] lastEF: "+t+", hasEnoughData: "+m()),m())return y(h.BADEFFICIENCY);var e=-1;if((-1!==(e=f())||-1!==(e=T()))&&0===e)return e;for(var n=o-1;n>=0;n--){var l=a['throughputHistory']['getAverageEfficiency'](i,n);if(isNaN(l)||!isNaN(l)&&l>0)return E({'mediaType':i,'action':v.DOWNSHIFT,'reason':h.BADEFFICIENCY}),n}return E({'mediaType':i,'action':v.DOWNSHIFT,'reason':h.BADEFFICIENCY}),0}return-1},A=function(e){var n=a['throughputHistory']['getAverageEfficiency'](i,e),l=void 0;return!isNaN(n)&&0>n&&!s(80)||v['DOWNSHIFT']===P[i].BAAction&&!s(60)?l=y(h.BADEFFICIENCY):(l=e,E({'mediaType':i,'action':e>o?v.UPSHIFT:v.DOWNSHIFT})),l};return-1!==(p=u())||-1!==(p=f())||-1!==(p=T())?p:p=n>c?e>=Math['min'](n*w,(1+d)*c)?l>o?A(l):x(o)?y():s(20)?C():y():e>=(1-d)*c?l>o?A(l):y():l>o?C():y():e>n*w?e>=(1+d)*c?l>o?A(l):x(o)?y():s()?C():y():e>=(1-d)*c?l>=o&&s()?C():y():l>=o?y():D():e>=(1-d)*c?y():l>=o?y():D()}function t(a,e){P[a]=P[a]||{};var n=!1;return P[a].firstBufferLoadedEvent?n=!0:e&&e['state']===i["default"].BUFFER_LOADED&&(P[a]['firstBufferLoadedEvent']=!0,n=!0),n}function b(){P={}}function c(){}function p(){b(),m['off'](d["default"].PLAYBACK_SEEKING,c,k)}a=a||{};var w=.95,v={'DOWNSHIFT':"downShift",'UPSHIFT':"upShift",'KEEP':"keep"},h={'BADEFFICIENCY':"badEfficiency",'BADLATENCY':"badlatency"},D=this.context,m=r["default"](D)['getInstance'](),C=a.metricsModel,f=a.dashMetrics,g=a.mediaPlayerModel,k=void 0,M=void 0,P=void 0;return k={'getMaxIndex':l,'reset':p},e(),k}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(85),i=l(o),t=a(18),r=l(t),b=a(24),d=l(b),c=a(19),p=l(c),w=a(17),x=l(w),v=a(156),y=l(v),h=a(79),s=l(h);E['__visualon_factory_name']="ThroughputRuleForLowlatency",n["default"]=p["default"]['getClassFactory'](E)},{'156':156,'17':17,'18':18,'19':19,'24':24,'79':79,'85':85}],'167':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){}function n(a,e){if(!a)return!0;var n=E['getCurrentBufferLevel'](o['getReadOnlyMetricsFor'](a['getType']()));return n<l(a,e)}function l(a,e){var n=NaN;if(!a)return n;var l=a['getType'](),d=a['getRepresentationInfo']();if(l===i["default"].FRAGMENTED_TEXT)n=r&&r['isTextEnabled']()?d.fragmentDuration:0;else if(l===i["default"].AUDIO&&e){var p=E['getCurrentBufferLevel'](o['getReadOnlyMetricsFor'](i["default"].VIDEO));n=isNaN(d.fragmentDuration)?p:Math['max'](p,d.fragmentDuration)}else{if(c&&d.bandwidth>12e6)return n=13;var w=d.mediaInfo.streamInfo;if(b['isPlayingAtTopQuality'](w)){var x=w.manifestInfo.duration>=t['getLongFormContentDurationThreshold']();n=x?t['getBufferTimeAtTopQualityLongForm']():t['getBufferTimeAtTopQuality']()}else n=t['getUseFetch']()?30:t['getStableBufferTime']()}return n}a=a||{};var E=a.dashMetrics,o=a.metricsModel,t=a.mediaPlayerModel,r=a.textController,b=a.abrController,c=d["default"]['isWebOSApp']()||d["default"]['isTizenApp']()||d["default"]['isChromecast'](),p={'execute':n,'getBufferTarget':l};return e(),p}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(19),r=l(t),b=a(303),d=l(b);E['__visualon_factory_name']="BufferLevelRule",n["default"]=r["default"]['getClassFactory'](E)},{'19':19,'303':303,'79':79}],'168':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){d=r["default"](l)['getInstance']()['getLogger'](b)}function n(a,e){if(!a)return null;var n=a['getRepresentationInfo'](),l=n.mediaInfo,r=l.type,b=a['getScheduleController'](),d=b['getSeekTarget'](),c=!isNaN(d)&&isFinite(d),w=(a['getBufferController'](),a['getPlaybackController']()['getNormalizedTime'](),a['getBuffer'](),t['getTrickPlayRate']()<0),x=function(a){return t['isCanPlay']()&&t['getIsDynamic']()&&t['isPaused']()&&n.DVRWindow&&a<n.DVRWindow.start?!1:!0},v=c?d:E['getIndexHandlerTime'](a),y=!1,h=void 0;if(c&&b['setSeekTarget'](NaN),isNaN(v)||0>v||!x(v)||r===i["default"].FRAGMENTED_TEXT&&o&&!o['isTextEnabled']())return null;if(e)v=e.startTime+e.duration/2,h=E['getFragmentRequest'](a,n,v,{'timeThreshold':0,'ignoreIsFinished':!0});else{for(h=v>0?E['getFragmentRequest'](a,n,v,{'keepIdx':!c&&!y,'timeThreshold':.1}):E['getFragmentRequest'](a,n,v,{'keepIdx':!c&&!y});h&&h.action!==p["default"].ACTION_COMPLETE&&a['getFragmentModel']()['isFragmentLoaded'](h);)h=E['getFragmentRequest'](a,n,void 0,void 0,w);if(h){if(t['getTrickPlayRate']()<0){var s=E['findMinDurForSegments'](a,n);isNaN(h.startTime+h.duration)||E['setIndexHandlerTime'](a,h.startTime-s)}else isNaN(h.startTime+h.duration)||E['setIndexHandlerTime'](a,h.startTime+h.duration);h['delayLoadingTime']=(new Date)['getTime']()+b['getTimeToLoadDelay'](),b['setTimeToLoadDelay'](0)}else c&&E['setIndexHandlerTime'](a,d)}return h}a=a||{};var l=this.context,E=a.adapter,o=a.textController,t=x["default"](l)['getInstance'](),b=void 0,d=void 0;return b={'execute':n},e(),b}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(17),r=l(t),b=a(19),d=l(b),c=a(196),p=l(c),w=a(90),x=l(w);E['__visualon_factory_name']="NextFragmentRequestRule",n["default"]=d["default"]['getClassFactory'](E)},{'17':17,'19':19,'196':196,'79':79,'90':90}],'169':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){for(var e="",n=0;n<a.length;++n){var l=a[n];e+=l.uchar}var E=e.length,o=e['replace'](/^\s+/,"").length;return E-o}function e(a){return"left: "+3.125*a.x+"%; top: "+6.66*a.y1+"%; width: "+(100-3.125*a.x)+"%; height: "+6.66*Math['max'](a.y2-1-a.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(a){return"red"===a?"rgb(255, 0, 0)":"green"===a?"rgb(0, 255, 0)":"blue"===a?"rgb(0, 0, 255)":"cyan"===a?"rgb(0, 255, 255)":"magenta"===a?"rgb(255, 0, 255)":"yellow"===a?"rgb(255, 255, 0)":"white"===a?"rgb(255, 255, 255)":"black"===a?"rgb(0, 0, 0)":a}function l(a,e){var l=a.videoHeight/15;return e?"font-size: "+l+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(e.foreground?n(e.foreground):"rgb(255, 255, 255)")+"; font-style: "+(e.italics?"italic":"normal")+"; text-decoration: "+(e.underline?"underline":"none")+"; white-space: pre; background-color: "+(e.background?n(e.background):"transparent")+";":"font-size: "+l+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function E(a){return a['replace'](/^\s+/g,"")}function o(a){return a['replace'](/\s+$/g,"")}function i(n,i,r,b){var d=null,c=null,p=!1,w=-1,x={'start':i,'end':r,'spans':[]},v="style_cea608_white_black",y={},h={},s=[],D=void 0,m=void 0;for(D=0;15>D;++D){var C=b['rows'][D],f="",g=null;if(!1===C['isEmpty']()){var k=a(C.chars);null===d&&(d={'x':k,'y1':D,'y2':D+1,'p':[]}),k!==w&&p&&(d['p']['push'](x),x={'start':i,'end':r,'spans':[]},d['y2']=D,d['name']="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===y['hasOwnProperty'](d.name)?(s['push'](d),y[d.name]=d):(c=y[d.name],c['p']['contat'](d.p)),d={'x':k,'y1':D,'y2':D+1,'p':[]});for(var M=0;M<C.chars.length;++M){var P=C['chars'][M],T=P.penState;if(null===g||!T['equals'](g)){f['trim']().length>0&&(x['spans']['push']({'name':v,'line':f,'row':D}),f="");var u="style_cea608_"+T.foreground+"_"+T.background;T.underline&&(u+="_underline"),T.italics&&(u+="_italics"),h['hasOwnProperty'](u)||(h[u]=JSON['parse'](JSON['stringify'](T))),g=T,v=u}f+=P.uchar}f['trim']().length>0&&x['spans']['push']({'name':v,'line':f,'row':D}),p=!0,w=k}else p=!1,w=-1,d&&(d['p']['push'](x),x={'start':i,'end':r,'spans':[]},d['y2']=D,d['name']="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===y['hasOwnProperty'](d.name)?(s['push'](d),y[d.name]=d):(c=y[d.name],c['p']['contat'](d.p)),d=null)}d&&(d['p']['push'](x),d['y2']=D+1,d['name']="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===y['hasOwnProperty'](d.name)?(s['push'](d),y[d.name]=d):(c=y[d.name],c['p']['contat'](d.p)),d=null);var A=[];for(D=0;D<s.length;++D){var R=s[D],S="sub_cea608_"+t++,U=document['createElement']("div");U['id']=S;var I=e(R);U['style']['cssText']="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+I;var J=document['createElement']("div");J['className']="paragraph bodyStyle",J['style']['cssText']=l(n);var L=document['createElement']("div");L['className']="cueUniWrapper",L['style']['cssText']="unicode-bidi: normal; direction: ltr;";for(var N=0;N<R.p.length;++N){var O=R['p'][N],V=0;for(m=0;m<O.spans.length;++m){var j=O['spans'][m];if(j.line.length>0){if(0!==m&&V!=j.row){var q=document['createElement']("br");q['className']="lineBreak",L['appendChild'](q)}var z=!1;V===j.row&&(z=!0),V=j.row;var B=h[j.name],F=document['createElement']("span");F['className']="spanPadding "+j.name+" customSpanColor",F['style']['cssText']=l(n,B),0!==m&&z?m===O.spans.length-1?F['textContent']=o(j.line):F['textContent']=j.line:O.spans.length>1&&m<O.spans.length-1&&j['row']===O['spans'][m+1].row?F['textContent']=E(j.line):F['textContent']=j['line']['trim'](),L['appendChild'](F)}}}J['appendChild'](L),U['appendChild'](J);var G={'bodyStyle':["%",90]};for(var H in h)h['hasOwnProperty'](H)&&(G[H]=["%",90]);A['push']({'type':"html",'start':i,'end':r,'cueHTMLElement':U,'cueID':S,'cellResolution':[32,15],'isFromCEA608':!0,'fontSize':G,'lineHeight':{},'linePadding':{}})}return A}var t=0,r=void 0;return r={'createHTMLCaptionsFromScreen':i}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="EmbeddedTextHtmlRender",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'170':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){V=!1,j=null,O=!1,R['on'](d["default"].DATA_UPDATE_COMPLETED,k,N),R['on'](d["default"].INIT_FRAGMENT_LOADED,M,N)}function n(){return C}function l(a){b(a),z=x["default"](A)['getInstance']()}function E(a){try{if(q=y["default"](A)['create'](j,a),!V){if(q){var e=q['getBuffer']();e&&e['hasOwnProperty'](i["default"].INITIALIZE)&&e['initialize'](J,L)}V=!0}return q}catch(n){if(a.isText||-1!==a['codec']['indexOf']('codecs="stpp')||-1!==a['codec']['indexOf']('codecs="wvtt'))try{q=S?S['getTextSourceBuffer']():null}catch(n){U['mediaSourceError']("Error creating "+I+" source buffer."),U['error'](new s["default"](m["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,m["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+I+" : "+n.message))}else U['mediaSourceError']("Error creating "+I+" source buffer."),U['error'](new s["default"](m["default"].MEDIASOURCE_TYPE_UNSUPPORTED_CODE,m["default"].MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+I))}}function o(){return I}function t(){return q}function b(a){j=a}function c(){return j}function p(){return L}function w(){return!1}function v(){}function h(){}function D(){return 0}function f(){return O}function g(a){R['off'](d["default"].DATA_UPDATE_COMPLETED,k,N),R['off'](d["default"].INIT_FRAGMENT_LOADED,M,N),!a&&q&&(q['abort'](),q['reset'](),q=null)}function k(a){if(a['sender']['getStreamProcessor']()===L){var e=z['extract'](L['getStreamInfo']().id,I,a['sender']['getCurrentRepresentation']().id);0==e.length&&R['trigger'](d["default"].TIMED_TEXT_REQUESTED,{'index':0,'sender':a.sender})}}function M(a){a['fragmentModel']===L['getFragmentModel']()&&a.chunk.bytes&&(a.chunk.bytes&&q&&(z['save'](a.chunk),q['append'](a.chunk)),R['trigger'](d["default"].STREAM_COMPLETED,{'request':a.request,'fragmentModel':a.fragmentModel}))}function P(a,e){var n=z['extract'](a,I,e);0===n.length&&R['trigger'](d["default"].TIMED_TEXT_REQUESTED,{'index':0,'sender':N})}function T(){return null}function u(a){q&&q.timestampOffset!==a&&!isNaN(a)&&(q['timestampOffset']=a)}a=a||{};var A=this.context,R=r["default"](A)['getInstance'](),S=A.TextController?A['TextController'](A)['getInstance']():null,U=a.errHandler,I=a.type,J=a.mimeType,L=a.streamProcessor,N=void 0,O=void 0,V=void 0,j=void 0,q=void 0,z=void 0;return N={'getBufferControllerType':n,'initialize':l,'createBuffer':E,'getType':o,'getStreamProcessor':p,'setSeekStartTime':h,'getBuffer':t,'getBufferLevel':D,'setMediaSource':b,'getMediaSource':c,'getIsBufferingCompleted':f,'getIsPruningInProgress':w,'dischargePreBuffer':v,'switchInitData':P,'getRangeAt':T,'reset':g,'updateTimestampOffset':u},e(),N}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(18),r=l(t),b=a(24),d=l(b),c=a(19),p=l(c),w=a(184),x=l(w),v=a(75),y=l(v),h=a(194),s=l(h),D=a(21),m=l(D),C="NotFragmentedTextBufferController";E['__visualon_factory_name']=C,n["default"]=p["default"]['getClassFactory'](E)},{'18':18,'184':184,'19':19,'194':194,'21':21,'24':24,'75':75,'79':79}],'171':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){k=a['type']===i["default"].FRAGMENTED_TEXT?d["default"](g)['create']({'type':a.type,'metricsModel':a.metricsModel,'mediaPlayerModel':a.mediaPlayerModel,'manifestModel':a.manifestModel,'errHandler':a.errHandler,'streamController':a.streamController,'mediaController':a.mediaController,'adapter':a.adapter,'textController':a.textController,'abrController':a.abrController,'playbackController':a.playbackController,'streamProcessor':a.streamProcessor}):p["default"](g)['create']({'type':a.type,'mimeType':a.mimeType,'errHandler':a.errHandler,'streamProcessor':a.streamProcessor})}function n(){return k['getBufferControllerType']()}function l(a,e){return k['initialize'](a,e)}function E(a){return k['createBuffer'](a)}function o(){return k['getType']()}function t(){return k['getBuffer']()}function r(a){k['setBuffer'](a)}function b(){return k['getMediaSource']()}function c(a){k['setMediaSource'](a)}function w(){k['getStreamProcessor']()}function x(a){k['setSeekStartTime'](a)}function v(){return k['getBufferLevel']()}function y(a){k['reset'](a)}function h(){return k['getIsBufferingCompleted']()}function s(a,e){k['switchInitData'](a,e)}function D(){return k['getIsPruningInProgress']()}function m(){return k['dischargePreBuffer']()}function C(a){return k['getRangeAt'](a)}function f(a){var e=t();e['timestampOffset']===a||isNaN(a)||(e['timestampOffset']=a)}a=a||{};var g=this.context,k=void 0,M=void 0;return M={'getBufferControllerType':n,'initialize':l,'createBuffer':E,'getType':o,'getStreamProcessor':w,'setSeekStartTime':x,'getBuffer':t,'setBuffer':r,'getBufferLevel':v,'setMediaSource':c,'getMediaSource':b,'getIsBufferingCompleted':h,'getIsPruningInProgress':D,'dischargePreBuffer':m,'switchInitData':s,'getRangeAt':C,'reset':y,'updateTimestampOffset':f},e(),M}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(19),r=l(t),b=a(85),d=l(b),c=a(170),p=l(c);E['__visualon_factory_name']="TextBufferController",n["default"]=r["default"]['getClassFactory'](E)},{'170':170,'19':19,'79':79,'85':85}],'172':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){L="",N=-1,O=!0,j=!1,J=p["default"](k)['getInstance'](),J['on'](x["default"].TEXT_TRACKS_QUEUE_INITIALIZED,r,M),m(),g()}function e(a){a&&(a.errHandler&&(T=a.errHandler),a.dashManifestModel&&(u=a.dashManifestModel),a.manifestModel&&(A=a.manifestModel),a.mediaController&&(R=a.mediaController),a.videoModel&&(S=a.videoModel),a.streamController&&(U=a.streamController),P&&P['setConfig']({'errHandler':T,'dashManifestModel':u,'manifestModel':A,'mediaController':R,'videoModel':S,'streamController':U}))}function n(){return P}function l(){return V}function E(a){P['addEmbeddedTrack'](a)}function o(a){v['checkParameterType'](a,"string"),L=a}function t(){return L}function r(a){var e=this,n=a.tracks,l=a.index;n['some'](function(a,n){return a['lang']===L?(e['setTextTrack'](n),l=n,!0):void 0}),O||this['setTextTrack'](-1),N=l,J['trigger'](x["default"].TEXT_TRACKS_ADDED,{'enabled':y(),'index':l,'tracks':n})}function b(a){v['checkParameterType'](a,"boolean"),O=a,O||this['setTextTrack'](-1)}function c(){return O}function w(a){v['checkParameterType'](a,"boolean"),y()!==a&&(a&&this['setTextTrack'](N),a||(N=this['getCurrentTrackIdx'](),this['setTextTrack'](-1)))}function y(){var a=!0;return V&&!j&&(a=!1),a}function h(a){v['checkParameterType'](a,"boolean"),j=a}function s(a){if(I){var e=P['getConfig'](),n=e.fragmentModel,l=e.fragmentedTracks,E=e.videoModel,o=void 0,t=void 0;V=-1===a?!0:!1;var r=I['getCurrentTrackIdx']();if(r!==a){I['subtitleTrackSwitch']({'id':a});var b=I['getCurrentTextTrack']();if(!b||!b.flag)return;var d=b.flag;if(b&&b.isFragmented&&!b.isEmbedded){var c=d?f(l,d):null;if(c){var p=R['getCurrentTrackFor'](i["default"].FRAGMENTED_TEXT,U['getActiveStreamInfo']());if(c!==p)n['abortRequests'](),n['removeExecutedRequestsBeforeTime'](),P['remove'](),R['setTrack'](c);else{for(var w=U['getActiveStreamProcessors'](),x=0;x<w.length;x++)if(w[x]['getType']()===i["default"].FRAGMENTED_TEXT){t=w[x];break}t['getIndexHandler']()['setCurrentTime'](E['getTime']()),t['getScheduleController']()['start']()}}}else if(b&&!b.isFragmented){for(var v=U['getActiveStreamProcessors'](),y=0;y<v.length;y++)if(v[y]['getType']()===i["default"].TEXT){t=v[y],o=t['getMediaInfoArr']();break}if(t&&o){var h=d?f(o,d):null;h&&t['selectMediaInfo'](h)}}}}}function D(){return I?I['getCurrentTrackIdx']():-1}function m(){V=!1}function C(){m(),P['resetEmbedded'](),P['reset']()}function f(a,e){if(!a||!a.length)return null;for(var n=0;n<a.length;n++){var l=a[n];if(l['bitrateList']['filter'](function(a){return a['id']===e})[0])return l}return null}function g(){if(k.voSubtitlesPlugin){var a=k['voSubtitlesPlugin'](k)['getInstance']();a&&(I=a['getTextTracks'](),P=d["default"](k)['getInstance']())}}var k=this.context,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=void 0,I=void 0,J=void 0,L=void 0,N=void 0,O=void 0,V=void 0,j=void 0;return M={'setConfig':e,'getTextSourceBuffer':n,'getAllTracksAreDisabled':l,'addEmbeddedTrack':E,'getTextDefaultLanguage':t,'setTextDefaultLanguage':o,'setTextDefaultEnabled':b,'getTextDefaultEnabled':c,'enableText':w,'isTextEnabled':y,'setTextTrack':s,'getCurrentTrackIdx':D,'enableForcedTextStreaming':h,'reset':C},a(),M}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(19),r=l(t),b=a(173),d=l(b),c=a(18),p=l(c),w=a(24),x=l(w),v=a(189);E['__visualon_factory_name']="TextController",n["default"]=r["default"]['getSingletonFactory'](E)},{'173':173,'18':18,'189':189,'19':19,'24':24,'79':79}],'173':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){q=y["default"](L)['getInstance']()['getLogger'](j),n(),N['on'](M["default"].BUFFER_CLEARED,E,j),N['on'](M["default"].DATA_UPDATE_COMPLETED,o,j)}function e(){W=null,Y=NaN,ba=null,Z=[],aa=null,X=!1}function n(){e(),K=[]}function l(a,e){O||x(),R(),z||(z=d["default"](L)['getInstance']()),r(a,e)}function E(a){ra&&ra['clearTextSourceBuffer']({'from':a.from,'to':a.to})}function o(a){a.currentRepresentation&&a.currentRepresentation.adaptation&&a.currentRepresentation.adaptation['type']['indexOf']("video")>=0&&(ta=a.currentRepresentation.MSETimeOffset)}function r(a,e){var n=!F['getIsTextTrack'](a);if(e){if(K=K['concat'](e['getMediaInfoArr']()),n){W=e['getFragmentModel'](),j['buffered']=p["default"](L)['create'](),Z=H['getTracksFor'](i["default"].FRAGMENTED_TEXT,_['getActiveStreamInfo']());for(var l=H['getCurrentTrackFor'](i["default"].FRAGMENTED_TEXT,_['getActiveStreamInfo']()),E=0;E<Z.length;E++)if(Z[E]===l){f(E);break}}U()}}function b(){Q&&Q['deleteAllTextTracks'](),z=null,K=[],W=null,X=!1,Z=[]}function c(){n(),_=null,$=null,Q=null}function w(a){var e=a.chunk;e.mediaInfo&&k(e.bytes,e)}function x(){na=[],R(),z=d["default"](L)['getInstance'](),ea=null,la=!1,Ea=0,da=null,oa=null,O=!0,ia=s["default"](L)['getInstance'](),N['on'](M["default"].VIDEO_CHUNK_RECEIVED,w,this)}function v(){N['off'](M["default"].VIDEO_CHUNK_RECEIVED,w,this),Q&&Q['deleteAllTextTracks'](),O=!1,na=[],oa=null}function h(a){if(O||x(),a)if(a['id']===i["default"].CC1||a['id']===i["default"].CC3){for(var e=0;e<na.length;e++)if(na[e]['id']===a.id)return;na['push'](a)}else q['warn']("Embedded track "+a.id+" not supported!")}function D(a){a&&(a.errHandler&&(B=a.errHandler),a.dashManifestModel&&(F=a.dashManifestModel),a.manifestModel&&(G=a.manifestModel),a.mediaController&&(H=a.mediaController),a.videoModel&&($=a.videoModel),a.streamController&&(_=a.streamController))}function C(){var a={'fragmentModel':W,'fragmentedTracks':Z,'videoModel':$};return a}function f(a){ea=a}function k(a,e){if(!ra)return void q['info']("It is not added subtitles plugin!");var n=void 0,l=void 0,E=void 0,o=void 0,r=void 0,b=void 0,d=e.mediaInfo,c=d.type,p=d.mimeType,w=d.codec||p;if(!w)return void q['error']("No text type defined");if(c===i["default"].FRAGMENTED_TEXT)if(X){if(r=z['getSamplesInfo'](a,ba),!r||!r.sampleList)return;if(n=r.sampleList,null===aa&&n.length>0&&(aa=n[0].cts-e.start*Y),w['search'](i["default"].STPP)>=0)for(l=0;l<n.length;l++){var x=n[l],v=x.cts,y=v-aa;this['buffered']['add'](y/Y,(y+x.duration)/Y);var h=new DataView(a,x.offset,x['subSizes'][0]);b=m["default"]['Utils']['dataViewToString'](h,i["default"].UTF8);var s=[],D=x.offset+x['subSizes'][0];for(E=1;E<x.subSizes.length;E++){var C=new Uint8Array(a,D,x['subSizes'][E]),f=String['fromCharCode']['apply'](null,C);s['push'](f),D+=x['subSizes'][E]}try{S({'mediaInfo':d,'ccContent':b,'codecType':w,'start':v/Y,'end':(v+x.duration)/Y,'id':d['bitrateList'][0].id,'images':s,'isSTPP':!0})}catch(g){W['removeExecutedRequestsBeforeTime'](),this['remove'](),q['error']("TTML parser error: "+g.message),B['timedTextError'](g,"parse",b)}}else{var k=[];for(l=0;l<n.length;l++){var M=n[l];M.cts-=aa,this['buffered']['add'](M.cts/Y,(M.cts+M.duration)/Y);var P=a['slice'](M.offset,M.offset+M.size),u=m["default"]['parseBuffer'](P);for(E=0;E<u.boxes.length;E++){var R=u['boxes'][E];if(q['debug']("VTT box1: "+R.type),"vtte"!==R.type&&"vttc"===R.type)for(q['debug']("VTT vttc boxes.length = "+R.boxes.length),o=0;o<R.boxes.length;o++){var U=R['boxes'][o];if(q['debug']("VTT box2: "+U.type),"payl"===U.type){var L=U.cue_text;q['debug']("VTT cue_text = "+L);var N=M.cts/Y,O=(M.cts+M.duration)/Y;if(ra['getTTMLRenderingDiv']()){var j=V['createHTMLCaptionsFromVTT'](ra['getElement'](),{'startTime':N,'endTime':O,'text':L,'styles':{}});j&&k['push'](j)}else k['push']({'start':N,'end':O,'data':L,'styles':{}});q['debug']("VTT "+N+"-"+O+" : "+L)}}}}k.length>0&&S({'mediaInfo':d,'ccContent':k,'codecType':i["default"].VTTBOX})}}else X=!0,Y=z['getMediaTimescaleFromMoov'](a),ba=z['getMediaDefaultInfoFromMoov'](a);else if(c===i["default"].TEXT){var F=new DataView(a,0,a.byteLength);b=m["default"]['Utils']['dataViewToString'](F,i["default"].UTF8);try{S({'mediaInfo':d,'ccContent':b})}catch(g){B['timedTextError'](g,"parse",b),B['error'](new T["default"](A["default"].TIMED_TEXT_ERROR_ID_PARSE_CODE,A["default"].TIMED_TEXT_ERROR_MESSAGE_PARSE+g.message,b))}}else if(c===i["default"].VIDEO){if(!I(w))return void q['warn']("the video(codecType:"+w+") is not support cc!");if(e['segmentType']===t.HTTPRequest.INIT_SEGMENT_TYPE)0===Ea&&ra['createCeaParser'](),Ea=z['getMediaTimescaleFromMoov'](a),da=z['getMediaDefaultInfoFromMoov'](a);else{if(0===Ea)return void q['warn']("CEA-608: No timescale for embeddedTextTrack yet");Ea&&(r=z['getSamplesInfo'](a,da),r&&(oa=r.lastSequenceNumber,J(a,r)))}}}function P(a){return a===K[0]['bitrateList'][0].id}function u(a,e){void 0===a&&a===e&&(a=this['buffered']['start'](0),e=this['buffered']['end'](this.buffered.length-1)),this['buffered']['remove'](a,e)}function R(){L.voSubtitlesPlugin&&(ra||(ra=L['voSubtitlesPlugin'](L)['getInstance']()),ra&&(Q=ra['getTextTracks']()))}function S(a){if(a){var e=void 0;if(a.isSTPP){var n=G['getValue']();e=n.ttmlTimeIsRelative?a.start:0}for(var l=0;l<a.mediaInfo.bitrateList.length;l++){var E={'flag':a['mediaInfo']['bitrateList'][l].id,'data':a.ccContent};a.isSTPP&&(E['subInfo']={'offsetTime':e,'start':a.start,'end':a.end,'timeOffsetForTrack':aa/Y,'images':a.images}),ra['addCaptionsByType'](E,a.codecType)}}}function U(){for(var a=0;a<K.length;a++)for(var e=0;e<K[a].bitrateList.length;e++){var n={'kind':i["default"].TEXT_KIND,'mode':P(K[a]['bitrateList'][e].id)?i["default"].TEXT_SHOWING:i["default"].TEXT_HIDDEN,'label':K[a].label?K[a].label:"",'lang':K[a].lang,'flag':K[a]['bitrateList'][e].id,'isFragmented':!F['getIsTextTrack'](K[a].mimeType)},l=ra['createTextTrack'](n);Q['addCaptions'](l,0,null)}}function I(a){if(!a)return!1;var e=a['toLowerCase']();return e['indexOf']("avc")>=0||e['indexOf']("hevc")>=0||e['indexOf']("hev1")>=0||e['indexOf']("hvc1")>=0?!0:!1}function J(a,e){var n=function(a,e,n){var l=a.length;if(l>0)if(e>=a[l-1][0])a['push']([e,n]);else for(var E=0;l>E;E++){if(e<a[E][0]){a['splice'](E,0,[e,n]);break}if(e===a[E][0]){a['splice'](E+1,0,[e,n]);break}}else a['push']([e,n])},l=[];if(e){for(var E=0;E<e.sampleList.length;E++){var o=e['sampleList'][E],i=o.cts+ta*Ea,t={'pos':o.offset,'sample_size':o.size};n(l,i,t)}for(var r=0;r<l.length;r++){var b=l[r];if("undefined"!==b[0]&&"undefined"!==b[1]){var d=a['slice'](b[1].pos,b[1].pos+b[1].sample_size);ra&&ra['setInputData']({'t':b[0]/Ea,'data':new Uint8Array(d)})}}}}var L=this.context,N=g["default"](L)['getInstance'](),O=!1,V=L.convertHTMLCaptions,j=void 0,q=void 0,z=void 0,B=void 0,F=void 0,G=void 0,H=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ea=void 0,na=void 0,la=void 0,Ea=void 0,oa=void 0,ia=void 0,ta=void 0,ra=void 0,ba=void 0,da=void 0;return j={'initialize':l,'append':k,'abort':b,'addEmbeddedTrack':h,'resetEmbedded':v,'setConfig':D,'getConfig':C,'setCurrentFragmentedTrackIdx':f,'remove':u,'reset':c},a(),j}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(79),i=l(o),t=a(214),r=a(206),b=(l(r),a(177)),d=l(b),c=a(179),p=l(c),w=a(19),x=l(w),v=a(17),y=l(v),h=a(169),s=l(h),D=a(335),m=l(D),C=a(15),f=(l(C),a(18)),g=l(f),k=a(24),M=l(k),P=a(194),T=l(P),u=a(21),A=l(u);E['__visualon_factory_name']="TextSourceBuffer",n["default"]=x["default"]['getSingletonFactory'](E)},{'15':15,'169':169,'17':17,'177':177,'179':179,'18':18,'19':19,'194':194,'206':206,'21':21,'214':214,'24':24,'335':335,'79':79}],'174':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){t(),w=p["default"](b)['create']({'adapter':a.adapter,'baseURLController':a.baseURLController,'stream':a.stream,'timelineConverter':a.timelineConverter,'mediaPlayerModel':a.mediaPlayerModel,'metricsModel':a.metricsModel,'errHandler':a.errHandler,'dashMetrics':a.dashMetrics})}function n(a,e){var n=w['getCurrentTrack'](),E=void 0,o=void 0;if(!n||n.segmentDuration<=0||void 0===a||null===a)return null;isNaN(n.segmentDuration)&&(o=w['getThumbnailRequestForTime'](a),o&&(n['segmentDuration']=o.duration)),E=a%n.segmentDuration;var i=Math['floor'](E*n.tilesHor*n.tilesVert/n.segmentDuration),t=new d["default"];if(t['width']=Math['floor'](n.widthPerTile),t['height']=Math['floor'](n.heightPerTile),t['x']=Math['floor'](i%n.tilesHor)*n.widthPerTile,t['y']=Math['floor'](i/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n['readThumbnail'](a,function(a){t['url']=a,e&&e(t)});if(o)t['url']=o.url,n['segmentDuration']=NaN;else{var r=Math['floor'](a/n.segmentDuration);t['url']=l(n,r)}return e&&e(t),t}function l(a,e){var n=e+a.startNumber,l=v['replaceTokenForTemplate'](a.templateUrl,"Number",n);return l=v['replaceTokenForTemplate'](l,"Time",(n-1)*a.segmentDuration),l=v['replaceTokenForTemplate'](l,"Bandwidth",a.bandwidth),v['unescapeDollarsInTemplate'](l)}function E(a){w['setTrackByIndex'](a)}function o(){return w['getCurrentTrackIndex']()}function i(){var a=w['getTracks'](),e=0;return a['map'](function(a){var n=new x["default"];return n['mediaType']=r["default"].IMAGE,n['qualityIndex']=e++,n['bitrate']=a.bitrate,n['width']=a.width,n['height']=a.height,n})}function t(){w&&w['reset']()}var b=this.context,c=void 0,w=void 0;return c={'get':n,'setTrackByIndex':E,'getCurrentTrackIndex':o,'getBitrateList':i,'reset':t},e(),c}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(79),r=l(t),b=a(207),d=l(b),c=a(175),p=l(c),w=a(193),x=l(w),v=a(48);E['__visualon_factory_name']="ThumbnailController",n["default"]=i["default"]['getClassFactory'](E)},{'175':175,'19':19,'193':193,'207':207,'48':48,'79':79}],'175':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){y(),N=C["default"](s)['create']({}),V=D["default"](s)['getInstance'](),O=h["default"](s)['getInstance'](),O['setConfig']({'baseURLController':f,'dashMetrics':T,'mediaPlayerModel':u,'errHandler':A}),I=g["default"](s)['create']({'timelineConverter':P,'baseURLController':f,'mediaPlayerModel':u,'metricsModel':a.metricsModel,'errHandler':a.errHandler,'dashMetrics':a.dashMetrics}),I['initialize'](null,m?m['getIsDynamic']():!1),l()}function n(a,e){var n=[],l=0,E=void 0,o=void 0,i=void 0,t=void 0;for(E=0,o=a.length;o>E;E++)i=a[E],t=v['getTimeBasedSegment'](P,m['getIsDynamic'](),e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l),t&&(n['push'](t),t=null,l++);return n}function l(){if(M&&m){var a=M['getStreamInfo']();if(a&&(L=m['getMediaInfoForType'](a,i["default"].IMAGE))){var e=m['getVoRepresentations'](L);e&&e.length>0&&e['forEach'](function(a){(a['segmentInfoType']===r["default"].SEGMENT_TEMPLATE&&a.segmentDuration>0&&a.media||a['segmentInfoType']===r["default"].SEGMENT_TIMELINE)&&E(a),a['segmentInfoType']===r["default"].SEGMENT_BASE&&E(a,!0)}),U.length>0&&(U['sort'](function(a,e){return a.bitrate-e.bitrate}),J=U.length-1)}}}function E(a,e){var l=new p["default"];l['id']=a.id,l['bitrate']=a.bandwidth,l['width']=a.width,l['height']=a.height,l['tilesHor']=1,l['tilesVert']=1,a.essentialProperties&&a['essentialProperties']['forEach'](function(a){if(k['indexOf'](a.schemeIdUri)>=0&&a.value){var e=a['value']['split']("x");2!==e.length||isNaN(e[0])||isNaN(e[1])||(l['tilesHor']=parseInt(e[0],10),l['tilesVert']=parseInt(e[1],10))}}),e?O['loadSegments'](a,i["default"].IMAGE,a.indexRange,{},function(a,e){var E=[];a=n(a,e),l['segmentDuration']=a[0].duration,l['readThumbnail']=function(n,l){var o=null;E['some'](function(a){return a.start<=n&&a.end>n?(o=a.url,!0):void 0}),o?l(o):a['some'](function(a){
if(a.mediaStartTime<=n&&a.mediaStartTime+a.duration>n){var o=f['resolve'](e.path),i={'method':"get",'url':o.url,'request':{'range':a.mediaRange,'responseType':"arraybuffer"},'onload':function(e){var n=j['indexOf'](e.target);if(-1!==n){j['splice'](n,1);var o=V['getSamplesInfo'](e.target.response),i=new Blob([e.target['response']['slice'](o['sampleList'][0].offset,o['sampleList'][0].offset+o['sampleList'][0].size)],{'type':"image/jpeg"}),t=window['URL']['createObjectURL'](i);E['push']({'start':a.mediaStartTime,'end':a.mediaStartTime+a.duration,'url':t}),l&&l(t)}}};return N['load'](i),j['push'](i.response),!0}})}}):(l['startNumber']=a.startNumber,l['segmentDuration']=a.segmentDuration,l['timescale']=a.timescale,l['templateUrl']=o(a)),l.tilesHor>0&&l.tilesVert>0&&(l['widthPerTile']=l.width/l.tilesHor,l['heightPerTile']=l.height/l.tilesVert,U['push'](l))}function o(a){var e=R['isRelative'](a.media)?R['resolve'](a.media,f['resolve'](a.path).url):a.media;return e?v['replaceIDForTemplate'](e,a.id):""}function t(){return U}function b(){return J}function d(){return 0>J?null:U[J]}function c(a){U&&0!==U.length&&(a>=U.length&&(a=U.length-1),J=a)}function w(a){for(var e=void 0,n=m['getVoRepresentations'](L),l=0;l<n.length;l++)if(U[J]['id']===n[l].id){e=n[l];break}return I['getSegmentRequestForTime'](e,a)}function y(){U=[],J=-1,L=null,j['forEach'](function(a){return a['abort']()}),j=[]}var s=this.context,m=a.adapter,f=a.baseURLController,M=a.stream,P=a.timelineConverter,T=a.dashMetrics,u=a.mediaPlayerModel,A=a.errHandler,R=x["default"](s)['getInstance'](),S=void 0,U=void 0,I=void 0,J=void 0,L=void 0,N=void 0,O=void 0,V=void 0,j=[];return S={'initialize':e,'getTracks':t,'reset':y,'setTrackByIndex':c,'getCurrentTrack':d,'getCurrentTrackIndex':b,'getThumbnailRequestForTime':w},e(),S}Object['defineProperty'](n,"__esModule",{'value':!0}),n['THUMBNAILS_SCHEME_ID_URIS']=void 0;var o=a(79),i=l(o),t=a(31),r=l(t),b=a(19),d=l(b),c=a(208),p=l(c),w=a(190),x=l(w),v=a(48),y=a(29),h=l(y),s=a(177),D=l(s),m=a(129),C=l(m),f=a(27),g=l(f),k=n['THUMBNAILS_SCHEME_ID_URIS']=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];E['__visualon_factory_name']="ThumbnailTracks",n["default"]=d["default"]['getClassFactory'](E)},{'129':129,'177':177,'19':19,'190':190,'208':208,'27':27,'29':29,'31':31,'48':48,'79':79}],'176':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){v=p["default"](t)['create']({'updateEventName':d["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,'addBlacklistEventName':d["default"].SERVICE_LOCATION_BLACKLIST_ADD}),h=y["default"](t)['create']({'blacklistController':v}),s=x["default"](t)['create']({'blacklistController':v}),D=h}function e(a){a.selector&&(D=a.selector),a.dashManifestModel&&(c=a.dashManifestModel)}function n(){if(!c||!c['hasOwnProperty']("getIsDVB"))throw new Error(f["default"].MISSING_CONFIG_ERROR)}function l(a){n(),D=c['getIsDVB'](a)?s:h}function E(a){if(a){var e=a.baseUrls,n=a.selectedIdx;if(!isNaN(n))return e[n];var l=D['select'](e);return!l&&e.length>1&&(o(),l=D['select'](e)),l?(a['selectedIdx']=e['indexOf'](l),l):(b['trigger'](d["default"].URL_RESOLUTION_FAILED,{'error':new m["default"](i["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,i["default"].URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(D===h&&o()))}}function o(){v['reset']()}var t=this.context,b=r["default"](t)['getInstance'](),c=void 0,w=void 0,v=void 0,h=void 0,s=void 0,D=void 0;return w={'chooseSelectorFromManifest':l,'select':E,'reset':o,'setConfig':e},a(),w}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(21),i=l(o),t=a(18),r=l(t),b=a(24),d=l(b),c=a(84),p=l(c),w=a(192),x=l(w),v=a(191),y=l(v),h=a(19),s=l(h),D=a(194),m=l(D),C=a(79),f=l(C);E['__visualon_factory_name']="BaseURLSelector",n["default"]=s["default"]['getClassFactory'](E)},{'18':18,'19':19,'191':191,'192':192,'194':194,'21':21,'24':24,'79':79,'84':84}],'177':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){v=i["default"](h)['getInstance']()['getLogger'](y)}function e(a){if(!a)return null;void 0===a.fileStart&&(a['fileStart']=0);var e=p["default"]['parseBuffer'](a),n=r["default"](h)['create']();return n['setData'](e),n}function n(a,e,n){if(void 0===n&&(n=0),!e||n+8>=e.byteLength)return new x["default"](0,!1);for(var l=e instanceof ArrayBuffer?new Uint8Array(e):e,E=void 0,i=0;n<l.byteLength;){var r=o(l,n),b=t(l,n+4);if(0===r)break;n+r<=l.byteLength&&(a['indexOf'](b)>=0?E=new x["default"](n,!0,r):i=n+r),n+=r}return E?E:new x["default"](i,!1)}function l(a,n){if(!a||0===a.byteLength)return{'sampleList':[],'lastSequenceNumber':NaN,'totalDuration':NaN,'numSequences':NaN};var l=e(a),E=l['getBoxes']("moof"),o=l['getBoxes']("mfhd"),i=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=void 0,w=void 0,x=void 0,v=void 0,y=void 0,h=void 0,s=void 0,D=void 0,m=void 0,C=void 0,f=0;if(C=l['getBoxes']("moof").length,0===C)return null;m=o[o.length-1].sequence_number,r=0,c=[];var g=-1,k=-1;for(y=0;y<E.length;y++){var M=E[y],P=M['getChildBoxes']("traf"),T=function(){var a=P[x],e=a['getChildBox']("tfhd"),l=a['getChildBox']("tfdt");d=l.baseMediaDecodeTime;var E=a['getChildBoxes']("trun"),o=a['getChildBoxes']("subs"),y=n&&n.length>0?n['filter'](function(a){return a['track_ID']===e.track_ID})[0]:null;for(v=0;v<E.length;v++){var m=E[v];for(r=m.sample_count,D=(e.base_data_offset||0)+(m.data_offset||0),w=0;r>w;w++){p=m['samples'][w],i=void 0!==p.sample_duration?p.sample_duration:void 0!==e.default_sample_duration?e.default_sample_duration:y?y.default_sample_duration:void 0,b=void 0!==p.sample_size?p.sample_size:void 0!==e.default_sample_size?e.default_sample_size:y?y.default_sample_size:void 0,t=void 0!==p.sample_composition_time_offset?p.sample_composition_time_offset:0;var C={'dts':d,'cts':d+t,'duration':i,'offset':M.offset+D,'size':b,'subSizes':[b]};if(o)for(h=0;h<o.length;h++){var T=o[h];if(g<T.entry_count-1&&w>k&&(g++,k+=T['entries'][g].sample_delta),w==k){C['subSizes']=[];var u=T['entries'][g];for(s=0;s<u.subsample_count;s++)C['subSizes']['push'](u['subsamples'][s].subsample_size)}}c['push'](C),D+=b,d+=i}}f+=d-l.baseMediaDecodeTime};for(x=0;x<P.length;x++)T()}return{'sampleList':c,'lastSequenceNumber':m,'totalDuration':f,'numSequences':C}}function E(a){var n=e(a),l=n?n['getBox']("mdhd"):void 0;return l?l.timescale:NaN}function o(a,e){return a[e+3]>>>0|a[e+2]<<8>>>0|a[e+1]<<16>>>0|a[e]<<24>>>0}function t(a,e){return String['fromCharCode'](a[e++])+String['fromCharCode'](a[e++])+String['fromCharCode'](a[e++])+String['fromCharCode'](a[e])}function b(a){var n=null,l=void 0,E=void 0,o=e(a);if(!o)return n;var i=o['getBox']("ftyp"),t=o['getBox']("moov");return v['debug']("Searching for initialization."),t&&t.isComplete&&(l=i?i.offset:t.offset,E=t.offset+t.size-1,n=l+"-"+E,v['debug']("Found the initialization.  Range: "+n)),n}function d(a){var n=e(a);if(!n)return null;var l=n['getBoxes']("trex"),E=[];return l['forEach'](function(a){return E['push']({'default_sample_description_index':a.default_sample_description_index,'default_sample_duration':a.default_sample_duration,'default_sample_size':a.default_sample_size,'track_ID':a.track_ID})}),E}function c(a){var n=e(a),l=n['getBox']("stsd");if(!l||!l.entries||!l.entries.length)return null;for(var E=0;E<l.entries.length;E++){var o=l['entries'][E];if(("avc1"===o.type||"encv"===o.type)&&o.width&&o.height)return{'width':o.width,'height':o.height}}return null}function w(a){var n=e(a);if(n){var l=n['getBox']("pssh");return l?l.protectionInitData:null}return null}var v=void 0,y=void 0,h=this.context;return y={'parse':e,'findLastTopIsoBoxCompleted':n,'getMediaTimescaleFromMoov':E,'getSamplesInfo':l,'findInitRange':b,'getResolutionFromMoov':c,'getMediaDefaultInfoFromMoov':d,'getProtectionInitData':w},a(),y}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(17),i=l(o),t=a(185),r=l(t),b=a(19),d=l(b),c=a(335),p=l(c),w=a(199),x=l(w);E['__visualon_factory_name']="BoxParser",n["default"]=d["default"]['getSingletonFactory'](E)},{'17':17,'185':185,'19':19,'199':199,'335':335}],'178':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){i=!1}function e(){var a="WebKitMediaSource"in window,e="MediaSource"in window;return a||e}function n(){return i}function l(a){i=a}function E(a){return"MediaSource"in window&&MediaSource['isTypeSupported'](a)?!0:"WebKitMediaSource"in window&&WebKitMediaSource['isTypeSupported'](a)?!0:!1}var o=void 0,i=void 0;return o={'supportsMediaSource':e,'supportsEncryptedMedia':n,'supportsCodec':E,'setEncryptedMediaSupported':l},a(),o}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="Capabilities",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'179':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){var n=0;for(n=0;n<this.customTimeRangeArray.length&&a>this['customTimeRangeArray'][n].start;n++);for(this['customTimeRangeArray']['splice'](n,0,{'start':a,'end':e}),n=0;n<this.customTimeRangeArray.length-1;n++)this['mergeRanges'](n,n+1)&&n--;this['length']=this.customTimeRangeArray.length}function e(){this['customTimeRangeArray']=[],this['length']=0}function n(a,e){for(var n=0;n<this.customTimeRangeArray.length;n++)if(a<=this['customTimeRangeArray'][n].start&&e>=this['customTimeRangeArray'][n].end)this['customTimeRangeArray']['splice'](n,1),n--;else{if(a>this['customTimeRangeArray'][n].start&&e<this['customTimeRangeArray'][n].end){this['customTimeRangeArray']['splice'](n+1,0,{'start':e,'end':this['customTimeRangeArray'][n].end}),this['customTimeRangeArray'][n]['end']=a;break}a>this['customTimeRangeArray'][n].start&&a<this['customTimeRangeArray'][n].end?this['customTimeRangeArray'][n]['end']=a:e>this['customTimeRangeArray'][n].start&&e<this['customTimeRangeArray'][n].end&&(this['customTimeRangeArray'][n]['start']=e)}this['length']=this.customTimeRangeArray.length}function l(a,e){var n=this['customTimeRangeArray'][a],l=this['customTimeRangeArray'][e];return n.start<=l.start&&l.start<=n.end&&n.end<=l.end?(n['end']=l.end,this['customTimeRangeArray']['splice'](e,1),!0):l.start<=n.start&&n.start<=l.end&&l.end<=n.end?(n['start']=l.start,this['customTimeRangeArray']['splice'](e,1),!0):l.start<=n.start&&n.start<=l.end&&n.end<=l.end?(this['customTimeRangeArray']['splice'](a,1),!0):n.start<=l.start&&l.start<=n.end&&l.end<=n.end?(this['customTimeRangeArray']['splice'](e,1),!0):!1}function E(a){return t['checkInteger'](a),a>=this.customTimeRangeArray.length||0>a?NaN:this['customTimeRangeArray'][a].start}function o(a){return t['checkInteger'](a),a>=this.customTimeRangeArray.length||0>a?NaN:this['customTimeRangeArray'][a].end}var i=[],r=0;return{'customTimeRangeArray':i,'length':r,'add':a,'clear':e,'remove':n,'mergeRanges':l,'start':E,'end':o}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(189);E['__visualon_factory_name']="CustomTimeRanges",n["default"]=i["default"]['getClassFactory'](E)},{'189':189,'19':19}],'180':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){g=r["default"](m)['getInstance']()['getLogger'](f),l()}function n(a){if(void 0!==k)return k;k=!1;var e="1",n="1",l=void 0;try{"undefined"!=typeof window&&(l=window[a])}catch(E){return g['warn']("DOMStorage access denied: "+E.message),k}if(!l||a!==x&&a!==v)return k;try{l['setItem'](e,n),l['removeItem'](e),k=!0}catch(E){g['warn']("DOMStorage is supported, but cannot be used: "+E.message)}return k}function l(){n(x)&&c['forEach'](function(a){var e=localStorage['getItem'](a.oldKey);if(e){localStorage['removeItem'](a.oldKey);try{localStorage['setItem'](a.newKey,e)}catch(n){g['error'](n.message)}}})}function E(){var a=6e5;return Math['round']((new Date)['getTime']()/a)*a}function o(a,e){return n(a)&&C["get"+e+"CachingInfo"]().enabled}function i(){if(!C||!C['hasOwnProperty']("getLastMediaSettingsCachingInfo"))throw new Error(d["default"].MISSING_CONFIG_ERROR)}function t(a){if(i(),!o(x,h))return null;var e=null,n=w['replace'](/\?/,a);try{var l=JSON['parse'](localStorage['getItem'](n))||{},E=(new Date)['getTime']()-parseInt(l.timestamp,10)>=C['getLastMediaSettingsCachingInfo']().ttl||!1;e=l.settings,E&&(localStorage['removeItem'](n),e=null)}catch(t){return null}return e}function b(a){var e=NaN;if(i(),o(x,y)){var n=p['replace'](/\?/,a);try{var l=JSON['parse'](localStorage['getItem'](n))||{},E=(new Date)['getTime']()-parseInt(l.timestamp,10)>=C['getLastMediaSettingsCachingInfo']().ttl||!1,t=parseFloat(l.bitrate);isNaN(t)||E?E&&localStorage['removeItem'](n):(e=t,g['debug']("Last saved bitrate for "+a+" was "+t))}catch(r){return null}}return e}function s(a,e){if(o(x,h)){var n=w['replace'](/\?/,a);try{localStorage['setItem'](n,JSON['stringify']({'settings':e,'timestamp':E()}))}catch(l){g['error'](l.message)}}}function D(a,e){if(o(x,y)&&e){var n=p['replace'](/\?/,a);try{localStorage['setItem'](n,JSON['stringify']({'bitrate':e['toFixed'](3),'timestamp':E()}))}catch(l){g['error'](l.message)}}}a=a||{};var m=this.context,C=a.mediaPlayerModel,f=void 0,g=void 0,k=void 0;return f={'getSavedBitrateSettings':b,'setSavedBitrateSettings':D,'getSavedMediaSettings':t,'setSavedMediaSettings':s},e(),f}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(17),r=l(t),b=a(79),d=l(b),c=[{'oldKey':"dashjs_vbitrate",'newKey':"dashjs_video_bitrate"},{'oldKey':"dashjs_abitrate",'newKey':"dashjs_audio_bitrate"},{'oldKey':"dashjs_vsettings",'newKey':"dashjs_video_settings"},{'oldKey':"dashjs_asettings",'newKey':"dashjs_audio_settings"}],p="dashjs_?_bitrate",w="dashjs_?_settings",x="localStorage",v="sessionStorage",y="LastBitrate",h="LastMediaSettings";E['__visualon_factory_name']="DOMStorage";var s=i["default"]['getSingletonFactory'](E);n["default"]=s},{'17':17,'19':19,'79':79}],'181':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){try{new window['URL']("x","http://y");c=y}catch(a){}finally{c=c||h}}function e(a){var e=a['indexOf']("/"),n=a['lastIndexOf']("/");return-1!==e?n===e+1?a:(-1!==a['indexOf']("?")&&(a=a['substring'](0,a['indexOf']("?"))),a['substring'](0,n+1)):""}function n(a){var e=a['match'](v);return e?e[1]:""}function l(a){var e=/^(?:\w+\:\/\/)?([^\/]+)(.*)$/['exec'](a);return e[2]['substring'](1)}function E(a){var e=a['match'](p);return e?e[0]:""}function o(a){return!p['test'](a)}function i(a){return o(a)&&"/"===a['charAt'](0)}function t(a){return 0===a['indexOf']("//")}function r(a){return w['test'](a)}function b(a){return x['test'](a)}function d(a,e){return c(a,e)}var c=void 0,p=/^[a-z][a-z0-9+\-_.]*:/i,w=/^https?:\/\//i,x=/^https:\/\//i,v=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,y=function(a,e){try{return new window['URL'](a,e)['toString']()}catch(n){return a}},h=function(a,l){var r=e;if(!l)return a;if(!o(a))return a;i(a)&&(r=n),t(a)&&(r=E);var b=r(l),d="/"!==b['charAt'](b.length-1)&&"/"!==a['charAt'](0)?"/":"";return[b,a]['join'](d)};a();var s={'parseBaseUrl':e,'parseOrigin':n,'parseScheme':E,'isRelative':o,'isPathAbsolute':i,'isSchemeRelative':t,'isHTTPURL':r,'isHTTPS':b,'removeHostname':l,'resolve':d};return s}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__dashjs_factory_name']="DefaultURLUtils",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'182':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){return w}function n(a){w=a}function l(a,e){var n=!0,l=0,E=void 0,o=void 0;if(void 0===e&&(e=!1),a.tag>16777215?(p['getUint32'](w)!==a.tag&&(n=!1),l=4):a.tag>65535?(E=p['getUint16'](w),o=p['getUint8'](w+2),256*E+o!==a.tag&&(n=!1),l=3):a.tag>255?(p['getUint16'](w)!==a.tag&&(n=!1),l=2):(p['getUint8'](w)!==a.tag&&(n=!1),l=1),!n&&a.required&&!e)throw new Error("required tag not found");return n&&(w+=l),n}function E(a,e){var n=l(a,e);return n&&t(),n}function o(a){var e=void 0;return l(a),e=t(),c[a.parse](e)}function i(a,e){var n=l(a,e),E=void 0;return n&&(E=t(),w+=E),n}function t(a){var e=1,n=128,l=8,E=-1,o=0,i=p['getUint8'](w),t=0;for(t=0;l>t;t+=1){if((i&n)===n){o=void 0===a?i&~n:i,E=t;break}n>>=1}for(t=0;E>t;t+=1,e+=1)o=o<<8|255&p['getUint8'](w+e);return w+=e,o}function r(a){var e=void 0;switch(a){case 4:e=p['getFloat32'](w),w+=4;break;case 8:e=p['getFloat64'](w),w+=8}return e}function b(a){for(var e=0,n=0;a>n;n+=1)e<<=8,e|=255&p['getUint8'](w+n);return w+=a,e}function d(){return w<p.byteLength}a=a||{};var c=void 0,p=new DataView(a.data),w=0;return c={'getPos':e,'setPos':n,'consumeTag':l,'consumeTagAndSize':E,'parseTag':o,'skipOverElement':i,'getMatroskaCodedNum':t,'getMatroskaFloat':r,'getMatroskaUint':b,'moreData':d}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="EBMLParser",n["default"]=i["default"]['getClassFactory'](E)},{'19':19}],'183':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){p['trigger'](r["default"].ERROR,{'error':"capability",'event':a,'fatal':e})}function e(a,e,n,l,E){p['trigger'](r["default"].ERROR,{'error':"download",'event':{'id':a,'url':e,'request':n,'response':l},'fatal':E})}function n(a,e,n,l,E){p['trigger'](r["default"].ERROR,{'error':"manifestError",'event':{'message':a,'id':e,'manifest':n,'event':l},'fatal':E})}function l(a,e,n){p['trigger'](r["default"].ERROR,{'error':"cc",'event':{'message':a,'id':e,'cc':n}})}function E(a){p['trigger'](r["default"].ERROR,{'error':"mediasource",'event':a})}function o(a,e){p['trigger'](r["default"].ERROR,{'error':"key_session",'event':{'id':a,'message':e}})}function t(a){p['trigger'](r["default"].ERROR,{'error':"key_message",'event':a})}function b(a){}var d=void 0,c=this.context,p=i["default"](c)['getInstance']();return d={'capabilityError':a,'downloadError':e,'manifestError':n,'timedTextError':l,'mediaSourceError':E,'mediaKeySessionError':o,'mediaKeyMessageError':t,'error':b}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(18),i=l(o),t=a(24),r=l(t),b=a(19),d=l(b);E['__visualon_factory_name']="ErrorHandler",n["default"]=d["default"]['getSingletonFactory'](E)},{'18':18,'19':19,'24':24}],'184':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){var e=a.streamId,n=a.mediaInfo.type,E=a.representationId;l[e]=l[e]||{},l[e][n]=l[e][n]||{},l[e][n][E]=l[e][n][E]||[],l[e][n][E]['push'](a)}function e(a,e,n){return l&&l[a]&&l[a][e]&&l[a][e][n]?l[a][e][n]:[]}function n(){l={}}var l={},E={'save':a,'extract':e,'reset':n};return E}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="InitCache",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'185':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){return a&&t&&t.boxes&&0!==t.boxes.length&&"function"==typeof t.fetch?E(t['fetch'](a)):null}function e(a){var e=[];if(!a||!t||"function"!=typeof t.fetchAll)return e;for(var n=t['fetchAll'](a),l=void 0,o=0,i=n.length;i>o;o++)l=E(n[o]),l&&e['push'](l);return e}function n(a){t=a}function l(){if(!t||!t.boxes||!t.boxes.length)return null;var a=t['boxes'][t.boxes.length-1].type,n=e(a);return n.length>0?n[n.length-1]:null}function E(a){if(!a)return null;var e=new i["default"](a);return a['hasOwnProperty']("_incomplete")&&(e['isComplete']=!a._incomplete),e}var o=void 0,t=void 0;return o={'getBox':a,'getBoxes':e,'setData':n,'getLastBox':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(198),i=l(o),t=a(19),r=l(t);E['__visualon_factory_name']="IsoFile",n["default"]=r["default"]['getClassFactory'](E)},{'19':19,'198':198}],'186':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(){if(!(i&&i['hasOwnProperty']("getExpectedLiveEdge")&&t&&t['hasOwnProperty']("getRepresentationInfo")))throw new Error(r["default"].MISSING_CONFIG_ERROR)}function n(){e();var a=t['getRepresentationInfo'](),n=a.DVRWindow.end;if(a.useCalculatedLiveEdgeTime){var l=i['getExpectedLiveEdge']();if(b!==l){n=l?l:n;var E=n?n-a.DVRWindow.end:0;i['setLiveEdgeTimeOffset'](E),b=l}}return n}function l(){e();var a=t['getRepresentationInfo']();return a&&a.DVRWindow?a.DVRWindow.start:null}function E(){i=null,t=null}a=a||{};var o=void 0,i=a.timelineConverter,t=a.streamProcessor,b=null;return o={'getLiveEdge':n,'getLiVeEdgeStart':l,'reset':E}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(79),r=l(t);E['__visualon_factory_name']="LiveEdgeFinder",n["default"]=i["default"]['getClassFactory'](E)},{'19':19,'79':79}],'187':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a,e){return r["default"](a,e)}var e=void 0;return e={'areEqual':a}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(338),r=l(t);E['__visualon_factory_name']="ObjectUtils",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19,'338':338}],'188':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){return a}function e(a){return a}var n=void 0;return n={'modifyRequestURL':a,'modifyRequestHeader':e}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="RequestModifier",n["default"]=i["default"]['getSingletonFactory'](E)},{'19':19}],'189':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(("undefined"==typeof a?"undefined":r(a))!==e)throw d["default"].BAD_ARGUMENT_ERROR}function o(a){var e=null!==a&&!isNaN(a)&&a%1===0;if(!e)throw d["default"].BAD_ARGUMENT_ERROR+" : argument is not an integer"}function i(a,e,n){if(e>a||a>n)throw d["default"].BAD_ARGUMENT_ERROR+" : argument out of range"}function t(a){if("string"!=typeof a||a!==d["default"].AUDIO&&a!==d["default"].VIDEO)throw d["default"].BAD_ARGUMENT_ERROR}Object['defineProperty'](n,"__esModule",{'value':!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a};n['checkParameterType']=E,n['checkInteger']=o,n['checkRange']=i,n['checkIsVideoOrAudioType']=t;var b=a(79),d=l(b)},{'79':79}],'190':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){var e=void 0;for(e=0;e<h.length;e++){var n=h[e].regex;if(n['test'](a))return h[e].utils}return y}function e(){y=r["default"](s)['getInstance']()}function n(a,e){h['push']({'regex':a,'utils':e})}function l(e,n,l){var E=a(l||n);return E&&"function"==typeof E[e]?E[e](n,l):y[e](n,l)}function E(a){return l("parseBaseUrl",a)}function o(a){return l("parseOrigin",a)}function i(a){return l("removeHostname",a)}function t(a){return l("parseScheme",a)}function b(a){return l("isRelative",a)}function d(a){return l("isPathAbsolute",a)}function c(a){return l("isSchemeRelative",a)}function p(a){return l("isHTTPURL",a)}function w(a){return l("isHTTPS",a)}function x(a,e){return l("resolve",a,e)}var v=void 0,y=void 0,h=[],s=this.context;return e(),v={'registerUrlRegex':n,'parseBaseUrl':E,'parseOrigin':o,'parseScheme':t,'isRelative':b,'isPathAbsolute':d,'isSchemeRelative':c,'isHTTPURL':p,'isHTTPS':w,'removeHostname':i,'resolve':x}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o),t=a(181),r=l(t);E['__visualon_factory_name']="URLUtils";var b=i["default"]['getSingletonFactory'](E);n["default"]=b},{'181':181,'19':19}],'191':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){var e=0,n=void 0;return a&&a['some'](function(a,n){return e=n,!l['contains'](a.serviceLocation)})&&(n=a[e]),n}a=a||{};var n=void 0,l=a.blacklistController;return n={'select':e}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="BasicSelector",n["default"]=i["default"]['getClassFactory'](E)},{'19':19}],'192':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){var e=[],n=function(a){return e.length&&a.dvb_priority&&-1!==e['indexOf'](a.dvb_priority)?!1:!0},l=function(a){return o['contains'](a.serviceLocation)?(a.dvb_priority&&e['push'](a.dvb_priority),!1):!0};return a['filter'](l)['filter'](n)}function n(a){var e=function(a,e){var n=a.dvb_priority-e.dvb_priority;return isNaN(n)?0:n},n=function(a,e,n){return!e||n[0].dvb_priority&&a.dvb_priority&&n[0]['dvb_priority']===a.dvb_priority},l=0,E=[],o=0,i=void 0,t=void 0;return t=a['sort'](e)['filter'](n),t.length?(t.length>1&&(t['forEach'](function(a){l+=a.dvb_weight,E['push'](l)}),i=Math['floor'](Math['random']()*(l-1)),E['every'](function(a,e){return o=e,a>i?!1:!0})),t[o]):void 0}function l(a){return a&&n(e(a))}a=a||{};var E=void 0,o=a.blacklistController;return E={'select':l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(19),i=l(o);E['__visualon_factory_name']="DVBSelector",n["default"]=i["default"]['getClassFactory'](E)},{'19':19}],'193':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['mediaType']=null,this['bitrate']=null,this['width']=null,this['height']=null,this['scanType']=null,this['qualityIndex']=NaN};n["default"]=E},{}],'194':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e,n){l(this,o),this['code']=a||null,this['message']=e||null,this['data']=n||null};n["default"]=E},{}],'195':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['streamId']=null,this['mediaInfo']=null,this['segmentType']=null,this['quality']=NaN,this['index']=NaN,this['bytes']=null,this['start']=NaN,this['end']=NaN,this['duration']=NaN,this['representationId']=null,this['endFragment']=null};n["default"]=E},{}],'196':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['action']=o.ACTION_DOWNLOAD,this['startTime']=NaN,this['mediaType']=null,this['mediaInfo']=null,this['type']=null,this['duration']=NaN,this['timescale']=NaN,this['range']=null,this['url']=null,this['serviceLocation']=null,this['requestStartDate']=null,this['firstByteDate']=null,this['requestEndDate']=null,this['quality']=NaN,this['index']=NaN,this['availabilityStartTime']=null,this['availabilityEndTime']=null,this['wallStartTime']=null,this['bytesLoaded']=NaN,this['bytesTotal']=NaN,this['delayLoadingTime']=NaN,this['responseType']="arraybuffer",this['representationId']=null};E['ACTION_DOWNLOAD']="download",E['ACTION_COMPLETE']="complete",n["default"]=E},{}],'197':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(196),r=l(t),b=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return n['url']=a||null,n['checkForExistenceOnly']=!0,n}return i(e,a),e}(r["default"]);n["default"]=b},{'196':196}],'198':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e){if(l(this,a),this['offset']=e._offset,this['type']=e.type,this['size']=e.size,this['boxes']=[],e.boxes)for(var n=0;n<e.boxes.length;n++)this['boxes']['push'](new a(e['boxes'][n]));switch(this['isComplete']=!0,e.type){case"sidx":if(this['timescale']=e.timescale,this['earliest_presentation_time']=e.earliest_presentation_time,this['first_offset']=e.first_offset,this['references']=e.references,e.references){this['references']=[];for(var E=0;E<e.references.length;E++){var o={'reference_type':e['references'][E].reference_type,'referenced_size':e['references'][E].referenced_size,'subsegment_duration':e['references'][E].subsegment_duration};this['references']['push'](o)}}break;case"emsg":this['id']=e.id,this['value']=e.value,this['timescale']=e.timescale,this['scheme_id_uri']=e.scheme_id_uri,this['presentation_time_delta']=1===e.version?e.presentation_time:e.presentation_time_delta,this['event_duration']=e.event_duration,this['message_data']=e.message_data;break;case"mdhd":this['timescale']=e.timescale;break;case"mfhd":this['sequence_number']=e.sequence_number;break;case"subs":case"stsd":this['entry_count']=e.entry_count,this['entries']=e.entries;break;case"tfhd":this['base_data_offset']=e.base_data_offset,this['sample_description_index']=e.sample_description_index,this['default_sample_duration']=e.default_sample_duration,this['default_sample_size']=e.default_sample_size,this['default_sample_flags']=e.default_sample_flags,this['flags']=e.flags,this['track_ID']=e.track_ID;break;case"tfdt":this['version']=e.version,this['baseMediaDecodeTime']=e.baseMediaDecodeTime,this['flags']=e.flags;break;case"trun":if(this['sample_count']=e.sample_count,this['first_sample_flags']=e.first_sample_flags,this['data_offset']=e.data_offset,this['flags']=e.flags,this['samples']=e.samples,e.samples){this['samples']=[];for(var i=0,t=e.samples.length;t>i;i++){var r={'sample_size':e['samples'][i].sample_size,'sample_duration':e['samples'][i].sample_duration,'sample_composition_time_offset':e['samples'][i].sample_composition_time_offset};this['samples']['push'](r)}}break;case"trex":this['default_sample_description_index']=e.default_sample_description_index,this['default_sample_duration']=e.default_sample_duration,this['default_sample_size']=e.default_sample_size,this['default_sample_flags']=e.default_sample_flags,this['flags']=e.flags,this['track_ID']=e.track_ID;break;case"pssh":this['protectionInitData']=e._data['buffer']['slice'](this.offset,this.offset+this.size)}}return E(a,[{'key':"getChildBox",'value':function(a){for(var e=0;e<this.boxes.length;e++)if(this['boxes'][e]['type']===a)return this['boxes'][e]}},{'key':"getChildBoxes",'value':function(a){for(var e=[],n=0;n<this.boxes.length;n++)this['boxes'][n]['type']===a&&e['push'](this['boxes'][n]);return e}}]),a}();n["default"]=o},{}],'199':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(a,e,n){l(this,o),this['lastCompletedOffset']=a,this['found']=e,this['size']=n};n["default"]=E},{}],'200':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['DVRWindowSize']=NaN,this['loadedTime']=null,this['availableFrom']=null,this['minBufferTime']=NaN,this['duration']=NaN,this['isDynamic']=!1,this['maxFragmentDuration']=null};n["default"]=E},{}],'201':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['id']=null,this['index']=null,this['type']=null,this['streamInfo']=null,this['representationCount']=0,this['lang']=null,this['viewpoint']=null,this['accessibility']=null,this['audioChannelConfiguration']=null,this['roles']=null,this['codec']=null,this['mimeType']=null,this['contentProtection']=null,this['isText']=!1,this['KID']=null,this['bitrateList']=null};n["default"]=E},{}],'202':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['TcpList']=[],this['HttpList']=[],this['RepSwitchList']=[],this['BufferLevel']=[],this['BufferState']=[],this['PlayList']=[],this['DroppedFrames']=[],this['SchedulingInfo']=[],this['DVRInfo']=[],this['ManifestUpdate']=[],this['RequestsQueue']=null,this['DVBErrors']=[]};n["default"]=E},{}],'203':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['id']=null,this['quality']=null,this['DVRWindow']=null,this['fragmentDuration']=null,this['mediaInfo']=null,this['MSETimeOffset']=null};n["default"]=E},{}],'204':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['id']=null,this['index']=null,this['start']=NaN,
this['duration']=NaN,this['manifestInfo']=null,this['isLast']=!0};n["default"]=E},{}],'205':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=a(79),r=l(t),b=a(196),d=l(b),c=function(a){function e(a,n){E(this,e);var l=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this));return l['url']=a||null,l['type']=n||null,l['mediaType']=r["default"].STREAM,l['responseType']="",l}return i(e,a),e}(d["default"]);n["default"]=c},{'196':196,'79':79}],'206':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['captionData']=null,this['label']=null,this['lang']=null,this['defaultTrack']=!1,this['kind']=null,this['isFragmented']=!1,this['isEmbedded']=!1};n["default"]=E},{}],'207':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['url']=null,this['width']=null,this['height']=null,this['x']=null,this['y']=null};n["default"]=E},{}],'208':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['bitrate']=0,this['width']=0,this['height']=0,this['tilesHor']=0,this['tilesVert']=0,this['widthPerTile']=0,this['heightPerTile']=0,this['startNumber']=0,this['segmentDuration']=0,this['timescale']=0,this['templateUrl']="",this['id']=""};n["default"]=E},{}],'209':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['t']=null,this['xywh']=null,this['track']=null,this['id']=null,this['s']=null,this['r']=null};n["default"]=E},{}],'210':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['t']=null,this['level']=null};n["default"]=E},{}],'211':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(85),i=l(o),t=function r(){E(this,r),this['target']=null,this['state']=i["default"].BUFFER_EMPTY};n["default"]=t},{'85':85}],'212':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['time']=null,this['range']=null,this['manifestInfo']=null};n["default"]=E},{}],'213':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['time']=null,this['droppedFrames']=null};n["default"]=E},{}],'214':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function i(){l(this,i),this['tcpid']=null,this['type']=null,this['url']=null,this['actualurl']=null,this['range']=null,this['trequest']=null,this['tresponse']=null,this['responsecode']=null,this['interval']=null,this['trace']=[],this['_stream']=null,this['_tfinish']=null,this['_mediaduration']=null,this['_responseHeaders']=null,this['_serviceLocation']=null},o=function t(){l(this,t),this['s']=null,this['d']=null,this['b']=[]};E['GET']="GET",E['HEAD']="HEAD",E['MPD_TYPE']="MPD",E['XLINK_EXPANSION_TYPE']="XLinkExpansion",E['INIT_SEGMENT_TYPE']="InitializationSegment",E['INDEX_SEGMENT_TYPE']="IndexSegment",E['MEDIA_SEGMENT_TYPE']="MediaSegment",E['BITSTREAM_SWITCHING_SEGMENT_TYPE']="BitstreamSwitchingSegment",E['OTHER_TYPE']="other",n['HTTPRequest']=E,n['HTTPRequestTrace']=o},{}],'215':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function t(){l(this,t),this['mediaType']=null,this['type']=null,this['requestTime']=null,this['fetchTime']=null,this['availabilityStartTime']=null,this['presentationStartTime']=0,this['clientTimeOffset']=0,this['currentTime']=null,this['buffered']=null,this['latency']=0,this['streamInfo']=[],this['representationInfo']=[]},o=function r(){l(this,r),this['id']=null,this['index']=null,this['start']=null,this['duration']=null},i=function b(){l(this,b),this['id']=null,this['index']=null,this['mediaType']=null,this['streamIndex']=null,this['presentationTimeOffset']=null,this['startNumber']=null,this['fragmentInfoType']=null};n['ManifestUpdate']=E,n['ManifestUpdateStreamInfo']=o,n['ManifestUpdateRepresentationInfo']=i},{}],'216':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function i(){l(this,i),this['start']=null,this['mstart']=null,this['starttype']=null,this['trace']=[]};E['INITIAL_PLAYOUT_START_REASON']="initial_playout",E['SEEK_START_REASON']="seek",E['RESUME_FROM_PAUSE_START_REASON']="resume",E['METRICS_COLLECTION_START_REASON']="metrics_collection_start";var o=function t(){l(this,t),this['representationid']=null,this['subreplevel']=null,this['start']=null,this['mstart']=null,this['duration']=null,this['playbackspeed']=null,this['stopreason']=null};o['REPRESENTATION_SWITCH_STOP_REASON']="representation_switch",o['REBUFFERING_REASON']="rebuffering",o['USER_REQUEST_STOP_REASON']="user_request",o['END_OF_PERIOD_STOP_REASON']="end_of_period",o['END_OF_CONTENT_STOP_REASON']="end_of_content",o['METRICS_COLLECTION_STOP_REASON']="metrics_collection_end",o['FAILURE_STOP_REASON']="failure",n['PlayList']=E,n['PlayListTrace']=o},{}],'217':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['t']=null,this['mt']=null,this['to']=null,this['lto']=null};n["default"]=E},{}],'218':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['loadingRequests']=[],this['executedRequests']=[]};n["default"]=E},{}],'219':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['mediaType']=null,this['t']=null,this['type']=null,this['startTime']=null,this['availabilityStartTime']=null,this['duration']=null,this['quality']=null,this['range']=null,this['state']=null};n["default"]=E},{}],'220':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function o(){l(this,o),this['tcpid']=null,this['dest']=null,this['topen']=null,this['tclose']=null,this['tconnect']=null};n["default"]=E},{}],'221':[function(a,e,n){"use strict";function l(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var n in a)Object.prototype['hasOwnProperty']['call'](a,n)&&(e[n]=a[n]);return e["default"]=a,e}function E(a){return a&&a.__esModule?a:{"default":a}}Object['defineProperty'](n,"__esModule",{'value':!0}),n['hlsDefaultConfig']=void 0;var o=a(222),i=E(o),t=a(225),r=E(t),b=a(226),d=E(b),c=a(228),p=E(c),w=a(295),x=E(w),v=a(224),y=E(v),h=a(223),s=E(h),D=a(278),m=l(D),C=a(238),f=E(C),g=a(237),k=E(g),M=a(236),P=E(M),T=a(227),u=E(T),A=a(286),R={'DEFAULT_LOW_LATENCY_LIVE_DELAY':3,'LOW_LATENCY_CATCH_UP_PLAYBACK_RATE':.5,'LOWLATENCY_CATCHUP_THRESHOLD':3},S={'autoPlay':!0,'preload':"auto",'autoStartLoad':!0,'startPosition':-1,'defaultAudioCodec':void 0,'debug':!1,'capLevelOnFPSDrop':!1,'capLevelToPlayerSize':!1,'initialLiveManifestSize':1,'maxBufferLength':30,'maxBufferSize':6e7,'maxBufferHole':.5,'lowBufferWatchdogPeriod':.5,'highBufferWatchdogPeriod':3,'nudgeOffset':.1,'nudgeMaxRetry':3,'maxFragLookUpTolerance':.25,'liveMaxLatencyDuration':void 0,'liveMaxLatencyDurationCount':1/0,'liveSyncDuration':void 0,'liveSyncDurationCount':3,'liveDurationInfinity':!1,'maxMaxBufferLength':600,'enableWorker':!1,'enableSoftwareAES':!0,'manifestLoadingTimeOut':1e4,'manifestLoadingMaxRetry':1,'manifestLoadingRetryDelay':1e3,'manifestLoadingMaxRetryTimeout':64e3,'startLevel':void 0,'levelLoadingTimeOut':1e4,'levelLoadingMaxRetry':4,'levelLoadingRetryDelay':1e3,'levelLoadingMaxRetryTimeout':64e3,'fragLoadingTimeOut':2e4,'fragLoadingMaxRetry':6,'fragLoadingRetryDelay':1e3,'fragLoadingMaxRetryTimeout':64e3,'startFragPrefetch':!1,'fpsDroppedMonitoringPeriod':5e3,'fpsDroppedMonitoringThreshold':.2,'appendErrorMaxRetry':3,'loader':x["default"],'fLoader':void 0,'pLoader':void 0,'xhrSetup':void 0,'licenseXhrSetup':void 0,'abrController':i["default"],'bufferController':r["default"],'capLevelController':d["default"],'fpsController':p["default"],'stretchShortVideoTrack':!1,'maxAudioFramesDrift':1,'forceKeyFrameOnDiscontinuity':!0,'abrEwmaFastLive':3,'abrEwmaSlowLive':9,'abrEwmaFastVoD':3,'abrEwmaSlowVoD':9,'abrEwmaDefaultEstimate':5e5,'abrBandWidthFactor':.95,'abrBandWidthUpFactor':.7,'abrMaxWithRealBitrate':!1,'maxStarvationDelay':4,'maxLoadingDelay':4,'minAutoBitrate':0,'startupBitrate':void 0,'minBitrate':void 0,'maxBitrate':void 0,'emeEnabled':!1,'widevineLicenseUrl':void 0,'requestMediaKeySystemAccessFunc':A.requestMediaKeySystemAccess,'lowLatencyMode':!1,'liveCatchUpPlaybackRate':R.LOW_LATENCY_CATCH_UP_PLAYBACK_RATE,'liveDelay':R.LOWLATENCY_CATCHUP_THRESHOLD,'minPlaybackRateChange':.02,'httpHeaders':null};S['DEFAULT_LOW_LATENCY_LIVE_DELAY']=R.DEFAULT_LOW_LATENCY_LIVE_DELAY,S['LOW_LATENCY_CATCH_UP_PLAYBACK_RATE']=R.LOW_LATENCY_CATCH_UP_PLAYBACK_RATE,S['LOWLATENCY_CATCHUP_THRESHOLD']=R.LOWLATENCY_CATCHUP_THRESHOLD;var U=n['hlsDefaultConfig']=S,I=!0,J=!0,L=!0;I&&(U['subtitleStreamController']=P["default"],U['subtitleTrackController']=k["default"],U['timelineController']=f["default"],U['cueHandler']=m,U['enableCEA708Captions']=!0,U['enableWebVTT']=!0,U['captionsTextTrack1Label']="English",U['captionsTextTrack1LanguageCode']="en",U['captionsTextTrack2Label']="Spanish",U['captionsTextTrack2LanguageCode']="es"),J&&(U['audioStreamController']=s["default"],U['audioTrackController']=y["default"]),L&&(U['emeController']=u["default"])},{'222':222,'223':223,'224':224,'225':225,'226':226,'227':227,'228':228,'236':236,'237':237,'238':238,'278':278,'286':286,'295':295}],'222':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=a(276),w=a(256),x=a(285),v=a(280),y=l(v),h=a(2),s=l(h),D=window,m=D.performance,C=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].FRAG_LOADING,b["default"].FRAG_LOADED,b["default"].FRAG_BUFFERED,b["default"].ERROR));return n['lastLoadedFragLevel']=0,n['_nextAutoLevel']=-1,n['hls']=a,n['timer']=null,n['_bwEstimator']=null,n['onCheck']=n['_abandonRulesCheck']['bind'](n),n}return i(e,a),t(e,[{'key':"destroy",'value':function(){this['clearTimer'](),c["default"].prototype['destroy']['call'](this)}},{'key':"onFragLoading",'value':function(a){var e=a.frag;if("main"===e.type&&(this.timer||(this['fragCurrent']=e,this['timer']=setInterval(this.onCheck,100)),!this._bwEstimator)){var n=this.hls,l=n.config,E=e.level,o=n['levels'][E].details.live,i=void 0,t=void 0;o?(i=l.abrEwmaFastLive,t=l.abrEwmaSlowLive):(i=l.abrEwmaFastVoD,t=l.abrEwmaSlowVoD),this['_bwEstimator']=new y["default"](n,t,i,l.abrEwmaDefaultEstimate)}}},{'key':"_abandonRulesCheck",'value':function(){var a=this.hls,e=a.media,n=this.fragCurrent;if(n){var l=n.loader,E=a.minAutoLevel;if(!l||l.stats&&l.stats.aborted)return x['logger']['warn']("frag loader destroy or aborted, disarm abandonRules"),this['clearTimer'](),void(this['_nextAutoLevel']=-1);var o=l.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var i=m['now']()-o.trequest,t=Math['abs'](e.playbackRate);if(i>500*n.duration/t){var r=a.levels,d=Math['max'](1,o.bw?o.bw/8:1e3*o.loaded/i),c=r[n.level],w=c.realBitrate?Math['max'](c.realBitrate,c.bitrate):c.bitrate,v=o.total?o.total:Math['max'](o.loaded,Math['round'](n.duration*w/8)),y=e.currentTime,h=(v-o.loaded)/d,s=(p['BufferHelper']['bufferInfo'](e,y,a.config.maxBufferHole).end-y)/t;if(s<2*n.duration/t&&h>s){var D=void 0,C=void 0;for(C=n.level-1;C>E;C--){var f=r[C].realBitrate?Math['max'](r[C].realBitrate,r[C].bitrate):r[C].bitrate;if(D=n.duration*f/(6.4*d),s>D)break}h>D&&(x['logger']['warn']("loading too slow, abort fragment loading and switch to level "+C+":fragLoadedDelay["+C+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+D['toFixed'](1)+"<"+h['toFixed'](1)+":"+s['toFixed'](1)),a['nextLoadLevel']=C,this['_bwEstimator']['sample'](i,o.loaded),l['abort'](),a['trigger2'](a.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'droppedBytes':n.loaded}),this['clearTimer'](),a['trigger'](b["default"].FRAG_LOAD_EMERGENCY_ABORTED,{'frag':n,'stats':o}))}}}}}},{'key':"onFragLoaded",'value':function(a){var e=a.frag;if("main"===e.type&&Number['isFinite'](e.sn)){if(this['clearTimer'](),this['lastLoadedFragLevel']=e.level,this['_nextAutoLevel']=-1,this.hls.config.abrMaxWithRealBitrate){var n=this['hls']['levels'][e.level],l=(n.loaded?n.loaded.bytes:0)+a.stats.loaded,E=(n.loaded?n.loaded.duration:0)+a.frag.duration;n['loaded']={'bytes':l,'duration':E},n['realBitrate']=Math['round'](8*l/E)}if(a.frag.bitrateTest){var o=a.stats;o['tparsed']=o['tbuffered']=o.tload,this['onFragBuffered'](a)}}}},{'key':"onFragBuffered",'value':function(a){var e=a.stats,n=a.frag;if(e.aborted!==!0&&"main"===n.type&&Number['isFinite'](n.sn)&&(!n.bitrateTest||e['tload']===e.tbuffered)){var l=e.tparsed-e.trequest;x['logger']['log']("latency/loading/parsing/append/kbps:"+Math['round'](e.tfirst-e.trequest)+"/"+Math['round'](e.tload-e.tfirst)+"/"+Math['round'](e.tparsed-e.tload)+"/"+Math['round'](e.tbuffered-e.tparsed)+"/"+Math['round'](8*e.loaded/(e.tbuffered-e.trequest))),this['_bwEstimator']['sample'](l,e.loaded),e['bwEstimate']=this['_bwEstimator']['getEstimate'](),n.bitrateTest?this['bitrateTestDelay']=l/1e3:this['bitrateTestDelay']=0}}},{'key':"onError",'value':function(a){switch(a.details){case w.ErrorDetails.FRAG_LOAD_ERROR:case w.ErrorDetails.FRAG_LOAD_TIMEOUT:this['clearTimer']()}}},{'key':"clearTimer",'value':function(){clearInterval(this.timer),this['timer']=null}},{'key':"_findBestLevel",'value':function(a,e,n,l,E,o,i,t,r){for(var b=E;b>=l;b--){var d=r[b];if(d&&!(d.selInfo&s["default"].VO_TRACK_SELECTINFO.TRACK_DISABLED)){var c=d.details,p=c?c.totalduration/c.fragments.length:e,w=c?c.live:!1,v=void 0;v=a>=b?i*n:t*n;var y=r[b].realBitrate?Math['max'](r[b].realBitrate,r[b].bitrate):r[b].bitrate,h=y*p/v;if(x['logger']['trace']("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+b+"/"+Math['round'](v)+"/"+y+"/"+p+"/"+o+"/"+h),v>y&&(!h||w&&!this.bitrateTestDelay||o>h))return b}}return-1}},{'key':"nextAutoLevel",'get':function(){var a=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===a||e&&e['canEstimate']()))return a;var n=this._nextABRAutoLevel;return-1!==a&&(n=Math['min'](a,n)),n},'set':function(a){this['_nextAutoLevel']=a}},{'key':"_nextABRAutoLevel",'get':function(){var a=this.hls,e=a.maxAutoLevel,n=a.levels,l=a.config,E=a.minAutoLevel,o=a.media,i=this.lastLoadedFragLevel,t=this.fragCurrent?this.fragCurrent.duration:0,r=o?o.currentTime:0,b=o&&0!==o.playbackRate?Math['abs'](o.playbackRate):1,d=this._bwEstimator?this['_bwEstimator']['getEstimate']():l.abrEwmaDefaultEstimate,c=(p['BufferHelper']['bufferInfo'](o,r,l.maxBufferHole).end-r)/b,w=this['_findBestLevel'](i,t,d,E,e,c,l.abrBandWidthFactor,l.abrBandWidthUpFactor,n);if(w>=0)return w;x['logger']['trace']("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=t?Math['min'](t,l.maxStarvationDelay):l.maxStarvationDelay,y=l.abrBandWidthFactor,h=l.abrBandWidthUpFactor;if(0===c){var s=this.bitrateTestDelay;if(s){var D=t?Math['min'](t,l.maxLoadingDelay):l.maxLoadingDelay;v=D-s,x['logger']['trace']("bitrate test took "+Math['round'](1e3*s)+"ms, set first fragment max fetchDuration to "+Math['round'](1e3*v)+" ms"),y=h=1}}return w=this['_findBestLevel'](i,t,d,E,e,c+v,y,h,n),Math['max'](w,0)}}]),e}(c["default"]);n["default"]=C},{'2':2,'256':256,'257':257,'258':258,'276':276,'280':280,'285':285}],'223':[function(a,e,n){"use strict";function l(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var n in a)Object.prototype['hasOwnProperty']['call'](a,n)&&(e[n]=a[n]);return e["default"]=a,e}function E(a){return a&&a.__esModule?a:{"default":a}}function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function t(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var r=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),b=function J(a,e,n){null===a&&(a=Function.prototype);var l=Object['getOwnPropertyDescriptor'](a,e);if(void 0===l){var E=Object['getPrototypeOf'](a);return null===E?void 0:J(E,e,n)}if("value"in l)return l.value;var o=l.get;return void 0===o?void 0:o['call'](n)},d=a(275),c=E(d),p=a(276),w=a(248),x=E(w),v=a(258),y=E(v),h=a(234),s=l(h),D=a(290),m=E(D),C=a(256),f=a(285),g=a(279),k=a(272),M=E(k),P=a(230),T=a(262),u=E(T),A=a(273),R=window,S=R.performance,U={'STOPPED':"STOPPED",'STARTING':"STARTING",'IDLE':"IDLE",'PAUSED':"PAUSED",'KEY_LOADING':"KEY_LOADING",'FRAG_LOADING':"FRAG_LOADING",'FRAG_LOADING_WAITING_RETRY':"FRAG_LOADING_WAITING_RETRY",'WAITING_TRACK':"WAITING_TRACK",'PARSING':"PARSING",'PARSED':"PARSED",'BUFFER_FLUSHING':"BUFFER_FLUSHING",'ENDED':"ENDED",'ERROR':"ERROR",'WAITING_INIT_PTS':"WAITING_INIT_PTS"},I=function(a){function e(a,n){o(this,e);var l=i(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,y["default"].MEDIA_ATTACHED,y["default"].MEDIA_DETACHING,y["default"].AUDIO_TRACKS_UPDATED,y["default"].AUDIO_TRACK_SWITCHING,y["default"].AUDIO_TRACK_LOADED,y["default"].KEY_LOADED,y["default"].FRAG_LOAD_PROGRESS,y["default"].FRAG_LOADED,y["default"].FRAG_PARSING_INIT_SEGMENT,y["default"].FRAG_PARSING_DATA,y["default"].FRAG_PARSED,y["default"].ERROR,y["default"].BUFFER_RESET,y["default"].BUFFER_CREATED,y["default"].BUFFER_APPENDED,y["default"].BUFFER_FLUSHED,y["default"].INIT_PTS_FOUND));return l['fragmentTracker']=n,l['config']=a.config,l['audioCodecSwap']=!1,l['_state']=U.STOPPED,l['initPTS']=[],l['waitingFragment']=null,l['videoTrackCC']=null,l}return t(e,a),r(e,[{'key':"onHandlerDestroying",'value':function(){this['stopLoad'](),b(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"onHandlerDestroying",this)['call'](this)}},{'key':"onHandlerDestroyed",'value':function(){this['state']=U.STOPPED,this['fragmentTracker']=null,b(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"onHandlerDestroyed",this)['call'](this)}},{'key':"onInitPtsFound",'value':function(a){var e=a.id,n=a.frag.cc,l=a.initPTS;"main"===e&&(this['initPTS'][n]=l,this['videoTrackCC']=n,f['logger']['log']("InitPTS for cc: "+n+" found from video track: "+l),this['state']===U.WAITING_INIT_PTS&&this['tick']())}},{'key':"recoverLoad",'value':function(){this._tickInterval||this['setInterval'](100)}},{'key':"startLoad",'value':function(a){if(this.tracks){var e=this.lastCurrentTime;this['stopLoad'](),this.hls.updateDownloadNormal&&this['setInterval'](100),this['fragLoadError']=0,e>0&&-1===a?(f['logger']['log']("audio:override startPosition with lastCurrentTime @"+e['toFixed'](3)),this['state']=U.IDLE):(this['lastCurrentTime']=this.startPosition?this.startPosition:a,this['state']=U.STARTING),this['nextLoadPosition']=this['startPosition']=this.lastCurrentTime,this['tick']()}else this['startPosition']=a,this['state']=U.STOPPED}},{'key':"stopLoad",'value':function(){var a=this.fragCurrent;a&&(a.loader&&(a['loader']['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'droppedBytes':a.loaded,'downloadTime':a.loader.stats.tabort?a.loader.stats.tabort-a.loader.stats.tfirst:null})),this['fragmentTracker']['removeFragment'](a),this['fragCurrent']=null),this['fragPrevious']=null,this.demuxer&&(this['demuxer']['destroy'](),this['demuxer']=null),this['state']=U.STOPPED}},{'key':"doTick",'value':function(){var a=void 0,e=void 0,n=void 0,l=this.hls,E=l.config;switch(this.state){case U.ERROR:case U.PAUSED:case U.BUFFER_FLUSHING:break;case U.STARTING:this['state']=U.WAITING_TRACK,this['loadedmetadata']=!1;break;case U.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!E.startFragPrefetch))break;if(this.loadedmetadata)a=this.media.currentTime;else if(a=this.nextLoadPosition,void 0===a)break;var i=this.mediaBuffer?this.mediaBuffer:this.media,t=this.videoBuffer?this.videoBuffer:this.media,r=p['BufferHelper']['bufferInfo'](i,a,E.maxBufferHole),b=p['BufferHelper']['bufferInfo'](t,a,E.maxBufferHole),d=r.len,w=r.end,x=this.fragPrevious,v=Math['min'](E.maxBufferLength,E.maxMaxBufferLength),h=Math['max'](v,b.len),s=this.audioSwitch,D=this.trackId;if((h>d||s)&&D<o.length){if(n=o[D].details,"undefined"==typeof n){this['state']=U.WAITING_TRACK;break}if(!s&&!n.live&&x&&x['sn']===n.endSN&&!r.nextStart&&(!this.media.seeking||this.media.duration-w<x.duration/2)){this['hls']['trigger'](y["default"].BUFFER_EOS,{'type':"audio"}),this['state']=U.ENDED;break}var m=n.fragments,C=m.length,k=m[0].start,M=m[C-1].start+m[C-1].duration,T=void 0;if(s)if(n.live&&!n.PTSKnown)f['logger']['log']("switching audiotrack, live stream, unknown PTS,load first fragment"),w=a;else if(w=a,n.PTSKnown&&k>a){if(!(r.end>k||r.nextStart))return;f['logger']['log']("alt audio track ahead of main track, seek to start of alt audio track"),this['media']['currentTime']=k+.05}if(n.initSegment&&!n.initSegment.data)T=n.initSegment;else if(k>=w){if(T=m[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=g['findFragWithCC'](m,this.videoTrackCC)),n.live&&T.loadIdx&&T['loadIdx']===this.fragLoadIdx){var u=r.nextStart?r.nextStart:k;return f['logger']['log']("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(u+.05)),void(this['media']['currentTime']=u+.05)}}else{var A=void 0,R=E.maxFragLookUpTolerance,I=x?m[x.sn-m[0].sn+1]:void 0,J=function(a){var e=Math['min'](R,a.duration);return a.start+a.duration-e<=w?1:a.start-e>w&&a.start?-1:0};M>w?(w>M-R&&(R=0),A=I&&!J(I)?I:c["default"]['search'](m,J)):A=m[C-1],A&&(T=A,k=A.start,x&&T['level']===x.level&&T['sn']===x.sn&&(T.sn<n.endSN?(T=m[T.sn+1-n.startSN],f['logger']['log']("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.encrypted?(f['logger']['log']("Loading key for "+T.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+D),this['state']=U.KEY_LOADING,l['trigger'](y["default"].KEY_LOADING,{'frag':T})):(f['logger']['log']("Loading "+T.sn+", cc: "+T.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+D+", currentTime:"+a+",'bufferEnd':"+w['toFixed'](3)),f['logger']['log']("frag state: "+this['fragmentTracker']['getState'](T)),(s||this['fragmentTracker']['getState'](T)===P.FragmentState.NOT_LOADED)&&(this['fragCurrent']=T,this['startFragRequested']=!0,Number['isFinite'](T.sn)&&(this['nextLoadPosition']=T.start+T.duration),T['loadedBytes']=null,T['isFirstLoading']=void 0,this['isCmafLiveLowLatency'](n)?(T['loaderType']="fetch",T['flagIsFirstParsing']=void 0,this['config']['enableWorker']=!1):T['loaderType']="xhr",this.hls.updateDownloadNormal&&(l['trigger'](y["default"].FRAG_LOADING,{'frag':T}),this['state']=U.FRAG_LOADING))))}break;case U.WAITING_TRACK:e=this['tracks'][this.trackId],e&&e.details&&(this['state']=U.IDLE);break;case U.FRAG_LOADING_WAITING_RETRY:var L=S['now'](),N=this.retryDate;i=this.media;var O=i&&i.seeking;(!N||L>=N||O)&&(f['logger']['log']("audioStreamController: retryDate reached, switch back to IDLE state"),this['state']=U.IDLE);break;case U.WAITING_INIT_PTS:var V=this.videoTrackCC;if(void 0===this['initPTS'][V])break;var j=this.waitingFragment;if(j){var q=j.frag.cc;V!==q?(e=this['tracks'][this.trackId],e.details&&e.details.live&&(f['logger']['warn']("Waiting fragment CC ("+q+") does not match video track CC ("+V+")"),this['waitingFragment']=null,this['state']=U.IDLE)):(this['state']=U.FRAG_LOADING,this['onFragLoaded'](this.waitingFragment),this['waitingFragment']=null)}else this['state']=U.IDLE;break;case U.STOPPED:case U.FRAG_LOADING:case U.PARSING:case U.PARSED:case U.ENDED:}}},{'key':"onMediaAttached",'value':function(a){var e=this['media']=this['mediaBuffer']=a.media;this['onvseeking']=this['onMediaSeeking']['bind'](this),this['onvended']=this['onMediaEnded']['bind'](this),e['addEventListener']("seeking",this.onvseeking),e['addEventListener']("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this['startLoad'](n.startPosition)}},{'key':"onMediaDetaching",'value':function(){var a=this.media;a&&a.ended&&(f['logger']['log']("MSE detaching and video ended, reset startPosition"),this['startPosition']=this['lastCurrentTime']=0),a&&(a['removeEventListener']("seeking",this.onvseeking),a['removeEventListener']("ended",this.onvended),this['onvseeking']=this['onvseeked']=this['onvended']=null),this['media']=this['mediaBuffer']=this['videoBuffer']=null,this['loadedmetadata']=!1,this['stopLoad']()}},{'key':"onMediaSeeking",'value':function(){this['state']===U.ENDED&&(this['state']=U.IDLE),this.media&&(this['lastCurrentTime']=this.media.currentTime),this['tick']()}},{'key':"onMediaEnded",'value':function(){this['startPosition']=this['lastCurrentTime']=0}},{'key':"onAudioTracksUpdated",'value':function(a){f['logger']['log']("audio tracks updated"),this['tracks']=a.audioTracks}},{'key':"onAudioTrackSwitching",'value':function(a){var e=!!a.url;this['trackId']=a.id,this['fragCurrent']=null,this['state']=U.PAUSED,this['waitingFragment']=null,e?this['setInterval'](100):this.demuxer&&(this['demuxer']['destroy'](),this['demuxer']=null),e&&(this['audioSwitch']=!0,this['state']=U.IDLE),this['tick']()}},{'key':"onAudioTrackLoaded",'value':function(a){var e=a.details,n=a.id,l=this['tracks'][n],E=e.totalduration,o=0;if(f['logger']['log']("track "+n+" loaded ["+e.startSN+","+e.endSN+"],'duration':"+E),e.live){var i=l.details;i&&e.fragments.length>0?(s['mergeDetails'](i,e),o=e['fragments'][0].start,e.PTSKnown?f['logger']['log']("live audio playlist sliding:"+o['toFixed'](3)):f['logger']['log']("live audio playlist - outdated PTS, unknown sliding")):(e['PTSKnown']=!1,f['logger']['log']("live audio playlist - first load, unknown sliding"))}else{var t=l.details;t&&t.live?s['mergeDetails'](t,e):e['PTSKnown']=!1}l['details']=e,this['computeStartPosition'](o,e),this['state']===U.WAITING_TRACK&&(this['state']=U.IDLE),this['tick']()}},{'key':"onKeyLoaded",'value':function(){this['state']===U.KEY_LOADING&&(this['state']=U.IDLE,this['tick']())}},{'key':"onFragLoadProgress",'value':function(a){var e=this.fragCurrent,n=a.frag;if((this['state']===U.FRAG_LOADING||"fetch"===n.loaderType)&&e&&"audio"===n.type&&n['level']===e.level&&n['sn']===e.sn&&a.payload){var l=this['tracks'][this.trackId],E=l.details,o=E.totalduration,i=e.level,t=e.sn,r=e.cc,b=this.config.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this['stats']=a.stats;if(e['isLoaded']=!1,void 0===e.isFirstLoading?e['isFirstLoading']=!0:e.isFirstLoading&&(e['isFirstLoading']=!1),"initSegment"===t)this['state']=U.IDLE,d['tparsed']=d['tbuffered']=S['now'](),e['loadedBytes']=A['appendArrayBuffer'](e.loadedBytes,a.payload);else{"xhr"===n.loaderType&&(this['state']=U.PARSING),this['appended']=!1,this.demuxer||(this['demuxer']=new x["default"](this.hls,"audio"));var c=this['initPTS'][r],p=E.initSegment?E.initSegment.data:[];if(E.initSegment||void 0!==c){this['pendingBuffering']=!0,f['logger']['log']("Demuxing "+t+" of ["+E.startSN+" ,"+E.endSN+"],track "+i);var w=!1,v=null;this.waitingFragment?(v=A['appendArrayBuffer'](this.waitingFragment.payload,a.payload),this['waitingFragment']=null):v=a.payload,this['demuxer']['push'](v,p,b,null,e,o,w,c)}else f['logger']['log']("unknown video PTS for continuity counter "+r+", waiting for video PTS before demuxing audio frag "+t+" of ["+E.startSN+" ,"+E.endSN+"],track "+i),this.waitingFragment||(this['waitingFragment']={},this['waitingFragment']['frag']=a.frag,this['waitingFragment']['stats']=a.stats,this['waitingFragment']['payload']=null),this['waitingFragment']['payload']=A['appendArrayBuffer'](this.waitingFragment.payload,a.payload),this['state']=U.WAITING_INIT_PTS}}this['fragLoadError']=0}},{'key':"onFragLoaded",'value':function(a){var e=this.fragCurrent,n=a.frag;if((this['state']===U.FRAG_LOADING||"fetch"===n.loaderType)&&e&&"audio"===n.type&&n['level']===e.level&&n['sn']===e.sn){var l=this['tracks'][this.trackId],E=l.details,o=E.totalduration,i=e.level,t=e.sn,r=e.cc,b=this.config.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this['stats']=a.stats;if(e['isLoaded']=!0,void 0===e.isFirstLoading?e['isFirstLoading']=!0:e.isFirstLoading&&(e['isFirstLoading']=!1),"initSegment"===t)this['state']=U.IDLE,d['tparsed']=d['tbuffered']=S['now'](),a.payload&&(e['loadedBytes']=A['appendArrayBuffer'](e.loadedBytes,a.payload)),E['initSegment']['data']=e.loadedBytes,this['hls']['trigger'](y["default"].FRAG_BUFFERED,{'stats':d,'frag':e,'id':"audio"}),this['tick']();else{"xhr"===n.loaderType&&(this['state']=U.PARSING),this['appended']=!1,this.demuxer||(this['demuxer']=new x["default"](this.hls,"audio"));var c=this['initPTS'][r],p=E.initSegment?E.initSegment.data:[];if(E.initSegment||void 0!==c){this['pendingBuffering']=!0,f['logger']['log']("Demuxing "+t+" of ["+E.startSN+" ,"+E.endSN+"],track "+i);var w=!1,v=null;this.waitingFragment?(v=A['appendArrayBuffer'](this.waitingFragment,a.payload),this['waitingFragment']=null):v=a.payload,this['demuxer']['push'](a.payload,p,b,null,e,o,w,c)}else f['logger']['log']("unknown video PTS for continuity counter "+r+", waiting for video PTS before demuxing audio frag "+t+" of ["+E.startSN+" ,"+E.endSN+"],track "+i),this.waitingFragment||(this['waitingFragment']={},this['waitingFragment']['frag']=a.frag,this['waitingFragment']['stats']=a.stats,this['waitingFragment']['payload']=null),this['waitingFragment']['payload']=A['appendArrayBuffer'](this.waitingFragment.payload,a.payload),this['state']=U.WAITING_INIT_PTS}}this['fragLoadError']=0}},{'key':"onFragParsingInitSegment",'value':function(a){var e=this.fragCurrent,n=a.frag;if(e&&"audio"===a.id&&n['sn']===e.sn&&n['level']===e.level&&(this['state']===U.PARSING||"fetch"===n.loaderType)){var l=a.tracks,E=void 0;if(l.video&&delete l.video,E=l.audio){E['levelCodec']=E.codec,E['id']=a.id,this['hls']['trigger'](y["default"].BUFFER_CODECS,l),f['logger']['log']("audio track:audio,'container':"+E.container+",codecs[level/parsed]=["+E.levelCodec+"/"+E.codec+"]");var o=E.initSegment;if(o){var i={'type':"audio",'data':o,'parent':"audio",'content':"initSegment",'level':n.level,'sn':n.sn,'codec':E.codec};this.audioSwitch?this['pendingData']=[i]:(this['appended']=!0,this['pendingBuffering']=!0,this['hls']['trigger'](y["default"].BUFFER_APPENDING,i))}this['tick']()}}}},{'key':"onFragParsingData",'value':function(a){var e=this,n=this.fragCurrent,l=a.frag;if(n&&"audio"===a.id&&"audio"===a.type&&l['sn']===n.sn&&l['level']===n.level&&(this['state']===U.PARSING||"fetch"===l.loaderType)){var E=this.trackId,o=this['tracks'][E],i=this.hls;"xhr"===l.loaderType?Number['isFinite'](a.endPTS)||(a['endPTS']=a.startPTS+n.duration,a['endDTS']=a.startDTS+n.duration):"fetch"===l.loaderType&&(void 0===l.flagIsFirstParsing?l['flagIsFirstParsing']=!0:l['flagIsFirstParsing']=!1,
l.flagIsFirstParsing?(l['voStartPTS']=a.startPTS,l['voStartDTS']=a.startDTS,f['logger']['log']("Parsed, "+a.type+", start, PTS:["+a['startPTS']['toFixed'](3)+", null],'DTS':["+a['startDTS']['toFixed'](3)+", null],'nb':"+a.nb+",'dropped':"+(a.dropped||0))):l.isLoaded?(a['startPTS']=l.voStartDTS,a['startDTS']=l.voStartDTS,Number['isFinite'](a.endPTS)||(a['endPTS']=a.startPTS+n.duration,a['endDTS']=a.startDTS+n.duration),f['logger']['log']("Parsed, "+a.type+", end, PTS:["+a['startPTS']['toFixed'](3)+", "+a['endPTS']['toFixed'](3)+"],'DTS':["+a['startDTS']['toFixed'](3)+", "+a['endDTS']['toFixed'](3)+"],'nb':"+a.nb+",'dropped':"+(a.dropped||0))):f['logger']['log']("Parsed, "+a.type+", mid, PTS:["+a['startPTS']['toFixed'](3)+", null],'DTS':["+a['startDTS']['toFixed'](3)+", null],'nb':"+a.nb+",'dropped':"+(a.dropped||0))),n['addElementaryStream'](u["default"].ElementaryStreamTypes.AUDIO),"xhr"===l.loaderType?(f['logger']['log']("parsed "+a.type+",'PTS':["+a['startPTS']['toFixed'](3)+","+a['endPTS']['toFixed'](3)+"],'DTS':["+a['startDTS']['toFixed'](3)+"/"+a['endDTS']['toFixed'](3)+"],'nb':"+a.nb),s['updateFragPTSDTS'](o.details,n,a.startPTS,a.endPTS)):"fetch"===l.loaderType&&l.isLoaded&&(f['logger']['log']("parsed "+a.type+",'PTS':["+a['startPTS']['toFixed'](3)+","+a['endPTS']['toFixed'](3)+"],'DTS':["+a['startDTS']['toFixed'](3)+"/"+a['endDTS']['toFixed'](3)+"],'nb':"+a.nb),s['updateFragPTSDTS'](o.details,n,a.startPTS,a.endPTS));var t=this.audioSwitch,r=this.media,b=!1;if(t&&r)if(r.readyState){var d=r.currentTime;if(f['logger']['log']("switching audio track : currentTime:"+d),d>=a.startPTS){f['logger']['log']("switching audio track : flushing all audio"),this['state']=U.BUFFER_FLUSHING,i['trigger'](y["default"].BUFFER_FLUSHING,{'startOffset':0,'endOffset':Number.POSITIVE_INFINITY,'type':"audio"}),b=!0,this['audioSwitch']=!1;var c=this['tracks'][E].lang;i['trigger'](y["default"].AUDIO_TRACK_SWITCHED,{'id':E,'lang':c})}}else{this['audioSwitch']=!1;var p=this['tracks'][E].lang;i['trigger'](y["default"].AUDIO_TRACK_SWITCHED,{'id':E,'lang':p})}var w=this.pendingData;if(!w)return f['logger']['warn']("Apparently attempt to enqueue media payload without codec initialization data upfront"),void i['trigger'](y["default"].ERROR,{'type':C.ErrorTypes.MEDIA_ERROR,'details':null,'fatal':!0});this.audioSwitch||((a.data1||a.isLoaded)&&w['push']({'type':a.type,'data':a.data1,'parent':"audio",'content':"data",'level':l.level,'sn':l.sn,'isLoaded':a.isLoaded,'index':0}),a.data2&&a.data2.length&&w['push']({'type':a.type,'data':a.data2,'parent':"audio",'content':"data",'level':l.level,'sn':l.sn,'isLoaded':a.isLoaded,'index':1}),!b&&w.length&&(w['forEach'](function(a){(e['state']===U.PARSING||"fetch"===l.loaderType)&&(e['pendingBuffering']=!0,e['hls']['trigger'](y["default"].BUFFER_APPENDING,a))}),this['pendingData']=[],this['appended']=!0)),this['tick']()}}},{'key':"onFragParsed",'value':function(a){var e=this.fragCurrent,n=a.frag;!e||"audio"!==a.id||n.sn!==e.sn||n.level!==e.level||this.state!==U.PARSING&&"fetch"!==n.loaderType||(this['stats']['tparsed']=S['now'](),this.state!==U.IDLE&&(this['state']=U.PARSED),this['_checkAppendedParsed'](a.isLoaded))}},{'key':"onBufferReset",'value':function(){this['mediaBuffer']=this['videoBuffer']=null,this['loadedmetadata']=!1}},{'key':"onBufferCreated",'value':function(a){var e=a.tracks.audio;e&&(this['mediaBuffer']=e.buffer,this['loadedmetadata']=!0),a.tracks.video&&(this['videoBuffer']=a.tracks.video.buffer)}},{'key':"onBufferAppended",'value':function(a){if("audio"===a.parent){var e=this.state;(e===U.PARSING||e===U.PARSED)&&(this['pendingBuffering']=a.pending>0,this['_checkAppendedParsed'](a.isLoaded))}}},{'key':"_checkAppendedParsed",'value':function(a){if(!(this.state!==U.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,n=this.stats,l=this.hls;if(e){this['fragPrevious']=e,n['tbuffered']=S['now'](),l['trigger'](y["default"].FRAG_BUFFERED,{'stats':n,'frag':e,'id':"audio"});var E=this.mediaBuffer?this.mediaBuffer:this.media;if(f['logger']['log']("audio buffered : "+m["default"]['toString'](E.buffered)),a){if(this.audioSwitch&&this.appended){this['audioSwitch']=!1;var o=this['tracks'][this.trackId].lang,i=this.trackId;l['trigger'](y["default"].AUDIO_TRACK_SWITCHED,{'id':i,'lang':o})}this['state']=U.IDLE}}this['tick']()}}},{'key':"onError",'value':function(a){var e=a.frag;if(!e||"audio"===e.type)switch(a.details){case C.ErrorDetails.FRAG_LOAD_ERROR:case C.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=a.frag;if(n&&"audio"!==n.type)break;if(!a.fatal){var l=this.fragLoadError;l?l++:l=1;var E=this.config;if(l<=E.fragLoadingMaxRetry){this['fragLoadError']=l;var o=Math['min'](Math['pow'](2,l-1)*E.fragLoadingRetryDelay,E.fragLoadingMaxRetryTimeout);f['logger']['warn']("AudioStreamController: frag loading failed, retry in "+o+" ms"),this['retryDate']=S['now']()+o,this['state']=U.FRAG_LOADING_WAITING_RETRY}else f['logger']['error']("AudioStreamController: "+a.details+" reaches max retry, redispatch as fatal ..."),a['fatal']=!0,this['state']=U.ERROR}break;case C.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case C.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case C.ErrorDetails.KEY_LOAD_ERROR:case C.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==U.ERROR&&(this['state']=a.fatal?U.ERROR:U.IDLE,f['logger']['warn']("AudioStreamController: "+a.details+" while loading frag, now switching to "+this.state+" state ..."));break;case C.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===a.parent&&(this['state']===U.PARSING||this['state']===U.PARSED)){var i=this.mediaBuffer,t=this.media.currentTime,r=i&&p['BufferHelper']['isBuffered'](i,t)&&p['BufferHelper']['isBuffered'](i,t+.5);if(r){var b=this.config;b.maxMaxBufferLength>=b.maxBufferLength&&(b.maxMaxBufferLength/=2,f['logger']['warn']("AudioStreamController: reduce max buffer length to "+b.maxMaxBufferLength+"s")),this['state']=U.IDLE}else f['logger']['warn']("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this['fragCurrent']=null,this['state']=U.BUFFER_FLUSHING,this['hls']['trigger'](y["default"].BUFFER_FLUSHING,{'startOffset':0,'endOffset':Number.POSITIVE_INFINITY,'type':"audio"})}}}},{'key':"onBufferFlushed",'value':function(){var a=this,e=this.pendingData;e&&e.length?(f['logger']['log']("AudioStreamController: appending pending audio data after buffer flushed"),e['forEach'](function(e){a['hls']['trigger'](y["default"].BUFFER_APPENDING,e)}),this['appended']=!0,this['pendingData']=[],this['state']=U.PARSED):(this['state']=U.IDLE,this['fragPrevious']=null,this['tick']())}},{'key':"isLiveLowLatency",'value':function(a){return this.config.lowLatencyMode&&a.live?!0:!1}},{'key':"isCmafLiveLowLatency",'value':function(a){return this.config.lowLatencyMode&&a.live&&a.initSegment?!0:!1}},{'key':"computeLivePosition",'value':function(a,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return a+Math['max'](0,e.totalduration-n)}},{'key':"computeStartPosition",'value':function(a,e){if(!this.startFragRequested){if(-1===this.startPosition){var n=e.startTimeOffset;Number['isFinite'](n)?(f['logger']['log']("start time offset found in playlist, adjust startPosition to "+n),this['startPosition']=n):e.live?this['startPosition']=this['computeLivePosition'](a,e):this['startPosition']=0}this['nextLoadPosition']=this.startPosition}}},{'key':"state",'set':function(a){if(this.state!==a){var e=this.state;this['_state']=a,f['logger']['log']("audio stream:"+e+"->"+a)}},'get':function(){return this._state}}]),e}(M["default"]);n["default"]=I},{'230':230,'234':234,'248':248,'256':256,'258':258,'262':262,'272':272,'273':273,'275':275,'276':276,'279':279,'285':285,'290':290}],'224':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(272),c=l(d),p=a(285),w=a(256),x=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].MANIFEST_LOADING,b["default"].MANIFEST_PARSED,b["default"].AUDIO_TRACK_LOADED,b["default"].AUDIO_TRACK_SWITCHED,b["default"].LEVEL_LOADED,b["default"].ERROR));return n['_trackId']=-1,n['_selectDefaultTrack']=!0,n['tracks']=[],n['trackIdBlacklist']=Object['create'](null),n['audioGroupId']=null,n}return i(e,a),t(e,[{'key':"onManifestLoading",'value':function(){this['tracks']=[],this['_trackId']=-1,this['_selectDefaultTrack']=!0}},{'key':"onManifestParsed",'value':function(a){var e=this['tracks']=a.audioTracks||[];this['hls']['trigger'](b["default"].AUDIO_TRACKS_UPDATED,{'audioTracks':e})}},{'key':"onAudioTrackLoaded",'value':function(a){if(a.id>=this.tracks.length)return void p['logger']['warn']("Invalid audio track id:",a.id);if(p['logger']['log']("audioTrack "+a.id+" loaded"),this['tracks'][a.id]['details']=a.details,a.details.live&&!this['hasInterval']()){var e=1e3*a.details.targetduration;this['setInterval'](e)}!a.details.live&&this['hasInterval']()&&this['clearInterval']()}},{'key':"onAudioTrackSwitched",'value':function(a){var e=this['tracks'][a.id].groupId;e&&this.audioGroupId!==e&&(this['audioGroupId']=e)}},{'key':"onLevelLoaded",'value':function(a){var e=this['hls']['levels'][a.level];if(e.audioGroupIds){var n=e['audioGroupIds'][e.urlId];this.audioGroupId!==n&&(this['audioGroupId']=n,this['_selectInitialAudioTrack']())}}},{'key':"onError",'value':function(a){a['type']===w.ErrorTypes.NETWORK_ERROR&&(a.fatal&&this['clearInterval'](),a['details']===w.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(p['logger']['warn']("Network failure on audio-track id:",a.context.id),this['_handleLoadError']()))}},{'key':"_setAudioTrack",'value':function(a){if(this['_trackId']===a&&this['tracks'][this._trackId].details)return void p['logger']['debug']("Same id as current audio-track passed, and track details available -> no-op");if(0>a||a>=this.tracks.length)return void p['logger']['warn']("Invalid id passed to audio-track controller");var e=this['tracks'][a];p['logger']['log']("Now switching to audio-track index "+a),this['clearInterval'](),this['_trackId']=a;var n=e.url,l=e.type,E=e.id,o=e.lang;this['hls']['trigger'](b["default"].AUDIO_TRACK_SWITCHING,{'id':E,'type':l,'url':n,'lang':o}),this['_loadTrackDetailsIfNeeded'](e)}},{'key':"doTick",'value':function(){this['_updateTrack'](this._trackId)}},{'key':"_selectInitialAudioTrack",'value':function(){var a=this,e=this.tracks;if(e.length){var n=this['tracks'][this._trackId],l=null;if(n&&(l=n.name),this._selectDefaultTrack){var E=e['filter'](function(a){return a["default"]});E.length?e=E:p['logger']['warn']("No default audio tracks defined")}var o=!1,i=function(){e['forEach'](function(e){o||a.audioGroupId&&e.groupId!==a.audioGroupId||l&&l!==e.name||(a['_setAudioTrack'](e.id),o=!0)})};i(),o||(l=null,i()),o||(p['logger']['error']("No track found for running audio group-ID: "+this.audioGroupId),this['hls']['trigger'](b["default"].ERROR,{'type':w.ErrorTypes.MEDIA_ERROR,'details':w.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,'fatal':!0}))}}},{'key':"_needsTrackLoading",'value':function(a){var e=a.details;return e?e.live?!0:void 0:!0}},{'key':"_loadTrackDetailsIfNeeded",'value':function(a){if(this['_needsTrackLoading'](a)){var e=a.url,n=a.id;p['logger']['log']("loading audio-track playlist for id: "+n+", url: "+(e?"not default":"default")),e&&this['hls']['trigger'](b["default"].AUDIO_TRACK_LOADING,{'url':e,'id':n})}}},{'key':"_updateTrack",'value':function(a){if(!(0>a||a>=this.tracks.length)){this['clearInterval'](),this['_trackId']=a,p['logger']['log']("trying to update audio-track "+a);var e=this['tracks'][a];this['_loadTrackDetailsIfNeeded'](e)}}},{'key':"_handleLoadError",'value':function(){this['trackIdBlacklist'][this._trackId]=!0;var a=this._trackId,e=this['tracks'][a],n=e.name,l=e.language,E=e.groupId;p['logger']['warn']("Loading failed on audio track id: "+a+", group-id: "+E+', name/language: "'+n+'" / "'+l+'"');for(var o=a,i=0;i<this.tracks.length;i++)if(!this['trackIdBlacklist'][i]){var t=this['tracks'][i];if(t['name']===n){o=i;break}}return o===a?void p['logger']['warn']('No fallback audio-track found for name/language: "'+n+'" / "'+l+'"'):(p['logger']['log']("Attempting audio-track fallback id:",o,"group-id:",this['tracks'][o].groupId),void this['_setAudioTrack'](o))}},{'key':"audioTracks",'get':function(){return this.tracks}},{'key':"audioTrack",'get':function(){return this._trackId},'set':function(a){this['_setAudioTrack'](a),this['_selectDefaultTrack']=!1}}]),e}(c["default"]);n["default"]=x},{'256':256,'258':258,'272':272,'285':285}],'225':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=a(285),w=a(256),x=a(287),v=a(13),y=a(302),h=l(y),s=x['getMediaSource'](),D=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].MEDIA_ATTACHING,b["default"].MEDIA_DETACHING,b["default"].MANIFEST_PARSED,b["default"].BUFFER_RESET,b["default"].BUFFER_APPENDING,b["default"].BUFFER_CODECS,b["default"].BUFFER_EOS,b["default"].BUFFER_FLUSHING,b["default"].LEVEL_PTS_UPDATED,b["default"].LEVEL_UPDATED));return n['_msDuration']=null,n['_levelDuration']=null,n['_live']=null,n['_objectUrl']=null,n['onsbue']=n['onSBUpdateEnd']['bind'](n),n['onsbe']=n['onSBUpdateError']['bind'](n),n['pendingTracks']={},n['tracks']={},n['currVideoLevel']=-1,n['enableSaveVideoSegment_']=!1,n['enableSaveAudioSegment_']=!1,n['curVideoCodec']=void 0,n['curAudioCodec']=void 0,n}return i(e,a),t(e,[{'key':"destroy",'value':function(){c["default"].prototype['destroy']['call'](this)}},{'key':"onLevelPtsUpdated",'value':function(a){var e=a.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var l=this.sourceBuffer.audio,E=Math['abs'](l.timestampOffset-a.start);if(E>.1){var o=l.updating;try{l['abort']()}catch(i){o=!0,p['logger']['warn']("can not abort audio buffer: "+i)}o?this['audioTimestampOffset']=a.start:(p['logger']['warn']("change mpeg audio timestamp offset from "+l.timestampOffset+" to "+a.start),l['timestampOffset']=a.start)}}}},{'key':"onManifestParsed",'value':function(a){var e=a.audio,n=a.video||a.levels.length&&a.altAudio,l=0;a.altAudio&&(e||n)&&(l=(e?1:0)+(n?1:0),p['logger']['log'](l+" sourceBuffer(s) expected")),this['sourceBufferNb']=l}},{'key':"onMediaAttaching",'value':function(a){var e=this['media']=a.media;if(e){var n=this['mediaSource']=new s;this['onmso']=this['onMediaSourceOpen']['bind'](this),this['onmse']=this['onMediaSourceEnded']['bind'](this),this['onmsc']=this['onMediaSourceClose']['bind'](this),n['addEventListener']("sourceopen",this.onmso),n['addEventListener']("sourceended",this.onmse),n['addEventListener']("sourceclose",this.onmsc),e['src']=window['URL']['createObjectURL'](n),this['_objectUrl']=e.src,this['onMediaCanPlay_']=this['onMediaCanPlay']['bind'](this),e['addEventListener']("canplay",this.onMediaCanPlay_)}}},{'key':"onMediaDetaching",'value':function(){p['logger']['log']("media source detaching");var a=this.mediaSource;if(a){if("open"===a.readyState)try{a['endOfStream']()}catch(e){p['logger']['warn']("onMediaDetaching:"+e.message+" while calling endOfStream")}a['removeEventListener']("sourceopen",this.onmso),a['removeEventListener']("sourceended",this.onmse),a['removeEventListener']("sourceclose",this.onmsc),this.media&&(this.onMediaCanPlay_&&(this['media']['removeEventListener']("canplay",this.onMediaCanPlay_),this['onMediaCanPlay_']=null),window['URL']['revokeObjectURL'](this._objectUrl),this['media']['src']===this._objectUrl?(this['media']['removeAttribute']("src"),this['media']['load']()):p['logger']['warn']("media.src was changed by a third party - skip cleanup")),this['mediaSource']=null,this['media']=null,this['_objectUrl']=null,this['pendingTracks']={},this['tracks']={},this['sourceBuffer']={},this['flushRange']=[],this['segments']=[],this['appended']=0}this['onmso']=this['onmse']=this['onmsc']=null,this['hls']['trigger'](b["default"].MEDIA_DETACHED)}},{'key':"onMediaSourceOpen",'value':function(){p['logger']['log']("media source opened"),this['hls']['trigger'](b["default"].MEDIA_ATTACHED,{'media':this.media});var a=this.mediaSource;a&&a['removeEventListener']("sourceopen",this.onmso),this['checkPendingTracks']()}},{'key':"checkPendingTracks",'value':function(){var a=this.pendingTracks,e=Object['keys'](a).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this['createSourceBuffers'](a),this['pendingTracks']={},this['doAppending']())}},{'key':"onMediaSourceClose",'value':function(){p['logger']['log']("media source closed"),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_MEDIASOURCE_CLOSED)}},{'key':"onMediaSourceEnded",'value':function(){p['logger']['log']("media source ended")}},{'key':"onSBUpdateEnd",'value':function(){if(this.audioTimestampOffset){var a=this.sourceBuffer.audio;p['logger']['warn']("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+this.audioTimestampOffset),a['timestampOffset']=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this['doFlush'](),this._needsEos&&this['checkEos'](),this['appending']=!1;var e=this.parent,n=this['segments']['reduce'](function(a,n){return n['parent']===e?a+1:a},0),l={},E=this.sourceBuffer;for(var o in E)l[o]=E[o].buffered;this['hls']['trigger'](b["default"].BUFFER_APPENDED,{'parent':e,'pending':n,'timeRanges':l,'isLoaded':this.isLoaded}),this._needsFlush||this['doAppending'](),this['updateMediaElementDuration']()}},{'key':"onSBUpdateError",'value':function(a){p['logger']['error']("sourceBuffer error:",a),this['hls']['trigger'](b["default"].ERROR,{'type':w.ErrorTypes.MEDIA_ERROR,'details':w.ErrorDetails.BUFFER_APPENDING_ERROR,'fatal':!1})}},{'key':"onBufferReset",'value':function(){var a=this.sourceBuffer;for(var e in a){var n=a[e];try{this['mediaSource']['removeSourceBuffer'](n),n['removeEventListener']("updateend",this.onsbue),n['removeEventListener']("error",this.onsbe)}catch(l){}}this['sourceBuffer']={},this['flushRange']=[],this['segments']=[],this['appended']=0}},{'key':"onBufferCodecs",'value':function(a){if(0===Object['keys'](this.sourceBuffer).length){for(var e in a)this['pendingTracks'][e]=a[e];var n=this.mediaSource;n&&"open"===n.readyState&&this['checkPendingTracks']()}}},{'key':"createSourceBuffers",'value':function(a){var e=this.sourceBuffer,n=this.mediaSource;for(var l in a)if(!e[l]){var E=a[l],o=E.levelCodec||E.codec,i=E.container+";codecs="+o;p['logger']['log']("creating sourceBuffer("+i+")");try{var t=e[l]=n['addSourceBuffer'](i);t['addEventListener']("updateend",this.onsbue),t['addEventListener']("error",this.onsbe),this['tracks'][l]={'codec':o,'container':E.container},E['buffer']=t}catch(r){p['logger']['error']("error while trying to add sourceBuffer:"+r.message),this['hls']['trigger'](b["default"].ERROR,{'type':w.ErrorTypes.MEDIA_ERROR,'details':w.ErrorDetails.BUFFER_ADD_CODEC_ERROR,'fatal':!1,'err':r,'mimeType':i})}}this['hls']['trigger'](b["default"].BUFFER_CREATED,{'tracks':a})}},{'key':"onBufferAppending",'value':function(a){this._needsFlush||(this.segments?this['segments']['push'](a):this['segments']=[a],this['doAppending']())}},{'key':"onBufferAppendFail",'value':function(a){p['logger']['error']("sourceBuffer error:",a.event),this['hls']['trigger'](b["default"].ERROR,{'type':w.ErrorTypes.MEDIA_ERROR,'details':w.ErrorDetails.BUFFER_APPENDING_ERROR,'fatal':!1})}},{'key':"onBufferEos",'value':function(a){var e=this.sourceBuffer,n=a.type;for(var l in e)n&&l!==n||e[l].ended||(e[l]['ended']=!0,p['logger']['log'](l+" sourceBuffer now EOS"));this['checkEos']()}},{'key':"checkEos",'value':function(){var a=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this['_needsEos']=!1);for(var n in a){var l=a[n];if(!l.ended)return;if(l.updating)return void(this['_needsEos']=!0)}p['logger']['log']("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e['endOfStream']()}catch(E){p['logger']['warn']("exception while calling mediaSource['endOfStream']()")}this['_needsEos']=!1}},{'key':"onBufferFlushing",'value':function(a){this['flushRange']['push']({'start':a.startOffset,'end':a.endOffset,'type':a.type}),this['flushBufferCounter']=0,this['doFlush']()}},{'key':"onLevelUpdated",'value':function(a){var e=a.details;e.fragments.length>0&&(this['_levelDuration']=e.totalduration+e['fragments'][0].start,this['_live']=e.live,this['updateMediaElementDuration']())}},{'key':"updateMediaElementDuration",'value':function(){var a=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(this['sourceBuffer'][n]['updating']===!0)return;e=this.media.duration,null===this._msDuration&&(this['_msDuration']=this.mediaSource.duration),this['_live']===!0&&a['liveDurationInfinity']===!0?(p['logger']['log']("Media Source duration is set to Infinity"),this['_msDuration']=this['mediaSource']['duration']=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Number['isFinite'](e))&&(p['logger']['log']("Updating Media Source duration to "+this['_levelDuration']['toFixed'](3)),this['_msDuration']=this['mediaSource']['duration']=this._levelDuration)}}},{'key':"doFlush",'value':function(){for(;this.flushRange.length;){var a=this['flushRange'][0];if(!this['flushBuffer'](a.start,a.end,a.type))return void(this['_needsFlush']=!0);this['flushRange']['shift'](),this['flushBufferCounter']=0}if(0===this.flushRange.length){this['_needsFlush']=!1;var e=0,n=this.sourceBuffer;try{for(var l in n)e+=n[l].buffered.length}catch(E){p['logger']['error']("error while accessing sourceBuffer.buffered")}this['appended']=e,this['hls']['trigger'](b["default"].BUFFER_FLUSHED)}}},{'key':"doAppending",'value':function(){var a=this.hls,e=this.sourceBuffer,n=this.segments;if(Object['keys'](e).length){if(this.media.error)return this['segments']=[],void p['logger']['error']("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var l=n['shift']();try{var E=l.type,o=e[E];o?o.updating?n['unshift'](l):l.data?(o['ended']=!1,p['logger']['log']("Append "+E+", parent: "+l.parent+", content: "+l.content+", level: "+l.level+", sn: "+l.sn+", index: "+l.index+", t: "+this.media.currentTime),this['parent']=l.parent,this['isLoaded']=l.isLoaded,"initSegment"===l.content&&("video"===E&&(void 0!==o.changeType&&this.curVideoCodec&&this.curVideoCodec!==l.codec&&o['changeType']("video/mp4; codecs="+l.codec),this['curVideoCodec']=l.codec),"audio"===E&&(void 0!==o.changeType&&this.curAudioCodec&&this.curAudioCodec!==l.codec&&o['changeType']("audio/mp4; codecs="+l.codec),this['curAudioCodec']=l.codec)),o['appendBuffer'](l.data),this['saveSegment'](l),this['checkVideoLevel'](l),this['appendError']=0,this.appended++,this['appending']=!0):l.isLoaded&&(this['parent']=l.parent,this['isLoaded']=l.isLoaded,this['onSBUpdateEnd']()):this['onSBUpdateEnd']()}catch(i){p['logger']['error']("error while trying to append buffer:"+i.message),n['unshift'](l);var t={'type':w.ErrorTypes.MEDIA_ERROR,'parent':l.parent};22!==i.code?(this.appendError?this.appendError++:this['appendError']=1,t['details']=w.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>a.config.appendErrorMaxRetry?(p['logger']['log']("fail "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],t['fatal']=!0,a['trigger'](b["default"].ERROR,t)):(t['fatal']=!1,a['trigger'](b["default"].ERROR,t))):(this['segments']=[],t['details']=w.ErrorDetails.BUFFER_FULL_ERROR,t['fatal']=!1,a['trigger'](b["default"].ERROR,t))}}}}},{'key':"flushBuffer",'value':function(a,e,n){var l=void 0,E=void 0,o=void 0,i=void 0,t=void 0,r=void 0,b=this.sourceBuffer;if(Object['keys'](b).length){if(p['logger']['log']("flushBuffer,pos/start/end: "+this.media['currentTime']['toFixed'](3)+"/"+a+"/"+e),this.flushBufferCounter<this.appended){for(var d in b)if(!n||d===n){if(l=b[d],l['ended']=!1,l.updating)return p['logger']['warn']("cannot flush, sb updating in progress"),!1;try{for(E=0;E<l.buffered.length;E++)if(o=l['buffered']['start'](E),i=l['buffered']['end'](E),-1!==navigator['userAgent']['toLowerCase']()['indexOf']("firefox")&&e===Number.POSITIVE_INFINITY?(t=a,r=e):(t=Math['max'](o,a),r=Math['min'](i,e)),Math['min'](r,i)-t>.5)return this.flushBufferCounter++,p['logger']['log']("flush "+d+" ["+t+","+r+"], of ["+o+","+i+"], pos:"+this.media.currentTime),l['remove'](t,r),!1}catch(c){p['logger']['warn']("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else p['logger']['warn']("abort flushing too many retries");p['logger']['log']("buffer flushed")}return!0}},{'key':"onMediaCanPlay",'value':function(){var a=this.media,e=this.mediaSource;a['removeEventListener']("canplay",this.onMediaCanPlay_);var n={'audioTrackDetected':!1,'videoTrackDetected':!1};e&&(n=v['voDetectStreamType'](e)),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_STREAM_TYPE,n)}},{'key':"saveSegment",'value':function(a){var e=void 0,n=void 0;("video"===a.type&&this.enableSaveVideoSegment_||"audio"===a.type&&this.enableSaveAudioSegment_)&&1===a.level&&(e=new window['Blob']([a.data],{'type':"application/octet-stream"}),n=a.type,n+="initSegment"===a.content?"_begin_"+a['level']['toString']()+"_"+a['sn']['toString']():"_"+a.content+"_"+a['level']['toString']()+"_"+a['sn']['toString']()+"_"+a['index']['toString'](),n+=".mp4",h["default"]['saveAs'](e,n))}},{'key':"checkVideoLevel",'value':function(a){"video"===a.type&&("initSegment"===a.content?-1===this.currVideoLevel?this['currVideoLevel']=a.level:this['currVideoLevel']=a.level:a.level!==this.currVideoLevel&&p['logger']['log']("VO Warning, old level: "+this.currVideoLevel+", data level: "+a.level))}}]),e}(c["default"]);n["default"]=D},{'13':13,'256':256,'257':257,'258':258,'285':285,'287':287,'302':302}],'226':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].FPS_DROP_LEVEL_CAPPING,b["default"].MEDIA_ATTACHING,b["default"].MANIFEST_PARSED,b["default"].BUFFER_CODECS,b["default"].MEDIA_DETACHING));return n['autoLevelCapping']=Number.POSITIVE_INFINITY,n['firstLevel']=null,n['levels']=[],n['media']=null,n['restrictedLevels']=[],n['timer']=null,n}return i(e,a),t(e,[{'key':"destroy",'value':function(){this.hls.config.capLevelToPlayerSize&&(this['media']=null,this['_stopCapping']())}},{'key':"onFpsDropLevelCapping",'value':function(a){e['isLevelAllowed'](a.droppedLevel,this.restrictedLevels)&&this['restrictedLevels']['push'](a.droppedLevel)}},{'key':"onMediaAttaching",'value':function(a){this['media']=a.media instanceof window.HTMLVideoElement?a.media:null}},{'key':"onManifestParsed",'value':function(a){var e=this.hls;this['restrictedLevels']=[],this['levels']=a.levels,this['firstLevel']=a.firstLevel,e.config.capLevelToPlayerSize&&(a.video||a.levels.length&&a.altAudio)&&this['_startCapping']()}},{'key':"onBufferCodecs",'value':function(a){var e=this.hls;e.config.capLevelToPlayerSize&&a.video&&this['_startCapping']()}},{'key':"onLevelsUpdated",'value':function(a){this['levels']=a.levels}},{'key':"onMediaDetaching",'value':function(){this['_stopCapping']()}},{'key':"detectPlayerSize",'value':function(){if(this.media){var a=this.levels?this.levels.length:0;if(a){var e=this.hls;this['autoLevelCapping']=this['getMaxLevel'](a-1),this.autoLevelCapping!==e.autoLevelCapping&&(e['autoLevelCapping']=this.autoLevelCapping,e.autoLevelCapping>this.autoLevelCapping&&e['streamController']['nextLevelSwitch']())}}}},{'key':"getMaxLevel",'value':function(a){var n=this;if(!this.levels)return-1;var l=this['levels']['filter'](function(l,E){return e['isLevelAllowed'](E,n.restrictedLevels)&&a>=E});return e['getMaxLevelByMediaSize'](l,this.mediaWidth,this.mediaHeight)}},{'key':"_startCapping",'value':function(){this.timer||(this['autoLevelCapping']=Number.POSITIVE_INFINITY,this['hls']['firstLevel']=this['getMaxLevel'](this.firstLevel),clearInterval(this.timer),this['timer']=setInterval(this['detectPlayerSize']['bind'](this),1e3),this['detectPlayerSize']())}},{'key':"_stopCapping",'value':function(){this['restrictedLevels']=[],this['firstLevel']=null,this['autoLevelCapping']=Number.POSITIVE_INFINITY,this.timer&&(this['timer']=clearInterval(this.timer),this['timer']=null)}},{'key':"mediaWidth",'get':function(){var a=void 0,n=this.media;return n&&(a=n.width||n.clientWidth||n.offsetWidth,a*=e.contentScaleFactor),a}},{'key':"mediaHeight",'get':function(){var a=void 0,n=this.media;return n&&(a=n.height||n.clientHeight||n.offsetHeight,a*=e.contentScaleFactor),a}}],[{'key':"isLevelAllowed",'value':function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return-1===e['indexOf'](a)}},{'key':"getMaxLevelByMediaSize",'value':function(a,e,n){if(!a||a&&!a.length)return-1;for(var l=function(a,e){return e?a.width!==e.width||a.height!==e.height:!0},E=a.length-1,o=0;o<a.length;o+=1){var i=a[o];if((i.width>=e||i.height>=n)&&l(i,a[o+1])){E=o;break}}return E}},{'key':"contentScaleFactor",'get':function(){var a=1;try{a=window.devicePixelRatio}catch(e){}return a}}]),e}(c["default"]);n["default"]=p},{'257':257,'258':258}],'227':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(257),b=l(r),d=a(258),c=l(d),p=a(256),w=a(285),x=window,v=x.XMLHttpRequest,y=3,h={'WIDEVINE':"com.widevine.alpha",'PLAYREADY':"com.microsoft.playready"},s=function(a,e,n){var l={'videoCapabilities':[]};return e['forEach'](function(a){l['videoCapabilities']['push']({'contentType':'video/mp4; codecs="'+a+'"'})}),[l]},D=function(a,e,n){switch(a){case h.WIDEVINE:return s(e,n);default:throw Error("Unknown key-system: "+a)}},m=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,c["default"].MEDIA_ATTACHED,c["default"].MANIFEST_PARSED));return n['_widevineLicenseUrl']=a.config.widevineLicenseUrl,n['_licenseXhrSetup']=a.config.licenseXhrSetup,n['_emeEnabled']=a.config.emeEnabled,n['_requestMediaKeySystemAccess']=a.config.requestMediaKeySystemAccessFunc,n['_mediaKeysList']=[],n['_media']=null,n['_hasSetMediaKeys']=!1,n['_isMediaEncrypted']=!1,n['_requestLicenseFailureCount']=0,n}return i(e,a),t(e,[{'key':"getLicenseServerUrl",'value':function(a){var e=void 0;switch(a){case h.WIDEVINE:e=this._widevineLicenseUrl;break;default:e=null}return e||(w['logger']['error']('No license server URL configured for key-system "'+a+'"'),this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,'fatal':!0})),e}},{'key':"_attemptKeySystemAccess",'value':function(a,e,n){
var l=this,E=D(a,e,n);return E?(w['logger']['log']("Requesting encrypted media key-system access"),void this['requestMediaKeySystemAccess'](a,E)['then'](function(e){l['_onMediaKeySystemAccessObtained'](a,e)})["catch"](function(e){w['logger']['error']('Failed to obtain key-system "'+a+'" access:',e)})):void w['logger']['warn']("Can not create config for key-system (maybe because platform is not supported):",a)}},{'key':"_onMediaKeySystemAccessObtained",'value':function(a,e){var n=this;w['logger']['log']('Access for key-system "'+a+'" obtained');var l={'mediaKeys':null,'mediaKeysSession':null,'mediaKeysSessionInitialized':!1,'mediaKeySystemAccess':e,'mediaKeySystemDomain':a};this['_mediaKeysList']['push'](l),e['createMediaKeys']()['then'](function(e){l['mediaKeys']=e,w['logger']['log']('Media-keys created for key-system "'+a+'"'),n['_onMediaKeysCreated']()})["catch"](function(a){w['logger']['error']("Failed to create media-keys:",a)})}},{'key':"_onMediaKeysCreated",'value':function(){var a=this;this['_mediaKeysList']['forEach'](function(e){e.mediaKeysSession||(e['mediaKeysSession']=e['mediaKeys']['createSession'](),a['_onNewMediaKeySession'](e.mediaKeysSession))})}},{'key':"_onNewMediaKeySession",'value':function(a){var e=this;w['logger']['log']("New key-system session "+a.sessionId),a['addEventListener']("message",function(n){e['_onKeySessionMessage'](a,n.message)},!1)}},{'key':"_onKeySessionMessage",'value':function(a,e){w['logger']['log']("Got EME message event, creating license request"),this['_requestLicense'](e,function(e){w['logger']['log']("Received license data, updating key-session"),a['update'](e)})}},{'key':"_onMediaEncrypted",'value':function(a,e){w['logger']['log']('Media is encrypted using "'+a+'" init data type'),this['_isMediaEncrypted']=!0,this['_mediaEncryptionInitDataType']=a,this['_mediaEncryptionInitData']=e,this['_attemptSetMediaKeys'](),this['_generateRequestWithPreferredKeySession']()}},{'key':"_attemptSetMediaKeys",'value':function(){if(!this._hasSetMediaKeys){var a=this['_mediaKeysList'][0];if(!a||!a.mediaKeys)return w['logger']['error']("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_NO_KEYS,'fatal':!0});w['logger']['log']("Setting keys for encrypted media"),this['_media']['setMediaKeys'](a.mediaKeys),this['_hasSetMediaKeys']=!0}}},{'key':"_generateRequestWithPreferredKeySession",'value':function(){var a=this,e=this['_mediaKeysList'][0];if(!e)return w['logger']['error']("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_NO_ACCESS,'fatal':!0});if(e.mediaKeysSessionInitialized)return void w['logger']['warn']("Key-Session already initialized but requested again");var n=e.mediaKeysSession;n||(w['logger']['error']("Fatal: Media is encrypted but no key-session existing"),this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_NO_SESSION,'fatal':!0}));var l=this._mediaEncryptionInitDataType,E=this._mediaEncryptionInitData;w['logger']['log']('Generating key-session request for "'+l+'" init data type'),e['mediaKeysSessionInitialized']=!0,n['generateRequest'](l,E)['then'](function(){w['logger']['debug']("Key-session generation succeeded")})["catch"](function(e){w['logger']['error']("Error generating key-session request:",e),a['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_NO_SESSION,'fatal':!1})})}},{'key':"_createLicenseXhr",'value':function(a,e,n){var l=new v,E=this._licenseXhrSetup;try{if(E)try{E(l,a)}catch(o){l['open']("POST",a,!0),E(l,a)}l.readyState||l['open']("POST",a,!0)}catch(o){return w['logger']['error']("Error setting up key-system license XHR",o),void this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,'fatal':!0})}return l['responseType']="arraybuffer",l['onreadystatechange']=this['_onLicenseRequestReadyStageChange']['bind'](this,l,a,e,n),l}},{'key':"_onLicenseRequestReadyStageChange",'value':function(a,e,n,l){switch(a.readyState){case 4:if(200===a.status)this['_requestLicenseFailureCount']=0,w['logger']['log']("License request succeeded"),l(a.response);else{if(w['logger']['error']("License Request XHR failed ("+e+"). Status: "+a.status+" ("+a.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=y){var E=y-this._requestLicenseFailureCount+1;return w['logger']['warn']("Retrying license request, "+E+" attempts left"),void this['_requestLicense'](n,l)}this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,'fatal':!0})}}}},{'key':"_generateLicenseRequestChallenge",'value':function(a,e){var n=void 0;return a['mediaKeySystemDomain']===h.PLAYREADY?w['logger']['error']("PlayReady is not supported (yet)"):a['mediaKeySystemDomain']===h.WIDEVINE?n=e:w['logger']['error']("Unsupported key-system:",a.mediaKeySystemDomain),n}},{'key':"_requestLicense",'value':function(a,e){w['logger']['log']("Requesting content license for key-system");var n=this['_mediaKeysList'][0];if(!n)return w['logger']['error']("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this['hls']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.KEY_SYSTEM_ERROR,'details':p.ErrorDetails.KEY_SYSTEM_NO_ACCESS,'fatal':!0});var l=this['getLicenseServerUrl'](n.mediaKeySystemDomain),E=this['_createLicenseXhr'](l,a,e);w['logger']['log']("Sending license request to URL: "+l),E['send'](this['_generateLicenseRequestChallenge'](n,a))}},{'key':"onMediaAttached",'value':function(a){var e=this;if(this._emeEnabled){var n=a.media;this['_media']=n,n['addEventListener']("encrypted",function(a){e['_onMediaEncrypted'](a.initDataType,a.initData)})}}},{'key':"onManifestParsed",'value':function(a){if(this._emeEnabled){var e=a['levels']['map'](function(a){return a.audioCodec}),n=a['levels']['map'](function(a){return a.videoCodec});this['_attemptKeySystemAccess'](h.WIDEVINE,e,n)}}},{'key':"requestMediaKeySystemAccess",'get':function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(b["default"]);n["default"]=m},{'256':256,'257':257,'258':258,'285':285}],'228':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=a(285),w=window,x=w.performance,v=function(a){function e(a){return E(this,e),o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].MEDIA_ATTACHING))}return i(e,a),t(e,[{'key':"destroy",'value':function(){this.timer&&clearInterval(this.timer),this['isVideoPlaybackQualityAvailable']=!1}},{'key':"onMediaAttaching",'value':function(a){var e=this.hls.config;if(e.capLevelOnFPSDrop){var n=this['video']=a.media instanceof window.HTMLVideoElement?a.media:null;"function"==typeof n.getVideoPlaybackQuality&&(this['isVideoPlaybackQualityAvailable']=!0),clearInterval(this.timer),this['timer']=setInterval(this['checkFPSInterval']['bind'](this),e.fpsDroppedMonitoringPeriod)}}},{'key':"checkFPS",'value':function(a,e,n){var l=x['now']();if(e){if(this.lastTime){var E=l-this.lastTime,o=n-this.lastDroppedFrames,i=e-this.lastDecodedFrames,t=1e3*o/E,r=this.hls;if(r['trigger'](b["default"].FPS_DROP,{'currentDropped':o,'currentDecoded':i,'totalDroppedFrames':n}),t>0&&o>r.config.fpsDroppedMonitoringThreshold*i){var d=r.currentLevel;p['logger']['warn']("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===r.autoLevelCapping||r.autoLevelCapping>=d)&&(d-=1,r['trigger'](b["default"].FPS_DROP_LEVEL_CAPPING,{'level':d,'droppedLevel':r.currentLevel}),r['autoLevelCapping']=d,r['streamController']['nextLevelSwitch']())}}this['lastTime']=l,this['lastDroppedFrames']=n,this['lastDecodedFrames']=e}}},{'key':"checkFPSInterval",'value':function(){var a=this.video;if(a)if(this.isVideoPlaybackQualityAvailable){var e=a['getVideoPlaybackQuality']();this['checkFPS'](a,e.totalVideoFrames,e.droppedVideoFrames)}else this['checkFPS'](a,a.webkitDecodedFrameCount,a.webkitDroppedFrameCount)}}]),e}(c["default"]);n["default"]=v},{'257':257,'258':258,'285':285}],'229':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){if(!Array['isArray'](a)||!a.length||!Number['isFinite'](e))return null;if(e<a[0].programDateTime)return null;if(e>=a[a.length-1].endProgramDateTime)return null;n=n||0;for(var l=0;l<a.length;++l){var E=a[l];if(t(e,n,E))return E}return null}function o(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,E=a?e[a.sn-e[0].sn+1]:null;return E&&!i(n,l,E)?E:b["default"]['search'](e,i['bind'](null,n,l))}function i(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],l=Math['min'](e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-l<=a?1:n.start-l>a&&n.start?-1:0}function t(a,e,n){var l=1e3*Math['min'](e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.endProgramDateTime-l>a}Object['defineProperty'](n,"__esModule",{'value':!0}),n['findFragmentByPDT']=E,n['findFragmentByPTS']=o,n['fragmentWithinToleranceTest']=i,n['pdtWithinToleranceTest']=t;var r=a(275),b=l(r)},{'275':275}],'230':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0}),n['FragmentTracker']=n['FragmentState']=void 0;var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=function x(a,e,n){null===a&&(a=Function.prototype);var l=Object['getOwnPropertyDescriptor'](a,e);if(void 0===l){var E=Object['getPrototypeOf'](a);return null===E?void 0:x(E,e,n)}if("value"in l)return l.value;var o=l.get;return void 0===o?void 0:o['call'](n)},b=a(257),d=l(b),c=a(258),p=l(c),w=n['FragmentState']={'NOT_LOADED':"NOT_LOADED",'APPENDING':"APPENDING",'PARTIAL':"PARTIAL",'OK':"OK"};n['FragmentTracker']=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,p["default"].BUFFER_APPENDED,p["default"].FRAG_BUFFERED,p["default"].FRAG_LOADED));return n['bufferPadding']=.2,n['fragments']=Object['create'](null),n['timeRanges']=Object['create'](null),n['config']=a.config,n}return i(e,a),t(e,[{'key':"destroy",'value':function(){this['fragments']=null,this['timeRanges']=null,this['config']=null,d["default"].prototype['destroy']['call'](this),r(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"destroy",this)['call'](this)}},{'key':"getBufferedFrag",'value':function(a,e){var n=this.fragments,l=Object['keys'](n)['filter'](function(l){var E=n[l];if(E.body.type!==e)return!1;if(!E.buffered)return!1;var o=E.body;return o.startPTS<=a&&a<=o.endPTS});if(0===l.length)return null;var E=l['pop']();return n[E].body}},{'key':"detectEvictedFragments",'value':function(a,e){var n=this,l=void 0,E=void 0;Object['keys'](this.fragments)['forEach'](function(o){var i=n['fragments'][o];if(i['buffered']===!0){var t=i['range'][a];if(t){l=t.time;for(var r=0;r<l.length;r++)if(E=l[r],n['isTimeBuffered'](E.startPTS,E.endPTS,e)===!1){n['removeFragment'](i.body);break}}}})}},{'key':"detectPartialFragments",'value':function(a){var e=this,n=this['getFragmentKey'](a),l=this['fragments'][n];l&&(l['buffered']=!0,Object['keys'](this.timeRanges)['forEach'](function(n){if(a['hasElementaryStream'](n)){var E=e['timeRanges'][n];l['range'][n]=e['getBufferedTimes'](a.startPTS,a.endPTS,E)}}))}},{'key':"getBufferedTimes",'value':function(a,e,n){for(var l=[],E=void 0,o=void 0,i=!1,t=0;t<n.length;t++){if(E=n['start'](t)-this.bufferPadding,o=n['end'](t)+this.bufferPadding,a>=E&&o>=e){l['push']({'startPTS':Math['max'](a,n['start'](t)),'endPTS':Math['min'](e,n['end'](t))});break}if(o>a&&e>E)l['push']({'startPTS':Math['max'](a,n['start'](t)),'endPTS':Math['min'](e,n['end'](t))}),i=!0;else if(E>=e)break}return{'time':l,'partial':i}}},{'key':"getFragmentKey",'value':function(a){return a.type+"_"+a.level+"_"+a.urlId+"_"+a.sn}},{'key':"getPartialFragment",'value':function(a){var e=this,n=void 0,l=void 0,E=void 0,o=null,i=0;return Object['keys'](this.fragments)['forEach'](function(t){var r=e['fragments'][t];e['isPartial'](r)&&(l=r.body.startPTS-e.bufferPadding,E=r.body.endPTS+e.bufferPadding,a>=l&&E>=a&&(n=Math['min'](a-l,E-a),n>=i&&(o=r.body,i=n)))}),o}},{'key':"getState",'value':function(a){var e=this['getFragmentKey'](a),n=this['fragments'][e],l=w.NOT_LOADED;return void 0!==n&&(l=n.buffered?this['isPartial'](n)===!0?w.PARTIAL:w.OK:w.APPENDING),l}},{'key':"isPartial",'value':function(a){return a['buffered']===!0&&(void 0!==a.range.video&&a.range['video']['partial']===!0||void 0!==a.range.audio&&a.range['audio']['partial']===!0)}},{'key':"isTimeBuffered",'value':function(a,e,n){for(var l=void 0,E=void 0,o=0;o<n.length;o++){if(l=n['start'](o)-this.bufferPadding,E=n['end'](o)+this.bufferPadding,a>=l&&E>=e)return!0;if(l>=e)return!1}return!1}},{'key':"onFragLoaded",'value':function(a){var e=a.frag;Number['isFinite'](e.sn)&&!e.bitrateTest&&(this['fragments'][this['getFragmentKey'](e)]={'body':e,'range':Object['create'](null),'buffered':!1})}},{'key':"onBufferAppended",'value':function(a){var e=this;this['timeRanges']=a.timeRanges,Object['keys'](this.timeRanges)['forEach'](function(a){var n=e['timeRanges'][a];e['detectEvictedFragments'](a,n)})}},{'key':"onFragBuffered",'value':function(a){this['detectPartialFragments'](a.frag)}},{'key':"hasFragment",'value':function(a){var e=this['getFragmentKey'](a);return void 0!==this['fragments'][e]}},{'key':"removeFragment",'value':function(a){var e=this['getFragmentKey'](a);delete this['fragments'][e]}},{'key':"removeAllFragments",'value':function(){this['fragments']=Object['create'](null)}}]),e}(d["default"])},{'257':257,'258':258}],'231':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(276),t=a(256),r=a(258),b=l(r),d=a(285),c=1e3,p=.5,w=function(){function a(e,n,l,o){E(this,a),this['config']=e,this['media']=n,this['fragmentTracker']=l,this['hls']=o,this['stallReported']=!1}return o(a,[{'key':"poll",'value':function(a,e){var n=this.config,l=this.media,E=l.currentTime,o=window['performance']['now']();if(E!==a)return this.stallReported&&(d['logger']['warn']("playback not stuck anymore @"+E+", after "+Math['round'](o-this.stalled)+"ms"),this['stallReported']=!1),this['stalled']=null,void(this['nudgeRetry']=0);if(!(l.ended||!l.buffered.length||l.readyState>2||l.seeking&&i['BufferHelper']['isBuffered'](l,E))){var t=o-this.stalled,r=i['BufferHelper']['bufferInfo'](l,E,n.maxBufferHole);if(!this.stalled)return void(this['stalled']=o);t>=c&&this['_reportStall'](r.len),this['_tryFixBufferStall'](r,t)}}},{'key':"_tryFixBufferStall",'value':function(a,e){var n=this.config,l=this.fragmentTracker,E=this.media,o=E.currentTime,i=l['getPartialFragment'](o);i&&this['_trySkipBufferHole'](i),a.len>p&&e>1e3*n.highBufferWatchdogPeriod&&(this['stalled']=null,this['_tryNudgeBuffer']())}},{'key':"_reportStall",'value':function(a){var e=this.hls,n=this.media,l=this.stallReported;l||(this['stallReported']=!0,d['logger']['warn']("Playback stalling at @"+n.currentTime+" due to low buffer"),e['trigger'](b["default"].ERROR,{'type':t.ErrorTypes.MEDIA_ERROR,'details':t.ErrorDetails.BUFFER_STALLED_ERROR,'fatal':!1,'buffer':a}))}},{'key':"_trySkipBufferHole",'value':function(a){for(var e=this.hls,n=this.media,l=n.currentTime,E=0,o=0;o<n.buffered.length;o++){var i=n['buffered']['start'](o);if(l>=E&&i>l)return n['currentTime']=Math['max'](i,n.currentTime+.1),d['logger']['warn']("skipping hole, adjusting currentTime from "+l+" to "+n.currentTime),this['stalled']=null,void e['trigger'](b["default"].ERROR,{'type':t.ErrorTypes.MEDIA_ERROR,'details':t.ErrorDetails.BUFFER_SEEK_OVER_HOLE,'fatal':!1,'reason':"fragment loaded with buffer holes, seeking from "+l+" to "+n.currentTime,'frag':a});E=n['buffered']['end'](o)}}},{'key':"_tryNudgeBuffer",'value':function(){var a=this.config,e=this.hls,n=this.media,l=n.currentTime,E=(this.nudgeRetry||0)+1;if(this['nudgeRetry']=E,E<a.nudgeMaxRetry){var o=l+E*a.nudgeOffset;d['logger']['log']("adjust currentTime from "+l+" to "+o),n['currentTime']=o,e['trigger'](b["default"].ERROR,{'type':t.ErrorTypes.MEDIA_ERROR,'details':t.ErrorDetails.BUFFER_NUDGE_ON_STALL,'fatal':!1})}else d['logger']['error']("still stuck in high buffer @"+l+" after "+a.nudgeMaxRetry+", raise fatal error"),e['trigger'](b["default"].ERROR,{'type':t.ErrorTypes.MEDIA_ERROR,'details':t.ErrorDetails.BUFFER_STALLED_ERROR,'fatal':!0})}}]),a}();n["default"]=w},{'256':256,'258':258,'276':276,'285':285}],'232':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=a(250),w=l(p),x=a(289),v=a(323),y=l(v),h=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].MEDIA_ATTACHED,b["default"].MEDIA_DETACHING,b["default"].FRAG_PARSING_METADATA));return n['id3Track']=void 0,n['media']=void 0,n['hls']=a,n}return i(e,a),t(e,[{'key':"destroy",'value':function(){c["default"].prototype['destroy']['call'](this)}},{'key':"onMediaAttached",'value':function(a){this['media']=a.media,!this.media}},{'key':"onMediaDetaching",'value':function(){x['clearCurrentCues'](this.id3Track),this['id3Track']=void 0,this['media']=void 0}},{'key':"getID3Track",'value':function(a){for(var e=0;e<a.length;e++){var n=a[e];if("metadata"===n.kind&&"id3"===n.label)return x['sendAddTrackEvent'](n,this.media),n}return this['media']['addTextTrack']("metadata","id3")}},{'key':"onFragParsingMetadata",'value':function(a){for(var e=a.frag,n=a.samples,l=0;l<n.length;l++){var E=w["default"]['getID3Frames'](n[l].data);if(E){var o=n[l].pts,i=l<n.length-1?n[l+1].pts:e.endPTS;o===i&&(i+=1e-4);for(var t=0;t<E.length;t++){var r=E[t];if(!w["default"]['isTimeStampFrame'](r)&&"TXXX"===r.key&&-1!==r['data']['indexOf']("xmlns:")){var b=void 0,d=void 0;b=r['info']['match'](/Track:(\S*),/)[1],d=r['info']['match'](/Lang:(\S*)/)[1],this['hls']['trigger'](y["default"].VO_HLS_ID3_FRAME_PROCESSED,{'startTime':o,'endTime':i,'track':b,'lang':d,'data':r.data})}}}}}}]),e}(c["default"]);n["default"]=h},{'250':250,'257':257,'258':258,'289':289,'323':323}],'233':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},r=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),b=a(2),d=l(b),c=a(258),p=l(c),w=a(257),x=l(w),v=a(285),y=a(256),h=a(277),s=a(234),D=a(291),m=(l(D),window),C=m.performance,f=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,p["default"].MANIFEST_LOADED,p["default"].LEVEL_LOADED,p["default"].AUDIO_TRACK_SWITCHED,p["default"].FRAG_LOADED,p["default"].ERROR));return n['canload']=!1,n['currentLevelIndex']=null,n['manualLevelIndex']=-1,n['timer']=null,n}return i(e,a),r(e,[{'key':"onHandlerDestroying",'value':function(){this['clearTimer'](),this['manualLevelIndex']=-1}},{'key':"clearTimer",'value':function(){null!==this.timer&&(clearTimeout(this.timer),this['timer']=null)}},{'key':"startLoad",'value':function(){var a=this._levels;this['canload']=!0,this['levelRetryCount']=0,a&&a['forEach'](function(a){a['loadError']=0;var e=a.details;e&&e.live&&(a['details']=void 0)}),null!==this.timer&&this['loadLevel']()}},{'key':"stopLoad",'value':function(){this['canload']=!1}},{'key':"onManifestLoaded",'value':function(a){var e=this,n=[],l=void 0,E={},o=null,i=!1,t=!1,r=/chrome|firefox/['test'](navigator['userAgent']['toLowerCase']()),b=[];if(a['levels']['forEach'](function(a){(a.videoCodec||a.attrs&&a.attrs.RESOLUTION)&&(i=!0),a['loadError']=0,a['fragmentError']=!1,i=i||!!a.videoCodec,t=t||!!a.audioCodec||!(!a.attrs||!a.attrs.AUDIO),r&&a.audioCodec&&-1!==a['audioCodec']['indexOf']("mp4a.40.34")&&(a['audioCodec']=void 0),o=E[a.bitrate],o?o['url']['push'](a.url):(a['url']=[a.url],a['urlId']=0,E[a.bitrate]=a,n['push'](a)),a.attrs&&a.attrs.AUDIO&&s['addGroupId'](o||a,"audio",a.attrs.AUDIO),a.attrs&&a.attrs.SUBTITLES&&s['addGroupId'](o||a,"text",a.attrs.SUBTITLES)}),i&&t&&(n=n['filter'](function(a){return a.videoCodec||a.attrs&&a.attrs.RESOLUTION})),n=n['filter'](function(a){var e=a.audioCodec,n=a.videoCodec;return(!e||h['isCodecSupportedInMp4'](e))&&(!n||h['isCodecSupportedInMp4'](n))}),a.audioTracks&&(b=a['audioTracks']['filter'](function(a){return!a.audioCodec||h['isCodecSupportedInMp4'](a.audioCodec,"audio")}),b['forEach'](function(a,e){a['id']=e})),n.length>0){n['sort'](function(a,e){return a.bitrate-e.bitrate}),l=this.hls.config.startupBitrate?this.hls.config.startupBitrate:n[0].bitrate,n['forEach'](function(a,e){a['id']=e}),this['_levels']=n,this['_firstLevel']=0;for(var c=0;c<n.length;c++){if(c===n.length-1){this['_firstLevel']=c;break}if(n[c]['bitrate']===l||n[c+1].bitrate>l&&n[c+1].bitrate-l>=l-n[c].bitrate){this['_firstLevel']=c;break}}l=n[this._firstLevel].bitrate,v['logger']['log']("manifest loaded,"+n.length+" level(s) found, first bitrate:"+l),n['forEach'](function(a){a['selInfo']=d["default"].VO_TRACK_SELECTINFO.TRACK_SELECTABLE,a.attrs&&a.attrs.AUDIO!==n[e._firstLevel].attrs.AUDIO&&(a.selInfo|=d["default"].VO_TRACK_SELECTINFO.TRACK_DISABLED)}),this['hls']['trigger'](p["default"].MANIFEST_PARSED,{'levels':n,'audioTracks':b,'firstLevel':this._firstLevel,'stats':a.stats,'audio':t,'video':i,'altAudio':b.length>0&&i})}else this['hls']['trigger'](p["default"].ERROR,{'type':y.ErrorTypes.MEDIA_ERROR,'details':y.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,'fatal':!0,'url':this.hls.url,'reason':"no level with compatible codecs found in manifest"})}},{'key':"setLevelInternal",'value':function(a){var e=this._levels,n=this.hls;if(a>=0&&a<e.length){if(this['clearTimer'](),this.currentLevelIndex!==a){v['logger']['log']("switching to level "+a),this['currentLevelIndex']=a;var l=e[a];l['level']=a,n['trigger'](p["default"].LEVEL_SWITCHING,l)}var E=e[a],o=E.details;if(!o||o.live){var i=E.urlId;n['trigger'](p["default"].LEVEL_LOADING,{'url':E['url'][i],'level':a,'id':i})}}else n['trigger'](p["default"].ERROR,{'type':y.ErrorTypes.OTHER_ERROR,'details':y.ErrorDetails.LEVEL_SWITCH_ERROR,'level':a,'fatal':!1,'reason':"invalid level idx"})}},{'key':"onError",'value':function(a){if(a.fatal)return void(a['type']===y.ErrorTypes.NETWORK_ERROR&&this['clearTimer']());var e=!1,n=!1,l=void 0;switch(a.details){case y.ErrorDetails.FRAG_LOAD_ERROR:case y.ErrorDetails.FRAG_LOAD_TIMEOUT:case y.ErrorDetails.KEY_LOAD_ERROR:case y.ErrorDetails.KEY_LOAD_TIMEOUT:l=a.frag.level,n=!0;break;case y.ErrorDetails.LEVEL_LOAD_ERROR:case y.ErrorDetails.LEVEL_LOAD_TIMEOUT:l=a.context.level,e=!0;break;case y.ErrorDetails.REMUX_ALLOC_ERROR:l=a.level,e=!0}void 0!==l&&this['recoverLevel'](a,l,e,n)}},{'key':"recoverLevel",'value':function(a,e,n,l){var E=this,o=this.hls.config,i=a.details,t=this['_levels'][e],r=void 0,b=void 0,d=void 0;if(t.loadError++,t['fragmentError']=l,n){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return v['logger']['error']("level controller, cannot recover from "+i+" error"),this['currentLevelIndex']=null,this['clearTimer'](),void(a['fatal']=!0);b=Math['min'](Math['pow'](2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this['timer']=setTimeout(function(){return E['loadLevel']()},b),a['levelRetry']=!0,this.levelRetryCount++,v['logger']['warn']("level controller, "+i+", retry in "+b+" ms, current retry count is "+this.levelRetryCount)}(n||l)&&(r=t.url.length,r>1&&t.loadError<r?(t['urlId']=(t.urlId+1)%r,t['details']=void 0,v['logger']['warn']("level controller, "+i+" for level "+e+": switching to redundant URL-id "+t.urlId)):-1===this.manualLevelIndex?(d=0===e?this._levels.length-1:e-1,v['logger']['warn']("level controller, "+i+": switch to "+d),this['hls']['nextAutoLevel']=this['currentLevelIndex']=d):l&&(v['logger']['warn']("level controller, "+i+": reload a fragment"),this['currentLevelIndex']=null))}},{'key':"onFragLoaded",'value':function(a){var e=a.frag;if(void 0!==e&&"main"===e.type){var n=this['_levels'][e.level];void 0!==n&&(n['fragmentError']=!1,n['loadError']=0,this['levelRetryCount']=0)}}},{'key':"onLevelLoaded",'value':function(a){var e=this,n=a.level;if(n===this.currentLevelIndex){var l=this['_levels'][n];l.fragmentError||(l['loadError']=0,this['levelRetryCount']=0);var E=a.details;if(this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_MANIFEST_INFO,{'mediaDuration':E.totalduration,'live':E.live,'url':this.hls.url,'levels':this._levels,'details':E,'lowLatencyMode':E.live&&this.hls.config.lowLatencyMode&&E.initSegment}),E.live){var o=1e3*(E.averagetargetduration?E.averagetargetduration:E.targetduration),i=o,t=l.details;t&&E['endSN']===t.endSN&&(i/=2,v['logger']['log']("same live playlist, reload twice faster")),i-=C['now']()-a.stats.trequest,i=Math['max'](o/2,Math['round'](i)),v['logger']['log']("live playlist, reload in "+Math['round'](i)+" ms"),this['timer']=setTimeout(function(){return e['loadLevel']()},i)}else this['clearTimer']()}}},{'key':"onAudioTrackSwitched",'value':function(a){var e=this['hls']['audioTracks'][a.id].groupId,n=this['hls']['levels'][this.currentLevelIndex];if(n&&n.audioGroupIds){var l=n['audioGroupIds']['findIndex'](function(a){return a===e});if(l!==n.urlId){this['_levels']['forEach'](function(a){a['selInfo']=d["default"].VO_TRACK_SELECTINFO.TRACK_SELECTABLE,a.attrs.AUDIO!==e&&(a.selInfo|=d["default"].VO_TRACK_SELECTINFO.TRACK_DISABLED)});for(var E=-1,o=-1,i=-1,t=0;t<this._levels.length;t++)if(0===(this['_levels'][t].selInfo&d["default"].VO_TRACK_SELECTINFO.TRACK_DISABLED)){if(!(this['_levels'][t].bitrate<=n.bitrate)){o=t;break}E=t}if(-1!==E&&-1!==o){var r=n.bitrate-this['_levels'][E].bitrate,b=this['_levels'][o].bitrate-n.bitrate;i=r>b?o:E}else i=-1!==E?E:o;-1!==this.manualLevelIndex?(this['manualLevelIndex']=i,this['_levels'][i].selInfo|=d["default"].VO_TRACK_SELECTINFO.TRACK_SELECTED):this['hls']['nextAutoLevel']=i,this['hls']['trigger'](this.hls.config.context.voHlsEvents.VO_HLS_AUDIO_GROUP_CHANGE)}}}},{'key':"loadLevel",'value':function(){if(v['logger']['debug']("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var a=this['_levels'][this.currentLevelIndex];if("object"===("undefined"==typeof a?"undefined":t(a))&&a.url.length>0){var e=this.currentLevelIndex,n=a.urlId,l=a['url'][n];v['logger']['log']("Attempt loading level index "+e+" with URL-id "+n),this['hls']['trigger'](p["default"].LEVEL_LOADING,{'url':l,'level':e,'id':n})}}}},{'key':"levels",'get':function(){return this._levels}},{'key':"level",'get':function(){return this.currentLevelIndex},'set':function(a){var e=this._levels;e&&(a=Math['min'](a,e.length-1),this['currentLevelIndex']===a&&e[a].details||this['setLevelInternal'](a))}},{'key':"manualLevel",'get':function(){return this.manualLevelIndex},'set':function(a){this['manualLevelIndex']=a,void 0===this._startLevel&&(this['_startLevel']=a),-1!==a&&(this['level']=a)}},{'key':"firstLevel",'get':function(){return this._firstLevel},'set':function(a){this['_firstLevel']=a}},{'key':"startLevel",'get':function(){if(void 0===this._startLevel){var a=this.hls.config.startLevel;return void 0!==a?a:this._firstLevel}return this._startLevel},'set':function(a){this['_startLevel']=a}},{'key':"nextLoadLevel",'get':function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},'set':function(a){this['level']=a,-1===this.manualLevelIndex&&(this['hls']['nextAutoLevel']=a)}}]),e}(x["default"]);n["default"]=f},{'2':2,'234':234,'256':256,'257':257,'258':258,'277':277,'285':285,'291':291}],'234':[function(a,e,n){"use strict";function l(a,e,n){switch(e){case"audio":a.audioGroupIds||(a['audioGroupIds']=[]),a['audioGroupIds']['push'](n);break;case"text":a.textGroupIds||(a['textGroupIds']=[]),a['textGroupIds']['push'](n)}}function E(a,e,n){var l=a[e],E=a[n],o=E.startPTS;Number['isFinite'](o)?n>e?(l['duration']=o-l.start,l.duration<0&&t['logger']['warn']("negative duration computed for frag "+l.sn+",level "+l.level+", there should be some duration drift between playlist and fragment!")):(E['duration']=l.start-o,E.duration<0&&t['logger']['warn']("negative duration computed for frag "+E.sn+",level "+E.level+", there should be some duration drift between playlist and fragment!")):n>e?E['start']=l.start+l.duration:E['start']=Math['max'](l.start-E.duration,0)}function o(a,e,n,l,o,i){var t=n;if(Number['isFinite'](e.startPTS)){var r=Math['abs'](e.startPTS-n);Number['isFinite'](e.deltaPTS)?e['deltaPTS']=Math['max'](r,e.deltaPTS):e['deltaPTS']=r,t=Math['max'](n,e.startPTS),n=Math['min'](n,e.startPTS),l=Math['max'](l,e.endPTS),o=Math['min'](o,e.startDTS),i=Math['max'](i,e.endDTS)}var b=n-e.start;e['start']=e['startPTS']=n,e['maxStartPTS']=t,e['endPTS']=l,e['startDTS']=o,e['endDTS']=i,e['duration']=l-n;var d=e.sn;if(!a||d<a.startSN||d>a.endSN)return 0;var c=void 0,p=void 0,w=void 0;for(c=d-a.startSN,p=a.fragments,p[c]=e,w=c;w>0;w--)E(p,w,w-1);for(w=c;w<p.length-1;w++)E(p,w,w+1);return a['PTSKnown']=!0,b}function i(a,e){var n=Math['max'](a.startSN,e.startSN)-e.startSN,l=Math['min'](a.endSN,e.endSN)-e.startSN,E=e.startSN-a.startSN,i=a.fragments,r=e.fragments,b=0,d=void 0;if(e.initSegment&&a.initSegment&&(e['initSegment']=a.initSegment),n>l)return void(e['PTSKnown']=!1);for(var c=n;l>=c;c++){var p=i[E+c],w=r[c];w&&p&&(b=p.cc-w.cc,Number['isFinite'](p.startPTS)&&(w['start']=w['startPTS']=p.startPTS,w['endPTS']=p.endPTS,w['duration']=p.duration,w['backtracked']=p.backtracked,w['dropped']=p.dropped,d=w))}if(b)for(t['logger']['log']("discontinuity sliding from playlist, take drift into account"),c=0;c<r.length;c++)r[c].cc+=b;if(d)o(e,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS);else if(E>=0&&E<i.length){var x=i[E].start;for(c=0;c<r.length;c++)r[c].start+=x}e['PTSKnown']=a.PTSKnown}Object['defineProperty'](n,"__esModule",{
value:!0}),n['addGroupId']=l,n['updatePTS']=E,n['updateFragPTSDTS']=o,n['mergeDetails']=i;var t=a(285)},{'285':285}],'235':[function(a,e,n){"use strict";function l(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var n in a)Object.prototype['hasOwnProperty']['call'](a,n)&&(e[n]=a[n]);return e["default"]=a,e}function E(a){return a&&a.__esModule?a:{"default":a}}function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function i(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function t(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0}),n['State']=void 0;var r=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),b=function O(a,e,n){null===a&&(a=Function.prototype);var l=Object['getOwnPropertyDescriptor'](a,e);if(void 0===l){var E=Object['getPrototypeOf'](a);return null===E?void 0:O(E,e,n)}if("value"in l)return l.value;var o=l.get;return void 0===o?void 0:o['call'](n)},d=a(275),c=E(d),p=a(276),w=a(248),x=E(w),v=a(258),y=E(v),h=a(230),s=a(262),D=E(s),m=a(267),C=E(m),f=a(234),g=l(f),k=a(290),M=E(k),P=a(256),T=a(285),u=a(279),A=a(272),R=E(A),S=a(229),U=a(231),I=E(U),J=a(273),L=n['State']={'STOPPED':"STOPPED",'IDLE':"IDLE",'KEY_LOADING':"KEY_LOADING",'FRAG_LOADING':"FRAG_LOADING",'FRAG_LOADING_WAITING_RETRY':"FRAG_LOADING_WAITING_RETRY",'WAITING_LEVEL':"WAITING_LEVEL",'PARSING':"PARSING",'PARSED':"PARSED",'BUFFER_FLUSHING':"BUFFER_FLUSHING",'ENDED':"ENDED",'ERROR':"ERROR"},N=function(a){function e(a,n){o(this,e);var l=i(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,y["default"].MEDIA_ATTACHED,y["default"].MEDIA_DETACHING,y["default"].MANIFEST_LOADING,y["default"].MANIFEST_PARSED,y["default"].LEVEL_LOADED,y["default"].KEY_LOADED,y["default"].FRAG_LOAD_PROGRESS,y["default"].FRAG_LOADED,y["default"].FRAG_LOAD_EMERGENCY_ABORTED,y["default"].FRAG_PARSING_INIT_SEGMENT,y["default"].FRAG_PARSING_DATA,y["default"].FRAG_PARSED,y["default"].ERROR,y["default"].AUDIO_TRACK_SWITCHING,y["default"].AUDIO_TRACK_SWITCHED,y["default"].BUFFER_CREATED,y["default"].BUFFER_APPENDED,y["default"].BUFFER_FLUSHED));return l['fragmentTracker']=n,l['config']=a.config,l['audioCodecSwap']=!1,l['_state']=L.STOPPED,l['stallReported']=!1,l['gapController']=null,l['speedUpThreshold']=3,l['validBufferArray']=[],l['liveProgramDateTime_']=-1,l['startPosition']=-1,l['startFragRequested']=!1,l['levelDetailInfo']=null,l}return t(e,a),r(e,[{'key':"onHandlerDestroying",'value':function(){this['stopLoad'](),b(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"onHandlerDestroying",this)['call'](this)}},{'key':"onHandlerDestroyed",'value':function(){this['state']=L.STOPPED,this['fragmentTracker']=null,b(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"onHandlerDestroyed",this)['call'](this)}},{'key':"recoverLoad",'value':function(){this._tickInterval||this['setInterval'](100)}},{'key':"startLoad",'value':function(a){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this['stopLoad'](),this.hls.updateDownloadNormal&&this['setInterval'](100),this['level']=-1,this['fragLoadError']=0,!this.startFragRequested){var l=n.startLevel;-1===l&&(l=0,this['bitrateTest']=!0),this['level']=n['nextLoadLevel']=l,this['loadedmetadata']=!1}e>0&&-1===a&&(T['logger']['log']("override startPosition with lastCurrentTime @"+e['toFixed'](3)),a=e),this['state']=L.IDLE,this['nextLoadPosition']=this['startPosition']=this['lastCurrentTime']=a,this['tick']()}else this['forceStartLoad']=!0,this['state']=L.STOPPED}},{'key':"stopLoad",'value':function(){var a=this.fragCurrent;a&&(a.loader&&(a['loader']['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'url':a._url,'droppedBytes':a.loaded,'downloadTime':a.loader.stats.tabort?a.loader.stats.tabort-a.loader.stats.tfirst:null})),this['fragmentTracker']['removeFragment'](a),this['fragCurrent']=null),this['fragPrevious']=null,this.demuxer&&(this['demuxer']['destroy'](),this['demuxer']=null),this['clearInterval'](),this['state']=L.STOPPED,this['forceStartLoad']=!1}},{'key':"doTick",'value':function(){switch(this.state){case L.BUFFER_FLUSHING:this['fragLoadError']=0;break;case L.IDLE:this['_doTickIdle']();break;case L.WAITING_LEVEL:var a=this['levels'][this.level];a&&a.details&&(this['state']=L.IDLE);break;case L.FRAG_LOADING_WAITING_RETRY:var e=window['performance']['now'](),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(T['logger']['log']("mediaController: retryDate reached, switch back to IDLE state"),this['state']=L.IDLE);break;case L.ERROR:case L.STOPPED:case L.FRAG_LOADING:case L.PARSING:case L.PARSED:case L.ENDED:}this['_checkBuffer'](),this['_checkFragmentChanged']()}},{'key':"_doTickIdle",'value':function(){var a=this.hls,e=a.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){var l=void 0;l=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var E=a.nextLoadLevel,o=this['levels'][E];if(o){var i=o.bitrate,t=void 0;t=i?Math['max'](8*e.maxBufferSize/i,e.maxBufferLength):e.maxBufferLength,t=Math['min'](t,e.maxMaxBufferLength);var r=p['BufferHelper']['bufferInfo'](this.mediaBuffer?this.mediaBuffer:n,l,e.maxBufferHole),b=r.len;if(!(b>=t)){T['logger']['trace']("buffer length of "+b['toFixed'](3)+" is below max of "+t['toFixed'](3)+". checking for more payload ..."),this['level']=a['nextLoadLevel']=E;var d=o.details;if(!d||d.live&&this.levelLastLoaded!==E)return void(this['state']=L.WAITING_LEVEL);var c=this.fragPrevious;if(!d.live&&c&&!c.backtracked&&c['sn']===d.endSN&&!r.nextStart){var w=Math['min'](n.duration,c.start+c.duration);if(w-Math['max'](r.end,c.start)<=Math['max'](.2,c.duration)){var x={};return this.altAudio&&(x['type']="video"),this['hls']['trigger'](y["default"].BUFFER_EOS,x),void(this['state']=L.ENDED)}}this.hls.updateDownloadNormal&&this['_fetchPayloadOrEos'](l,r,d)}}}}},{'key':"_fetchPayloadOrEos",'value':function(a,e,n){var l=this.fragPrevious,E=this.level,o=n.fragments,i=o.length;if(0!==i){var t=o[0].start,r=o[i-1].start+o[i-1].duration,b=e.end,d=void 0;if(n.initSegment&&!n.initSegment.data)d=n.initSegment;else if(n.live){var c=this.config.initialLiveManifestSize;if(c>i)return void T['logger']['warn']("Can not start playback of a level, reason: not enough fragments "+i+" < "+c);if(d=this['_ensureFragmentAtLivePoint'](n,b,t,r,l,o,i),null===d)return}else t>b&&(d=o[0]);d||(d=this['_findFragment'](t,l,i,o,b,r,n)),d&&(d.encrypted?(T['logger']['log']("Loading key for "+d.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+E),this['_loadKey'](d)):(T['logger']['log']("Loading "+d.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+E+", currentTime:"+a['toFixed'](3)+",'bufferEnd':"+b['toFixed'](3)),this['_loadFragment'](d,n)))}}},{'key':"_ensureFragmentAtLivePoint",'value':function(a,e,n,l,E,o,i){var t=this.hls.config,r=this.media,b=void 0,d=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*a.targetduration;if(e<Math['max'](n-t.maxFragLookUpTolerance,l-d)){var p=this['liveSyncPosition']=this['computeLivePosition'](n,a);T['logger']['log']("buffer end: "+e['toFixed'](3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+p['toFixed'](3)),e=p,r&&r.readyState&&r.duration>=p&&!r.seeking&&(r['currentTime']=p),this['nextLoadPosition']=p}if(a.PTSKnown&&e>l&&r&&r.readyState)return null;if(this.startFragRequested&&!a.PTSKnown){if(E)if(a.hasProgramDateTime)T['logger']['log']("live playlist, switching playlist, load frag with same PDT: "+E.programDateTime),b=S['findFragmentByPDT'](o,E.endProgramDateTime,t.maxFragLookUpTolerance);else{var w=E.sn+1;if(w>=a.startSN&&w<=a.endSN){var x=o[w-a.startSN];E['cc']===x.cc&&(b=x,T['logger']['log']("live playlist, switching playlist, load frag with next SN: "+b.sn))}b||(b=c["default"]['search'](o,function(a){return E.cc-a.cc}),b&&T['logger']['log']("live playlist, switching playlist, load frag with same CC: "+b.sn))}b||(b=o[Math['min'](i-1,Math['round'](i/2))],T['logger']['log']("live playlist, switching playlist, unknown, load middle frag : "+b.sn))}return b}},{'key':"_findFragment",'value':function(a,e,n,l,E,o,i){var t=this.hls.config,r=void 0;if(o>E){var b=E>o-t.maxFragLookUpTolerance?0:t.maxFragLookUpTolerance;r=S['findFragmentByPTS'](e,l,E,b)}else r=l[n-1];if(r){var d=r.sn-i.startSN,c=e&&r['level']===e.level,p=l[d-1],w=l[d+1];if(e&&r['sn']===e.sn)if(c&&!r.backtracked)if(r.sn<i.endSN){var x=e.deltaPTS;x&&x>t.maxBufferHole&&e.dropped&&d?(r=p,T['logger']['warn']("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(r=w,T['logger']['log']("SN just loaded, load next one: "+r.sn,r))}else r=null;else r.backtracked&&(w&&w.backtracked?(T['logger']['warn']("Already backtracked from fragment "+w.sn+", will not backtrack to fragment "+r.sn+". Loading fragment "+w.sn),r=w):(T['logger']['warn']("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),r['dropped']=0,p?(r=p,r['backtracked']=!0):d&&(r=null)))}return r}},{'key':"_loadKey",'value':function(a){this['state']=L.KEY_LOADING,this['hls']['trigger'](y["default"].KEY_LOADING,{'frag':a})}},{'key':"_loadFragment",'value':function(a,e){var n=this['fragmentTracker']['getState'](a);this['fragCurrent']=a,a!==e.initSegment&&(this['startFragRequested']=!0),Number['isFinite'](a.sn)&&!a.bitrateTest&&(this['nextLoadPosition']=a.start+a.duration),a.backtracked||n===h.FragmentState.NOT_LOADED||n===h.FragmentState.PARTIAL?(a['autoLevel']=this.hls.autoLevelEnabled,a['bitrateTest']=this.bitrateTest,a['loadedBytes']=null,a['isFirstLoading']=void 0,this['isCmafLiveLowLatency'](e)?(a['loaderType']="fetch",a['flagIsFirstParsing']=void 0,this.hls['config']['enableWorker']=!1):a['loaderType']="xhr",this['hls']['trigger'](y["default"].FRAG_LOADING,{'frag':a}),this.demuxer||(this['demuxer']=new x["default"](this.hls,"main")),this['state']=L.FRAG_LOADING):n===h.FragmentState.APPENDING&&this['_reduceMaxBufferLength'](a.duration)&&this['fragmentTracker']['removeFragment'](a)}},{'key':"getBufferedFrag",'value':function(a){return this['fragmentTracker']['getBufferedFrag'](a,C["default"].LevelType.MAIN)}},{'key':"followingBufferedFrag",'value':function(a){return a?this['getBufferedFrag'](a.endPTS+.5):null}},{'key':"_checkFragmentChanged",'value':function(){var a=void 0,e=void 0,n=this.media;if(n&&n.readyState&&n['seeking']===!1&&(e=n.currentTime,e>this.lastCurrentTime&&(this['lastCurrentTime']=e),p['BufferHelper']['isBuffered'](n,e)?a=this['getBufferedFrag'](e):p['BufferHelper']['isBuffered'](n,e+.1)&&(a=this['getBufferedFrag'](e+.1)),a)){var l=a;if(l!==this.fragPlaying){this['hls']['trigger'](y["default"].FRAG_CHANGED,{'frag':l});var E=l.level;this.fragPlaying&&this['fragPlaying']['level']===E||(T['logger']['log']("[checkFragmentChanged][BA] new BA["+E+"]: resolution: "+this['levels'][E].width+" X "+this['levels'][E].height+(", bandwidth: "+Math['round'](this['levels'][E].bitrate/1e3)+" kbps")),this['hls']['trigger'](y["default"].LEVEL_SWITCHED,{'oldQuality':this.fragPlaying?this.fragPlaying.level:NaN,'newQuality':E,'oldBandwidth':this.fragPlaying?this['levels'][this.fragPlaying.level].bitrate:NaN,'newBandwidth':this['levels'][E].bitrate,'frameRate':this['levels'][E].framerate,'width':this['levels'][E].width,'height':this['levels'][E].height,'codec':this['levels'][E].audioCodec+", "+this['levels'][E].videoCodec})),this['fragPlaying']=l}}}},{'key':"catchUpLivePos",'value':function(){var a=this.media,e=a.currentTime,n=p['BufferHelper']['bufferInfo'](a,e,0),l=this['levels'][this.level],E=l?l.details:null;if(E&&E.live&&E.initSegment){var o=this.config.minPlaybackRateChange,i=this.config.LOWLATENCY_CATCHUP_THRESHOLD,t=this.config.liveCatchUpPlaybackRate,r=this.config.liveDelay,b=this['hls']['getCurrentLiveLatency'](),d=b-r,c=5*d,w=2*t/(1+Math['pow'](Math.E,-c)),x=1-t+w,v=n.len;this.config.lowLatencyMode&&0>d&&v>=Math['min'](r,i)/2?x=1:v>Math['min'](r,i)||(x=v>=Math['min'](r,i)/2?1:.8),Math['abs'](this.media.playbackRate-x)>o&&(this['media']['playbackRate']=x),T['logger']['log']("Buffer level: "+v['toFixed'](3)+", time: "+e['toFixed'](3)+" latency: "+b['toFixed'](3)+", target latency: "+r+", curPlaybackRate = "+this.media['playbackRate']['toFixed'](3))}}},{'key':"immediateLevelSwitch",'value':function(){if(T['logger']['log']("immediateLevelSwitch"),!this.immediateSwitch){this['immediateSwitch']=!0;var a=this.media,e=void 0;a?(e=a.paused,a['pause']()):e=!0,this['previouslyPaused']=e}var n=this.fragCurrent;n&&n.loader&&(n['loader']['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'url':n._url,'droppedBytes':n.loaded,'downloadTime':n.loader.stats.tabort?n.loader.stats.tabort-n.loader.stats.tfirst:null})),this['fragCurrent']=null,this['flushMainBuffer'](0,Number.POSITIVE_INFINITY)}},{'key':"immediateLevelSwitchEnd",'value':function(){var a=this.media;a&&a.buffered.length&&(this['immediateSwitch']=!1,p['BufferHelper']['isBuffered'](a,a.currentTime)&&(a.currentTime-=1e-4),this.previouslyPaused||a['play']())}},{'key':"nextLevelSwitch",'value':function(){var a=this.media;if(a&&a.readyState){var e=void 0,n=void 0,l=void 0;if(n=this['getBufferedFrag'](a.currentTime),n&&n.startPTS>1&&this['flushMainBuffer'](0,n.startPTS-1),a.paused)e=0;else{var E=this.hls.nextLoadLevel,o=this['levels'][E],i=this.fragLastKbps;e=i&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*i)+1:0}if(l=this['getBufferedFrag'](a.currentTime+e),l&&(l=this['followingBufferedFrag'](l))){var t=this.fragCurrent;t&&t.loader&&(t['loader']['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'url':t._url,'droppedBytes':t.loaded,'downloadTime':t.loader.stats.tabort?t.loader.stats.tabort-t.loader.stats.tfirst:null})),this['fragCurrent']=null,this['flushMainBuffer'](l.maxStartPTS,Number.POSITIVE_INFINITY)}}}},{'key':"flushMainBuffer",'value':function(a,e){this['state']=L.BUFFER_FLUSHING;var n={'startOffset':a,'endOffset':e};this.altAudio&&(n['type']="video"),this['hls']['trigger'](y["default"].BUFFER_FLUSHING,n)}},{'key':"onMediaAttached",'value':function(a){var e=this['media']=this['mediaBuffer']=a.media;this['onvseeking']=this['onMediaSeeking']['bind'](this),this['onvseeked']=this['onMediaSeeked']['bind'](this),this['onvended']=this['onMediaEnded']['bind'](this),e['addEventListener']("seeking",this.onvseeking),e['addEventListener']("seeked",this.onvseeked),e['addEventListener']("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this['hls']['startLoad'](n.startPosition),this['gapController']=new I["default"](n,e,this.fragmentTracker,this.hls)}},{'key':"onMediaDetaching",'value':function(){var a=this.media;a&&a.ended&&(T['logger']['log']("MSE detaching and video ended, reset startPosition"),this['startPosition']=this['lastCurrentTime']=0);var e=this.levels;e&&e['forEach'](function(a){a.details&&a.details['fragments']['forEach'](function(a){a['backtracked']=void 0})}),a&&(a['removeEventListener']("seeking",this.onvseeking),a['removeEventListener']("seeked",this.onvseeked),a['removeEventListener']("ended",this.onvended),this['onvseeking']=this['onvseeked']=this['onvended']=null),this['media']=this['mediaBuffer']=null,this['loadedmetadata']=!1,this['stopLoad']()}},{'key':"onMediaSeeking",'value':function(){var a=this.media,e=a?a.currentTime:void 0,n=this.config;Number['isFinite'](e)&&T['logger']['log']("media seeking to "+e['toFixed'](3));var l=this.mediaBuffer?this.mediaBuffer:a,E=p['BufferHelper']['bufferInfo'](l,e,this.config.maxBufferHole);if(this['state']===L.FRAG_LOADING){var o=this.fragCurrent;if(0===E.len&&o){var i=n.maxFragLookUpTolerance,t=o.start-i,r=o.start+o.duration+i;t>e||e>r?(o.loader&&(T['logger']['log']("seeking outside of buffer while fragment load in progress, cancel fragment load"),o['loader']['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'url':o._url,'droppedBytes':o.loaded,'downloadTime':o.loader.stats.tabort?o.loader.stats.tabort-o.loader.stats.tfirst:null})),this['fragCurrent']=null,this['fragPrevious']=null,this['state']=L.IDLE):T['logger']['log']("seeking outside of buffer but within currently loaded fragment range")}}else this['state']===L.ENDED&&(0===E.len&&(this['fragPrevious']=0),this['state']=L.IDLE);a&&(this['lastCurrentTime']=e),this.loadedmetadata||(this['nextLoadPosition']=this['startPosition']=e),this['tick']()}},{'key':"onMediaSeeked",'value':function(){var a=this.media,e=a?a.currentTime:void 0;Number['isFinite'](e)&&T['logger']['log']("media seeked to "+e['toFixed'](3)),this['tick']()}},{'key':"onMediaEnded",'value':function(){T['logger']['log']("media ended"),this['startPosition']=this['lastCurrentTime']=0}},{'key':"onManifestLoading",'value':function(){T['logger']['log']("trigger BUFFER_RESET"),this['hls']['trigger'](y["default"].BUFFER_RESET),this['fragmentTracker']['removeAllFragments'](),this['stalled']=!1,this['startPosition']=this['lastCurrentTime']=0}},{'key':"onManifestParsed",'value':function(a){var e=!1,n=!1,l=void 0;a['levels']['forEach'](function(a){l=a.audioCodec,l&&(-1!==l['indexOf']("mp4a.40.2")&&(e=!0),-1!==l['indexOf']("mp4a.40.5")&&(n=!0))}),this['audioCodecSwitch']=e&&n,this.audioCodecSwitch&&T['logger']['log']("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this['levels']=a.levels,this['startFragRequested']=!1;var E=this.config;(E.autoStartLoad||this.forceStartLoad)&&this['hls']['startLoad'](E.startPosition)}},{'key':"onLevelLoaded",'value':function(a){var e=a.details,n=a.level,l=this['levels'][this.levelLastLoaded],E=this['levels'][n],o=e.totalduration,i=0;if(T['logger']['log']("level "+n+" loaded ["+e.startSN+","+e.endSN+"],'duration':"+o),e.live){-1===this.liveProgramDateTime_&&e['fragments'][0].programDateTime&&(this['liveProgramDateTime_']=e['fragments'][0].programDateTime);var t=E.details;t&&e.fragments.length>0?(g['mergeDetails'](t,e),i=e['fragments'][0].start,this['liveSyncPosition']=this['computeLivePosition'](i,t),e.PTSKnown&&Number['isFinite'](i)?T['logger']['log']("live playlist sliding:"+i['toFixed'](3)):(T['logger']['log']("live playlist - outdated PTS, unknown sliding"),u['alignStream'](this.fragPrevious,l,e))):(this.levelDetailInfo||(this['liveSyncPosition']=this['computeLivePosition'](0,e)),T['logger']['log']("live playlist - first load after switch level, unknown sliding"),e['PTSKnown']=!1,u['alignStream'](this.fragPrevious,l,e))}else{var r=E.details;r&&r.live?g['mergeDetails'](r,e):e['PTSKnown']=!1}E['details']=e,this['levelLastLoaded']=n,this['levelDetailInfo']={'details':e,'level':n},this['hls']['trigger'](y["default"].LEVEL_UPDATED,{'details':e,'level':n}),this['computeStartPosition'](i,e),this['state']===L.WAITING_LEVEL&&(this['state']=L.IDLE),this['tick']()}},{'key':"onKeyLoaded",'value':function(){this['state']===L.KEY_LOADING&&(this['state']=L.IDLE,this['tick']())}},{'key':"onFragLoadProgress",'value':function(a){var e=this.fragCurrent,n=(this.hls,this.levels),l=this.media,E=a.frag;if((this['state']===L.FRAG_LOADING||"fetch"===E.loaderType)&&e&&"main"===E.type&&E['level']===e.level&&E['sn']===e.sn&&a.payload){T['logger']['log']("onFragLoadProgress");var o=a.stats,i=n[e.level],t=i.details;if(this['bitrateTest']=!1,this['stats']=o,e['isLoaded']=!1,void 0===e.isFirstLoading?e['isFirstLoading']=!0:e.isFirstLoading&&(e['isFirstLoading']=!1),"initSegment"===E.sn)e['loadedBytes']=J['appendArrayBuffer'](e.loadedBytes,a.payload);else{T['logger']['log']("Parsing "+e.sn+" of ["+t.startSN+" ,"+t.endSN+"],level "+e.level+", cc "+e.cc),"xhr"===E.loaderType&&(this['state']=L.PARSING),this['pendingBuffering']=!0,this['appended']=!1;var r=!(l&&l.seeking)&&(t.PTSKnown||!t.live),b=t.initSegment?t.initSegment.data:[],d=this['_getAudioCodec'](i),c=this['demuxer']=this.demuxer||new x["default"](this.hls,"main");c['push'](a.payload,b,d,i.videoCodec,e,t.totalduration,r)}}}},{'key':"onFragLoaded",'value':function(a){var e=this.fragCurrent,n=this.hls,l=this.levels,E=this.media,o=a.frag;if((this['state']===L.FRAG_LOADING||"fetch"===o.loaderType)&&e&&"main"===o.type&&o['level']===e.level&&o['sn']===e.sn){var i=a.stats,t=l[e.level],r=t.details;this['bitrateTest']=!1,this['stats']=i,e['isLoaded']=!0,void 0===e.isFirstLoading?e['isFirstLoading']=!0:e.isFirstLoading&&(e['isFirstLoading']=!1);var b=Math['round'](8*this.stats.loaded/o.duration);if(this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_STREAM_BITRATE,{'Bitrate':b}),T['logger']['log']("Loaded "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e.level),o.bitrateTest&&n.nextLoadLevel)this['state']=L.IDLE,this['startFragRequested']=!1,i['tparsed']=i['tbuffered']=window['performance']['now'](),n['trigger'](y["default"].FRAG_BUFFERED,{'stats':i,'frag':e,'id':"main"}),this['tick']();else if("initSegment"===o.sn)this['state']=L.IDLE,i['tparsed']=i['tbuffered']=window['performance']['now'](),a.payload&&(e['loadedBytes']=J['appendArrayBuffer'](e.loadedBytes,a.payload)),r['initSegment']['data']=e.loadedBytes,n['trigger'](y["default"].FRAG_BUFFERED,{'stats':i,'frag':e,'id':"main"}),this['tick']();else{T['logger']['log']("Parsing "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e.level+", cc "+e.cc),"xhr"===o.loaderType&&(this['state']=L.PARSING),this['pendingBuffering']=!0,this['appended']=!1,o.bitrateTest&&(o['bitrateTest']=!1,this['fragmentTracker']['onFragLoaded']({'frag':o}));var d=!(E&&E.seeking)&&(r.PTSKnown||!r.live),c=r.initSegment?r.initSegment.data:[],p=this['_getAudioCodec'](t),w=this['demuxer']=this.demuxer||new x["default"](this.hls,"main");w['push'](a.payload,c,p,t.videoCodec,e,r.totalduration,d)}}this['fragLoadError']=0}},{'key':"onFragParsingInitSegment",'value':function(a){T['logger']['log']("onFragParsingInitSegment");var e=this.fragCurrent,n=a.frag;if(e&&"main"===a.id&&n['sn']===e.sn&&n['level']===e.level&&(this['state']===L.PARSING||"fetch"===n.loaderType)){var l=a.tracks,E=void 0,o=void 0;if(l.audio&&this.altAudio&&delete l.audio,o=l.audio){var i=this['levels'][this.level].audioCodec,t=navigator['userAgent']['toLowerCase']();i&&this.audioCodecSwap&&(T['logger']['log']("swapping playlist audio codec"),i=-1!==i['indexOf']("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===t['indexOf']("firefox")&&(i="mp4a.40.5"),-1!==t['indexOf']("android")&&"audio/mpeg"!==o.container&&(i="mp4a.40.2",T['logger']['log']("Android: force audio codec to "+i)),o['levelCodec']=i,o['id']=a.id}o=l.video,o&&(o['levelCodec']=this['levels'][this.level].videoCodec,o['id']=a.id),this['hls']['trigger'](y["default"].BUFFER_CODECS,l);for(E in l){o=l[E],T['logger']['log']("main track:"+E+",'container':"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var r=o.initSegment;r&&(this['appended']=!0,this['pendingBuffering']=!0,this['hls']['trigger'](y["default"].BUFFER_APPENDING,{'type':E,'data':r,'parent':"main",'content':"initSegment",'level':n.level,'sn':n.sn,'codec':o.codec}))}this['tick']()}}},{'key':"onFragParsingData",'value':function(a){T['logger']['log']("onFragParsingData");var e=this.fragCurrent,n=a.frag;if(e&&"main"===a.id&&n['sn']===e.sn&&n['level']===e.level&&("audio"!==a.type||!this.altAudio)&&(this['state']===L.PARSING||"fetch"===n.loaderType)){var l=this['levels'][this.level],E=e;if("xhr"===n.loaderType?(Number['isFinite'](a.endPTS)||(a['endPTS']=a.startPTS+e.duration,a['endDTS']=a.startDTS+e.duration),T['logger']['log']("Parsed "+a.type+",'PTS':["+a['startPTS']['toFixed'](3)+", "+a['endPTS']['toFixed'](3)+"],'DTS':["+a['startDTS']['toFixed'](3)+"/ "+a['endDTS']['toFixed'](3)+"],'nb':"+a.nb+",'dropped':"+(a.dropped||0))):"fetch"===n.loaderType&&(void 0===n.flagIsFirstParsing?n['flagIsFirstParsing']=!0:n['flagIsFirstParsing']=!1,n.flagIsFirstParsing?(n['voStartPTS']=a.startPTS,n['voStartDTS']=a.startDTS,T['logger']['log']("Parsed, "+a.type+", start, PTS:["+a['startPTS']['toFixed'](3)+", null],'DTS':["+a['startDTS']['toFixed'](3)+", null],'nb':"+a.nb+",'dropped':"+(a.dropped||0))):n.isLoaded?(a['startPTS']=n.voStartDTS,a['startDTS']=n.voStartDTS,Number['isFinite'](a.endPTS)||(a['endPTS']=a.startPTS+e.duration,a['endDTS']=a.startDTS+e.duration),T['logger']['log']("Parsed, "+a.type+", end, PTS:["+a['startPTS']['toFixed'](3)+", "+a['endPTS']['toFixed'](3)+"],'DTS':["+a['startDTS']['toFixed'](3)+", "+a['endDTS']['toFixed'](3)+"],'nb':"+a.nb+",'dropped':"+(a.dropped||0))):T['logger']['log']("Parsed, "+a.type+", mid, PTS:["+a['startPTS']['toFixed'](3)+", null],'DTS':["+a['startDTS']['toFixed'](3)+", null],'nb':"+a.nb+",'dropped':"+(a.dropped||0))),a['hasAudio']===!0&&E['addElementaryStream'](D["default"].ElementaryStreamTypes.AUDIO),a['hasVideo']===!0&&E['addElementaryStream'](D["default"].ElementaryStreamTypes.VIDEO),"video"===a.type)if(E['dropped']=a.dropped,E.dropped)if(E.backtracked)T['logger']['warn']("Already backtracked on this fragment, appending with the gap",E.sn);else{var o=l.details;if(!o||E.sn!==o.startSN)return T['logger']['warn']("missing video frame(s), backtracking fragment",E.sn),this['fragmentTracker']['removeFragment'](E),E['backtracked']=!0,this['nextLoadPosition']=a.startPTS,this['state']=L.IDLE,this['fragPrevious']=E,void this['tick']();T['logger']['warn']("missing video frame(s) on first frag, appending with gap",E.sn)}else E['backtracked']=!1;var i=this.hls;if("xhr"===n.loaderType){var t=g['updateFragPTSDTS'](l.details,E,a.startPTS,a.endPTS,a.startDTS,a.endDTS);i['trigger'](y["default"].LEVEL_PTS_UPDATED,{'details':l.details,'level':this.level,'drift':t,'type':a.type,'start':a.startPTS,'end':a.endPTS})}else if("fetch"===n.loaderType&&n.isLoaded){var r=g['updateFragPTSDTS'](l.details,E,a.startPTS,a.endPTS,a.startDTS,a.endDTS);i['trigger'](y["default"].LEVEL_PTS_UPDATED,{'details':l.details,'level':this.level,'drift':r,'type':a.type,'start':a.startPTS,'end':a.endPTS})}!a.data1&&!a.isLoaded||this.state!==L.PARSING&&"fetch"!==n.loaderType||(this['appended']=!0,this['pendingBuffering']=!0,i['trigger'](y["default"].BUFFER_APPENDING,{'type':a.type,'data':a.data1,'parent':"main",'content':"data",'level':n.level,'sn':n.sn,'index':0,'isLoaded':a.isLoaded})),a.data2&&a.data2.length&&(this['state']===L.PARSING||"fetch"===n.loaderType)&&(this['appended']=!0,this['pendingBuffering']=!0,i['trigger'](y["default"].BUFFER_APPENDING,{'type':a.type,'data':a.data2,'parent':"main",'content':"data",'level':n.level,'sn':n.sn,'index':1,'isLoaded':a.isLoaded})),this['tick']()}}},{'key':"onFragParsed",'value':function(a){T['logger']['log']("onFragParsed");var e=this.fragCurrent,n=a.frag;!e||"main"!==a.id||n.sn!==e.sn||n.level!==e.level||this.state!==L.PARSING&&"fetch"!==n.loaderType||(this['stats']['tparsed']=window['performance']['now'](),this.state!==L.IDLE&&(this['state']=L.PARSED),this['_checkAppendedParsed'](a.isLoaded))}},{'key':"onAudioTrackSwitching",'value':function(a){var e=!!a.url,n=a.id;if(!e){if(this.mediaBuffer!==this.media){this['mediaBuffer']=this.media;var l=this.fragCurrent;l.loader&&(T['logger']['log']("switching to main audio track, cancel main fragment load"),l['loader']['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'url':l._url,'droppedBytes':l.loaded,'downloadTime':l.loader.stats.tabort?l.loader.stats.tabort-l.loader.stats.tfirst:null})),this['fragCurrent']=null,this['fragPrevious']=null,this.demuxer&&(this['demuxer']['destroy'](),this['demuxer']=null),this['state']=L.IDLE}var E=this.hls;E['trigger'](y["default"].BUFFER_FLUSHING,{'startOffset':0,'endOffset':Number.POSITIVE_INFINITY,'type':"audio"}),E['trigger'](y["default"].AUDIO_TRACK_SWITCHED,{'id':n,'lang':a.lang}),this['altAudio']=!1}}},{'key':"onAudioTrackSwitched",'value':function(a){var e=a.id,n=!!this['hls']['audioTracks'][e].url;if(n){var l=this.videoBuffer;l&&this.mediaBuffer!==l&&(this['mediaBuffer']=l)}this['altAudio']=n,this['tick']()}},{'key':"onBufferCreated",'value':function(a){var e=a.tracks,n=void 0,l=void 0,E=!1;for(var o in e){var i=e[o];"main"===i.id?(l=o,n=i,"video"===o&&(this['videoBuffer']=e[o].buffer)):E=!0}E&&n?this['mediaBuffer']=n.buffer:this['mediaBuffer']=this.media}},{'key':"onBufferAppended",'value':function(a){if(T['logger']['log']("onBufferAppended, data.isLoaded: "+a.isLoaded+", state: "+this.state),"main"===a.parent){var e=this.state;(e===L.PARSING||e===L.PARSED)&&(this['pendingBuffering']=a.pending>0,this['_checkAppendedParsed'](a.isLoaded))}}},{'key':"_checkAppendedParsed",'value':function(a){if(this['state']===L.PARSED){var e=this.fragCurrent;if(this.appended&&this.pendingBuffering)this.config.lowLatencyMode&&(T['logger']['log']("_checkAppendedParsed, tick in lowLatencyMode although have pending buffers"),this['tick']());else if(e){var n=this.mediaBuffer?this.mediaBuffer:this.media;if(T['logger']['log']("main buffered : "+M["default"]['toString'](n.buffered)+", pos: "+this.media.currentTime),a){this['fragPrevious']=e;var l=this.stats;l['tbuffered']=window['performance']['now'](),this['fragLastKbps']=Math['round'](8*l.total/(l.tbuffered-l.tfirst)),this['hls']['trigger'](y["default"].FRAG_BUFFERED,{'stats':l,'frag':e,'id':"main"}),this['state']=L.IDLE}}}}},{'key':"onError",'value':function(a){var e=a.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&p['BufferHelper']['isBuffered'](this.media,this.media.currentTime)&&p['BufferHelper']['isBuffered'](this.media,this.media.currentTime+.5);switch(a.details){case P.ErrorDetails.FRAG_LOAD_ERROR:case P.ErrorDetails.FRAG_LOAD_TIMEOUT:case P.ErrorDetails.KEY_LOAD_ERROR:case P.ErrorDetails.KEY_LOAD_TIMEOUT:if(!a.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var l=Math['min'](Math['pow'](2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);T['logger']['warn']("mediaController: frag loading failed, retry in "+l+" ms"),this['retryDate']=window['performance']['now']()+l,this.loadedmetadata||(this['startFragRequested']=!1,this['nextLoadPosition']=this.startPosition),this.fragLoadError++,this['state']=L.FRAG_LOADING_WAITING_RETRY}else T['logger']['error']("mediaController: "+a.details+" reaches max retry, redispatch as fatal ..."),a['fatal']=!0,this['state']=L.ERROR;break;case P.ErrorDetails.LEVEL_LOAD_ERROR:case P.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==L.ERROR&&(a.fatal?(this['state']=L.ERROR,T['logger']['warn']("streamController: "+a.details+",switch to "+this.state+" state ...")):a.levelRetry||this.state!==L.WAITING_LEVEL||(this['state']=L.IDLE));break;case P.ErrorDetails.BUFFER_FULL_ERROR:"main"!==a.parent||this.state!==L.PARSING&&this.state!==L.PARSED||(n?(this['_reduceMaxBufferLength'](this.config.maxBufferLength),this['state']=L.IDLE):(T['logger']['warn']("buffer full error also media.currentTime is not buffered, flush everything"),this['fragCurrent']=null,this['flushMainBuffer'](0,Number.POSITIVE_INFINITY)))}}}},{'key':"_reduceMaxBufferLength",'value':function(a){var e=this.config;return e.maxMaxBufferLength>=a?(e.maxMaxBufferLength/=2,T['logger']['warn']("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0):!1}},{'key':"_checkBuffer",'value':function(){var a=this.media;if(a&&0!==a.readyState){var e=this.mediaBuffer?this.mediaBuffer:a,n=e.buffered;!this.loadedmetadata&&n.length?(this['loadedmetadata']=!0,this['_seekToStartPos']()):this.immediateSwitch?this['immediateLevelSwitchEnd']():(this['catchUpLivePos'](),this['gapController']['poll'](this.lastCurrentTime,n))}}},{'key':"onFragLoadEmergencyAborted",'value':function(){this['state']=L.IDLE,this.loadedmetadata||(this['startFragRequested']=!1,this['nextLoadPosition']=this.startPosition),this['tick']()}},{'key':"onBufferFlushed",'value':function(){var a=this.mediaBuffer?this.mediaBuffer:this.media;a&&this['fragmentTracker']['detectEvictedFragments'](D["default"].ElementaryStreamTypes.VIDEO,a.buffered),this['state']=L.IDLE,this['fragPrevious']=null}},{'key':"swapAudioCodec",'value':function(){this['audioCodecSwap']=!this.audioCodecSwap}},{'key':"computeLivePosition",'value':function(a,e){var n=void 0,l=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return n=a+Math['max'](0,e.totalduration-l)}},{'key':"_seekToStartPos",'value':function(){var a=this.media,e=a.currentTime,n=a.seeking?e:this.startPosition;if(e!==n){T['logger']['log']("target start position not buffered, seek to buffered['start'](0) "+n+" from current time "+e+" ");var l,E=M["default"]['toString'](a.seekable);l=this['isCmafLiveLowLatency'](this.levelDetailInfo.details)?n-.5:n,a['currentTime']=n,T['logger']['log']("_seekToStartPos, seekable: "+E+", seek to: "+l+", out: "+a.currentTime)}}},{'key':"_getAudioCodec",'value':function(a){var e=this.config.defaultAudioCodec||a.audioCodec;return this.audioCodecSwap&&(T['logger']['log']("swapping playlist audio codec"),e&&(e=-1!==e['indexOf']("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e}},{'key':"getProgramDateTime",'value':function(){return this.liveProgramDateTime_}},{'key':"isLiveLowLatency",'value':function(a){return this.config.lowLatencyMode&&a.live?!0:!1}},{'key':"isCmafLiveLowLatency",'value':function(a){return this.config.lowLatencyMode&&a.live&&a.initSegment?!0:!1}},{'key':"computeStartPosition",'value':function(a,e){var n=e.totalduration;if(this['startFragRequested']===!1){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;Number['isFinite'](l)?(0>l&&(T['logger']['log']("negative start time offset "+l+", count from end of last fragment"),l=a+n+l),T['logger']['log']("start time offset found in playlist, adjust startPosition to "+l),this['startPosition']=l):e.live?(this['startPosition']=this['computeLivePosition'](a,e),T['logger']['log']("configure startPosition to "+this.startPosition)):this['startPosition']=0,this['lastCurrentTime']=this.startPosition;
}this['nextLoadPosition']=this.startPosition}}},{'key':"state",'set':function(a){if(this.state!==a){var e=this.state;this['_state']=a,T['logger']['log']("main stream:"+e+"->"+a),this['hls']['trigger'](y["default"].STREAM_STATE_TRANSITION,{'previousState':e,'nextState':a})}},'get':function(){return this._state}},{'key':"currentLevel",'get':function(){var a=this.media;if(a){var e=this['getBufferedFrag'](a.currentTime);if(e)return e.level}return-1}},{'key':"nextBufferedFrag",'get':function(){var a=this.media;return a?this['followingBufferedFrag'](this['getBufferedFrag'](a.currentTime)):null}},{'key':"nextLevel",'get':function(){var a=this.nextBufferedFrag;return a?a.level:-1}},{'key':"liveSyncPosition",'get':function(){return this._liveSyncPosition},'set':function(a){this['_liveSyncPosition']=a}},{'key':"levelDetail",'get':function(){return this.levelDetailInfo}}]),e}(R["default"]);n["default"]=N},{'229':229,'230':230,'231':231,'234':234,'248':248,'256':256,'258':258,'262':262,'267':267,'272':272,'273':273,'275':275,'276':276,'279':279,'285':285,'290':290}],'236':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(285),c=a(242),p=l(c),w=a(272),x=l(w),v=window,y=v.performance,h={'STOPPED':"STOPPED",'IDLE':"IDLE",'KEY_LOADING':"KEY_LOADING",'FRAG_LOADING':"FRAG_LOADING"},s=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].MEDIA_ATTACHED,b["default"].ERROR,b["default"].KEY_LOADED,b["default"].FRAG_LOADED,b["default"].SUBTITLE_TRACKS_UPDATED,b["default"].SUBTITLE_TRACK_SWITCH,b["default"].SUBTITLE_TRACK_LOADED,b["default"].SUBTITLE_FRAG_PROCESSED));return n['config']=a.config,n['vttFragSNsProcessed']={},n['vttFragQueues']=void 0,n['currentlyProcessing']=null,n['state']=h.STOPPED,n['currentTrackId']=-1,n['decrypter']=new p["default"](a.observer,a.config),n}return i(e,a),t(e,[{'key':"recoverLoad",'value':function(){this['tick']()}},{'key':"onHandlerDestroyed",'value':function(){this['state']=h.STOPPED}},{'key':"clearVttFragQueues",'value':function(){var a=this;this['vttFragQueues']={},this['tracks']['forEach'](function(e){a['vttFragQueues'][e.id]=[]})}},{'key':"nextFragInit",'value':function(){this.currentlyProcessing&&(this['fragCurrent']=this.currentlyProcessing,this['fragCurrent']['loaderType']="xhr",this['hls']['trigger'](b["default"].FRAG_LOADING,{'frag':this.fragCurrent}),this['state']=h.FRAG_LOADING)}},{'key':"nextFrag",'value':function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this['vttFragQueues'][this.currentTrackId].length){var a=this['currentlyProcessing']=this['vttFragQueues'][this.currentTrackId]['shift']();this['fragCurrent']=a,a['loaderType']="xhr",this['hls']['trigger'](b["default"].FRAG_LOADING,{'frag':a}),this['state']=h.FRAG_LOADING}}},{'key':"onSubtitleFragProcessed",'value':function(a){a.success&&this['vttFragSNsProcessed'][a.frag.trackId]['push'](a.frag.sn),this['currentlyProcessing']=null,this['state']=h.IDLE,this['nextFrag']()}},{'key':"onMediaAttached",'value':function(){this['state']=h.IDLE}},{'key':"onError",'value':function(a){var e=a.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this['currentlyProcessing']=null,this['nextFrag']())}},{'key':"doTick",'value':function(){var a=this;if(this.hls.updateDownloadNormal!==!1)switch(this.state){case h.IDLE:var e=this.tracks,n=this.currentTrackId,l=this['vttFragSNsProcessed'][n],E=this['vttFragQueues'][n],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1,i=function(a){return l['indexOf'](a.sn)>-1},t=function(a){return E['some'](function(e){return e['sn']===a.sn})};if(!e||!e.length)break;var r;if(n<e.length&&(r=e[n].details),"undefined"==typeof r)break;this['currentlyProcessing']=r.initSegment,this.currentlyProcessing&&(this['currentlyProcessing']['trackId']=n,this['nextFragInit']()),r['fragments']['forEach'](function(e){i(e)||e['sn']===o||t(e)||(e.encrypted?(d['logger']['log']("Loading key for "+e.sn),a['state']=h.KEY_LOADING,a['hls']['trigger'](b["default"].KEY_LOADING,{'frag':e})):(e['trackId']=n,E['push'](e),a['nextFrag']()))})}}},{'key':"onSubtitleTracksUpdated",'value':function(a){var e=this;d['logger']['log']("subtitle tracks updated"),this['tracks']=a.subtitleTracks,this['clearVttFragQueues'](),this['vttFragSNsProcessed']={},this['tracks']['forEach'](function(a){e['vttFragSNsProcessed'][a.id]=[]})}},{'key':"onSubtitleTrackSwitch",'value':function(a){if(this['currentTrackId']=a.id,this.tracks&&-1!==this.currentTrackId){var e=this['tracks'][this.currentTrackId];e&&e.details&&this['tick']()}}},{'key':"onSubtitleTrackLoaded",'value':function(){this['tick']()}},{'key':"onKeyLoaded",'value':function(){this['state']===h.KEY_LOADING&&(this['state']=h.IDLE,this['tick']())}},{'key':"onFragLoaded",'value':function(a){var e=this.fragCurrent,n=a.frag.decryptdata,l=a.frag,E=this.hls;if(this['state']===h.FRAG_LOADING&&e&&"subtitle"===a.frag.type&&e['sn']===a.frag.sn&&a.payload.byteLength>0&&null!=n&&null!=n.key&&"AES-128"===n.method){var o=void 0;try{o=y['now']()}catch(i){o=Date['now']()}this['decrypter']['decrypt'](a.payload,n.key.buffer,n.iv.buffer,function(a){var e=void 0;try{e=y['now']()}catch(n){e=Date['now']()}E['trigger'](b["default"].FRAG_DECRYPTED,{'frag':l,'payload':a,'stats':{'tstart':o,'tdecrypt':e}})})}}}]),e}(x["default"]);n["default"]=s},{'242':242,'258':258,'272':272,'285':285}],'237':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}function t(a){for(var e=[],n=0;n<a.length;n++)"subtitles"===a[n].kind&&e['push'](a[n]);return e}Object['defineProperty'](n,"__esModule",{'value':!0});var r=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),b=a(258),d=l(b),c=a(257),p=l(c),w=a(285),x=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,d["default"].MEDIA_ATTACHED,d["default"].MEDIA_DETACHING,d["default"].MANIFEST_LOADING,d["default"].MANIFEST_LOADED,d["default"].SUBTITLE_TRACK_LOADED,d["default"].VO_DEFAULT_TEXT_TRACK));return n['tracks']=[],n['trackId']=-1,n['media']=null,n['subtitleDisplay']=!0,n}return i(e,a),r(e,[{'key':"_onTextTracksChanged",'value':function(){if(this.media){for(var a=-1,e=t(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)a=n;else if("showing"===e[n].mode){a=n;break}this['subtitleTrack']=a}}},{'key':"destroy",'value':function(){p["default"].prototype['destroy']['call'](this)}},{'key':"onMediaAttached",'value':function(a){this['media']=a.media,this.media&&null!==this.queuedDefaultTrack&&void 0!==this.queuedDefaultTrack&&(this['subtitleTrack']=this.queuedDefaultTrack,delete this.queuedDefaultTrack)}},{'key':"onMediaDetaching",'value':function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media['textTracks']['removeEventListener']("change",this.trackChangeListener),this['media']=null)}},{'key':"onManifestLoading",'value':function(){this['tracks']=[],this['trackId']=-1}},{'key':"onManifestLoaded",'value':function(a){var e=this,n=a.subtitles||[];this['tracks']=n,this['trackId']=-1,this['hls']['trigger'](d["default"].SUBTITLE_TRACKS_UPDATED,{'subtitleTracks':n}),n['forEach'](function(a){a["default"]&&(e.media?e['subtitleTrack']=a.id:e['queuedDefaultTrack']=a.id)})}},{'key':"onTick",'value':function(){var a=this.trackId,e=this['tracks'][a];if(e){var n=e.details;(!n||n.live)&&(w['logger']['log']("(re)loading playlist for subtitle track "+a),this['hls']['trigger'](d["default"].SUBTITLE_TRACK_LOADING,{'url':e.url,'id':a}))}}},{'key':"onSubtitleTrackLoaded",'value':function(a){var e=this;a.id<this.tracks.length&&(w['logger']['log']("subtitle track "+a.id+" loaded"),this['tracks'][a.id]['details']=a.details,a.details.live&&!this.timer&&(this['timer']=setInterval(function(){e['onTick']()},1e3*a.details.targetduration,this)),!a.details.live&&this.timer&&this['_stopTimer']())}},{'key':"onVoDefaultTextTrack",'value':function(a){this['trackId']=a.index}},{'key':"setSubtitleTrackInternal",'value':function(a){var e=this.hls,n=this.tracks;if(!("number"!=typeof a||-1>a)){this['_stopTimer'](),this['trackId']=a,w['logger']['log']("switching to subtitle track "+a);var l="";if(this['tracks'][a]&&(l=this['tracks'][a].lang),e['trigger'](d["default"].SUBTITLE_TRACK_SWITCH,{'id':a,'lang':l,'voId':a['toString']()}),!(-1===a||a>=n.length)){var E=n[a];if(E&&"captions"!==E.type){var o=E.details;void 0!==o&&o.live!==!0||!E.url||(w['logger']['log']("(re)loading playlist for subtitle track "+a),e['trigger'](d["default"].SUBTITLE_TRACK_LOADING,{'url':E.url,'id':a}))}}}}},{'key':"_stopTimer",'value':function(){this.timer&&(clearInterval(this.timer),this['timer']=null)}},{'key':"_toggleTrackModes",'value':function(a){var e=this.media,n=this.subtitleDisplay,l=this.trackId;if(e){var E=t(e.textTracks);if(-1===a)[]['slice']['call'](E)['forEach'](function(a){a['mode']="disabled"});else{var o=E[l];o&&(o['mode']="disabled")}var i=E[a];i&&(i['mode']=n?"showing":"hidden")}}},{'key':"subtitleTracks",'get':function(){return this.tracks}},{'key':"subtitleTrack",'get':function(){return this.trackId},'set':function(a){this.trackId!==a&&this['setSubtitleTrackInternal'](a)}}]),e}(p["default"]);n["default"]=x},{'257':257,'258':258,'285':285}],'238':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}function t(a,e,n,l){return Math['min'](e,l)-Math['max'](a,n)}Object['defineProperty'](n,"__esModule",{'value':!0});var r=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),b=a(258),d=l(b),c=a(257),p=l(c),w=a(288),x=(l(w),a(294)),v=l(x),y=a(285),h=a(289),s=a(177),D=l(s),m=a(335),C=l(m),f=a(308),g=l(f),k=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,d["default"].MEDIA_ATTACHING,d["default"].MEDIA_DETACHING,d["default"].FRAG_PARSING_USERDATA,d["default"].FRAG_DECRYPTED,d["default"].MANIFEST_LOADING,d["default"].MANIFEST_LOADED,d["default"].FRAG_LOADED,d["default"].LEVEL_SWITCHING,d["default"].INIT_PTS_FOUND,d["default"].SUBTITLE_TRACK_SWITCH,a.config.context.voHlsEvents.VO_HLS_ID3_FRAME_PROCESSED));return n['hls']=a,n['config']=a.config,n['enabled']=!0,n['Cues']=a.config.cueHandler,n['textTracks']=[],n['unparsedVttFrags']=[],n['initPTS']=void 0,n['cueRanges']=[],n['captionsTracks']={},n['captionsProperties']={'textTrack1':{'label':n.config.captionsTextTrack1Label,'languageCode':n.config.captionsTextTrack1LanguageCode},'textTrack2':{'label':n.config.captionsTextTrack2Label,'languageCode':n.config.captionsTextTrack2LanguageCode}},n['boxParser_']=D["default"](n.hls)['getInstance'](),n['cmftTimescale_']=1e3,n['firstFragmentedSubtitleStart_']=null,n}return i(e,a),r(e,[{'key':"addCues",'value':function(a,e,n,l){if(this.captionsTracks&&this['captionsTracks'][a]){for(var E=this.cueRanges,o=!1,i=E.length;i--;){var r=E[i],b=t(r[0],r[1],e,n);if(b>=0&&(r[0]=Math['min'](r[0],e),r[1]=Math['max'](r[1],n),o=!0,b/(n-e)>.5))return}o||E['push']([e,n]),this['Cues']['newCue'](this['captionsTracks'][a],e,n,l)}}},{'key':"onInitPtsFound",'value':function(a){var e=this;"undefined"==typeof this.initPTS&&(this['initPTS']=a.initPTS),this.unparsedVttFrags.length&&(this['unparsedVttFrags']['forEach'](function(a){e['onFragLoaded'](a)}),this['unparsedVttFrags']=[])}},{'key':"getExistingTrack",'value':function(a){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var l=e['textTracks'][n];if(l[a])return l}return null}},{'key':"createCaptionsTrack",'value':function(a){var e=this['captionsProperties'][a],n=e.label,l=e.languageCode,E=this.captionsTracks;if(!E[a]){var o=this['getExistingTrack'](a);if(o)E[a]=o,h['clearCurrentCues'](E[a]),h['sendAddTrackEvent'](E[a],this.media);else{var i=this['createTextTrack']("captions",n,l);i&&(i[a]=!0,E[a]=i)}}}},{'key':"createTextTrack",'value':function(a,e,n){var l=this.media;return l?l['addTextTrack'](a,e,n):void 0}},{'key':"destroy",'value':function(){p["default"].prototype['destroy']['call'](this)}},{'key':"onMediaAttaching",'value':function(a){this['media']=a.media,this['_cleanTracks'](),this['initializeForText']()}},{'key':"onMediaDetaching",'value':function(){var a=this.captionsTracks;Object['keys'](a)['forEach'](function(e){h['clearCurrentCues'](a[e]),delete a[e]})}},{'key':"onManifestLoading",'value':function(){this['lastSn']=-1,this['prevCC']=-1,this['vttCCs']={'ccOffset':0,'presentationOffset':0},this['_cleanTracks']()}},{'key':"_cleanTracks",'value':function(){var a=this.media;if(a){var e=a.textTracks;if(e)for(var n=0;n<e.length;n++)h['clearCurrentCues'](e[n])}}},{'key':"onManifestLoaded",'value':function(a){if(this['textTracks']=[],this['unparsedVttFrags']=this.unparsedVttFrags||[],this['initPTS']=void 0,this['cueRanges']=[],this.config.enableWebVTT){var e=a.subtitles||[];this['createWebvttTextTrack'](e)}}},{'key':"onLevelSwitching",'value':function(){this['enabled']="NONE"!==this.hls.currentLevel.closedCaptions}},{'key':"onFragLoaded",'value':function(a){var e=a.frag,n=a.payload;if("main"===e.type){var l=e.sn;if(l!==this.lastSn+1){var E=this.cea608Parser;E&&E['reset']()}this['lastSn']=l}else if("subtitle"===e.type)if(n.byteLength){if("undefined"==typeof this.initPTS)return void this['unparsedVttFrags']['push'](a);var o=e.decryptdata;(null==o||null==o.key||"AES-128"!==o.method)&&this['_parseFragment'](e,n)}else this['hls']['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!1,'frag':e})}},{'key':"_parseVTTFragment",'value':function(a,e,n){var l=this.hls,E=this;v["default"]['parse'](e,this.initPTS,n,a.cc,function(e){var n=E['subtitleTextTracks']['getVaildTracks'](),o=n&&n.length>0?n[a.trackId]:null,i=E.hls.config.context.SubtitleConstants;return o['mode']===i.TEXT_DISABLED?void l['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!1,'frag':a}):void(e.length>0?(i['TEXT_RENDER_TYPE']===e[0].type?E['subtitleTextTracks']['addCaptions'](a.trackId,0,e):e['forEach'](function(a){if(!o['cues']['getCueById'](a.id)){E['subtitleTextTracks']['setNativeMode'](o);try{o['addCue'](a)}catch(e){var n=new window['TextTrackCue'](a.startTime,a.endTime,a.text);n['id']=a.id,o['addCue'](n)}}}),l['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!0,'frag':a})):(y['logger']['log']("cues is empty"),l['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!1,'frag':a})))},function(e){y['logger']['log']("Failed to parse VTT cue: "+e),l['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!1,'frag':a})},this['subtitlesPlugin']['getElement'](),this['subtitlesPlugin']['getTTMLRenderingDiv']())}},{'key':"_parseTTMLFragment",'value':function(a,e){var n=this.hls,l=this,E=l['subtitleTextTracks']['getVaildTracks'](),o=E&&E.length>0?E[a.trackId]:null,i=this.cmftTimescale_,t=this['boxParser_']['getSamplesInfo'](e),r=t.sampleList;null===this.firstFragmentedSubtitleStart_&&r.length>0&&(this['firstFragmentedSubtitleStart_']=r[0].cts-a.start*i);for(var b=0;b<r.length;b++){for(var c=r[b],p=c.cts,w=new DataView(e,c.offset,c['subSizes'][0]),x=C["default"]['Utils']['dataViewToString'](w,"utf-8"),v=[],y=c.offset+c['subSizes'][0],h=1;h<c.subSizes.length;h++){var s=new Uint8Array(e,y,c['subSizes'][h]),D=String['fromCharCode']['apply'](null,s);v['push'](D),y+=c['subSizes'][h]}var m={'kind':o.kind,'mode':o.mode_,'label':o.label,'lang':o.language,'data':x,'flag':o.flag};m['subInfo']={'offsetTime':0,'start':p/i,'end':(p+c.duration)/i,'timeOffsetForTrack':this.firstFragmentedSubtitleStart_/i,'images':v},this['subtitlesPlugin']['addCaptionsByType'](m)}n['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!0,'frag':a})}},{'key':"_parseFragment",'value':function(a,e){var n=this.vttCCs;n[a.cc]||(n[a.cc]={'start':a.start,'prevCC':this.prevCC,"new":!0},this['prevCC']=a.cc);var l=this.hls;if("initSegment"===a.sn)return this['cmftTimescale_']=this['boxParser_']['getMediaTimescaleFromMoov'](e),void l['trigger'](d["default"].SUBTITLE_FRAG_PROCESSED,{'success':!0,'frag':a});if(this.subtitlesPlugin){var E=g["default"]['ab2str'](e),o=this['subtitlesPlugin']['checkDataType'](E);"vtt"===o?this['_parseVTTFragment'](a,e,n):this['_parseTTMLFragment'](a,e)}}},{'key':"onFragDecrypted",'value':function(a){var e=a.payload,n=a.frag;if("subtitle"===n.type){if("undefined"==typeof this.initPTS)return void this['unparsedVttFrags']['push'](a);this['_parseFragment'](n,e)}}},{'key':"onFragParsingUserdata",'value':function(a){if(this.subtitlesPlugin&&this.enabled&&this.config.enableCEA708Captions){for(var e=0;e<a.samples.length;e++){var n=a['samples'][e],l=n.bytes,E=l.length,o=0,i=new Uint8Array(E+4),t=new DataView(i.buffer);t['setUint32'](o,E),o+=4,i['set'](l,o);var r={'t':a['samples'][e].pts,'data':i};this['subtitlesPlugin']['setInputData'](r)}var b=this['subtitlesPlugin']['getSubtitleIndex']();this['hls']['trigger'](d["default"].VO_DEFAULT_TEXT_TRACK,{'index':b})}}},{'key':"extractCea608Data",'value':function(a){for(var e=31&a[0],n=2,l=void 0,E=void 0,o=void 0,i=void 0,t=void 0,r=[],b=0;e>b;b++)l=a[n++],E=127&a[n++],o=127&a[n++],i=0!==(4&l),t=3&l,(0!==E||0!==o)&&i&&0===t&&(r['push'](E),r['push'](o));return r}},{'key':"onSubtitleTrackSwitch",'value':function(a){if(a&&this.subtitlesPlugin&&this.subtitleTextTracks){var e=this['subtitleTextTracks']['getCurrentTrackIdx']();e!==a.id&&(this['subtitleTextTracks']['subtitleTrackSwitch'](a),this['subtitlesPlugin']['updateCurTextTrack']())}}},{'key':"initializeForText",'value':function(){var a=this.hls.config.context;a.voSubtitlesPlugin&&(this.subtitlesPlugin||(this['subtitlesPlugin']=a['voSubtitlesPlugin'](a)['getInstance']()),this.subtitlesPlugin&&(this['subtitleTextTracks']=this['subtitlesPlugin']['getTextTracks'](),this['subtitlesPlugin']['createCeaParser']()))}},{'key':"createWebvttTextTrack",'value':function(a){var e=this;this.subtitlesPlugin&&a['forEach'](function(a){var n={'kind':"subtitles",'mode':a["default"]?"showing":"hidden",'label':a.name,'lang':a.lang,'flag':a.name};e['subtitlesPlugin']['createTextTrack'](n)})}},{'key':"onId3FrameProcessed",'value':function(a){if(a&&this.subtitlesPlugin){var e=a.data,n={'kind':"subtitles",'mode':"showing",'label':a.lang?a.lang:"unknown",'lang':a.lang?a.lang:"unknown",'flag':a.track?a.track:"id3_unknown",'data':e};n['subInfo']={'offsetTime':a.startTime,'start':a.startTime,'end':a.endTime,'images':null},this['subtitlesPlugin']['addCaptionsByType'](n)}}}]),e}(p["default"]);n["default"]=k},{'177':177,'257':257,'258':258,'285':285,'288':288,'289':289,'294':294,'308':308,'335':335}],'239':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=a(291),w=l(p),x=5e3,v={'scheme':"urn:mpeg:dash:utc:http-xsdate:2014",'value':"http://time.akamai.com/?iso&ms"},y=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].MANIFEST_LOADING));return n['timingSource_']=v,n['decoder']=n.rfc1123Decoder,n['offsetToDeviceTimeMs']=0,n}return i(e,a),t(e,[{'key':"onManifestLoading",'value':function(a){console['log']("+onVoStartSyncTime"),this['attemptSync']({'url':a.url})}},{'key':"attemptSync",'value':function(a){var e=this,n=w["default"]['isHTTPs'](a.url);this['timingSource_']['value']=this.timingSource_['value']['replace'](n?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),n?"https://":"http://");var l=!1,E=new window.XMLHttpRequest,o="GET",i=this.timingSource_.value,t=(new Date)['getTime']();console['log']("printTime, reqStartTime: "+t);var r=function(){console['log']("+onload: "+E.status);var a=void 0,n=void 0;if(200===E.status){var o=((new Date)['getTime']()-t)/2;a=E.response,console['log']("time: "+a),n=e['decoder'](a),isNaN(n)||(e['onSuccessCB'](n+o),l=!0)}},b=function(){l||e['onFailureCB']()};E['open'](o,i),E['timeout']=x||0,E['onload']=r,E['onloadend']=b,E['send']()}},{'key':"completeTimeSyncSequence",'value':function(){}},{'key':"rfc1123Decoder",'value':function(a){return Date['parse'](a)}},{'key':"onSuccessCB",'value':function(a){var e=(new Date)['getTime'](),n=a-e;this['offsetToDeviceTimeMs']=n,console['info']("Local time: "+new Date(e)),console['info']("Server time: "+new Date(a)),console['info']("Server Time - Local Time (ms): "+n),this['completeTimeSyncSequence']({'failed':!1})}},{'key':"onFailureCB",'value':function(){this['completeTimeSyncSequence']({'failed':!0})}},{'key':"getOffsetToDeviceTimeMs",'value':function(){return this.offsetToDeviceTimeMs}}]),e}(c["default"]);n["default"]=y},{'257':257,'258':258,'291':291}],'240':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e,n){l(this,a),this['subtle']=e,this['aesIV']=n}return E(a,[{'key':"decrypt",'value':function(a,e){return this['subtle']['decrypt']({'name':"AES-CBC",'iv':this.aesIV},e,a)}}]),a}();n["default"]=o},{}],'241':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function E(a){var e=a.byteLength,n=e&&new DataView(a)['getUint8'](e-1);return n?a['slice'](0,e-n):a}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}();n['removePadding']=E;var i=function(){function a(){l(this,a),this['rcon']=[0,1,2,4,8,16,32,64,128,27,54],this['subMix']=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this['invSubMix']=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this['sBox']=new Uint32Array(256),this['invSBox']=new Uint32Array(256),this['key']=new Uint32Array(0),this['initTable']()}return o(a,[{'key':"uint8ArrayToUint32Array_",'value':function(a){for(var e=new DataView(a),n=new Uint32Array(4),l=0;4>l;l++)n[l]=e['getUint32'](4*l);return n}},{'key':"initTable",'value':function(){var a=this.sBox,e=this.invSBox,n=this.subMix,l=n[0],E=n[1],o=n[2],i=n[3],t=this.invSubMix,r=t[0],b=t[1],d=t[2],c=t[3],p=new Uint32Array(256),w=0,x=0,v=0;for(v=0;256>v;v++)128>v?p[v]=v<<1:p[v]=v<<1^283;for(v=0;256>v;v++){var y=x^x<<1^x<<2^x<<3^x<<4;y=y>>>8^255&y^99,a[w]=y,e[y]=w;var h=p[w],s=p[h],D=p[s],m=257*p[y]^16843008*y;l[w]=m<<24|m>>>8,E[w]=m<<16|m>>>16,o[w]=m<<8|m>>>24,i[w]=m,m=16843009*D^65537*s^257*h^16843008*w,r[y]=m<<24|m>>>8,b[y]=m<<16|m>>>16,d[y]=m<<8|m>>>24,c[y]=m,w?(w=h^p[p[p[D^h]]],x^=p[p[x]]):w=x=1}}},{'key':"expandKey",'value':function(a){for(var e=this['uint8ArrayToUint32Array_'](a),n=!0,l=0;l<e.length&&n;)n=e[l]===this['key'][l],l++;if(!n){this['key']=e;var E=this['keySize']=e.length;if(4!==E&&6!==E&&8!==E)throw new Error("Invalid aes key size="+E);var o=this['ksRows']=4*(E+6+1),i=void 0,t=void 0,r=this['keySchedule']=new Uint32Array(o),b=this['invKeySchedule']=new Uint32Array(o),d=this.sBox,c=this.rcon,p=this.invSubMix,w=p[0],x=p[1],v=p[2],y=p[3],h=void 0,s=void 0;for(i=0;o>i;i++)E>i?h=r[i]=e[i]:(s=h,i%E===0?(s=s<<8|s>>>24,s=d[s>>>24]<<24|d[s>>>16&255]<<16|d[s>>>8&255]<<8|d[255&s],s^=c[i/E|0]<<24):E>6&&i%E===4&&(s=d[s>>>24]<<24|d[s>>>16&255]<<16|d[s>>>8&255]<<8|d[255&s]),r[i]=h=(r[i-E]^s)>>>0);for(t=0;o>t;t++)i=o-t,s=3&t?r[i]:r[i-4],4>t||4>=i?b[t]=s:b[t]=w[d[s>>>24]]^x[d[s>>>16&255]]^v[d[s>>>8&255]]^y[d[255&s]],b[t]=b[t]>>>0}}},{'key':"networkToHostOrderSwap",'value':function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24}},{'key':"decrypt",'value':function(a,e,n,l){for(var o=this.keySize+6,i=this.invKeySchedule,t=this.invSBox,r=this.invSubMix,b=r[0],d=r[1],c=r[2],p=r[3],w=this['uint8ArrayToUint32Array_'](n),x=w[0],v=w[1],y=w[2],h=w[3],s=new Int32Array(a),D=new Int32Array(s.length),m=void 0,C=void 0,f=void 0,g=void 0,k=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=void 0,I=void 0,J=this.networkToHostOrderSwap;e<s.length;){for(u=J(s[e]),A=J(s[e+1]),R=J(s[e+2]),S=J(s[e+3]),k=u^i[0],M=S^i[1],P=R^i[2],T=A^i[3],U=4,I=1;o>I;I++)m=b[k>>>24]^d[M>>16&255]^c[P>>8&255]^p[255&T]^i[U],C=b[M>>>24]^d[P>>16&255]^c[T>>8&255]^p[255&k]^i[U+1],f=b[P>>>24]^d[T>>16&255]^c[k>>8&255]^p[255&M]^i[U+2],g=b[T>>>24]^d[k>>16&255]^c[M>>8&255]^p[255&P]^i[U+3],k=m,M=C,P=f,T=g,U+=4;m=t[k>>>24]<<24^t[M>>16&255]<<16^t[P>>8&255]<<8^t[255&T]^i[U],C=t[M>>>24]<<24^t[P>>16&255]<<16^t[T>>8&255]<<8^t[255&k]^i[U+1],f=t[P>>>24]<<24^t[T>>16&255]<<16^t[k>>8&255]<<8^t[255&M]^i[U+2],g=t[T>>>24]<<24^t[k>>16&255]<<16^t[M>>8&255]<<8^t[255&P]^i[U+3],U+=3,D[e]=J(m^x),D[e+1]=J(g^v),D[e+2]=J(f^y),D[e+3]=J(C^h),x=u,v=A,y=R,h=S,e+=4}return l?E(D.buffer):D.buffer}},{'key':"destroy",'value':function(){this['key']=void 0,this['keySize']=void 0,this['ksRows']=void 0,this['sBox']=void 0,this['invSBox']=void 0,this['subMix']=void 0,this['invSubMix']=void 0,this['keySchedule']=void 0,this['invKeySchedule']=void 0,this['rcon']=void 0}}]),a}();n["default"]=i},{}],'242':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(240),t=l(i),r=a(243),b=l(r),d=a(241),c=l(d),p=a(256),w=a(285),x=a(258),v=l(x),y=a(284),h=y['getSelfScope'](),s=function(){function a(e,n){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=l.removePKCS7Padding,i=void 0===o?!0:o;if(E(this,a),this['logEnabled']=!0,this['observer']=e,this['config']=n,this['removePKCS7Padding']=i,i)try{var t=h.crypto;t&&(this['subtle']=t.subtle||t.webkitSubtle)}catch(r){}this['disableWebCrypto']=!this.subtle}return o(a,[{'key':"isSync",'value':function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{'key':"decrypt",'value':function(a,e,n,l){var E=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(w['logger']['log']("JS AES decrypt"),this['logEnabled']=!1);var o=this.decryptor;o||(this['decryptor']=o=new c["default"]),o['expandKey'](e),l(o['decrypt'](a,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(w['logger']['log']("WebCrypto AES decrypt"),this['logEnabled']=!1);var i=this.subtle;this.key!==e&&(this['key']=e,this['fastAesKey']=new b["default"](i,e)),this['fastAesKey']['expandKey']()['then'](function(o){var r=new t["default"](i,n);r['decrypt'](a,o)["catch"](function(o){E['onWebCryptoError'](o,a,e,n,l)})['then'](function(a){l(a)})})["catch"](function(o){E['onWebCryptoError'](o,a,e,n,l)})}}},{'key':"onWebCryptoError",'value':function(a,e,n,l,E){this.config.enableSoftwareAES?(w['logger']['log']("WebCrypto Error, disable WebCrypto API"),this['disableWebCrypto']=!0,this['logEnabled']=!0,this['decrypt'](e,n,l,E)):(w['logger']['error']("decrypting error : "+a.message),this['observer']['trigger'](v["default"].ERROR,{'type':p.ErrorTypes.MEDIA_ERROR,'details':p.ErrorDetails.FRAG_DECRYPT_ERROR,'fatal':!0,'reason':a.message}))}},{'key':"destroy",'value':function(){var a=this.decryptor;a&&(a['destroy'](),this['decryptor']=void 0)}}]),a}();n["default"]=s},{'240':240,'241':241,'243':243,'256':256,'258':258,'284':284,'285':285}],'243':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e,n){l(this,a),this['subtle']=e,this['key']=n}return E(a,[{'key':"expandKey",'value':function(){return this['subtle']['importKey']("raw",this.key,{'name':"AES-CBC"},!1,["encrypt","decrypt"])}}]),a}();n["default"]=o},{}],'244':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var n in a)Object.prototype['hasOwnProperty']['call'](a,n)&&(e[n]=a[n]);return e["default"]=a,e}function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var i=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),t=a(245),r=E(t),b=a(285),d=a(250),c=l(d),p=a(273),w=a(283),x=function(){function a(e,n,l){o(this,a),this['observer']=e,this['config']=l,this['remuxer']=n,this['remainData']=null}return i(a,[{'key':"resetInitSegment",'value':function(a,e,n,l){this['_audioTrack']={'container':"audio/adts",'type':"audio",'id':1,'sequenceNumber':0,'isAAC':!0,'samples':[],'len':0,'manifestCodec':e,'duration':l,'inputTimeScale':9e4},this['remainData']=null}},{'key':"resetTimeStamp",'value':function(){}},{'key':"cleanRemainData",'value':function(){this['remainData']=null}},{'key':"append",'value':function(a,e,n,l,E){if(this['remainData']=p['appendUint8Array'](this.remainData,a),E&&this.remainData){a=this.remainData;for(var o=this._audioTrack,i=c["default"]['getID3Data'](a,0)||[],t=c["default"]['getTimeStamp'](i),d=Number['isFinite'](t)?90*t:9e4*e,w=0,x=d,v=a.length,y=i.length,h=[{'pts':x,'dts':x,'data':i}];v-1>y;)if(r['isHeader'](a,y)&&v>y+5){r['initTrackConfig'](o,this.observer,a,y,o.manifestCodec);var s=r['appendFrame'](o,a,y,d,w);if(!s){b['logger']['log']("Unable to parse AAC frame");break}y+=s.length,x=s.sample.pts,w++}else c["default"]['isHeader'](a,y)?(i=c["default"]['getID3Data'](a,y),h['push']({'pts':x,'dts':x,'data':i}),y+=i.length):y++;this['remuxer']['remux'](o,{'samples':[]},{'samples':h,'inputTimeScale':9e4},{'samples':[]},e,n,l)}}},{'key':"destroy",'value':function(){}}],[{'key':"probe",'value':function(a){return a?w['isAAC'](a):!1}}]),a}();n["default"]=x},{'245':245,'250':250,'273':273,'283':283,'285':285}],'245':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n,l){var E=void 0,o=void 0,i=void 0,t=void 0,r=void 0,b=navigator['userAgent']['toLowerCase'](),d=l,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return E=((192&e[n+2])>>>6)+1,o=(60&e[n+2])>>>2,
o>c.length-1?void a['trigger'](h["default"].ERROR,{'type':v.ErrorTypes.MEDIA_ERROR,'details':v.ErrorDetails.FRAG_PARSING_ERROR,'fatal':!0,'reason':"invalid ADTS sampling index:"+o}):(t=(1&e[n+2])<<2,t|=(192&e[n+3])>>>6,x['logger']['log']("manifest codec:"+l+",ADTS data:type:"+E+",'sampleingIndex':"+o+"["+c[o]+"Hz],'channelConfig':"+t),/firefox/i['test'](b)?o>=6?(E=5,r=new Array(4),i=o-3):(E=2,r=new Array(2),i=o):-1!==b['indexOf']("android")?(E=2,r=new Array(2),i=o):(E=5,r=new Array(4),l&&(-1!==l['indexOf']("mp4a.40.29")||-1!==l['indexOf']("mp4a.40.5"))||!l&&o>=6?i=o-3:((l&&-1!==l['indexOf']("mp4a.40.2")&&(o>=6&&1===t||/vivaldi/i['test'](b))||!l&&1===t)&&(E=2,r=new Array(2)),i=o)),r[0]=E<<3,r[0]|=(14&o)>>1,r[1]|=(1&o)<<7,r[1]|=t<<3,5===E&&(r[1]|=(14&i)>>1,r[2]=(1&i)<<7,r[2]|=8,r[3]=0),{'config':r,'samplerate':c[o],'channelCount':t,'codec':"mp4a.40."+E,'manifestCodec':d})}function o(a,e){return 255===a[e]&&240===(246&a[e+1])}function i(a,e){return 1&a[e+1]?7:9}function t(a,e){return(3&a[e+3])<<11|a[e+4]<<3|(224&a[e+5])>>>5}function r(a,e){return e+1<a.length&&o(a,e)?!0:!1}function b(a,e){if(e+1<a.length&&o(a,e)){var n=i(a,e),l=n;e+5<a.length&&(l=t(a,e));var E=e+l;if(E===a.length||E+1<a.length&&o(a,E))return!0}return!1}function d(a,e,n,l,o){if(!a.samplerate){var i=E(e,n,l,o);a['config']=i.config,a['samplerate']=i.samplerate,a['channelCount']=i.channelCount,a['codec']=i.codec,a['manifestCodec']=i.manifestCodec,x['logger']['log']("parsed codec:"+a.codec+",'rate':"+i.samplerate+",nb channel:"+i.channelCount)}}function c(a){return 9216e4/a}function p(a,e,n,l,E){var o=void 0,r=void 0,b=void 0,d=a.length;return o=i(a,e),r=t(a,e),r-=o,r>0&&d>=e+o+r?(b=n+l*E,{'headerLength':o,'frameLength':r,'stamp':b}):void 0}function w(a,e,n,l,E){var o=c(a.samplerate),i=p(e,n,l,E,o);if(i){var t=i.stamp,r=i.headerLength,b=i.frameLength,d={'unit':e['subarray'](n+r,n+r+b),'pts':t,'dts':t};return a['samples']['push'](d),a.len+=b,{'sample':d,'length':b+r}}return void 0}Object['defineProperty'](n,"__esModule",{'value':!0}),n['getAudioConfig']=E,n['isHeaderPattern']=o,n['getHeaderLength']=i,n['getFullFrameLength']=t,n['isHeader']=r,n['probe']=b,n['initTrackConfig']=d,n['getFrameDuration']=c,n['parseFrameHeader']=p,n['appendFrame']=w;var x=a(285),v=a(256),y=a(258),h=l(y);a(284)},{'256':256,'258':258,'284':284,'285':285}],'246':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(258),t=l(i),r=a(256),b=a(242),d=l(b),c=a(244),p=l(c),w=a(252),x=l(w),v=a(255),y=l(v),h=a(251),s=l(h),D=a(270),m=l(D),C=a(271),f=l(C),g=a(284),k=g['getSelfScope'](),M=k.performance,P=function(){function a(e,n,l,o){E(this,a),this['observer']=e,this['typeSupported']=n,this['config']=l,this['vendor']=o}return o(a,[{'key':"destroy",'value':function(){var a=this.demuxer;a&&a['destroy']()}},{'key':"push",'value':function(a,e,n,l,E,o,i,r,b,c,p,w,x,v){if(a&&a.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var y=this.decrypter;null==y&&(y=this['decrypter']=new d["default"](this.observer,this.config));var h=this,s=void 0;try{s=M['now']()}catch(D){s=Date['now']()}y['decrypt'](a,e.key.buffer,e.iv.buffer,function(a){var d=void 0;try{d=M['now']()}catch(y){d=Date['now']()}h['observer']['trigger'](t["default"].FRAG_DECRYPTED,{'stats':{'tstart':s,'tdecrypt':d}}),h['pushDecrypted'](new Uint8Array(a),e,new Uint8Array(n),l,E,o,i,r,b,c,p,w,x,v)})}else this['pushDecrypted'](new Uint8Array(a),e,new Uint8Array(n),l,E,o,i,r,b,c,p,w,x,v)}},{'key':"pushDecrypted",'value':function(a,e,n,l,E,o,i,b,d,c,w,v,h,D){var C=this.demuxer;if(!C||(i||b)&&!this['probe'](a)){for(var g=this.observer,k=this.typeSupported,M=this.config,P=[{'demux':y["default"],'remux':m["default"]},{'demux':s["default"],'remux':m["default"]},{'demux':p["default"],'remux':m["default"]},{'demux':x["default"],'remux':f["default"]}],T=0,u=P.length;u>T;T++){var A=P[T],R=A.demux.probe;if(R(a)){var S=this['remuxer']=new A['remux'](g,M,k,this.vendor);C=new A['demux'](g,S,M,k),this['probe']=R;break}}if(!C)return void g['trigger'](t["default"].ERROR,{'type':r.ErrorTypes.MEDIA_ERROR,'details':r.ErrorDetails.FRAG_PARSING_ERROR,'fatal':!0,'reason':"no demux matching with content found"});this['demuxer']=C}var U=this.remuxer;(i||b)&&(C['resetInitSegment'](n,l,E,c),U['resetInitSegment']()),i&&(C['resetTimeStamp'](v),U['resetTimeStamp'](v)),D&&C['cleanRemainData'](),"function"==typeof C.setDecryptData&&C['setDecryptData'](e),C['append'](a,o,d,w,h)}}]),a}();n["default"]=P},{'242':242,'244':244,'251':251,'252':252,'255':255,'256':256,'258':258,'270':270,'271':271,'284':284}],'247':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}Object['defineProperty'](n,"__esModule",{'value':!0});var E=a(246),o=l(E),i=a(258),t=l(i),r=a(285),b=a(337),d=l(b),c=a(312),p=l(c),w=function(a){var e=new d["default"];e['trigger']=function(a){for(var n=arguments.length,l=Array(n>1?n-1:0),E=1;n>E;E++)l[E-1]=arguments[E];e['emit']['apply'](e,[a,a]['concat'](l))},e['off']=function(a){for(var n=arguments.length,l=Array(n>1?n-1:0),E=1;n>E;E++)l[E-1]=arguments[E];e['removeListener']['apply'](e,[a]['concat'](l))};var n=function(e,n){a['postMessage']({'event':e,'data':n})};a['addEventListener']("message",function(l){var E=l.data;switch(E.cmd){case"init":p["default"](!0);var i=JSON['parse'](E.config);a['demuxer']=new o["default"](e,E.typeSupported,i,E.vendor);try{e['config']=i,e['on'](e.config.context.voHlsEvents.VO_HLS_LOG,n),r['enableLogs'](i['debug']===!0,null,e)}catch(t){console['warn']("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":a['demuxer']['push'](E.data,E.decryptdata,E.initSegment,E.audioCodec,E.videoCodec,E.timeOffset,E.discontinuity,E.trackSwitch,E.contiguous,E.duration,E.accurateTimeOffset,E.defaultInitPTS,E.isLoaded,E.isFirstLoading)}}),e['on'](t["default"].FRAG_DECRYPTED,n),e['on'](t["default"].FRAG_PARSING_INIT_SEGMENT,n),e['on'](t["default"].FRAG_PARSED,n),e['on'](t["default"].ERROR,n),e['on'](t["default"].FRAG_PARSING_METADATA,n),e['on'](t["default"].FRAG_PARSING_USERDATA,n),e['on'](t["default"].INIT_PTS_FOUND,n),e['on'](t["default"].FRAG_PARSING_DATA,function(e,n){var l=[],E={'event':e,'data':n};n.data1&&(E['data1']=n.data1.buffer,l['push'](n.data1.buffer),delete n.data1),n.data2&&(E['data2']=n.data2.buffer,l['push'](n.data2.buffer),delete n.data2),a['postMessage'](E,l)})};n["default"]=w},{'246':246,'258':258,'285':285,'312':312,'337':337}],'248':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(337),t=l(i),r=a(247),b=l(r),d=a(258),c=l(d),p=a(246),w=l(p),x=a(285),v=a(256),y=a(287),h=a(284),s=h['getSelfScope'](),D=y['getMediaSource'](),m=function(){function e(n,l){E(this,e),this['hls']=n,this['id']=l;var o=this['observer']=new t["default"],i=n.config;o['trigger']=function(a){for(var e=arguments.length,n=Array(e>1?e-1:0),l=1;e>l;l++)n[l-1]=arguments[l];o['emit']['apply'](o,[a,a]['concat'](n))},o['off']=function(a){for(var e=arguments.length,n=Array(e>1?e-1:0),l=1;e>l;l++)n[l-1]=arguments[l];o['removeListener']['apply'](o,[a]['concat'](n))};var r=function(a,e){e=e||{},e['frag']=this.frag,e['id']=this.id,n['trigger'](a,e)}['bind'](this);o['on'](c["default"].FRAG_DECRYPTED,r),o['on'](c["default"].FRAG_PARSING_INIT_SEGMENT,r),o['on'](c["default"].FRAG_PARSING_DATA,r),o['on'](c["default"].FRAG_PARSED,r),o['on'](c["default"].ERROR,r),o['on'](c["default"].FRAG_PARSING_METADATA,r),o['on'](c["default"].FRAG_PARSING_USERDATA,r),o['on'](c["default"].INIT_PTS_FOUND,r);var d={'mp4':D['isTypeSupported']("video/mp4"),'mpeg':D['isTypeSupported']("audio/mpeg"),'mp3':D['isTypeSupported']('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){x['logger']['log']("demuxing in webworker");var y=void 0;try{var h=a(349);y=this['w']=h(b["default"]),this['onwmsg']=this['onWorkerMessage']['bind'](this),y['addEventListener']("message",this.onwmsg),y['onerror']=function(a){n['trigger'](c["default"].ERROR,{'type':v.ErrorTypes.OTHER_ERROR,'details':v.ErrorDetails.INTERNAL_EXCEPTION,'fatal':!0,'event':"demuxerWorker",'err':{'message':a.message+" ("+a.filename+":"+a.lineno+")"}})},y['postMessage']({'cmd':"init",'typeSupported':d,'vendor':p,'id':l,'config':JSON['stringify'](i)})}catch(m){x['logger']['error']("error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&s['URL']['revokeObjectURL'](y.objectURL),this['demuxer']=new w["default"](o,d,i,p),this['w']=void 0}}else this['demuxer']=new w["default"](o,d,i,p)}return o(e,[{'key':"destroy",'value':function(){var a=this.w;if(a)a['removeEventListener']("message",this.onwmsg),a['terminate'](),this['w']=null;else{var e=this.demuxer;e&&(e['destroy'](),this['demuxer']=null)}var n=this.observer;n&&(n['removeAllListeners'](),this['observer']=null)}},{'key':"push",'value':function(a,e,n,l,E,o,i,t){var r=this.w,b=Number['isFinite'](E.startDTS)?E.startDTS:E.start,d=E.decryptdata,c=this.frag,p=!(c&&E['cc']===c.cc),w=!(c&&E['level']===c.level),v=c&&E['sn']===c.sn+1,y=!w&&v,h=E.isLoaded,s=E.isFirstLoading;if(p&&x['logger']['log'](this.id+":discontinuity detected"),w&&x['logger']['log'](this.id+":switch detected"),this['frag']=E,r)a?r['postMessage']({'cmd':"demux",'data':a,'decryptdata':d,'initSegment':e,'audioCodec':n,'videoCodec':l,'timeOffset':b,'discontinuity':p,'trackSwitch':w,'contiguous':y,'duration':o,'accurateTimeOffset':i,'defaultInitPTS':t,'isLoaded':h,'isFirstLoading':s},a instanceof ArrayBuffer?[a]:[]):r['postMessage']({'cmd':"demux",'data':null,'decryptdata':d,'initSegment':e,'audioCodec':n,'videoCodec':l,'timeOffset':b,'discontinuity':p,'trackSwitch':w,'contiguous':y,'duration':o,'accurateTimeOffset':i,'defaultInitPTS':t,'isLoaded':h,'isFirstLoading':s});else{var D=this.demuxer;D&&D['push'](a,d,e,n,l,b,p,w,y,o,i,t,h,s)}}},{'key':"onWorkerMessage",'value':function(a){var e=a.data,n=this.hls;switch(e.event){case n.config.context.voHlsEvents.VO_HLS_LOG:n['trigger2'](n.config.context.voHlsEvents.VO_HLS_LOG,e.data);break;case"init":s['URL']['revokeObjectURL'](this.w.objectURL);break;case c["default"].FRAG_PARSING_DATA:e['data']['data1']=new Uint8Array(e.data1),e.data2&&(e['data']['data2']=new Uint8Array(e.data2));default:e['data']=e.data||{},e['data']['frag']=this.frag,e['data']['id']=this.id,n['trigger'](e.event,e.data)}}}]),e}();n["default"]=m},{'246':246,'247':247,'256':256,'258':258,'284':284,'285':285,'287':287,'337':337,'349':349}],'249':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=a(285),i=function(){function a(e){l(this,a),this['data']=e,this['bytesAvailable']=e.byteLength,this['word']=0,this['bitsAvailable']=0}return E(a,[{'key':"loadWord",'value':function(){var a=this.data,e=this.bytesAvailable,n=a.byteLength-e,l=new Uint8Array(4),E=Math['min'](4,e);if(0===E)throw new Error("no bytes available");l['set'](a['subarray'](n,n+E)),this['word']=new DataView(l.buffer)['getUint32'](0),this['bitsAvailable']=8*E,this.bytesAvailable-=E}},{'key':"skipBits",'value':function(a){var e=void 0;this.bitsAvailable>a?(this.word<<=a,this.bitsAvailable-=a):(a-=this.bitsAvailable,e=a>>3,a-=e>>3,this.bytesAvailable-=e,this['loadWord'](),this.word<<=a,this.bitsAvailable-=a)}},{'key':"readBits",'value':function(a){var e=Math['min'](this.bitsAvailable,a),n=this.word>>>32-e;return a>32&&o['logger']['error']("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this['loadWord'](),e=a-e,e>0&&this.bitsAvailable?n<<e|this['readBits'](e):n}},{'key':"skipLZ",'value':function(){var a=void 0;for(a=0;a<this.bitsAvailable;++a)if(0!==(this.word&2147483648>>>a))return this.word<<=a,this.bitsAvailable-=a,a;return this['loadWord'](),a+this['skipLZ']()}},{'key':"skipUEG",'value':function(){this['skipBits'](1+this['skipLZ']())}},{'key':"skipEG",'value':function(){this['skipBits'](1+this['skipLZ']())}},{'key':"readUEG",'value':function(){var a=this['skipLZ']();return this['readBits'](a+1)-1}},{'key':"readEG",'value':function(){var a=this['readUEG']();return 1&a?1+a>>>1:-1*(a>>>1)}},{'key':"readBoolean",'value':function(){return 1===this['readBits'](1)}},{'key':"readUByte",'value':function(){return this['readBits'](8)}},{'key':"readUShort",'value':function(){return this['readBits'](16)}},{'key':"readUInt",'value':function(){return this['readBits'](32)}},{'key':"skipScalingList",'value':function(a){var e=8,n=8,l=void 0,E=void 0;for(l=0;a>l;l++)0!==n&&(E=this['readEG'](),n=(e+E+256)%256),e=0===n?e:n}},{'key':"readSPS",'value':function(){var a=0,e=0,n=0,l=0,E=void 0,o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=void 0,w=this['readUByte']['bind'](this),x=this['readBits']['bind'](this),v=this['readUEG']['bind'](this),y=this['readBoolean']['bind'](this),h=this['skipBits']['bind'](this),s=this['skipEG']['bind'](this),D=this['skipUEG']['bind'](this),m=this['skipScalingList']['bind'](this);if(w(),E=w(),o=x(5),h(3),i=w(),D(),100===E||110===E||122===E||244===E||44===E||83===E||86===E||118===E||128===E){var C=v();if(3===C&&h(1),D(),D(),h(1),y())for(c=3!==C?8:12,p=0;c>p;p++)y()&&m(6>p?16:64)}D();var f=v();if(0===f)v();else if(1===f)for(h(1),s(),s(),t=v(),p=0;t>p;p++)s();D(),h(1),r=v(),b=v(),d=x(1),0===d&&h(1),h(1),y()&&(a=v(),e=v(),n=v(),l=v());var g=[1,1];if(y()&&y()){var k=w();switch(k){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[w()<<8|w(),w()<<8|w()]}}return{'width':Math['ceil'](16*(r+1)-2*a-2*e),'height':(2-d)*(b+1)*16-(d?2:4)*(n+l),'pixelRatio':g}}},{'key':"readSliceType",'value':function(){return this['readUByte'](),this['readUEG'](),this['readUEG']()}}]),a}();n["default"]=i},{'285':285}],'250':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=0,i=1,t=2,r=3,b=function(){function a(){l(this,a)}return E(a,null,[{'key':"isHeader",'value':function(a,e){return e+10<=a.length&&73===a[e]&&68===a[e+1]&&51===a[e+2]&&a[e+3]<255&&a[e+4]<255&&a[e+6]<128&&a[e+7]<128&&a[e+8]<128&&a[e+9]<128?!0:!1}},{'key':"isFooter",'value':function(a,e){return e+10<=a.length&&51===a[e]&&68===a[e+1]&&73===a[e+2]&&a[e+3]<255&&a[e+4]<255&&a[e+6]<128&&a[e+7]<128&&a[e+8]<128&&a[e+9]<128?!0:!1}},{'key':"getCharsetName",'value':function(a){switch(a){case o:return"ISO-8859-1";case i:return"UTF-16";case t:return"UTF-16BE";case r:return"UTF-8";default:return"ISO-8859-1"}}},{'key':"indexOfZeroByte",'value':function(a,e){var n=void 0;for(n=e;n<a.length;n++)if(0===a[n])return n;return a.length}},{'key':"indexOfEos",'value':function(e,n,l){var E=a['indexOfZeroByte'](e,n);if(l===o||l===r)return E;for(;E<e.length-1;){if(E%2===0&&0===e[E+1])return E;E=a['indexOfZeroByte'](e,E+1)}return e.length}},{'key':"delimiterLength",'value':function(a){return a===o||a===r?1:2}},{'key':"getID3Data",'value':function(e,n){for(var l=n,E=0;a['isHeader'](e,n);){E+=10;var o=a['_readSize'](e,n+6);E+=o,a['isFooter'](e,n+10)&&(E+=10),n+=E}return E>0?e['subarray'](l,l+E):void 0}},{'key':"_readSize",'value':function(a,e){var n=0;return n=(127&a[e])<<21,n|=(127&a[e+1])<<14,n|=(127&a[e+2])<<7,n|=127&a[e+3]}},{'key':"getTimeStamp",'value':function(e){for(var n=a['getID3Frames'](e),l=0;l<n.length;l++){var E=n[l];if(a['isTimeStampFrame'](E))return a['_readTimeStamp'](E)}return void 0}},{'key':"isTimeStampFrame",'value':function(a){return a&&"PRIV"===a.key&&"com.apple.streaming.transportStreamTimestamp"===a.info}},{'key':"_getFrameData",'value':function(e){var n=String['fromCharCode'](e[0],e[1],e[2],e[3]),l=a['_readSize'](e,4),E=10;return{'type':n,'size':l,'data':e['subarray'](E,E+l)}}},{'key':"getID3Frames",'value':function(e){for(var n=0,l=[];a['isHeader'](e,n);){var E=a['_readSize'](e,n+6);n+=10;for(var o=n+E;o>n+8;){var i=a['_getFrameData'](e['subarray'](n)),t=a['_decodeFrame'](i);t&&l['push'](t),n+=i.size+10}a['isFooter'](e,n)&&(n+=10)}return l}},{'key':"_decodeFrame",'value':function(e){return"PRIV"===e.type?a['_decodePrivFrame'](e):"T"===e['type'][0]?a['_decodeTextFrame'](e):"W"===e['type'][0]?a['_decodeURLFrame'](e):{'key':"CUSTOMERDATA",'data':e.data}}},{'key':"_readTimeStamp",'value':function(a){if(8===a.data.byteLength){var e=new Uint8Array(a.data),n=1&e[3],l=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return l/=45,n&&(l+=47721858.84),Math['round'](l)}return void 0}},{'key':"_decodePrivFrame",'value':function(e){if(e.size<2)return void 0;var n=a['_utf8ArrayToStr'](e.data,!0),l=new Uint8Array(e['data']['subarray'](n.length+1));return{'key':e.type,'info':n,'data':l.buffer}}},{'key':"_decodeTextFrame",'value':function(e){if(e.size<2)return void 0;if("TXXX"===e.type){var n=e['data'][0],l=a['getCharsetName'](n),E=a['indexOfEos'](e.data,0,n),o=a['_utf8ArrayToStr'](e['data']['subarray'](1,E)),i=E+a['delimiterLength'](n),t=a['indexOfEos'](e.data,i,n),r=a['_utf8ArrayToStr'](e['data']['subarray'](i,t));return{'key':e.type,'info':o,'data':r,'encoding':l}}var b=a['_utf8ArrayToStr'](e['data']['subarray'](1));return{'key':e.type,'data':b}}},{'key':"_decodeURLFrame",'value':function(e){if("WXXX"===e.type){if(e.size<2)return void 0;var n=1,l=a['_utf8ArrayToStr'](e['data']['subarray'](n));n+=l.length+1;var E=a['_utf8ArrayToStr'](e['data']['subarray'](n));return{'key':e.type,'info':l,'data':E}}var o=a['_utf8ArrayToStr'](e.data);return{'key':e.type,'data':o}}},{'key':"_utf8ArrayToStr",'value':function(a){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=a.length,l=void 0,E=void 0,o=void 0,i="",t=0;n>t;){if(l=a[t++],0===l&&e)return i;if(0!==l&&3!==l)switch(l>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String['fromCharCode'](l);break;case 12:case 13:E=a[t++],i+=String['fromCharCode']((31&l)<<6|63&E);break;case 14:E=a[t++],o=a[t++],i+=String['fromCharCode']((15&l)<<12|(63&E)<<6|(63&o)<<0)}}return i}}]),a}(),d=b._utf8ArrayToStr;n["default"]=b,n['utf8ArrayToStr']=d},{}],'251':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(250),t=l(i),r=a(285),b=a(253),d=l(b),c=a(273),p=function(){function a(e,n,l){E(this,a),this['observer']=e,this['config']=l,this['remuxer']=n,this['remainData']=null}return o(a,[{'key':"cleanRemainData",'value':function(){this['remainData']=null}},{'key':"resetInitSegment",'value':function(a,e,n,l){this['_audioTrack']={'container':"audio/mpeg",'type':"audio",'id':-1,'sequenceNumber':0,'isAAC':!1,'samples':[],'len':0,'manifestCodec':e,'duration':l,'inputTimeScale':9e4},this['remainData']=null}},{'key':"resetTimeStamp",'value':function(){}},{'key':"append",'value':function(a,e,n,l,E){if(this['remainData']=c['appendUint8Array'](this.remainData,a),E&&this.remainData){a=this.remainData;for(var o=t["default"]['getID3Data'](a,0),i=t["default"]['getTimeStamp'](o),r=i?90*i:9e4*e,b=o.length,p=a.length,w=0,x=0,v=this._audioTrack,y=[{'pts':r,'dts':r,'data':o}];p>b;)if(d["default"]['isHeader'](a,b)){var h=d["default"]['appendFrame'](v,a,b,r,w);if(!h)break;b+=h.length,x=h.sample.pts,w++}else t["default"]['isHeader'](a,b)?(o=t["default"]['getID3Data'](a,b),y['push']({'pts':x,'dts':x,'data':o}),b+=o.length):b++;this['remuxer']['remux'](v,{'samples':[]},{'samples':y,'inputTimeScale':9e4},{'samples':[]},e,n,l)}}},{'key':"destroy",'value':function(){}}],[{'key':"probe",'value':function(a){var e=void 0,n=void 0,l=t["default"]['getID3Data'](a,0);if(l&&void 0!==t["default"]['getTimeStamp'](l))for(e=l.length,n=Math['min'](a.length-1,e+100);n>e;e++)if(d["default"]['probe'](a,e))return r['logger']['log']("MPEG Audio sync word found !"),!0;return!1}}]),a}();n["default"]=p},{'250':250,'253':253,'273':273,'285':285}],'252':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(285),t=a(258),r=l(t),b=a(273),d=Math['pow'](2,32)-1,c=function(){function a(e,n){E(this,a),this['observer']=e,this['remuxer']=n,this['remainData']=null}return o(a,[{'key':"cleanRemainData",'value':function(){this['remainData']=null}},{'key':"resetTimeStamp",'value':function(a){this['initPTS']=a}},{'key':"resetInitSegment",'value':function(e,n,l,E){if(this['remainData']=null,e&&e.byteLength){var o=this['initData']=a['parseInitSegment'](e);null==n&&(n="mp4a.40.5"),null==l&&(l="avc1.42e01e");var i={};o.audio&&o.video?i['audiovideo']={'container':"video/mp4",'codec':n+","+l,'initSegment':E?e:null}:(o.audio&&(i['audio']={'container':"audio/mp4",'codec':n,'initSegment':E?e:null}),o.video&&(i['video']={'container':"video/mp4",'codec':l,'initSegment':E?e:null})),this['observer']['trigger'](r["default"].FRAG_PARSING_INIT_SEGMENT,{'tracks':i})}else n&&(this['audioCodec']=n),l&&(this['videoCodec']=l)}},{'key':"getChunks",'value':function(e){if(!this.remainData&&!e)return null;this.remainData;var n=b['appendUint8Array'](this.remainData,e),l=0,E=n.byteLength,o=0,i=0,t=!1,r=!1,d=0,c=0,p=0;if(n.byteLength<=8)return this['remainData']=n,null;for(c=l;E>c;){if(o=a['readUint32'](n,c),i=a['bin2str'](n['slice'](c+4,c+8)),c+o>E){if(r){var w=n['slice'](0,d);return this['remainData']=n['slice'](d,E),w}return this['remainData']=n,null}if(p=c+o,"moof"===i)t=!0;else if(t&&"mdat"===i&&(r=!0,d=p,d===E)){var x=n['slice'](0,d);return this['remainData']=null,x}if(c=p,c+8>E){if(r){var v=n['slice'](0,d);return this['remainData']=n['slice'](d,E),v}return this['remainData']=n,null}}}},{'key':"append",'value':function(e,n,l,E,o){var i=this.initData;i||(this['resetInitSegment'](e,this.audioCodec,this.videoCodec,!1),i=this.initData);var t=this.initPTS;if(void 0===t){var b=a['getStartDTS'](i,e);this['initPTS']=t=b-n,this['observer']['trigger'](r["default"].INIT_PTS_FOUND,{'initPTS':t})}var d=this['getChunks'](e);d?(a['offsetStartDTS'](i,d,t),this['startDTS']=a['getStartDTS'](i,d),this['remuxer']['remux'](i.audio,i.video,null,null,this.startDTS,l,E,d,o)):o&&this['remuxer']['remux'](i.audio,i.video,null,null,this.startDTS,l,E,d,o)}},{'key':"destroy",'value':function(){}}],[{'key':"probe",'value':function(e){return a['findBox']({'data':e,'start':0,'end':Math['min'](e.length,16384)},["moof"]).length>0}},{'key':"bin2str",'value':function(a){return String['fromCharCode']['apply'](null,a)}},{'key':"readUint16",'value':function(a,e){a.data&&(e+=a.start,a=a.data);var n=a[e]<<8|a[e+1];return 0>n?65536+n:n}},{'key':"readUint32",'value':function(a,e){a.data&&(e+=a.start,a=a.data);var n=a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3];return 0>n?4294967296+n:n}},{'key':"writeUint32",'value':function(a,e,n){a.data&&(e+=a.start,a=a.data),a[e]=n>>24,a[e+1]=n>>16&255,a[e+2]=n>>8&255,a[e+3]=255&n}},{'key':"findBox",'value':function(e,n){var l=[],E=void 0,o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=void 0;if(e.data?(b=e.start,t=e.end,e=e.data):(b=0,t=e.byteLength),!n.length)return null;for(E=b;t>E;)o=a['readUint32'](e,E),i=a['bin2str'](e['subarray'](E+4,E+8)),d=o>1?E+o:t,i===n[0]&&(1===n.length?l['push']({'data':e,'start':E+8,'end':d}):(r=a['findBox']({'data':e,'start':E+8,'end':d},n['slice'](1)),r.length&&(l=l['concat'](r)))),E=d;return l}},{'key':"parseSegmentIndex",'value':function(e){var n=a['findBox'](e,["moov"])[0],l=n?n.end:null,E=0,o=a['findBox'](e,["sidx"]),i=void 0;if(!o||!o[0])return null;i=[],o=o[0];var t=o['data'][0];E=0===t?8:16;var r=a['readUint32'](o,E);E+=4;var b=0,d=0;E+=0===t?8:16,E+=2;var c=o.end+d,p=a['readUint16'](o,E);E+=2;for(var w=0;p>w;w++){var x=E,v=a['readUint32'](o,x);x+=4;var y=2147483647&v,h=(2147483648&v)>>>31;if(1===h)return void console['warn']("SIDX has hierarchical references (not supported)");var s=a['readUint32'](o,x);x+=4,i['push']({'referenceSize':y,'subsegmentDuration':s,'info':{'duration':s/r,'start':c,'end':c+y-1}}),c+=y,x+=4,E=x}return{'earliestPresentationTime':b,'timescale':r,'version':t,'referencesCount':p,'references':i,'moovEndOffset':l}}},{'key':"parseInitSegment",'value':function(e){var n=[],l=a['findBox'](e,["moov","trak"]);return l['forEach'](function(e){var l=a['findBox'](e,["tkhd"])[0];if(l){var E=l['data'][l.start],o=0===E?12:20,t=a['readUint32'](l,o),r=a['findBox'](e,["mdia","mdhd"])[0];if(r){E=r['data'][r.start],o=0===E?12:20;var b=a['readUint32'](r,o),d=a['findBox'](e,["mdia","hdlr"])[0];if(d){var c=a['bin2str'](d['data']['subarray'](d.start+8,d.start+12)),p={'soun':"audio",'vide':"video",'clcp':"subtitle"}[c];if(p){var w=a['findBox'](e,["mdia","minf","stbl","stsd"]);if(w.length){w=w[0];var x=a['bin2str'](w['data']['subarray'](w.start+12,w.start+16));i['logger']['log']("MP4Demuxer:"+p+":"+x+" found")}n[t]={'timescale':b,'type':p},n[p]={'timescale':b,'id':t}}}}}}),n}},{'key':"getStartDTS",'value':function(e,n){var l=void 0,E=void 0,o=void 0;return l=a['findBox'](n,["moof","traf"]),E=[]['concat']['apply']([],l['map'](function(n){return a['findBox'](n,["tfhd"])['map'](function(l){var E=void 0,o=void 0,i=void 0;return E=a['readUint32'](l,4),o=e[E].timescale||9e4,i=a['findBox'](n,["tfdt"])['map'](function(e){var n=void 0,l=void 0;return n=e['data'][e.start],l=a['readUint32'](e,4),1===n&&(l*=Math['pow'](2,32),l+=a['readUint32'](e,8)),l})[0],i/o})})),o=Math['min']['apply'](null,E),isFinite(o)?o:0}},{'key':"offsetStartDTS",'value':function(e,n,l){a['findBox'](n,["moof","traf"])['map'](function(n){return a['findBox'](n,["tfhd"])['map'](function(E){var o=a['readUint32'](E,4),i=e[o].timescale||9e4;a['findBox'](n,["tfdt"])['map'](function(e){var n=e['data'][e.start],E=a['readUint32'](e,4);if(0===n)a['writeUint32'](e,4,E-l*i);else{E*=Math['pow'](2,32),E+=a['readUint32'](e,8),E-=l*i,E=Math['max'](E,0);var o=Math['floor'](E/(d+1)),t=Math['floor'](E%(d+1));a['writeUint32'](e,4,o),a['writeUint32'](e,8,t)}})})})}}]),a}();n["default"]=c},{'258':258,'273':273,'285':285}],'253':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'BitratesMap':[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],'SamplingRateMap':[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],'SamplesCoefficients':[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],'BytesInSlot':[0,1,1,4],'appendFrame':function(a,e,n,l,E){if(n+24>e.length)return void 0;var o=this['parseHeader'](e,n);if(o&&n+o.frameLength<=e.length){var i=9e4*o.samplesPerFrame/o.sampleRate,t=l+E*i,r={'unit':e['subarray'](n,n+o.frameLength),'pts':t,'dts':t};return a['config']=[],a['channelCount']=o.channelCount,a['samplerate']=o.sampleRate,a['samples']['push'](r),a.len+=o.frameLength,{'sample':r,'length':o.frameLength}}return void 0},'parseHeader':function(a,e){var n=a[e+1]>>3&3,E=a[e+1]>>1&3,o=a[e+2]>>4&15,i=a[e+2]>>2&3,t=a[e+2]>>1&1;if(1!==n&&0!==o&&15!==o&&3!==i){var r=3===n?3-E:3===E?3:4,b=1e3*l['BitratesMap'][14*r+o-1],d=3===n?0:2===n?1:2,c=l['SamplingRateMap'][3*d+i],p=a[e+3]>>6===3?1:2,w=l['SamplesCoefficients'][n][E],x=l['BytesInSlot'][E],v=8*w*x,y=parseInt(w*b/c+t,10)*x;return{'sampleRate':c,'channelCount':p,'frameLength':y,'samplesPerFrame':v}}return void 0},'isHeaderPattern':function(a,e){return 255===a[e]&&224===(224&a[e+1])&&0!==(6&a[e+1])},'isHeader':function(a,e){return e+1<a.length&&this['isHeaderPattern'](a,e)?!0:!1},'probe':function(a,e){if(e+1<a.length&&this['isHeaderPattern'](a,e)){var n=4,l=this['parseHeader'](a,e),E=n;l&&l.frameLength&&(E=l.frameLength);var o=e+E;if(o===a.length||o+1<a.length&&this['isHeaderPattern'](a,o))return!0}return!1}};n["default"]=l},{}],'254':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(242),t=l(i),r=function(){function a(e,n,l,o){E(this,a),this['decryptdata']=l,this['discardEPB']=o,this['decrypter']=new t["default"](e,n,{'removePKCS7Padding':!1})}return o(a,[{'key':"decryptBuffer",'value':function(a,e){this['decrypter']['decrypt'](a,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)}},{'key':"decryptAacSample",'value':function(a,e,n,l){var E=a[e].unit,o=E['subarray'](16,E.length-E.length%16),i=o['buffer']['slice'](o.byteOffset,o.byteOffset+o.length),t=this;this['decryptBuffer'](i,function(o){o=new Uint8Array(o),E['set'](o,16),l||t['decryptAacSamples'](a,e+1,n)})}},{'key':"decryptAacSamples",'value':function(a,e,n){for(;;e++){if(e>=a.length)return void n();if(!(a[e].unit.length<32)){var l=this['decrypter']['isSync']();if(this['decryptAacSample'](a,e,n,l),!l)return}}}},{'key':"getAvcEncryptedData",'value':function(a){for(var e=16*Math['floor']((a.length-48)/160)+16,n=new Int8Array(e),l=0,E=32;E<=a.length-16;E+=160,l+=16)n['set'](a['subarray'](E,E+16),l);return n}},{'key':"getAvcDecryptedUnit",'value':function(a,e){e=new Uint8Array(e);for(var n=0,l=32;l<=a.length-16;l+=160,n+=16)a['set'](e['subarray'](n,n+16),l);return a}},{'key':"decryptAvcSample",'value':function(a,e,n,l,E,o){var i=this['discardEPB'](E.data),t=this['getAvcEncryptedData'](i),r=this;this['decryptBuffer'](t.buffer,function(t){E['data']=r['getAvcDecryptedUnit'](i,t),o||r['decryptAvcSamples'](a,e,n+1,l)})}},{'key':"decryptAvcSamples",'value':function(a,e,n,l){for(;;e++,n=0){if(e>=a.length)return void l();for(var E=a[e].units;!(n>=E.length);n++){var o=E[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var i=this['decrypter']['isSync']();if(this['decryptAvcSample'](a,e,n,l,o,i),!i)return}}}}}]),a}();n["default"]=r},{'242':242}],'255':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var n in a)Object.prototype['hasOwnProperty']['call'](a,n)&&(e[n]=a[n]);return e["default"]=a,e}function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var i=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),t=a(245),r=E(t),b=a(253),d=l(b),c=a(258),p=l(c),w=a(249),x=l(w),v=a(254),y=l(v),h=a(285),s=a(256),D=a(273),m={'video':1,'audio':2,'id3':3,'text':4},C=function(){function a(e,n,l,E){o(this,a),this['observer']=e,this['config']=l,this['typeSupported']=E,this['remuxer']=n,this['sampleAes']=null,this['remainData']=null}return i(a,[{'key':"cleanRemainData",'value':function(){this['remainData']=null}},{'key':"setDecryptData",'value':function(a){null!=a&&null!=a.key&&"SAMPLE-AES"===a.method?this['sampleAes']=new y["default"](this.observer,this.config,a,this.discardEPB):this['sampleAes']=null}},{'key':"resetInitSegment",'value':function(e,n,l,E){this['pmtParsed']=!1,this['_pmtId']=-1,this['_avcTrack']=a['createTrack']("video",E),this['_audioTrack']=a['createTrack']("audio",E),this['_id3Track']=a['createTrack']("id3",E),this['_txtTrack']=a['createTrack']("text",E),this['aacOverFlow']=null,this['aacLastPTS']=null,this['avcSample']=null,this['audioCodec']=n,this['videoCodec']=l,this['_duration']=E,this['remainData']=null}},{'key':"resetTimeStamp",'value':function(){}},{'key':"processContiguous",'value':function(a){if(!a){this['aacOverFlow']=null,this['aacLastPTS']=null;var e=this._avcTrack,n=this._audioTrack,l=this._id3Track;e['pesData']=void 0,n['pesData']=void 0,l['pesData']=void 0}}},{'key':"append",'value':function(e,n,l,E,o){if(this['remainData']=D['appendUint8Array'](this.remainData,e),o&&this.remainData){e=this.remainData,this['processContiguous'](l);var i=void 0,t=e.length,r=void 0,b=void 0,d=void 0,c=void 0,w=void 0,x=!1;this['contiguous']=l;var v=this.pmtParsed,y=this._avcTrack,m=this._audioTrack,C=this._id3Track,f=y.pid,g=m.pid,k=C.pid,M=this._pmtId,P=y.pesData,T=m.pesData,u=C.pesData,A=this._parsePAT,R=this._parsePMT,S=this._parsePES,U=this['_parseAVCPES']['bind'](this),I=this['_parseAACPES']['bind'](this),J=this['_parseMPEGPES']['bind'](this),L=this['_parseID3PES']['bind'](this),N=a['_syncOffset'](e);
for(t-=(t+N)%188,i=N;t>i;i+=188)if(71===e[i]){if(r=!!(64&e[i+1]),b=((31&e[i+1])<<8)+e[i+2],d=(48&e[i+3])>>4,d>1){if(c=i+5+e[i+4],c===i+188)continue}else c=i+4;switch(b){case f:r&&(P&&(w=S(P))&&void 0!==w.pts&&U(w,!1),P={'data':[],'size':0}),P&&(P['data']['push'](e['subarray'](c,i+188)),P.size+=i+188-c);break;case g:r&&(T&&(w=S(T))&&void 0!==w.pts&&(m.isAAC?I(w):J(w)),T={'data':[],'size':0}),T&&(T['data']['push'](e['subarray'](c,i+188)),T.size+=i+188-c);break;case k:r&&(u&&(w=S(u))&&void 0!==w.pts&&L(w),u={'data':[],'size':0}),u&&(u['data']['push'](e['subarray'](c,i+188)),u.size+=i+188-c);break;case 0:r&&(c+=e[c]+1),M=this['_pmtId']=A(e,c);break;case M:r&&(c+=e[c]+1);var O=R(e,c,this['typeSupported']['mpeg']===!0||this['typeSupported']['mp3']===!0,null!=this.sampleAes);f=O.avc,f>0&&(y['pid']=f),g=O.audio,g>0&&(m['pid']=g,m['isAAC']=O.isAAC),k=O.id3,k>0&&(C['pid']=k),x&&!v&&(h['logger']['log']("reparse from beginning"),x=!1,i=N-188),v=this['pmtParsed']=!0;break;case 17:case 8191:break;default:x=!0}}else this['observer']['trigger'](p["default"].ERROR,{'type':s.ErrorTypes.MEDIA_ERROR,'details':s.ErrorDetails.FRAG_PARSING_ERROR,'fatal':!1,'reason':"TS packet did not start with 0x47"});P&&(w=S(P))&&void 0!==w.pts?(U(w,!0),y['pesData']=null):y['pesData']=P,T&&(w=S(T))&&void 0!==w.pts?(m.isAAC?I(w):J(w),m['pesData']=null):(T&&T.size&&h['logger']['log']("last AAC PES packet truncated,might overlap between fragments"),m['pesData']=T),u&&(w=S(u))&&void 0!==w.pts?(L(w),C['pesData']=null):C['pesData']=u,null==this.sampleAes?this['remuxer']['remux'](m,y,C,this._txtTrack,n,l,E):this['decryptAndRemux'](m,y,C,this._txtTrack,n,l,E)}}},{'key':"decryptAndRemux",'value':function(a,e,n,l,E,o,i){if(a.samples&&a.isAAC){var t=this;this['sampleAes']['decryptAacSamples'](a.samples,0,function(){t['decryptAndRemuxAvc'](a,e,n,l,E,o,i)})}else this['decryptAndRemuxAvc'](a,e,n,l,E,o,i)}},{'key':"decryptAndRemuxAvc",'value':function(a,e,n,l,E,o,i){if(e.samples){var t=this;this['sampleAes']['decryptAvcSamples'](e.samples,0,0,function(){t['remuxer']['remux'](a,e,n,l,E,o,i)})}else this['remuxer']['remux'](a,e,n,l,E,o,i)}},{'key':"destroy",'value':function(){this['_initPTS']=this['_initDTS']=void 0,this['_duration']=0}},{'key':"_parsePAT",'value':function(a,e){return(31&a[e+10])<<8|a[e+11]}},{'key':"_parsePMT",'value':function(a,e,n,l){var E=void 0,o=void 0,i=void 0,t=void 0,r={'audio':-1,'avc':-1,'id3':-1,'isAAC':!0};for(E=(15&a[e+1])<<8|a[e+2],o=e+3+E-4,i=(15&a[e+10])<<8|a[e+11],e+=12+i;o>e;){switch(t=(31&a[e+1])<<8|a[e+2],a[e]){case 207:if(!l){h['logger']['log']("unkown stream type:"+a[e]);break}case 15:-1===r.audio&&(r['audio']=t);break;case 21:-1===r.id3&&(r['id3']=t);break;case 219:if(!l){h['logger']['log']("unkown stream type:"+a[e]);break}case 27:-1===r.avc&&(r['avc']=t);break;case 3:case 4:n?-1===r.audio&&(r['audio']=t,r['isAAC']=!1):h['logger']['log']("MPEG audio found, not supported in this browser for now");break;case 36:h['logger']['warn']("HEVC stream type found, not supported for now");break;default:h['logger']['log']("unkown stream type:"+a[e])}e+=((15&a[e+3])<<8|a[e+4])+5}return r}},{'key':"_parsePES",'value':function(a){var e=0,n=void 0,l=void 0,E=void 0,o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=void 0,c=a.data;if(!a||0===a.size)return null;for(;c[0].length<19&&c.length>1;){var p=new Uint8Array(c[0].length+c[1].length);p['set'](c[0]),p['set'](c[1],c[0].length),c[0]=p,c['splice'](1,1)}if(n=c[0],E=(n[0]<<16)+(n[1]<<8)+n[2],1===E){if(o=(n[4]<<8)+n[5],o&&o>a.size-6)return null;l=n[7],192&l&&(r=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,r>4294967295&&(r-=8589934592),64&l?(b=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,b>4294967295&&(b-=8589934592),r-b>54e5&&(h['logger']['warn'](Math['round']((r-b)/9e4)+"s delta between PTS and DTS, align them"),r=b)):b=r),i=n[8],d=i+9,a.size-=d,t=new Uint8Array(a.size);for(var w=0,x=c.length;x>w;w++){n=c[w];var v=n.byteLength;if(d){if(d>v){d-=v;continue}n=n['subarray'](d),v-=d,d=0}t['set'](n,e),e+=v}return o&&(o-=i+3),{'data':t,'pts':r,'dts':b,'len':o}}return null}},{'key':"pushAccesUnit",'value':function(a,e){if(a.units.length&&a.frame){var n=e.samples,l=n.length;!this.config.forceKeyFrameOnDiscontinuity||a['key']===!0||e.sps&&(l||this.contiguous)?(a['id']=l,n['push'](a)):e.dropped++}a.debug.length&&h['logger']['log'](a.pts+"/"+a.dts+":"+a.debug)}},{'key':"_parseAVCPES",'value':function(a,e){var n=this,l=this._avcTrack,E=this['_parseAVCNALu'](a.data),o=!1,i=void 0,t=this.avcSample,r=void 0,b=!1,d=void 0,c=this['pushAccesUnit']['bind'](this),p=function(a,e,n,l){return{'key':a,'pts':e,'dts':n,'units':[],'debug':l}};a['data']=null,t&&E.length&&!l.audFound&&(c(t,l),t=this['avcSample']=p(!1,a.pts,a.dts,"")),E['forEach'](function(e){switch(e.type){case 1:r=!0,t||(t=n['avcSample']=p(!0,a.pts,a.dts,"")),o&&(t.debug+="NDR "),t['frame']=!0;var E=e.data;if(b&&E.length>4){var w=new x["default"](E)['readSliceType']();(2===w||4===w||7===w||9===w)&&(t['key']=!0)}break;case 5:r=!0,t||(t=n['avcSample']=p(!0,a.pts,a.dts,"")),o&&(t.debug+="IDR "),t['key']=!0,t['frame']=!0;break;case 6:r=!0,o&&t&&(t.debug+="SEI "),n['_insertSampleInOrder'](n._txtTrack.samples,{'type':3,'pts':a.pts,'bytes':e.data});break;case 7:if(r=!0,b=!0,o&&t&&(t.debug+="SPS "),!l.sps){i=new x["default"](e.data);var v=i['readSPS']();l['width']=v.width,l['height']=v.height,l['pixelRatio']=v.pixelRatio,l['sps']=[e.data],l['duration']=n._duration;var y=e['data']['subarray'](1,4),h="avc1.";for(d=0;3>d;d++){var s=y[d]['toString'](16);s.length<2&&(s="0"+s),h+=s}l['codec']=h}break;case 8:r=!0,o&&t&&(t.debug+="PPS "),l.pps||(l['pps']=[e.data]);break;case 9:r=!1,l['audFound']=!0,t&&c(t,l),t=n['avcSample']=p(!1,a.pts,a.dts,o?"AUD ":"");break;case 12:r=!1;break;default:r=!1,t&&(t.debug+="unknown NAL "+e.type+" ")}if(t&&r){var D=t.units;D['push'](e)}}),e&&t&&(c(t,l),this['avcSample']=null)}},{'key':"_insertSampleInOrder",'value':function(a,e){var n=a.length;if(n>0){if(e.pts>=a[n-1].pts)a['push'](e);else for(var l=n-1;l>=0;l--)if(e.pts<a[l].pts){a['splice'](l,0,e);break}}else a['push'](e)}},{'key':"_getLastNalUnit",'value':function(){var a=this.avcSample,e=void 0;if(!a||0===a.units.length){var n=this._avcTrack,l=n.samples;a=l[l.length-1]}if(a){var E=a.units;e=E[E.length-1]}return e}},{'key':"_parseAVCNALu",'value':function(a){var e=0,n=a.byteLength,l=void 0,E=void 0,o=this._avcTrack,i=o.naluState||0,t=i,r=[],b=void 0,d=void 0,c=-1,p=void 0;for(-1===i&&(c=0,p=31&a[0],i=0,e=1);n>e;)if(l=a[e++],i)if(1!==i)if(l)if(1===l){if(c>=0)b={'data':a['subarray'](c,e-i-1),'type':p},r['push'](b);else{var w=this['_getLastNalUnit']();if(w&&(t&&4-t>=e&&w.state&&(w['data']=w['data']['subarray'](0,w.data.byteLength-t)),E=e-i-1,E>0)){var x=new Uint8Array(w.data.byteLength+E);x['set'](w.data,0),x['set'](a['subarray'](0,E),w.data.byteLength),w['data']=x}}n>e?(d=31&a[e],c=e,p=d,i=0):i=-1}else i=0;else i=3;else i=l?0:2;else i=l?0:1;if(c>=0&&i>=0&&(b={'data':a['subarray'](c,n),'type':p,'state':i},r['push'](b)),0===r.length){var v=this['_getLastNalUnit']();if(v){var y=new Uint8Array(v.data.byteLength+a.byteLength);y['set'](v.data,0),y['set'](a,v.data.byteLength),v['data']=y}}return o['naluState']=i,r}},{'key':"discardEPB",'value':function(a){for(var e=a.byteLength,n=[],l=1,E=void 0,o=void 0;e-2>l;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(n['push'](l+2),l+=2):l++;if(0===n.length)return a;E=e-n.length,o=new Uint8Array(E);var i=0;for(l=0;E>l;i++,l++)i===n[0]&&(i++,n['shift']()),o[l]=a[i];return o}},{'key':"_parseAACPES",'value':function(a){var e=this._audioTrack,n=a.data,l=a.pts,E=0,o=this.aacOverFlow,i=this.aacLastPTS,t=void 0,b=void 0,d=void 0,c=void 0,w=void 0;if(o){var x=new Uint8Array(o.byteLength+n.byteLength);x['set'](o,0),x['set'](n,o.byteLength),n=x}for(d=E,w=n.length;w-1>d&&!r['isHeader'](n,d);d++);if(d){var v=void 0,y=void 0;if(w-1>d?(v="AAC PES did not start with ADTS header,'offset':"+d,y=!1):(v="no ADTS header found in AAC PES",y=!0),h['logger']['warn']("parsing error:"+v),this['observer']['trigger'](p["default"].ERROR,{'type':s.ErrorTypes.MEDIA_ERROR,'details':s.ErrorDetails.FRAG_PARSING_ERROR,'fatal':y,'reason':v}),y)return}if(r['initTrackConfig'](e,this.observer,n,d,this.audioCodec),b=0,t=r['getFrameDuration'](e.samplerate),o&&i){var D=i+t;Math['abs'](D-l)>1&&(h['logger']['log']("AAC: align PTS for overlapping frames by "+Math['round']((D-l)/90)),l=D)}for(;w>d;)if(r['isHeader'](n,d)){if(!(w>d+5))break;var m=r['appendFrame'](e,n,d,l,b);if(!m)break;d+=m.length,c=m.sample.pts,b++}else d++;o=w>d?n['subarray'](d,w):null,this['aacOverFlow']=o,this['aacLastPTS']=c}},{'key':"_parseMPEGPES",'value':function(a){for(var e=a.data,n=e.length,l=0,E=0,o=a.pts;n>E;)if(d["default"]['isHeader'](e,E)){var i=d["default"]['appendFrame'](this._audioTrack,e,E,o,l);if(!i)break;E+=i.length,l++}else E++}},{'key':"_parseID3PES",'value':function(a){this._id3Track['samples']['push'](a)}}],[{'key':"probe",'value':function(e){var n=a['_syncOffset'](e);return 0>n?!1:(n&&h['logger']['warn']("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)}},{'key':"_syncOffset",'value':function(a){for(var e=Math['min'](1e3,a.length-564),n=0;e>n;){if(71===a[n]&&71===a[n+188]&&71===a[n+376])return n;n++}return-1}},{'key':"createTrack",'value':function(a,e){return{'container':"video"===a||"audio"===a?"video/mp2t":void 0,'type':a,'id':m[a],'pid':-1,'inputTimeScale':9e4,'sequenceNumber':0,'samples':[],'len':0,'dropped':"video"===a?0:void 0,'isAAC':"audio"===a?!0:void 0,'duration':"audio"===a?e:void 0}}}]),a}();n["default"]=C},{'245':245,'249':249,'253':253,'254':254,'256':256,'258':258,'273':273,'285':285}],'256':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});n['ErrorTypes']={'NETWORK_ERROR':"networkError",'MEDIA_ERROR':"mediaError",'KEY_SYSTEM_ERROR':"keySystemError",'MUX_ERROR':"muxError",'OTHER_ERROR':"otherError"},n['ErrorDetails']={'KEY_SYSTEM_NO_KEYS':"keySystemNoKeys",'KEY_SYSTEM_NO_ACCESS':"keySystemNoAccess",'KEY_SYSTEM_NO_SESSION':"keySystemNoSession",'KEY_SYSTEM_LICENSE_REQUEST_FAILED':"keySystemLicenseRequestFailed",'MANIFEST_LOAD_ERROR':"manifestLoadError",'MANIFEST_LOAD_TIMEOUT':"manifestLoadTimeOut",'MANIFEST_PARSING_ERROR':"manifestParsingError",'MANIFEST_INCOMPATIBLE_CODECS_ERROR':"manifestIncompatibleCodecsError",'LEVEL_LOAD_ERROR':"levelLoadError",'LEVEL_LOAD_TIMEOUT':"levelLoadTimeOut",'LEVEL_SWITCH_ERROR':"levelSwitchError",'AUDIO_TRACK_LOAD_ERROR':"audioTrackLoadError",'AUDIO_TRACK_LOAD_TIMEOUT':"audioTrackLoadTimeOut",'FRAG_LOAD_ERROR':"fragLoadError",'FRAG_LOAD_TIMEOUT':"fragLoadTimeOut",'FRAG_DECRYPT_ERROR':"fragDecryptError",'FRAG_PARSING_ERROR':"fragParsingError",'REMUX_ALLOC_ERROR':"remuxAllocError",'KEY_LOAD_ERROR':"keyLoadError",'KEY_LOAD_TIMEOUT':"keyLoadTimeOut",'BUFFER_ADD_CODEC_ERROR':"bufferAddCodecError",'BUFFER_APPEND_ERROR':"bufferAppendError",'BUFFER_APPENDING_ERROR':"bufferAppendingError",'BUFFER_STALLED_ERROR':"bufferStalledError",'BUFFER_FULL_ERROR':"bufferFullError",'BUFFER_SEEK_OVER_HOLE':"bufferSeekOverHole",'BUFFER_NUDGE_ON_STALL':"bufferNudgeOnStall",'INTERNAL_EXCEPTION':"internalException"}},{}],'257':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),t=a(285),r=a(256),b=a(258),d=l(b),c=["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"],p=function(){function a(e){E(this,a),this['hls']=e,this['onEvent']=this['onEvent']['bind'](this);for(var n=arguments.length,l=Array(n>1?n-1:0),o=1;n>o;o++)l[o-1]=arguments[o];this['handledEvents']=l,this['useGenericHandler']=!0,this['registerListeners']()}return i(a,[{'key':"destroy",'value':function(){this['onHandlerDestroying'](),this['unregisterListeners'](),this['onHandlerDestroyed']()}},{'key':"onHandlerDestroying",'value':function(){}},{'key':"onHandlerDestroyed",'value':function(){}},{'key':"isEventHandler",'value':function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{'key':"registerListeners",'value':function(){this['isEventHandler']()&&this['handledEvents']['forEach'](function(a){if(-1!==c['indexOf'](a))throw new Error("Forbidden event-name: "+a);this['hls']['on'](a,this.onEvent)},this)}},{'key':"unregisterListeners",'value':function(){this['isEventHandler']()&&this['handledEvents']['forEach'](function(a){this['hls']['off'](a,this.onEvent)},this)}},{'key':"onEvent",'value':function(a,e){this['onEventGeneric'](a,e)}},{'key':"onEventGeneric",'value':function(a,e){var n=function(a,e){var n="on"+a['replace']("hls","");if("function"!=typeof this[n])throw new Error("Event "+a+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n]['bind'](this,e)};try{n['call'](this,a,e)['call']()}catch(l){t['logger']['error']("An internal error happened while handling event "+a+'. Error message: "'+l.message+'". Here is a stacktrace:',l),this['hls']['trigger'](d["default"].ERROR,{'type':r.ErrorTypes.OTHER_ERROR,'details':r.ErrorDetails.INTERNAL_EXCEPTION,'fatal':!1,'event':a,'err':l})}}}]),a}();n["default"]=p},{'256':256,'258':258,'285':285}],'258':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'MEDIA_ATTACHING':"hlsMediaAttaching",'MEDIA_ATTACHED':"hlsMediaAttached",'MEDIA_DETACHING':"hlsMediaDetaching",'MEDIA_DETACHED':"hlsMediaDetached",'BUFFER_RESET':"hlsBufferReset",'BUFFER_CODECS':"hlsBufferCodecs",'BUFFER_CREATED':"hlsBufferCreated",'BUFFER_APPENDING':"hlsBufferAppending",'BUFFER_APPENDED':"hlsBufferAppended",'BUFFER_EOS':"hlsBufferEos",'BUFFER_FLUSHING':"hlsBufferFlushing",'BUFFER_FLUSHED':"hlsBufferFlushed",'MANIFEST_LOADING':"hlsManifestLoading",'MANIFEST_LOADED':"hlsManifestLoaded",'MANIFEST_PARSED':"hlsManifestParsed",'LEVEL_SWITCHING':"hlsLevelSwitching",'LEVEL_SWITCHED':"hlsLevelSwitched",'LEVEL_LOADING':"hlsLevelLoading",'LEVEL_LOADED':"hlsLevelLoaded",'LEVEL_UPDATED':"hlsLevelUpdated",'LEVEL_PTS_UPDATED':"hlsLevelPtsUpdated",'AUDIO_TRACKS_UPDATED':"hlsAudioTracksUpdated",'AUDIO_TRACK_SWITCHING':"hlsAudioTrackSwitching",'AUDIO_TRACK_SWITCHED':"hlsAudioTrackSwitched",'AUDIO_TRACK_LOADING':"hlsAudioTrackLoading",'AUDIO_TRACK_LOADED':"hlsAudioTrackLoaded",'SUBTITLE_TRACKS_UPDATED':"hlsSubtitleTracksUpdated",'SUBTITLE_TRACK_SWITCH':"hlsSubtitleTrackSwitch",'SUBTITLE_TRACK_LOADING':"hlsSubtitleTrackLoading",'SUBTITLE_TRACK_LOADED':"hlsSubtitleTrackLoaded",'SUBTITLE_FRAG_PROCESSED':"hlsSubtitleFragProcessed",'INIT_PTS_FOUND':"hlsInitPtsFound",'FRAG_LOADING':"hlsFragLoading",'FRAG_LOAD_PROGRESS':"hlsFragLoadProgress",'FRAG_LOAD_EMERGENCY_ABORTED':"hlsFragLoadEmergencyAborted",'FRAG_LOADED':"hlsFragLoaded",'FRAG_DECRYPTED':"hlsFragDecrypted",'FRAG_PARSING_INIT_SEGMENT':"hlsFragParsingInitSegment",'FRAG_PARSING_USERDATA':"hlsFragParsingUserdata",'FRAG_PARSING_METADATA':"hlsFragParsingMetadata",'FRAG_PARSING_DATA':"hlsFragParsingData",'FRAG_PARSED':"hlsFragParsed",'FRAG_BUFFERED':"hlsFragBuffered",'FRAG_CHANGED':"hlsFragChanged",'FPS_DROP':"hlsFpsDrop",'FPS_DROP_LEVEL_CAPPING':"hlsFpsDropLevelCapping",'ERROR':"hlsError",'DESTROYING':"hlsDestroying",'KEY_LOADING':"hlsKeyLoading",'KEY_LOADED':"hlsKeyLoaded",'STREAM_STATE_TRANSITION':"hlsStreamStateTransition",'VO_DEFAULT_TEXT_TRACK':"hlsVoDefaultTextTrack"};n["default"]=l},{}],'259':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(347),t=l(i),r=a(256),b=a(267),d=l(b),c=a(261),p=l(c),w=a(263),x=l(w),v=a(230),y=a(235),h=l(y),s=a(239),D=l(s),m=a(233),C=l(m),f=a(232),g=l(f),k=a(260),M=a(285),P=a(221),T=a(258),u=l(T),A=a(337),R=l(A);a(345);var S=function(){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,a);var n=a.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var l in n)l in e||(e[l]=n[l]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');M['enableLogs'](e.debug,this),this['config']=e,this['_autoLevelCapping']=-1;var o=this['observer']=new R["default"];o['trigger']=function(a){for(var e=arguments.length,n=Array(e>1?e-1:0),l=1;e>l;l++)n[l-1]=arguments[l];o['emit']['apply'](o,[a,a]['concat'](n))},o['trigger2']=function(a){for(var e=arguments.length,n=Array(e>1?e-1:0),l=1;e>l;l++)n[l-1]=arguments[l];o['emit']['apply'](o,[a]['concat'](n))},o['off']=function(a){for(var e=arguments.length,n=Array(e>1?e-1:0),l=1;e>l;l++)n[l-1]=arguments[l];o['removeListener']['apply'](o,[a]['concat'](n))},this['on']=o['on']['bind'](o),this['off']=o['off']['bind'](o),this['once']=o['once']['bind'](o),this['trigger']=o['trigger']['bind'](o),this['trigger2']=o['trigger2']['bind'](o);var i=this['abrController']=new e['abrController'](this),t=new e['bufferController'](this),r=new e['capLevelController'](this),b=new e['fpsController'](this),c=new d["default"](this),w=new p["default"](this),y=new x["default"](this),s=new g["default"](this),m=this['levelController']=new C["default"](this),f=new v['FragmentTracker'](this),k=this['streamController']=new h["default"](this,f),P=[m,k],T=e.audioStreamController;if(T){var u=this['audioStreamController']=new T(this,f);P['push'](u)}this['networkControllers']=P;var A=this['timeSyncController']=new D["default"](this),S=[c,w,y,i,t,r,b,s,f,A];if(T=e.audioTrackController){var U=new T(this);this['audioTrackController']=U,S['push'](U)}if(T=e.subtitleTrackController){var I=new T(this);this['subtitleTrackController']=I,S['push'](I)}if(T=e.emeController){var J=new T(this);this['emeController']=J,S['push'](J)}if(T=e.subtitleStreamController){var L=this['subtitleStreamController']=new T(this);S['push'](L)}T=e.timelineController,T&&S['push'](new T(this)),this['coreComponents']=S}return o(a,null,[{'key':"isSupported",'value':function(){return k['isSupported']()}},{'key':"version",'get':function(){return __VERSION__}},{'key':"Events",'get':function(){return u["default"]}},{'key':"ErrorTypes",'get':function(){return r.ErrorTypes}},{'key':"ErrorDetails",'get':function(){return r.ErrorDetails}},{'key':"DefaultConfig",'get':function(){return a.defaultConfig?a.defaultConfig:P.hlsDefaultConfig},'set':function(e){a['defaultConfig']=e}}]),o(a,[{'key':"destroy",'value':function(){M['logger']['log']("destroy"),this['trigger'](u["default"].DESTROYING),this['detachMedia'](),this['coreComponents']['concat'](this.networkControllers)['forEach'](function(a){a['destroy']()}),this['url']=null,this['observer']['removeAllListeners'](),this['_autoLevelCapping']=-1}},{'key':"attachMedia",'value':function(a){M['logger']['log']("attachMedia"),this['media']=a,this['trigger'](u["default"].MEDIA_ATTACHING,{'media':a})}},{'key':"detachMedia",'value':function(){M['logger']['log']("detachMedia"),this['trigger'](u["default"].MEDIA_DETACHING),this['media']=null}},{'key':"loadSource",'value':function(a){a=t["default"]['buildAbsoluteURL'](window.location.href,a,{'alwaysNormalize':!0}),M['logger']['log']("loadSource:"+a),this['url']=a,this['trigger'](u["default"].MANIFEST_LOADING,{'url':a}),this['updateDownloadNormal_']=this['config']['autoPlay']===!0}},{'key':"startLoad",'value':function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;M['logger']['log']("startLoad("+a+")"),this['networkControllers']['forEach'](function(e){e['startLoad'](a)})}},{'key':"stopLoad",'value':function(){M['logger']['log']("stopLoad"),this['networkControllers']['forEach'](function(a){a['stopLoad']()})}},{'key':"recoverLoad",'value':function(){M['logger']['log']("recoverLoad"),this['updateDownloadNormal_']===!1&&(this['updateDownloadNormal_']=!0,this['streamController']['recoverLoad'](),this.subtitleStreamController&&this['subtitleStreamController']['recoverLoad'](),this.audioStreamController&&this['audioStreamController']['recoverLoad']())}},{'key':"swapAudioCodec",'value':function(){M['logger']['log']("swapAudioCodec"),this['streamController']['swapAudioCodec']()}},{'key':"recoverMediaError",'value':function(){M['logger']['log']("recoverMediaError");var a=this.media;this['detachMedia'](),this['attachMedia'](a)}},{'key':"getMinLevel",'value':function(){var a=-1,e=this,n=e.levels,l=e.config.minBitrate,E=n?n.length:0;if(l){for(var o=0;E>o;o++){var i=n[o].realBitrate?Math['max'](n[o].realBitrate,n[o].bitrate):n[o].bitrate;if(i>=l){a=o;break}}-1===a&&(a=E-1)}else a=0;return a}},{'key':"getMaxLevel",'value':function(){var a=-1,e=this,n=e.levels,l=e.config.maxBitrate,E=n?n.length:0;if(l){for(var o=E-1;o>=0;o--){var i=n[o].realBitrate?Math['max'](n[o].realBitrate,n[o].bitrate):n[o].bitrate;if(l>=i){a=o;break}}-1===a&&(a=0)}else a=e.levels.length-1;return a}},{'key':"isLive",'value':function(){var a=void 0;return a=this.levelDetails?this.levelDetails.details.live:!1}},{'key':"getPosition",'value':function(){return this.media.currentTime}},{'key':"getDuration",'value':function(){return this['isLive']()?1/0:this.media.duration}},{'key':"getSeekableRange",'value':function(){var a={},e=this.levelDetails.details;if(this['isLive']())if(e.totalduration<=3*e.targetduration)a['start']=0,a['end']=0;else{var n=this['getPosition']();n>this.liveSyncPosition?a['end']=n:a['end']=this.liveSyncPosition,a['start']=a.end-(e.totalduration-3*e.targetduration)}else for(var l=this.media.seekable,E=0;E<l.length;E++){a['start']=l['start'](E),a['end']=l['end'](E);break}return a}},{'key':"setPresentationDelay",'value':function(a){this['config']['liveDelay']=a}},{'key':"getCurrentTimeForLocal",'value':function(){var a=void 0;if(this['isLive']()){var e=this['timeSyncController']['getOffsetToDeviceTimeMs'](),n=this['streamController']['getProgramDateTime'](),l=this['getPosition']();a=(n+1e3*l-e)['toFixed'](3)}else a=this['getPosition']();return new Date(parseFloat(a))}},{'key':"getCurrentLiveLatency",'value':function(){var a=void 0,e=this['getPosition']();if(this['isLive']()){var n=this['streamController']['getProgramDateTime']();if(-1===n)a=Math['abs'](this.streamController.liveSyncPosition-e);else{var l=this['timeSyncController']['getOffsetToDeviceTimeMs'](),E=new Date(n+1e3*e-l),o=new Date;a=o['getTime']()-E['getTime'](),a=parseFloat((a/1e3)['toFixed'](3))}}else a=0;return a}},{'key':"updateDownloadNormal",'get':function(){return this.updateDownloadNormal_}},{'key':"levels",'get':function(){return this.levelController.levels}},{'key':"currentLevel",'get':function(){return this.streamController.currentLevel},'set':function(a){M['logger']['log']("set currentLevel:"+a),this['loadLevel']=a,this['streamController']['immediateLevelSwitch']()}},{'key':"nextLevel",'get':function(){return this.streamController.nextLevel},'set':function(a){M['logger']['log']("set nextLevel:"+a),this['levelController']['manualLevel']=a,this['streamController']['nextLevelSwitch']()}},{'key':"loadLevel",'get':function(){return this.levelController.level},'set':function(a){M['logger']['log']("set loadLevel:"+a),this['levelController']['manualLevel']=a}},{'key':"nextLoadLevel",'get':function(){return this.levelController.nextLoadLevel},'set':function(a){this['levelController']['nextLoadLevel']=a}},{'key':"firstLevel",'get':function(){return Math['max'](this.levelController.firstLevel,this.minAutoLevel)},'set':function(a){M['logger']['log']("set firstLevel:"+a),this['levelController']['firstLevel']=a}},{'key':"startLevel",'get':function(){return this.levelController.startLevel},'set':function(a){M['logger']['log']("set startLevel:"+a);var e=this;-1!==a&&(a=Math['max'](a,e.minAutoLevel)),e['levelController']['startLevel']=a}},{'key':"autoLevelCapping",'get':function(){return this._autoLevelCapping},'set':function(a){M['logger']['log']("set autoLevelCapping:"+a),this['_autoLevelCapping']=a}},{'key':"autoLevelEnabled",'get':function(){return-1===this.levelController.manualLevel}},{'key':"manualLevel",'get':function(){return this.levelController.manualLevel}},{'key':"minAutoLevel",'get':function(){for(var a=this,e=a.levels,n=a.config.minAutoBitrate,l=e?e.length:0,E=0;l>E;E++){var o=e[E].realBitrate?Math['max'](e[E].realBitrate,e[E].bitrate):e[E].bitrate;if(o>n)return E}return 0}},{'key':"maxAutoLevel",'get':function(){var a=this,e=a.levels,n=a.autoLevelCapping,l=void 0;return l=-1===n&&e&&e.length?e.length-1:n}},{'key':"nextAutoLevel",'get':function(){var a=this,e=Math['min'](Math['max'](a.abrController.nextAutoLevel,a.minAutoLevel),a.maxAutoLevel);a.currentLevel<0&&a.startLevel>=0&&(e=a.startLevel);var n=this['getMinLevel'](),l=this['getMaxLevel']();return e=Math['min'](Math['max'](e,n),l)},'set':function(a){var e=this;e['abrController']['nextAutoLevel']=Math['max'](e.minAutoLevel,a)}},{'key':"audioTracks",'get':function(){var a=this.audioTrackController;return a?a.audioTracks:[]}},{'key':"audioTrack",'get':function(){var a=this.audioTrackController;return a?a.audioTrack:-1},'set':function(a){var e=this.audioTrackController;e&&(e['audioTrack']=a)}},{'key':"liveSyncPosition",'get':function(){return this.streamController.liveSyncPosition}},{'key':"subtitleTracks",'get':function(){var a=this.subtitleTrackController;return a?a.subtitleTracks:[]}},{'key':"subtitleTrack",'get':function(){var a=this.subtitleTrackController;return a?a.subtitleTrack:-1},'set':function(a){var e=this.subtitleTrackController;e&&(e['subtitleTrack']=a)}},{'key':"subtitleDisplay",'get':function(){var a=this.subtitleTrackController;return a?a.subtitleDisplay:!1},'set':function(a){var e=this.subtitleTrackController;e&&(e['subtitleDisplay']=a)}},{'key':"levelDetails",'get':function(){return this.streamController.levelDetail}}]),a}();n["default"]=S},{'221':221,'230':230,'232':232,'233':233,'235':235,'239':239,'256':256,'258':258,'260':260,'261':261,'263':263,'267':267,'285':285,'337':337,'345':345,'347':347}],'260':[function(a,e,n){"use strict";function l(){var a=E['getMediaSource'](),e=window.SourceBuffer||window.WebKitSourceBuffer,n=a&&"function"==typeof a.isTypeSupported&&a['isTypeSupported']('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),l=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!l}Object['defineProperty'](n,"__esModule",{'value':!0}),n['isSupported']=l;var E=a(287)},{'287':287}],'261':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=function m(a,e,n){null===a&&(a=Function.prototype);var l=Object['getOwnPropertyDescriptor'](a,e);if(void 0===l){var E=Object['getPrototypeOf'](a);return null===E?void 0:m(E,e,n)}if("value"in l)return l.value;var o=l.get;return void 0===o?void 0:o['call'](n)},b=a(258),d=l(b),c=a(257),p=l(c),w=a(256),x=a(285),v=a(295),y=l(v),h=a(282),s=l(h),D=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,d["default"].FRAG_LOADING));return n['loaders']={},n}return i(e,a),t(e,[{'key':"destroy",'value':function(){var a=this.loaders;for(var n in a){var l=a[n];l&&l['destroy']()}this['loaders']={},r(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"destroy",this)['call'](this)}},{'key':"onFragLoading",'value':function(a){var e=a.frag,n=e.type,l=this.loaders,E=this.hls.config;E.fLoader,E.loader;e['loaded']=0;var o=l[n];o&&(x['logger']['warn']("abort previous fragment loader for type: "+n),o['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'url':e.url,'droppedBytes':e.loaded,'downloadTime':o.stats.tabort?o.stats.tabort-o.stats.tfirst:null})),o=l[n]=e['loader']="xhr"===e.loaderType?new y["default"](E):new s["default"](E);var i=void 0,t=void 0,r=void 0;i={'url':e.url,'frag':e,'responseType':"arraybuffer",'progressData':!1};var b=e.byteRangeStartOffset,d=e.byteRangeEndOffset;Number['isFinite'](b)&&Number['isFinite'](d)&&(i['rangeStart']=b,i['rangeEnd']=d),i['headers']=E.httpHeaders,t={'timeout':E.fragLoadingTimeOut,'maxRetry':0,'retryDelay':0,'maxRetryDelay':E.fragLoadingMaxRetryTimeout},r={'onSuccess':this['loadsuccess']['bind'](this),'onError':this['loaderror']['bind'](this),'onTimeout':this['loadtimeout']['bind'](this),'onProgress':this['loadprogress']['bind'](this)},o['load'](i,t,r)}},{'key':"loadsuccess",'value':function(a,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DOWNLOADED_INFO,{'downloadBytes':e.total,'downloadTime':e.tload-e.tfirst,'errorStatus':null,'errorStatusText':null,'url':n.url});var E=a.data,o=n.frag;o['loader']=void 0,this['loaders'][o.type]=void 0,this['hls']['trigger'](d["default"].FRAG_LOADED,{'payload':E,'frag':o,'stats':e,'networkDetails':l})}},{'key':"loaderror",'value':function(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e.frag,E=l.loader;E&&E['abort'](),this['loaders'][l.type]=void 0,this['hls']['trigger'](d["default"].ERROR,{'type':w.ErrorTypes.NETWORK_ERROR,'details':w.ErrorDetails.FRAG_LOAD_ERROR,'fatal':!1,'frag':e.frag,'response':a,'networkDetails':n})}},{'key':"loadtimeout",'value':function(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e.frag,E=l.loader;E&&E['abort'](),this['loaders'][l.type]=void 0,this['hls']['trigger'](d["default"].ERROR,{'type':w.ErrorTypes.NETWORK_ERROR,'details':w.ErrorDetails.FRAG_LOAD_TIMEOUT,'fatal':!1,'frag':e.frag,'networkDetails':n})}},{'key':"loadprogress",'value':function(a,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,E=e.frag,o=n;E['loaded']=a.loaded,this['hls']['trigger'](d["default"].FRAG_LOAD_PROGRESS,{'payload':o,'frag':E,'stats':a,'networkDetails':l})}}]),e}(p["default"]);n["default"]=D},{'256':256,'257':257,'258':258,'282':282,'285':285,'295':295}],'262':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var i=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),t=a(347),r=l(t),b=a(264),d=l(b),c=function(){function a(){var e;o(this,a),this['_url']=null,this['_byteRange']=null,this['_decryptdata']=null,this['tagList']=[],this['programDateTime']=null,this['rawProgramDateTime']=null,this['_elementaryStreams']=(e={},E(e,a.ElementaryStreamTypes.AUDIO,!1),E(e,a.ElementaryStreamTypes.VIDEO,!1),e)}return i(a,[{'key':"addElementaryStream",'value':function(a){this['_elementaryStreams'][a]=!0}},{'key':"hasElementaryStream",'value':function(a){return this['_elementaryStreams'][a]===!0}},{'key':"createInitializationVector",'value':function(a){for(var e=new Uint8Array(16),n=12;16>n;n++)e[n]=a>>8*(15-n)&255;return e}},{'key':"fragmentDecryptdataFromLevelkey",'value':function(a,e){var n=a;return a&&a.method&&a.uri&&!a.iv&&(n=new d["default"],n['method']=a.method,n['baseuri']=a.baseuri,n['reluri']=a.reluri,n['iv']=this['createInitializationVector'](e)),n}},{'key':"url",'get':function(){return!this._url&&this.relurl&&(this['_url']=r["default"]['buildAbsoluteURL'](this.baseurl,this.relurl,{'alwaysNormalize':!0})),this._url},'set':function(a){this['_url']=a}},{'key':"byteRange",'get':function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var a=[];if(this.rawByteRange){var e=this['rawByteRange']['split']("@",2);if(1===e.length){var n=this.lastByteRangeEndOffset;a[0]=n||0}else a[0]=parseInt(e[1]);a[1]=parseInt(e[0])+a[0],this['_byteRange']=a}return a}},{'key':"byteRangeStartOffset",'get':function(){return this['byteRange'][0]}},{'key':"byteRangeEndOffset",'get':function(){return this['byteRange'][1]}},{'key':"decryptdata",'get':function(){return this._decryptdata||(this['_decryptdata']=this['fragmentDecryptdataFromLevelkey'](this.levelkey,this.sn)),
this._decryptdata}},{'key':"endProgramDateTime",'get':function(){if(!Number['isFinite'](this.programDateTime))return null;var a=Number['isFinite'](this.duration)?this.duration:0;return this.programDateTime+1e3*a}},{'key':"encrypted",'get':function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{'key':"ElementaryStreamTypes",'get':function(){return{'AUDIO':"audio",'VIDEO':"video"}}}]),a}();n["default"]=c},{'264':264,'347':347}],'263':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(258),b=l(r),d=a(257),c=l(d),p=a(256),w=a(285),x=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,b["default"].KEY_LOADING));return n['loaders']={},n['decryptkey']=null,n['decrypturl']=null,n}return i(e,a),t(e,[{'key':"destroy",'value':function(){for(var a in this.loaders){var e=this['loaders'][a];e&&e['destroy']()}this['loaders']={},c["default"].prototype['destroy']['call'](this)}},{'key':"onKeyLoading",'value':function(a){var e=a.frag,n=e.type,l=this['loaders'][n],E=e.decryptdata,o=E.uri;if(o!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;l&&(w['logger']['warn']("abort previous key loader for type:"+n),l['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'droppedBytes':e.loaded})),e['loader']=this['loaders'][n]=new i['loader'](i),this['decrypturl']=o,this['decryptkey']=null;var t=void 0,r=void 0,d=void 0;t={'url':o,'frag':e,'responseType':"arraybuffer"},r={'timeout':i.fragLoadingTimeOut,'maxRetry':i.fragLoadingMaxRetry,'retryDelay':i.fragLoadingRetryDelay,'maxRetryDelay':i.fragLoadingMaxRetryTimeout},d={'onSuccess':this['loadsuccess']['bind'](this),'onError':this['loaderror']['bind'](this),'onTimeout':this['loadtimeout']['bind'](this)},e['loader']['load'](t,r,d)}else this.decryptkey&&(E['key']=this.decryptkey,this['hls']['trigger'](b["default"].KEY_LOADED,{'frag':e}))}},{'key':"loadsuccess",'value':function(a,e,n){this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DOWNLOADED_INFO,{'downloadBytes':e.total,'downloadTime':e.tload-e.tfirst,'errorStatus':null,'errorStatusText':null});var l=n.frag;this['decryptkey']=l['decryptdata']['key']=new Uint8Array(a.data),l['loader']=void 0,this['loaders'][l.type]=void 0,this['hls']['trigger'](b["default"].KEY_LOADED,{'frag':l})}},{'key':"loaderror",'value':function(a,e){var n=e.frag,l=n.loader;l&&l['abort'](),this['loaders'][e.type]=void 0,this['hls']['trigger'](b["default"].ERROR,{'type':p.ErrorTypes.NETWORK_ERROR,'details':p.ErrorDetails.KEY_LOAD_ERROR,'fatal':!1,'frag':n,'response':a})}},{'key':"loadtimeout",'value':function(a,e){var n=e.frag,l=n.loader;l&&l['abort'](),this['loaders'][e.type]=void 0,this['hls']['trigger'](b["default"].ERROR,{'type':p.ErrorTypes.NETWORK_ERROR,'details':p.ErrorDetails.KEY_LOAD_TIMEOUT,'fatal':!1,'frag':n})}}]),e}(c["default"]);n["default"]=x},{'256':256,'257':257,'258':258,'285':285}],'264':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(347),t=l(i),r=function(){function a(){E(this,a),this['method']=null,this['key']=null,this['iv']=null,this['_uri']=null}return o(a,[{'key':"uri",'get':function(){return!this._uri&&this.reluri&&(this['_uri']=t["default"]['buildAbsoluteURL'](this.baseuri,this.reluri,{'alwaysNormalize':!0})),this._uri}}]),a}();n["default"]=r},{'347':347}],'265':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e){l(this,a),this['endCC']=0,this['endSN']=0,this['fragments']=[],this['initSegment']=null,this['live']=!0,this['needSidxRanges']=!1,this['startCC']=0,this['startSN']=0,this['startTimeOffset']=null,this['targetduration']=0,this['totalduration']=0,this['type']=null,this['url']=e,this['version']=null}return E(a,[{'key':"hasProgramDateTime",'get':function(){return!(!this['fragments'][0]||!Number['isFinite'](this['fragments'][0].programDateTime))}}]),a}();n["default"]=o},{}],'266':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){for(var n=a[e],l=e-1;l>=0;l--){var E=a[l];E['programDateTime']=n.programDateTime-1e3*E.duration,n=E}}function i(a,e){a.rawProgramDateTime?a['programDateTime']=Date['parse'](a.rawProgramDateTime):e&&e.programDateTime&&(a['programDateTime']=e.endProgramDateTime),Number['isFinite'](a.programDateTime)||(a['programDateTime']=null,a['rawProgramDateTime']=null)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(347),b=l(r),d=a(262),c=l(d),p=a(265),w=l(p),x=a(264),v=l(x),y=a(274),h=l(y),s=a(285),D=a(277),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,C=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source]['join'](""),"g"),g=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,k=/\.(mp4|m4s|m4v|m4a)$/i,M=function(){function a(e){E(this,a),this['hls']=e,this['masterStartTimeOffset']=void 0,this['masterPrecise']=!1}return t(a,[{'key':"parseMasterPlaylist",'value':function(e,n){function l(a,e){["video","audio"]['forEach'](function(n){var l=a['filter'](function(a){return D['isCodecType'](a,n)});if(l.length){var E=l['filter'](function(a){return 0===a['lastIndexOf']("avc1",0)||0===a['lastIndexOf']("mp4a",0)});e[n+"Codec"]=E.length>0?E[0]:l[0],a=a['filter'](function(a){return-1===l['indexOf'](a)})}}),e['unknownCodecs']=a}var E=[],o=void 0;m['lastIndex']=0;for(var i=void 0;null!=(o=f['exec'](e));)if(o=o[0]['match'](g),null!=o){for(i=1;i<o.length&&void 0===o[i];i++);var t=(" "+o[i+1])['slice'](1);if("START"===o[i]){var r=t,b=new h["default"](r),d=b['decimalFloatingPoint']("TIME-OFFSET");isNaN(d)||(s['logger']['log']("master TIME-OFFSET "+d),this['masterStartTimeOffset']=d);var c=b['enumeratedString']("PRECISE");s['logger']['log']("master PRECISE"+c),"YES"===c&&(this['masterPrecise']=!0);break}}for(;null!=(o=m['exec'](e));){var p={},w=p['attrs']=new h["default"](o[1]);if(!w||!w.CODECS||-1===w['CODECS']['indexOf']("vp09")){p['url']=a['resolve'](o[2],n);var x=w['decimalResolution']("RESOLUTION");x&&(p['width']=x.width,p['height']=x.height),p['bitrate']=w['decimalInteger']("AVERAGE-BANDWIDTH")||w['decimalInteger']("BANDWIDTH"),p['name']=w.NAME,l([]['concat']((w.CODECS||"")['split'](/[ ,]+/)),p),p.videoCodec&&-1!==p['videoCodec']['indexOf']("avc1")&&(p['videoCodec']=a['convertAVC1ToAVCOTI'](p.videoCodec)),E['push'](p)}}return E}},{'key':"parseMasterPlaylistMedia",'value':function(e,n,l){var E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,i=[],t=0;for(C['lastIndex']=0;null!==(o=C['exec'](e));){var r={},b=new h["default"](o[1]);if(b['TYPE']===l){if(r['groupId']=b["GROUP-ID"],r['name']=b.NAME,r['type']=l,r["default"]="YES"===b.DEFAULT,r['autoselect']="YES"===b.AUTOSELECT,r['forced']="YES"===b.FORCED,b.URI&&(r['url']=a['resolve'](b.URI,n)),r['lang']=b.LANGUAGE,r.name||(r['name']=r.lang),E.length){var d=a['findGroup'](E,r.groupId);r['audioCodec']=d?d.codec:E[0].codec}r['id']=t++,i['push'](r)}}return i}},{'key':"parseLevelPlaylist",'value':function(e,n,l,E,t){var r=0,b=0,d=new w["default"](n),p=new v["default"],x=0,y=null,D=new c["default"],m=void 0,C=void 0,M=null;for(f['lastIndex']=0,isNaN(this.masterStartTimeOffset)||(d['startTimeOffset']=this.masterStartTimeOffset,d['precise']=this.masterPrecise);null!==(m=f['exec'](e));){var P=m[1];if(P){D['duration']=parseFloat(P);var T=(" "+m[2])['slice'](1);D['title']=T||null,D['tagList']['push'](T?["INF",P,T]:["INF",P])}else if(m[3]){if(Number['isFinite'](D.duration)){var u=r++;D['type']=E,D['start']=b,D['levelkey']=p,D['sn']=u,D['level']=l,D['cc']=x,D['urlId']=t,D['baseurl']=n,D['relurl']=(" "+m[3])['slice'](1),i(D,y),d['fragments']['push'](D),y=D,b+=D.duration,D=new c["default"]}}else if(m[4]){if(D['rawByteRange']=(" "+m[4])['slice'](1),y){var A=y.byteRangeEndOffset;A&&(D['lastByteRangeEndOffset']=A)}}else if(m[5])D['rawProgramDateTime']=(" "+m[5])['slice'](1),D['tagList']['push'](["PROGRAM-DATE-TIME",D.rawProgramDateTime]),null===M&&(M=d.fragments.length);else{for(m=m[0]['match'](g),C=1;C<m.length&&void 0===m[C];C++);var R=(" "+m[C+1])['slice'](1),S=(" "+m[C+2])['slice'](1);switch(m[C]){case"#":D['tagList']['push'](S?[R,S]:[R]);break;case"PLAYLIST-TYPE":d['type']=R['toUpperCase']();break;case"MEDIA-SEQUENCE":r=d['startSN']=parseInt(R);break;case"TARGETDURATION":d['targetduration']=parseFloat(R);break;case"VERSION":d['version']=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":d['live']=!1;break;case"DIS":x++,D['tagList']['push'](["DIS"]);break;case"DISCONTINUITY-SEQ":x=parseInt(R);break;case"KEY":var U=R,I=new h["default"](U),J=I['enumeratedString']("METHOD"),L=I.URI,N=I['hexadecimalInteger']("IV");J&&(p=new v["default"],L&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"]['indexOf'](J)>=0&&(p['method']=J,p['baseuri']=n,p['reluri']=L,p['key']=null,p['iv']=N,this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DRM_TYPE,{'drmType':p.method})));break;case"START":var O=R,V=new h["default"](O),j=V['decimalFloatingPoint']("TIME-OFFSET"),q=V['enumeratedString']("PRECISE");Number['isFinite'](j)&&(d['startTimeOffset']=j),s['logger']['log']("TIME-OFFSET "+j),"YES"===q?d['precise']=!0:d['precise']=!1,s['logger']['log']("PRECISE "+q);break;case"MAP":var z=new h["default"](R);D['relurl']=z.URI,D['rawByteRange']=z.BYTERANGE,D['baseurl']=n,D['level']=l,D['type']=E,D['sn']="initSegment",d['initSegment']=D,D=new c["default"],D['rawProgramDateTime']=d.initSegment.rawProgramDateTime;break;default:s['logger']['warn']("line parsed but not handled: "+m)}}}return D=y,D&&!D.relurl&&(d['fragments']['pop'](),b-=D.duration),d['totalduration']=b,d['averagetargetduration']=b/d.fragments.length,d['endSN']=r-1,d['startCC']=d['fragments'][0]?d['fragments'][0].cc:0,d['endCC']=x,!d.initSegment&&d.fragments.length&&d['fragments']['every'](function(a){return k['test'](a.relurl)})&&(s['logger']['warn']("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),D=new c["default"],D['relurl']=d['fragments'][0].relurl,D['baseurl']=n,D['level']=l,D['type']=E,D['sn']="initSegment",d['initSegment']=D,d['needSidxRanges']=!0),a['getPlaylistStartOffset'](d),M&&o(d.fragments,M),d}}],[{'key':"findGroup",'value':function(a,e){if(!a)return null;for(var n=null,l=0;l<a.length;l++){var E=a[l];E['id']===e&&(n=E)}return n}},{'key':"convertAVC1ToAVCOTI",'value':function(a){var e=void 0,n=a['split'](".");return n.length>2?(e=n['shift']()+".",e+=parseInt(n['shift']())['toString'](16),e+=("000"+parseInt(n['shift']())['toString'](16))['substr'](-4)):e=a,e}},{'key':"resolve",'value':function(a,e){return b["default"]['buildAbsoluteURL'](e,a,{'alwaysNormalize':!0})}},{'key':"getPlaylistStartOffset",'value':function(a){if(a.live?a.totalduration<=3*a.targetduration?a['startTimeOffset']=0:isNaN(a.startTimeOffset)||(a.startTimeOffset>=0?a.startTimeOffset>a.totalduration-3*a.targetduration&&(a['startTimeOffset']=a.totalduration-3*a.targetduration):-a.startTimeOffset>a.totalduration?a['startTimeOffset']=0:-a.startTimeOffset<3*a.targetduration?a['startTimeOffset']=a.totalduration-3*a.targetduration:a['startTimeOffset']=a.totalduration+a.startTimeOffset):isNaN(a.startTimeOffset)||(a.startTimeOffset>=0?a.startTimeOffset>a.totalduration&&(a['startTimeOffset']=a.totalduration+1):-a.startTimeOffset>a.totalduration?a['startTimeOffset']=0:a['startTimeOffset']=a.totalduration+a.startTimeOffset),!a.precise&&a.startTimeOffset>0&&a.startTimeOffset<a.totalduration){var e=void 0,n=0;for(e=0;e<a.fragments.length;e++){if(a.startTimeOffset>=n&&a.startTimeOffset<n+a['fragments'][e].duration){a['startTimeOffset']=n;break}n+=a['fragments'][e].duration}}}}]),a}();n["default"]=M},{'262':262,'264':264,'265':265,'274':274,'277':277,'285':285,'347':347}],'267':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=function k(a,e,n){null===a&&(a=Function.prototype);var l=Object['getOwnPropertyDescriptor'](a,e);if(void 0===l){var E=Object['getPrototypeOf'](a);return null===E?void 0:k(E,e,n)}if("value"in l)return l.value;var o=l.get;return void 0===o?void 0:o['call'](n)},b=a(258),d=l(b),c=a(257),p=l(c),w=a(256),x=a(285),v=a(252),y=l(v),h=a(266),s=l(h),D=window,m=D.performance,C={'MANIFEST':"manifest",'LEVEL':"level",'AUDIO_TRACK':"audioTrack",'SUBTITLE_TRACK':"subtitleTrack"},f={'MAIN':"main",'AUDIO':"audio",'SUBTITLE':"subtitle"},g=function(a){function e(a){E(this,e);var n=o(this,(e.__proto__||Object['getPrototypeOf'](e))['call'](this,a,d["default"].MANIFEST_LOADING,d["default"].LEVEL_LOADING,d["default"].AUDIO_TRACK_LOADING,d["default"].SUBTITLE_TRACK_LOADING));return n['loaders']={},n['m3u8Parser']=new s["default"](a),n}return i(e,a),t(e,[{'key':"createInternalLoader",'value':function(a){var e=this.hls.config,n=e.pLoader,l=e.loader,E=n||l,o=new E(e);return a['loader']=o,this['loaders'][a.type]=o,o}},{'key':"getInternalLoader",'value':function(a){return this['loaders'][a.type]}},{'key':"resetInternalLoader",'value':function(a){this['loaders'][a]&&delete this['loaders'][a]}},{'key':"destroyInternalLoaders",'value':function(){for(var a in this.loaders){var e=this['loaders'][a];e&&e['destroy'](),this['resetInternalLoader'](a)}}},{'key':"destroy",'value':function(){this['destroyInternalLoaders'](),r(e.prototype.__proto__||Object['getPrototypeOf'](e.prototype),"destroy",this)['call'](this)}},{'key':"onManifestLoading",'value':function(a){this['load'](a.url,{'type':C.MANIFEST,'level':0,'id':null})}},{'key':"onLevelLoading",'value':function(a){this['load'](a.url,{'type':C.LEVEL,'level':a.level,'id':a.id})}},{'key':"onAudioTrackLoading",'value':function(a){this['load'](a.url,{'type':C.AUDIO_TRACK,'level':null,'id':a.id})}},{'key':"onSubtitleTrackLoading",'value':function(a){this['load'](a.url,{'type':C.SUBTITLE_TRACK,'level':null,'id':a.id})}},{'key':"load",'value':function(a,e){var n=this.hls.config;x['logger']['debug']("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var l=this['getInternalLoader'](e);if(l){var E=l.context;if(E&&E['url']===a)return x['logger']['trace']("playlist request ongoing"),!1;x['logger']['warn']("aborting previous loader for type: "+e.type),l['abort'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DROPPED_BYTES,{'droppedBytes':l.stats.loaded})}var o=void 0,i=void 0,t=void 0,r=void 0;switch(e.type){case C.MANIFEST:o=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,t=n.manifestLoadingRetryDelay,r=n.manifestLoadingMaxRetryTimeout;break;case C.LEVEL:o=0,i=n.levelLoadingTimeOut;break;default:o=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,t=n.levelLoadingRetryDelay,r=n.levelLoadingMaxRetryTimeout}l=this['createInternalLoader'](e),e['url']=a,e['responseType']=e.responseType||"",e['headers']=n.httpHeaders;var b={'timeout':i,'maxRetry':o,'retryDelay':t,'maxRetryDelay':r},d={'onSuccess':this['loadsuccess']['bind'](this),'onError':this['loaderror']['bind'](this),'onTimeout':this['loadtimeout']['bind'](this)};return x['logger']['debug']("Calling internal loader delegate for URL: "+a),l['load'](e,b,d),!0}},{'key':"loadsuccess",'value':function(a,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n.isSidxRequest)return this['_handleSidxRequest'](a,n),void this['_handlePlaylistLoaded'](a,e,n,l);this['resetInternalLoader'](n.type);var E=a.data;return e['tload']=m['now'](),0!==E['indexOf']("#EXTM3U")?void this['_handleManifestParsingError'](a,n,"no EXTM3U delimiter",l):(this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_REPORT_DOWNLOADED_INFO,{'downloadBytes':e.total,'downloadTime':e.tload-e.tfirst,'errorStatus':null,'errorStatusText':null}),void(E['indexOf']("#EXTINF:")>0||E['indexOf']("#EXT-X-TARGETDURATION:")>0?this['_handleTrackOrLevelPlaylist'](a,e,n,l):this['_handleMasterPlaylist'](a,e,n,l)))}},{'key':"loaderror",'value':function(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this['_handleNetworkError'](e,n)}},{'key':"loadtimeout",'value':function(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this['_handleNetworkError'](e,n,!0)}},{'key':"_handleMasterPlaylist",'value':function(a,n,l,E){var o=this.hls,i=a.data,t=e['getResponseUrl'](a,l),r=this['m3u8Parser']['parseMasterPlaylist'](i,t);if(!r.length)return void this['_handleManifestParsingError'](a,l,"no level found in manifest",E);var b=r['map'](function(a){return{'id':a.attrs.AUDIO,'codec':a.audioCodec}}),c=this['m3u8Parser']['parseMasterPlaylistMedia'](i,t,"AUDIO",b),p=this['m3u8Parser']['parseMasterPlaylistMedia'](i,t,"SUBTITLES");if(c.length){var w=!1;c['forEach'](function(a){a.url||(w=!0)}),w===!1&&r[0].audioCodec&&!r[0].attrs.AUDIO&&(x['logger']['log']("audio codec signaled in quality level, but no embedded audio track signaled, create one"),c['unshift']({'type':"main",'name':"main"}))}o['trigger'](d["default"].MANIFEST_LOADED,{'levels':r,'audioTracks':c,'subtitles':p,'url':t,'stats':n,'networkDetails':E}),o['trigger2'](o.config.context.voHlsEvents.VO_HLS_REPORT_MANIFEST_INFO,{'url':t,'hlsmaster':!0})}},{'key':"_handleTrackOrLevelPlaylist",'value':function(a,n,l,E){var o=this.hls,i=l.id,t=l.level,r=l.type,b=e['getResponseUrl'](a,l),c=Number['isFinite'](i)?i:0,p=Number['isFinite'](t)?t:c,w=e['mapContextToLevelType'](l),x=this['m3u8Parser']['parseLevelPlaylist'](a.data,b,p,w,c);if(x['tload']=n.tload,r===C.MANIFEST){var v={'url':b,'details':x};o['trigger'](d["default"].MANIFEST_LOADED,{'levels':[v],'audioTracks':[],'url':b,'stats':n,'networkDetails':E})}if(n['tparsed']=m['now'](),x.needSidxRanges){var y=x.initSegment.url;return void this['load'](y,{'isSidxRequest':!0,'type':r,'level':t,'levelDetails':x,'id':i,'rangeStart':0,'rangeEnd':2048,'responseType':"arraybuffer"})}l['levelDetails']=x,this['_handlePlaylistLoaded'](a,n,l,E)}},{'key':"_handleSidxRequest",'value':function(a,e){var n=y["default"]['parseSegmentIndex'](new Uint8Array(a.data));n['references']['forEach'](function(a,n){var l=a.info,E=e['levelDetails']['fragments'][n];0===E.byteRange.length&&(E['rawByteRange']=String(1+l.end-l.start)+"@"+String(l.start))}),e.levelDetails['initSegment']['rawByteRange']=String(n.moovEndOffset)+"@0"}},{'key':"_handleManifestParsingError",'value':function(a,e,n,l){this['hls']['trigger'](d["default"].ERROR,{'type':w.ErrorTypes.NETWORK_ERROR,'details':w.ErrorDetails.MANIFEST_PARSING_ERROR,'fatal':!0,'url':a.url,'reason':n,'networkDetails':l})}},{'key':"_handleNetworkError",'value':function(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;x['logger']['info']("A network error occured while loading a "+a.type+"-type playlist");var l=void 0,E=void 0,o=this['getInternalLoader'](a);switch(a.type){case C.MANIFEST:l=n?w.ErrorDetails.MANIFEST_LOAD_TIMEOUT:w.ErrorDetails.MANIFEST_LOAD_ERROR,E=!0;break;case C.LEVEL:l=n?w.ErrorDetails.LEVEL_LOAD_TIMEOUT:w.ErrorDetails.LEVEL_LOAD_ERROR,E=!1;break;case C.AUDIO_TRACK:l=n?w.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:w.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,E=!1;break;default:E=!1}o&&(o['abort'](),this['resetInternalLoader'](a.type)),this['hls']['trigger'](d["default"].ERROR,{'type':w.ErrorTypes.NETWORK_ERROR,'details':l,'fatal':E,'url':o.url,'loader':o,'context':a,'networkDetails':e})}},{'key':"_handlePlaylistLoaded",'value':function(a,n,l,E){var o=l.type,i=l.level,t=l.id,r=l.levelDetails;if(!r.targetduration)return void this['_handleManifestParsingError'](a,l,"invalid target duration",E);var b=e['canHaveQualityLevels'](l.type);if(b)this['hls']['trigger'](d["default"].LEVEL_LOADED,{'details':r,'level':i||0,'id':t||0,'stats':n,'networkDetails':E}),r.live||this.hls.config.autoPlay!==!1||this.hls.config.preload!==this.hls.config.context.Constants.PRELOAD_AUTO||this['hls']['recoverLoad'](),this['hls']['trigger2'](this.hls.config.context.voHlsEvents.VO_HLS_MEDIA_PRELOADED,{'details':r});else switch(o){case C.AUDIO_TRACK:this['hls']['trigger'](d["default"].AUDIO_TRACK_LOADED,{'details':r,'id':t,'stats':n,'networkDetails':E});break;case C.SUBTITLE_TRACK:this['hls']['trigger'](d["default"].SUBTITLE_TRACK_LOADED,{'details':r,'id':t,'stats':n,'networkDetails':E})}}}],[{'key':"canHaveQualityLevels",'value':function(a){return a!==C.AUDIO_TRACK&&a!==C.SUBTITLE_TRACK}},{'key':"mapContextToLevelType",'value':function(a){var e=a.type;switch(e){case C.AUDIO_TRACK:return f.AUDIO;case C.SUBTITLE_TRACK:return f.SUBTITLE;default:return f.MAIN}}},{'key':"getResponseUrl",'value':function(a,e){var n=a.url;return(void 0===n||0===n['indexOf']("data:"))&&(n=e.url),n}},{'key':"ContextType",'get':function(){return C}},{'key':"LevelType",'get':function(){return f}}]),e}(p["default"]);n["default"]=g},{'252':252,'256':256,'257':257,'258':258,'266':266,'285':285}],'268':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a)}return E(a,null,[{'key':"getSilentFrame",'value':function(a,e){switch(a){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),a}();n["default"]=o},{}],'269':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=Math['pow'](2,32)-1,i=function(){function a(){l(this,a)}return E(a,null,[{'key':"init",'value':function(){a['types']={'avc1':[],'avcC':[],'btrt':[],'dinf':[],'dref':[],'esds':[],'ftyp':[],'hdlr':[],'mdat':[],'mdhd':[],'mdia':[],'mfhd':[],'minf':[],'moof':[],'moov':[],'mp4a':[],".mp3":[],'mvex':[],'mvhd':[],'pasp':[],'sdtp':[],'stbl':[],'stco':[],'stsc':[],'stsd':[],'stsz':[],'stts':[],'tfdt':[],'tfhd':[],'traf':[],'trak':[],'trun':[],'trex':[],'tkhd':[],'vmhd':[],'smhd':[]};var e=void 0;for(e in a.types)a['types']['hasOwnProperty'](e)&&(a['types'][e]=[e['charCodeAt'](0),e['charCodeAt'](1),e['charCodeAt'](2),e['charCodeAt'](3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),l=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);a['HDLR_TYPES']={'video':n,'audio':l};var E=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);a['STTS']=a['STSC']=a['STCO']=o,a['STSZ']=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),a['VMHD']=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),a['SMHD']=new Uint8Array([0,0,0,0,0,0,0,0]),a['STSD']=new Uint8Array([0,0,0,0,0,0,0,1]);var i=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);a['FTYP']=a['box'](a.types.ftyp,i,r,i,t),a['DINF']=a['box'](a.types.dinf,a['box'](a.types.dref,E))}},{'key':"box",'value':function(a){for(var e=Array.prototype['slice']['call'](arguments,1),n=8,l=e.length,E=l,o=void 0;l--;)n+=e[l].byteLength;for(o=new Uint8Array(n),o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=255&n,o['set'](a,4),l=0,n=8;E>l;l++)o['set'](e[l],n),n+=e[l].byteLength;return o}},{'key':"hdlr",'value':function(e){return a['box'](a.types.hdlr,a['HDLR_TYPES'][e])}},{'key':"mdat",'value':function(e){return a['box'](a.types.mdat,e)}},{'key':"mdhd",'value':function(e,n){n*=e;var l=Math['floor'](n/(o+1)),E=Math['floor'](n%(o+1));return a['box'](a.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,l>>24,l>>16&255,l>>8&255,255&l,E>>24,E>>16&255,E>>8&255,255&E,85,196,0,0]))}},{'key':"mdia",'value':function(e){return a['box'](a.types.mdia,a['mdhd'](e.timescale,e.duration),a['hdlr'](e.type),a['minf'](e))}},{'key':"mfhd",'value':function(e){return a['box'](a.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{'key':"minf",'value':function(e){return"audio"===e.type?a['box'](a.types.minf,a['box'](a.types.smhd,a.SMHD),a.DINF,a['stbl'](e)):a['box'](a.types.minf,a['box'](a.types.vmhd,a.VMHD),a.DINF,a['stbl'](e))}},{'key':"moof",'value':function(e,n,l){return a['box'](a.types.moof,a['mfhd'](e),a['traf'](l,n))}},{'key':"moov",'value':function(e){for(var n=e.length,l=[];n--;)l[n]=a['trak'](e[n]);return a['box']['apply'](null,[a.types.moov,a['mvhd'](e[0].timescale,e[0].duration)]['concat'](l)['concat'](a['mvex'](e)))}},{'key':"mvex",'value':function(e){for(var n=e.length,l=[];n--;)l[n]=a['trex'](e[n]);return a['box']['apply'](null,[a.types.mvex]['concat'](l))}},{'key':"mvhd",'value':function(e,n){n*=e;var l=Math['floor'](n/(o+1)),E=Math['floor'](n%(o+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,l>>24,l>>16&255,l>>8&255,255&l,E>>24,E>>16&255,E>>8&255,255&E,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a['box'](a.types.mvhd,i)}},{'key':"sdtp",'value':function(e){var n=e.samples||[],l=new Uint8Array(4+n.length),E=void 0,o=void 0;for(o=0;o<n.length;o++)E=n[o].flags,l[o+4]=E.dependsOn<<4|E.isDependedOn<<2|E.hasRedundancy;return a['box'](a.types.sdtp,l)}},{'key':"stbl",'value':function(e){return a['box'](a.types.stbl,a['stsd'](e),a['box'](a.types.stts,a.STTS),a['box'](a.types.stsc,a.STSC),a['box'](a.types.stsz,a.STSZ),a['box'](a.types.stco,a.STCO))}},{'key':"avc1",'value':function(e){var n=[],l=[],E=void 0,o=void 0,i=void 0;for(E=0;E<e.sps.length;E++)o=e['sps'][E],i=o.byteLength,n['push'](i>>>8&255),n['push'](255&i),n=n['concat'](Array.prototype['slice']['call'](o));for(E=0;E<e.pps.length;E++)o=e['pps'][E],i=o.byteLength,l['push'](i>>>8&255),l['push'](255&i),l=l['concat'](Array.prototype['slice']['call'](o));var t=a['box'](a.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length]['concat'](n)['concat']([e.pps.length])['concat'](l))),r=e.width,b=e.height,d=e['pixelRatio'][0],c=e['pixelRatio'][1];return a['box'](a.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>8&255,255&r,b>>8&255,255&b,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t,a['box'](a.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),a['box'](a.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}},{'key':"esds",'value':function(a){var e=a.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5]['concat']([e])['concat'](a.config)['concat']([6,1,2]))}},{'key':"mp4a",'value':function(e){var n=e.samplerate;return a['box'](a.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),a['box'](a.types.esds,a['esds'](e)))}},{'key':"mp3",'value':function(e){var n=e.samplerate;return a['box'](a['types'][".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{'key':"stsd",'value':function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?a['box'](a.types.stsd,a.STSD,a['mp4a'](e)):a['box'](a.types.stsd,a.STSD,a['mp3'](e)):a['box'](a.types.stsd,a.STSD,a['avc1'](e))}},{'key':"tkhd",'value':function(e){var n=e.id,l=e.duration*e.timescale,E=e.width,i=e.height,t=Math['floor'](l/(o+1)),r=Math['floor'](l%(o+1));return a['box'](a.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,E>>8&255,255&E,0,0,i>>8&255,255&i,0,0]))}},{'key':"traf",'value':function(e,n){var l=a['sdtp'](e),E=e.id,i=Math['floor'](n/(o+1)),t=Math['floor'](n%(o+1));return a['box'](a.types.traf,a['box'](a.types.tfhd,new Uint8Array([0,0,0,0,E>>24,E>>16&255,E>>8&255,255&E])),a['box'](a.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t])),a['trun'](e,l.length+16+20+8+16+8+8),l)}},{'key':"trak",'value':function(e){return e['duration']=e.duration||4294967295,a['box'](a.types.trak,a['tkhd'](e),a['mdia'](e))}},{'key':"trex",'value':function(e){var n=e.id;return a['box'](a.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{'key':"trun",'value':function(e,n){var l=e.samples||[],E=l.length,o=12+16*E,i=new Uint8Array(o),t=void 0,r=void 0,b=void 0,d=void 0,c=void 0,p=void 0;for(n+=8+o,i['set']([0,0,15,1,E>>>24&255,E>>>16&255,E>>>8&255,255&E,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),t=0;E>t;t++)r=l[t],b=r.duration,d=r.size,c=r.flags,p=r.cts,i['set']([b>>>24&255,b>>>16&255,b>>>8&255,255&b,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,p>>>24&255,p>>>16&255,p>>>8&255,255&p],12+16*t);return a['box'](a.types.trun,i)}},{'key':"initSegment",'value':function(e){a.types||a['init']();var n=a['moov'](e),l=void 0;return l=new Uint8Array(a.FTYP.byteLength+n.byteLength),l['set'](a.FTYP),l['set'](n,a.FTYP.byteLength),l}}]),a}();n["default"]=i},{}],'270':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){
for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(268),t=l(i),r=a(269),b=l(r),d=a(258),c=l(d),p=a(256),w=a(285),x=1e4,v=function(){function a(e,n,l,o){E(this,a),this['observer']=e,this['config']=n,this['typeSupported']=l;var i=navigator.userAgent;this['isSafari']=o&&o['indexOf']("Apple")>-1&&i&&!i['match']("CriOS"),this['ISGenerated']=!1}return o(a,[{'key':"destroy",'value':function(){}},{'key':"resetTimeStamp",'value':function(a){this['_initPTS']=this['_initDTS']=a}},{'key':"resetInitSegment",'value':function(){this['ISGenerated']=!1}},{'key':"remux",'value':function(a,e,n,l,E,o,i,t){if(this.ISGenerated||this['generateIS'](a,e,E),this.ISGenerated){var r=a.samples.length,b=e.samples.length,d=E,p=E;if(r&&b){var x=(a['samples'][0].dts-e['samples'][0].dts)/e.inputTimeScale;d+=Math['max'](0,x),p+=Math['max'](0,-x)}if(r){a.timescale||(w['logger']['warn']("regenerate InitSegment as audio detected"),this['generateIS'](a,e,E));var v=this['remuxAudio'](a,d,o,i);if(b){var y=void 0;v&&(y=v.endPTS-v.startPTS),e.timescale||(w['logger']['warn']("regenerate InitSegment as video detected"),this['generateIS'](a,e,E)),this['remuxVideo'](e,p,o,y,i)}}else if(b){var h=this['remuxVideo'](e,p,o,0,i);h&&a.codec&&this['remuxEmptyAudio'](a,d,o,h)}}n.samples.length&&this['remuxID3'](n,E),l.samples.length&&this['remuxText'](l,E),this['observer']['trigger'](c["default"].FRAG_PARSED,{'isLoaded':!0})}},{'key':"generateIS",'value':function(a,e,n){var l=this.observer,E=a.samples,o=e.samples,i=this.typeSupported,t="audio/mp4",r={},d={'tracks':r},x=void 0===this._initPTS,v=void 0,y=void 0;if(x&&(v=y=1/0),a.config&&E.length&&(a['timescale']=a.samplerate,w['logger']['log']("audio sampling rate : "+a.samplerate),a.isAAC||(i.mpeg?(t="audio/mpeg",a['codec']=""):i.mp3&&(a['codec']="mp3")),r['audio']={'container':t,'codec':a.codec,'initSegment':!a.isAAC&&i.mpeg?new Uint8Array:b["default"]['initSegment']([a]),'metadata':{'channelCount':a.channelCount}},x&&(v=y=E[0].pts-a.inputTimeScale*n)),e.sps&&e.pps&&o.length){var h=e.inputTimeScale;e['timescale']=h,r['video']={'container':"video/mp4",'codec':e.codec,'initSegment':b["default"]['initSegment']([e]),'metadata':{'width':e.width,'height':e.height}},x&&(v=Math['min'](v,o[0].pts-h*n),y=Math['min'](y,o[0].dts-h*n),this['observer']['trigger'](c["default"].INIT_PTS_FOUND,{'initPTS':v}))}Object['keys'](r).length?(l['trigger'](c["default"].FRAG_PARSING_INIT_SEGMENT,d),this['ISGenerated']=!0,x&&(this['_initPTS']=v,this['_initDTS']=y)):l['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.MEDIA_ERROR,'details':p.ErrorDetails.FRAG_PARSING_ERROR,'fatal':!1,'reason':"no audio/video samples found"})}},{'key':"remuxVideo",'value':function(a,e,n,l,E){var o=8,i=a.timescale,t=void 0,r=void 0,d=void 0,x=void 0,v=void 0,y=void 0,h=void 0,s=void 0,D=a.samples,m=[],C=D.length,f=this._PTSNormalize,g=this._initDTS,k=this.nextAvcDts,M=this.isSafari;if(0!==C){M&&(n|=D.length&&k&&(E&&Math['abs'](e-k/i)<.1||Math['abs'](D[0].pts-k-g)<i/5)),n||(k=e*i),D['forEach'](function(a){a['pts']=f(a.pts-g,k),a['dts']=f(a.dts-g,k)}),D['sort'](function(a,e){var n=a.dts-e.dts,l=a.pts-e.pts;return n||l||a.id-e.id});var P=D['reduce'](function(a,e){return Math['max'](Math['min'](a,e.pts-e.dts),-18e3)},0);if(0>P){w['logger']['warn']("PTS < DTS detected in video samples, shifting DTS by "+Math['round'](P/90)+" ms to overcome this issue");for(var T=0;T<D.length;T++)D[T].dts+=P}var u=D[0];v=Math['max'](u.dts,0),x=Math['max'](u.pts,0);var A=Math['round']((v-k)/90);n&&A&&(A>1?w['logger']['log']("AVC:"+A+" ms hole between fragments detected,filling it"):-1>A&&w['logger']['log']("AVC:"+-A+" ms overlapping between fragments detected"),v=k,D[0]['dts']=v,x=Math['max'](x-A,k),D[0]['pts']=x,w['logger']['log']("Video/PTS/DTS adjusted: "+Math['round'](x/90)+"/"+Math['round'](v/90)+",'delta':"+A+" ms")),y=v,u=D[D.length-1],s=Math['max'](u.dts,0),h=Math['max'](u.pts,0,s),M&&(t=Math['round']((s-v)/(D.length-1)));for(var R=0,S=0,U=0;C>U;U++){for(var I=D[U],J=I.units,L=J.length,N=0,O=0;L>O;O++)N+=J[O].data.length;S+=N,R+=L,I['length']=N,M?I['dts']=v+U*t:I['dts']=Math['max'](I.dts,v),I['pts']=Math['max'](I.pts,I.dts)}var V=S+4*R+8;try{r=new Uint8Array(V)}catch(j){return void this['observer']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.MUX_ERROR,'details':p.ErrorDetails.REMUX_ALLOC_ERROR,'fatal':!1,'bytes':V,'reason':"fail allocating video mdat "+V})}var q=new DataView(r.buffer);q['setUint32'](0,V),r['set'](b["default"].types.mdat,4);for(var z=0;C>z;z++){for(var B=D[z],F=B.units,G=0,H=void 0,K=0,Q=F.length;Q>K;K++){var W=F[K],X=W.data,Y=W.data.byteLength;q['setUint32'](o,Y),o+=4,r['set'](X,o),o+=Y,G+=4+Y}if(M)H=Math['max'](0,t*Math['round']((B.pts-B.dts)/t));else{if(C-1>z)t=D[z+1].dts-B.dts;else{var Z=this.config,$=B.dts-D[z>0?z-1:z].dts;if(Z.stretchShortVideoTrack){var _=Z.maxBufferHole,aa=Math['floor'](_*i),ea=(l?x+l*i:this.nextAudioPts)-B.pts;ea>aa?(t=ea-$,0>t&&(t=$),w['logger']['log']("It is approximately "+ea/90+" ms to the next segment; using duration "+t/90+" ms for the last video frame.")):t=$}else t=$}H=Math['round'](B.pts-B.dts)}m['push']({'size':G,'duration':t,'cts':H,'flags':{'isLeading':0,'isDependedOn':0,'hasRedundancy':0,'degradPrio':0,'dependsOn':B.key?2:1,'isNonSync':B.key?0:1}})}this['nextAvcDts']=s+t;var na=a.dropped;if(a['len']=0,a['nbNalu']=0,a['dropped']=0,m.length&&navigator['userAgent']['toLowerCase']()['indexOf']("chrome")>-1){var la=m[0].flags;la['dependsOn']=2,la['isNonSync']=0}a['samples']=m,d=b["default"]['moof'](a.sequenceNumber++,v,a),a['samples']=[];var Ea={'data1':d,'data2':r,'startPTS':x/i,'endPTS':(h+t)/i,'startDTS':v/i,'endDTS':this.nextAvcDts/i,'type':"video",'hasAudio':!1,'hasVideo':!0,'nb':m.length,'dropped':na,'isLoaded':!0};return this['observer']['trigger'](c["default"].FRAG_PARSING_DATA,Ea),Ea}}},{'key':"remuxAudio",'value':function(a,e,n,l){var E=a.inputTimeScale,o=a.timescale,i=E/o,r=a.isAAC?1024:1152,d=r*i,v=this._PTSNormalize,y=this._initDTS,h=!a.isAAC&&this.typeSupported.mpeg,s=void 0,D=void 0,m=void 0,C=void 0,f=void 0,g=void 0,k=void 0,M=a.samples,P=[],T=this.nextAudioPts;if(n|=M.length&&T&&(l&&Math['abs'](e-T/E)<.1||Math['abs'](M[0].pts-T-y)<20*d),M['forEach'](function(a){a['pts']=a['dts']=v(a.pts-y,e*E)}),M=M['filter'](function(a){return a.pts>=0}),0!==M.length){if(n||(T=l?e*E:M[0].pts),a.isAAC)for(var u=this.config.maxAudioFramesDrift,A=0,R=T;A<M.length;){var S,U=M[A],I=U.pts;S=I-R;var J=Math['abs'](1e3*S/E);if(-u*d>=S)w['logger']['warn']("Dropping 1 audio frame @ "+(R/E)['toFixed'](3)+"s due to "+Math['round'](J)+" ms overlap."),M['splice'](A,1),a.len-=U.unit.length;else if(S>=u*d&&x>J&&R){var L=Math['round'](S/d);w['logger']['warn']("Injecting "+L+" audio frame @ "+(R/E)['toFixed'](3)+"s due to "+Math['round'](1e3*S/E)+" ms gap.");for(var N=0;L>N;N++){var O=Math['max'](R,0);m=t["default"]['getSilentFrame'](a.manifestCodec||a.codec,a.channelCount),m||(w['logger']['log']("Unable to get silent frame for given audio codec; duplicating last frame instead."),m=U['unit']['subarray']()),M['splice'](A,0,{'unit':m,'pts':O,'dts':O}),a.len+=m.length,R+=d,A++}U['pts']=U['dts']=R,R+=d,A++}else Math['abs'](S)>.1*d,U['pts']=U['dts']=R,R+=d,A++}for(var V=0,j=M.length;j>V;V++){var q=M[V],z=q.unit,B=q.pts;if(void 0!==k)D['duration']=Math['round']((B-k)/i);else{var F=Math['round'](1e3*(B-T)/E),G=0;if(n&&a.isAAC&&F){if(F>0&&x>F)G=Math['round']((B-T)/d),w['logger']['log'](F+" ms hole between AAC samples detected,filling it"),G>0&&(m=t["default"]['getSilentFrame'](a.manifestCodec||a.codec,a.channelCount),m||(m=z['subarray']()),a.len+=G*m.length);else if(-12>F){w['logger']['log']("drop overlapping AAC sample, expected/parsed/delta:"+(T/E)['toFixed'](3)+"s/"+(B/E)['toFixed'](3)+"s/"+-F+"ms"),a.len-=z.byteLength;continue}B=T}if(g=B,!(a.len>0))return;var H=h?a.len:a.len+8;s=h?0:8;try{C=new Uint8Array(H)}catch(K){return void this['observer']['trigger'](c["default"].ERROR,{'type':p.ErrorTypes.MUX_ERROR,'details':p.ErrorDetails.REMUX_ALLOC_ERROR,'fatal':!1,'bytes':H,'reason':"fail allocating audio mdat "+H})}if(!h){var Q=new DataView(C.buffer);Q['setUint32'](0,H),C['set'](b["default"].types.mdat,4)}for(var W=0;G>W;W++)m=t["default"]['getSilentFrame'](a.manifestCodec||a.codec,a.channelCount),m||(w['logger']['log']("Unable to get silent frame for given audio codec; duplicating this frame instead."),m=z['subarray']()),C['set'](m,s),s+=m.byteLength,D={'size':m.byteLength,'cts':0,'duration':1024,'flags':{'isLeading':0,'isDependedOn':0,'hasRedundancy':0,'degradPrio':0,'dependsOn':1}},P['push'](D)}C['set'](z,s);var X=z.byteLength;s+=X,D={'size':X,'cts':0,'duration':0,'flags':{'isLeading':0,'isDependedOn':0,'hasRedundancy':0,'degradPrio':0,'dependsOn':1}},P['push'](D),k=B}var Y=0,Z=P.length;if(Z>=2&&(Y=P[Z-2].duration,D['duration']=Y),Z){this['nextAudioPts']=T=k+i*Y,a['len']=0,a['samples']=P,f=h?new Uint8Array:b["default"]['moof'](a.sequenceNumber++,g/i,a),a['samples']=[];var $=g/E,_=T/E,aa={'data1':f,'data2':C,'startPTS':$,'endPTS':_,'startDTS':$,'endDTS':_,'type':"audio",'hasAudio':!0,'hasVideo':!1,'nb':Z,'isLoaded':!0};return this['observer']['trigger'](c["default"].FRAG_PARSING_DATA,aa),aa}return null}}},{'key':"remuxEmptyAudio",'value':function(a,e,n,l){var E=a.inputTimeScale,o=a.samplerate?a.samplerate:E,i=E/o,r=this.nextAudioPts,b=(void 0!==r?r:l.startDTS*E)+this._initDTS,d=l.endDTS*E+this._initDTS,c=1024,p=i*c,x=Math['ceil']((d-b)/p),v=t["default"]['getSilentFrame'](a.manifestCodec||a.codec,a.channelCount);if(w['logger']['warn']("remux empty Audio"),!v)return void w['logger']['trace']("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var y=[],h=0;x>h;h++){var s=b+h*p;y['push']({'unit':v,'pts':s,'dts':s}),a.len+=v.length}a['samples']=y,this['remuxAudio'](a,e,n)}},{'key':"remuxID3",'value':function(a,e){var n=a.samples.length,l=void 0,E=a.inputTimeScale,o=this._initPTS,i=this._initDTS;if(n){for(var t=0;n>t;t++)l=a['samples'][t],l['pts']=(l.pts-o)/E,l['dts']=(l.dts-i)/E;this['observer']['trigger'](c["default"].FRAG_PARSING_METADATA,{'samples':a.samples})}a['samples']=[],e=e}},{'key':"remuxText",'value':function(a,e){a['samples']['sort'](function(a,e){return a.pts-e.pts});var n=a.samples.length,l=void 0,E=a.inputTimeScale,o=this._initPTS;if(n){for(var i=0;n>i;i++)l=a['samples'][i],l['pts']=(l.pts-o)/E;this['observer']['trigger'](c["default"].FRAG_PARSING_USERDATA,{'samples':a.samples})}a['samples']=[],e=e}},{'key':"_PTSNormalize",'value':function(a,e){var n=void 0;if(void 0===e)return a;for(n=a>e?-8589934592:8589934592;Math['abs'](a-e)>4294967296;)a+=n;return a}}]),a}();n["default"]=v},{'256':256,'258':258,'268':268,'269':269,'285':285}],'271':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(258),t=l(i),r=function(){function a(e){E(this,a),this['observer']=e}return o(a,[{'key':"destroy",'value':function(){}},{'key':"resetTimeStamp",'value':function(){}},{'key':"resetInitSegment",'value':function(){}},{'key':"remux",'value':function(a,e,n,l,E,o,i,r,b){var d=this.observer,c="";a&&(c+="audio"),e&&(c+="video"),d['trigger'](t["default"].FRAG_PARSING_DATA,{'data1':r,'startPTS':E,'startDTS':E,'type':c,'hasAudio':!!a,'hasVideo':!!e,'nb':1,'dropped':0,'isLoaded':b}),d['trigger'](t["default"].FRAG_PARSED)}}]),a}();n["default"]=r},{'258':258}],'272':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}function i(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a['prototype']=Object['create'](e&&e.prototype,{'constructor':{'value':a,'enumerable':!1,'writable':!0,'configurable':!0}}),e&&(Object.setPrototypeOf?Object['setPrototypeOf'](a,e):a['__proto__']=e)}Object['defineProperty'](n,"__esModule",{'value':!0});var t=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),r=a(257),b=l(r),d=function(a){function e(a){var n;E(this,e);for(var l=arguments.length,i=Array(l>1?l-1:0),t=1;l>t;t++)i[t-1]=arguments[t];var r=o(this,(n=e.__proto__||Object['getPrototypeOf'](e))['call']['apply'](n,[this,a]['concat'](i)));return r['_tickInterval']=null,r['_tickTimer']=null,r['_tickCallCount']=0,r['_boundTick']=r['tick']['bind'](r),r}return i(e,a),t(e,[{'key':"onHandlerDestroying",'value':function(){this['clearNextTick'](),this['clearInterval']()}},{'key':"hasInterval",'value':function(){return!!this._tickInterval}},{'key':"hasNextTick",'value':function(){return!!this._tickTimer}},{'key':"setInterval",'value':function(a){function e(e){return a['apply'](this,arguments)}return e['toString']=function(){return a['toString']()},e}(function(a){return this._tickInterval?!1:(this['_tickInterval']=setInterval(this._boundTick,a),!0)})},{'key':"clearInterval",'value':function(a){function e(){return a['apply'](this,arguments)}return e['toString']=function(){return a['toString']()},e}(function(){return this._tickInterval?(clearInterval(this._tickInterval),this['_tickInterval']=null,!0):!1})},{'key':"clearNextTick",'value':function(){return this._tickTimer?(clearTimeout(this._tickTimer),this['_tickTimer']=null,!0):!1}},{'key':"tick",'value':function(){this._tickCallCount++,1===this._tickCallCount&&(this['doTick'](),this._tickCallCount>1&&(this['clearNextTick'](),this['_tickTimer']=setTimeout(this._boundTick,0)),this['_tickCallCount']=0)}},{'key':"doTick",'value':function(){}}]),e}(b["default"]);n["default"]=d},{'257':257}],'273':[function(a,e,n){"use strict";function l(a,e){if(!a||!a.byteLength)return e;if(!e||!e.byteLength)return a;var n=new Uint8Array(a.byteLength+e.byteLength);return n['set'](new Uint8Array(a),0),n['set'](new Uint8Array(e),a.byteLength),n.buffer}function E(a,e){if(!a||!a.byteLength)return e;if(!e||!e.byteLength)return a;var n=new Uint8Array(a.byteLength+e.byteLength);return n['set'](new Uint8Array(a),0),n['set'](new Uint8Array(e),a.byteLength),n}Object['defineProperty'](n,"__esModule",{'value':!0}),n['appendArrayBuffer']=l,n['appendUint8Array']=E},{}],'274':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,t=function(){function a(e){l(this,a),"string"==typeof e&&(e=a['parseAttrList'](e));for(var n in e)e['hasOwnProperty'](n)&&(this[n]=e[n])}return E(a,[{'key':"decimalInteger",'value':function(a){var e=parseInt(this[a],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{'key':"hexadecimalInteger",'value':function(a){if(this[a]){var e=(this[a]||"0x")['slice'](2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),l=0;l<e.length/2;l++)n[l]=parseInt(e['slice'](2*l,2*l+2),16);return n}return null}},{'key':"hexadecimalIntegerAsNumber",'value':function(a){var e=parseInt(this[a],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{'key':"decimalFloatingPoint",'value':function(a){return parseFloat(this[a])}},{'key':"enumeratedString",'value':function(a){return this[a]}},{'key':"decimalResolution",'value':function(a){var e=o['exec'](this[a]);return null===e?void 0:{'width':parseInt(e[1],10),'height':parseInt(e[2],10)}}}],[{'key':"parseAttrList",'value':function(a){var e=void 0,n={};for(i['lastIndex']=0;null!==(e=i['exec'](a));){var l=e[2],E='"';0===l['indexOf'](E)&&l['lastIndexOf'](E)===l.length-1&&(l=l['slice'](1,-1)),n[e[1]]=l}return n}}]),a}();n["default"]=t},{}],'275':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'search':function(a,e){for(var n=0,l=a.length-1,E=null,o=null;l>=n;){E=(n+l)/2|0,o=a[E];var i=e(o);if(i>0)n=E+1;else{if(!(0>i))return o;l=E-1}}return null}};n["default"]=l},{}],'276':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}();n['BufferHelper']=function(){function a(){l(this,a)}return E(a,null,[{'key':"isBuffered",'value':function(a,e){try{if(a)for(var n=a.buffered,l=0;l<n.length;l++)if(e>=n['start'](l)&&e<=n['end'](l))return!0}catch(E){}return!1}},{'key':"bufferInfo",'value':function(a,e,n){try{if(a){var l=a.buffered,E=[],o=void 0;for(o=0;o<l.length;o++)E['push']({'start':l['start'](o),'end':l['end'](o)});return this['bufferedInfo'](E,e,n)}}catch(i){}return{'len':0,'start':e,'end':e,'nextStart':void 0}}},{'key':"bufferedInfo",'value':function(a,e,n){var l=[],E=void 0,o=void 0,i=void 0,t=void 0,r=void 0;for(a['sort'](function(a,e){var n=a.start-e.start;return n?n:e.end-a.end}),r=0;r<a.length;r++){var b=l.length;if(b){var d=l[b-1].end;a[r].start-d<n?a[r].end>d&&(l[b-1]['end']=a[r].end):l['push'](a[r])}else l['push'](a[r])}for(r=0,E=0,o=i=e;r<l.length;r++){var c=l[r].start,p=l[r].end;if(e+n>=c&&p>e)o=c,i=p,E=i-e;else if(c>e+n){t=c;break}}return{'len':E,'start':o,'end':i,'nextStart':t}}}]),a}()},{}],'277':[function(a,e,n){"use strict";function l(a,e){var n=o[e];return!!n&&n[a['slice'](0,4)]===!0}function E(a,e){return window['MediaSource']['isTypeSupported']((e||"video")+'/mp4;codecs="'+a+'"')}Object['defineProperty'](n,"__esModule",{'value':!0});var o={'audio':{'a3ds':!0,"ac-3":!0,"ac-4":!0,'alac':!0,'alaw':!0,'dra1':!0,"dts+":!0,"dts-":!0,'dtsc':!0,'dtse':!0,'dtsh':!0,"ec-3":!0,'enca':!0,'g719':!0,'g726':!0,'m4ae':!0,'mha1':!0,'mha2':!0,'mhm1':!0,'mhm2':!0,'mlpa':!0,'mp4a':!0,"raw ":!0,'Opus':!0,'samr':!0,'sawb':!0,'sawp':!0,'sevc':!0,'sqcp':!0,'ssmv':!0,'twos':!0,'ulaw':!0},'video':{'avc1':!0,'avc2':!0,'avc3':!0,'avc4':!0,'avcp':!0,'drac':!0,'dvav':!0,'dvhe':!0,'encv':!0,'hev1':!0,'hvc1':!0,'mjp2':!0,'mp4v':!0,'mvc1':!0,'mvc2':!0,'mvc3':!0,'mvc4':!0,'resv':!0,'rv60':!0,'s263':!0,'svc1':!0,'svc2':!0,"vc-1":!0,'vp08':!0,'vp09':!0}};n['isCodecType']=l,n['isCodecSupportedInMp4']=E},{}],'278':[function(a,e,n){"use strict";function l(a,e,n,l){for(var o=void 0,i=void 0,t=void 0,r=void 0,b=void 0,d=window.VTTCue||window.TextTrackCue,c=0;c<l.rows.length;c++)if(o=l['rows'][c],t=!0,r=0,b="",!o['isEmpty']()){for(var p=0;p<o.chars.length;p++)o['chars'][p]['uchar']['match'](/\s/)&&t?r++:(b+=o['chars'][p].uchar,t=!1);o['cueStartTime']=e,e===n&&(n+=1e-4),i=new d(e,n,E['fixLineBreaks'](b['trim']())),r>=16?r--:r++,navigator['userAgent']['match'](/Firefox\//)?i['line']=c+1:i['line']=c>7?c-2:c+1,i['align']="left",i['position']=Math['max'](0,Math['min'](100,100*(r/32)+(navigator['userAgent']['match'](/Firefox\//)?50:0))),a['addCue'](i)}}Object['defineProperty'](n,"__esModule",{'value':!0}),n['newCue']=l;var E=a(293)},{'293':293}],'279':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){for(var n=null,l=0;l<a.length;l+=1){var E=a[l];if(E&&E['cc']===e){n=E;break}}return n}function o(a,e){return w["default"]['search'](a,function(a){return a.cc<e?1:a.cc>e?-1:0})}function i(a,e,n){var l=!1;return e&&e.details&&n&&(n.endCC>n.startCC||a&&a.cc<n.startCC)&&(l=!0),l}function t(a,e){var n=a.fragments,l=e.fragments;if(!l.length||!n.length)return void x['logger']['log']("No fragments to align");var o=E(n,l[0].cc);return!o||o&&!o.startPTS?void x['logger']['log']("No frag in previous level to align on"):o}function r(a,e){e['fragments']['forEach'](function(e){if(e){var n=e.start+a;e['start']=e['startPTS']=n,e['endPTS']=n+e.duration}}),e['PTSKnown']=!0}function b(a,e,n){d(a,n,e),!n.PTSKnown&&e&&c(n,e.details)}function d(a,e,n){if(i(a,n,e)){var l=t(n.details,e);l&&(x['logger']['log']("Adjusting PTS using last level due to CC increase within current level"),r(l.start,e))}}function c(a,e){if(e&&e.fragments.length){if(!a.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e['fragments'][0].programDateTime,l=a['fragments'][0].programDateTime,E=(l-n)/1e3+e['fragments'][0].start;Number['isFinite'](E)&&(x['logger']['log']("adjusting PTS using programDateTime delta, sliding:"+E['toFixed'](3)),r(E,a))}}Object['defineProperty'](n,"__esModule",{'value':!0}),n['findFirstFragWithCC']=E,n['findFragWithCC']=o,n['shouldAlignOnDiscontinuities']=i,n['findDiscontinuousReferenceFrag']=t,n['adjustPts']=r,n['alignStream']=b,n['alignDiscontinuities']=d,n['alignPDT']=c;var p=a(275),w=l(p),x=a(285)},{'275':275,'285':285}],'280':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(281),t=l(i),r=function(){function a(e,n,l,o){E(this,a),this['hls']=e,this['defaultEstimate_']=o,this['minWeight_']=.001,this['minDelayMs_']=50,this['slow_']=new t["default"](n),this['fast_']=new t["default"](l)}return o(a,[{'key':"sample",'value':function(a,e){a=Math['max'](a,this.minDelayMs_);var n=8e3*e/a,l=a/1e3;this['fast_']['sample'](l,n),this['slow_']['sample'](l,n)}},{'key':"canEstimate",'value':function(){var a=this.fast_;return a&&a['getTotalWeight']()>=this.minWeight_}},{'key':"getEstimate",'value':function(){return this['canEstimate']()?Math['min'](this['fast_']['getEstimate'](),this['slow_']['getEstimate']()):this.defaultEstimate_}},{'key':"destroy",'value':function(){}}]),a}();n["default"]=r},{'281':281}],'281':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e){l(this,a),this['alpha_']=e?Math['exp'](Math['log'](.5)/e):0,this['estimate_']=0,this['totalWeight_']=0}return E(a,[{'key':"sample",'value':function(a,e){var n=Math['pow'](this.alpha_,a);this['estimate_']=e*(1-n)+n*this.estimate_,this.totalWeight_+=a}},{'key':"getTotalWeight",'value':function(){return this.totalWeight_}},{'key':"getEstimate",'value':function(){if(this.alpha_){var a=1-Math['pow'](this.alpha_,this.totalWeight_);return this.estimate_/a}return this.estimate_}}]),a}();n["default"]=o},{}],'282':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=a(285),i=window,t=i.Request,r=i.Headers,b=i.fetch,d=i.performance,c=function(){function a(e){l(this,a),this['fetchSetup']=e.fetchSetup,this['initParams_']=null,this['reader_']=null}return E(a,[{'key':"destroy",'value':function(){}},{'key':"abort",'value':function(){if(this['stats']['tabort']=Math['max'](this.stats.tfirst,d['now']()),this.initParams_.abortController)this.initParams_['abortController']['abort']();else if(this.reader_)try{this['reader_']['cancel']()}catch(a){}}},{'key':"load",'value':function(a,e,n){var l=this;this['stats']={'trequest':d['now'](),'retry':0};var E=this.stats,i=a.url,c=void 0,p={'method':"GET",'mode':"cors"};e['withCredentials']===!0&&(p['credentials']="include");var w={};a.rangeEnd&&(w['Range']="bytes="+a.rangeStart+"-"+String(a.rangeEnd-1));var x=a.headers;if(x)for(var v in x)w[v]=x[v];p['headers']=new r(w);var y=void 0;"function"==typeof window.AbortController&&(y=new window.AbortController),p['signal']=y?y.signal:void 0,this['initParams_']=p,c=this.fetchSetup?this['fetchSetup'](a,p):new t(a.url,p);var h=0,s=void 0,D=b(c,p);D['then'](function(e){if(e.ok){E['tfirst']=Math['max'](E.trequest,d['now']()),i=e.url;var t=e['headers']['get']("content-length"),r=function b(e){return e['read']()['then'](function(l){var r=void 0;return l.done?(E['tload']=Math['max'](E.tfirst,d['now']()),E['loaded']=E['total']=h,r={'url':i,'data':null},o['logger']['log']("download "+i+" complete, totalBytes: "+h),void n['onSuccess'](r,E,a)):(s=l.value,h+=s.byteLength,n.onProgress&&(E['loaded']=h,t&&(E['total']=t),o['logger']['log']("download "+i+" downloadBytes this time: "+s.byteLength+" total downloadedBytes: "+h),n['onProgress'](E,a,s.buffer)),b(e))})};return l['reader_']=e['body']['getReader'](),r(l.reader_)}n['onError']({'text':"fetch, bad network response"},a)})["catch"](function(e){n['onError']({'text':e.message},a)})}}]),a}();n["default"]=c},{'285':285}],'283':[function(a,e,n){"use strict";function l(a,e){var n=a.length-e;if(6>n)return null;for(var l=e,E=n-5;E>l;)if(255===a[l]){if(240===(240&a[l+1]))return l;l+=2}else l++;return null}function E(a,e){var n={'ok':!1,'frameSize':0};if(a[e+2]>>6===3)return n;if((a[e+2]>>2&15)>11)return n;var l=(3&a[e+3])<<11|a[e+4]<<3|a[e+5]>>5;return 6>l?n:(n['frameSize']=l,n['ok']=!0,n)}function o(a){if(!a||a.length<4)return!1;if(65===a[0]&&68===a[1]&&73===a[2]&&70===a[3])return console['log']("Use aac FileParser"),!0;for(var e=void 0,n=null,o=0;null!==(o=l(a,o));){if((n=E(a,o)).ok){if(e=a['slice'](o,o+4),e[3]&=240,a.length<o+n.frameSize+6)return!1;if(o+=n.frameSize,e[0]===a[o]&&e[1]===a[o+1]&&e[2]===a[o+2]&&e[3]===(240&a[o+3]))return console['log']("Use aac FileParser"),!0}o++}return!1}Object['defineProperty'](n,"__esModule",{'value':!0}),n['isAAC']=o},{}],'284':[function(a,e,n){"use strict";function l(){return"undefined"==typeof window?self:window}Object['defineProperty'](n,"__esModule",{'value':!0}),n['getSelfScope']=l},{}],'285':[function(a,e,n){"use strict";function l(){}function E(a,e){return e="["+a+"] > "+e}function o(a){var e=s['console'][a];return e?function(){for(var e=arguments.length,n=Array(e),l=0;e>l;l++)n[l]=arguments[l];n[0]&&(c?c['trigger'](c.config.context.voHlsEvents.VO_HLS_LOG,n[0]):d&&d['trigger2'](d.config.context.voHlsEvents.VO_HLS_LOG,{'message':n[0],'level':i(a)}),n[0]=E(a,n[0]))}:l}function i(a){return"debug"===a?y:"log"===a?y:"info"===a?v:"warn"===a?x:"error"===a?w:void 0}function t(a){for(var e=arguments.length,n=Array(e>1?e-1:0),l=1;e>l;l++)n[l-1]=arguments[l];n['forEach'](function(e){h[e]=a[e]?a[e]['bind'](a):o(e)})}Object['defineProperty'](n,"__esModule",{'value':!0}),n['logger']=n['enableLogs']=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=a(284),d=null,c=null,p={'trace':l,'debug':l,'log':l,'warn':l,'info':l,'error':l},w=2,x=3,v=4,y=5,h=p,s=b['getSelfScope']();n['enableLogs']=function(a,e,n){if(d=e,c=n,a===!0||"object"===("undefined"==typeof a?"undefined":r(a))){t(a,"debug","log","info","warn","error");try{h['log']()}catch(l){h=p}}else h=p},n['logger']=h},{'284':284}],'286':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator['requestMediaKeySystemAccess']['bind'](window.navigator):null}();n['requestMediaKeySystemAccess']=l},{}],'287':[function(a,e,n){"use strict";function l(){return"undefined"!=typeof window?window.MediaSource||window.WebKitMediaSource:void 0}Object['defineProperty'](n,"__esModule",{'value':!0}),n['getMediaSource']=l},{}],'288':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(e,n){l(this,a),this['timelineController']=e,this['trackName']=n,this['startTime']=null,this['endTime']=null,this['screen']=null}return E(a,[{'key':"dispatchCue",'value':function(){null!==this.startTime&&(this['timelineController']['addCues'](this.trackName,this.startTime,this.endTime,this.screen),this['startTime']=null)}},{'key':"newCue",'value':function(a,e,n){(null===this.startTime||this.startTime>a)&&(this['startTime']=a),this['endTime']=e,this['screen']=n,this['timelineController']['createCaptionsTrack'](this.trackName)}}]),a}();n["default"]=o},{}],'289':[function(a,e,n){"use strict";function l(a,e){var n=null;try{n=new window['Event']("addtrack")}catch(l){n=document['createEvent']("Event"),n['initEvent']("addtrack",!1,!1)}n['track']=a,e['dispatchEvent'](n)}function E(a){if(a&&a.cues)for(;a.cues.length>0;)a['removeCue'](a['cues'][0])}Object['defineProperty'](n,"__esModule",{'value':!0}),n['sendAddTrackEvent']=l,n['clearCurrentCues']=E},{}],'290':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={'toString':function(a){for(var e="",n=a.length,l=0;n>l;l++)e+="["+a['start'](l)['toFixed'](3)+","+a['end'](l)['toFixed'](3)+"]";return e}};n["default"]=l},{}],'291':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={};l['addTimestampToURI']=function(a){var e=new Date,n=e['getTime']();return a=a['indexOf']("?")>-1?a+"&timestamp="+n:a+"?timestamp="+n},l['isHTTPs']=function(a){var e=/^https:\/\//i;return e['test'](a)},n["default"]=l},{}],'292':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0}),n["default"]=function(){function a(a){if("string"!=typeof a)return!1;var e=o[a['toLowerCase']()];return e?a['toLowerCase']():!1}function e(a){if("string"!=typeof a)return!1;var e=i[a['toLowerCase']()];return e?a['toLowerCase']():!1}function n(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)a[l]=n[l]}return a}function l(l,o,i){var t=this,r=function(){return"undefined"!=typeof navigator?/MSIE\s8\.0/['test'](navigator.userAgent):void 0}(),b={};r?t=document['createElement']("custom"):b['enumerable']=!0,t['hasBeenReset']=!1;var d="",c=!1,p=l,w=o,x=i,v=null,y="",h=!0,s="auto",D="start",m=50,C="middle",f=50,g="middle";return Object['defineProperty'](t,"id",n({},b,{'get':function(){return d},'set':function(a){d=""+a}})),Object['defineProperty'](t,"pauseOnExit",n({},b,{'get':function(){return c},'set':function(a){c=!!a}})),Object['defineProperty'](t,"startTime",n({},b,{'get':function(){return p},'set':function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");p=a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"endTime",n({},b,{'get':function(){return w},'set':function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");w=a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"text",n({},b,{'get':function(){return x},'set':function(a){x=""+a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"region",n({},b,{'get':function(){return v},'set':function(a){v=a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"vertical",n({},b,{'get':function(){return y},'set':function(e){var n=a(e);if(n===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=n,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"snapToLines",n({},b,{'get':function(){return h},'set':function(a){h=!!a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"line",n({},b,{'get':function(){return s},'set':function(a){if("number"!=typeof a&&a!==E)throw new SyntaxError("An invalid number or illegal string was specified.");s=a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"lineAlign",n({},b,{'get':function(){return D},'set':function(a){var n=e(a);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");D=n,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"position",n({},b,{'get':function(){return m},'set':function(a){if(0>a||a>100)throw new Error("Position must be between 0 and 100.");m=a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"positionAlign",n({},b,{'get':function(){return C},'set':function(a){var n=e(a);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");C=n,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"size",n({},b,{'get':function(){return f},'set':function(a){if(0>a||a>100)throw new Error("Size must be between 0 and 100.");f=a,this['hasBeenReset']=!0}})),Object['defineProperty'](t,"align",n({},b,{'get':function(){return g},'set':function(a){var n=e(a);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this['hasBeenReset']=!0}})),t['displayState']=void 0,r?t:void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;
var E="auto",o={"":!0,'lr':!0,'rl':!0},i={'start':!0,'middle':!0,'end':!0,'left':!0,'right':!0};return l['prototype']['getCueAsHTML']=function(){var a=window.WebVTT;return a['convertCueToDOMTree'](window,this.text)},l}()},{}],'293':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){this['window']=window,this['state']="INITIAL",this['buffer']="",this['decoder']=new p,this['regionList']=[]}function o(a){function e(a,e,n,l){return 3600*(0|a)+60*(0|e)+(0|n)+(0|l)/1e3}var n=a['match'](/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3]['replace'](":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function i(){this['values']=Object['create'](null)}function t(a,e,n,l){var E=l?a['split'](l):[a];for(var o in E)if("string"==typeof E[o]){var i=E[o]['split'](n);if(2===i.length){var t=i[0],r=i[1];e(t,r)}}}function r(a,e,n){function l(){var e=o(a);if(null===e)throw new Error("Malformed timestamp: "+b);return a=a['replace'](/^[^\sa-zA-Z-]+/,""),e}function E(a,e){var l=new i;t(a,function(a,e){switch(a){case"region":for(var E=n.length-1;E>=0;E--)if(n[E]['id']===e){l['set'](a,n[E].region);break}break;case"vertical":l['alt'](a,e,["rl","lr"]);break;case"line":var o=e['split'](","),i=o[0];l['integer'](a,i),l['percent'](a,i)&&l['set']("snapToLines",!1),l['alt'](a,i,["auto"]),2===o.length&&l['alt']("lineAlign",o[1],["start",x,"end"]);break;case"position":o=e['split'](","),l['percent'](a,o[0]),2===o.length&&l['alt']("positionAlign",o[1],["start",x,"end","line-left","line-right","auto"]);break;case"size":l['percent'](a,e);break;case"align":l['alt'](a,e,["start",x,"end","left","right"])}},/:/,/\s/),e['region']=l['get']("region",null),e['vertical']=l['get']("vertical","");var E=l['get']("line","auto");"auto"===E&&-1===w.line&&(E=-1),e['line']=E,e['lineAlign']=l['get']("lineAlign","start"),e['snapToLines']=l['get']("snapToLines",!0),e['size']=l['get']("size",100),e['align']=l['get']("align",x);var o=l['get']("position","auto");"auto"===o&&50===w.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e['position']=o}function r(){a=a['replace'](/^\s+/,"")}var b=a;if(r(),e['startTime']=l(),r(),"-->"!==a['substr'](0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+b);a=a['substr'](3),r(),e['endTime']=l(),r(),E(a,e)}function b(a){return a['replace'](/<br(?: \/)?>/gi,"\n")}Object['defineProperty'](n,"__esModule",{'value':!0}),n['fixLineBreaks']=void 0;var d=a(292),c=l(d),p=function(){return{'decode':function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};i['prototype']={'set':function(a,e){this['get'](a)||""===e||(this['values'][a]=e)},'get':function(a,e,n){return n?this['has'](a)?this['values'][a]:e[n]:this['has'](a)?this['values'][a]:e},'has':function(a){return a in this.values},'alt':function(a,e,n){for(var l=0;l<n.length;++l)if(e===n[l]){this['set'](a,e);break}},'integer':function(a,e){/^-?\d+$/['test'](e)&&this['set'](a,parseInt(e,10))},'percent':function(a,e){var n=void 0;return(n=e['match'](/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&100>=e)?(this['set'](a,e),!0):!1}};var w=new c["default"](0,0,0),x="middle"===w.align?"middle":"center";E['prototype']={'parse':function(a){function e(){var a=l.buffer,e=0;for(a=b(a);e<a.length&&"\r"!==a[e]&&"\n"!==a[e];)++e;var n=a['substr'](0,e);return"\r"===a[e]&&++e,"\n"===a[e]&&++e,l['buffer']=a['substr'](e),n}function n(a){t(a,function(a,e){switch(a){case"Region":}},/:/)}var l=this;a&&(l.buffer+=l['decoder']['decode'](a,{'stream':!0}));try{var E=void 0;if("INITIAL"===l.state){if(!/\r\n|\n/['test'](l.buffer))return this;E=e();var o=E['match'](/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");l['state']="HEADER"}for(var i=!1;l.buffer;){if(!/\r\n|\n/['test'](l.buffer))return this;switch(i?i=!1:E=e(),l.state){case"HEADER":/:/['test'](E)?n(E):E||(l['state']="ID");continue;case"NOTE":E||(l['state']="ID");continue;case"ID":if(/^NOTE($|[ \t])/['test'](E)){l['state']="NOTE";break}if(!E)continue;if(l['cue']=new c["default"](0,0,""),l['state']="CUE",-1===E['indexOf']("-->")){l['cue']['id']=E;continue}case"CUE":try{r(E,l.cue,l.regionList)}catch(d){l['cue']=null,l['state']="BADCUE";continue}l['state']="CUETEXT";continue;case"CUETEXT":var p=-1!==E['indexOf']("-->");if(!E||p&&(i=!0)){l.oncue&&l['oncue'](l.cue),l['cue']=null,l['state']="ID";continue}l.cue.text&&(l.cue.text+="\n"),l.cue.text+=E;continue;case"BADCUE":E||(l['state']="ID");continue}}}catch(d){"CUETEXT"===l.state&&l.cue&&l.oncue&&l['oncue'](l.cue),l['cue']=null,l['state']="INITIAL"===l.state?"BADWEBVTT":"BADCUE"}return this},'flush':function(){var a=this;try{if(a.buffer+=a['decoder']['decode'](),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a['parse']()),"INITIAL"===a.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return a.onflush&&a['onflush'](),this}},n['fixLineBreaks']=b,n["default"]=E},{'292':292}],'294':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}Object['defineProperty'](n,"__esModule",{'value':!0});var E=a(293),o=l(E),i=a(250),t=a(331),r=function(a,e,n){return-1===n?0:a['substr'](n||0,e.length)===e},b=function(a){var e=parseInt(a['substr'](-3)),n=parseInt(a['substr'](-6,2)),l=parseInt(a['substr'](-9,2)),E=a.length>9?parseInt(a['substr'](0,a['indexOf'](":"))):0;return Number['isFinite'](e)&&Number['isFinite'](n)&&Number['isFinite'](l)&&Number['isFinite'](E)?(e+=1e3*n,e+=6e4*l,e+=36e5*E):-1},d=function w(a){for(var w=5381,e=a.length;e;)w=33*w^a['charCodeAt'](--e);return(w>>>0)['toString']()},c=function(a,e,n){var l=a[e],E=a[l.prevCC];if(!E||!E["new"]&&l["new"])return a['ccOffset']=a['presentationOffset']=l.start,void(l["new"]=!1);for(;E&&E["new"];)a.ccOffset+=l.start-E.start,l["new"]=!1,l=E,E=a[l.prevCC];a['presentationOffset']=n},p={'parse':function(a,e,n,l,E,p,w,x){var v=/\r\n|\n\r|\n|\r/g,y=i['utf8ArrayToStr'](new Uint8Array(a))['trim']()['replace'](v,"\n")['split']("\n"),h="00:00.000",s=0,D=0,m=0,C=[],f=void 0,g=!0,k=new o["default"];k['oncue']=function(a){var e=n[l],E=n.ccOffset;e&&e["new"]&&(void 0!==D?E=n['ccOffset']=e.start:c(n,l,m)),m&&(E=m+n.ccOffset-n.presentationOffset);var o=E-D,i=a.startTime+o,r=a.endTime+o;if(0>i?a['startTime']=0:a['startTime']=i,0>r?a['endTime']=0:a['endTime']=r,a['id']=d(a['startTime']['toString']())+d(a['endTime']['toString']())+d(a.text),a['text']=decodeURIComponent(encodeURIComponent(a.text)),a.endTime>0)if(x){var b=t['convertHTMLCaptions']['createHTMLCaptionsFromVTT'](w,a);b&&C['push'](b)}else C['push'](a)},k['onparsingerror']=function(a){f=a},k['onflush']=function(){return f&&p?void p(f):void E(C)},y['forEach'](function(a){if(g){if(r(a,"X-TIMESTAMP-MAP=")){g=!1,a['substr'](16)['split'](",")['forEach'](function(a){var e="LOCAL:",n="MPEGTS:";r(a,e,a['indexOf'](e))?h=a['substr'](a['indexOf'](e)+e.length):r(a,n,a['indexOf'](n))&&(s=parseInt(a['substr'](a['indexOf'](n)+n.length)))});try{e=0>e?e+8589934592:e,s-=e,D=b(h)/1e3,m=s/9e4,-1===D&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+a))}catch(n){f=new Error("Malformed X-TIMESTAMP-MAP: "+a)}return}""===a&&(g=!1)}k['parse'](a+"\n")}),k['flush']()}};n["default"]=p},{'250':250,'293':293,'331':331}],'295':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=a(285),i=window,t=i.performance,r=i.XMLHttpRequest,b=function(){function a(e){l(this,a),e&&e.xhrSetup&&(this['xhrSetup']=e.xhrSetup)}return E(a,[{'key':"destroy",'value':function(){this['abort'](),this['loader']=null}},{'key':"abort",'value':function(){var a=this.loader;a&&4!==a.readyState&&(this['stats']['aborted']=!0,this['stats']['tabort']=Math['max'](this.stats.tfirst,t['now']()),a['abort']()),window['clearTimeout'](this.requestTimeout),this['requestTimeout']=null,window['clearTimeout'](this.retryTimeout),this['retryTimeout']=null}},{'key':"load",'value':function(a,e,n){this['context']=a,this['config']=e,this['callbacks']=n,this['stats']={'trequest':t['now'](),'retry':0},this['retryDelay']=e.retryDelay,this['loadInternal']()}},{'key':"loadInternal",'value':function(){var a=void 0,e=this.context;a=this['loader']=new r;var n=this.stats;n['tfirst']=0,n['loaded']=0;var l=this.xhrSetup;try{if(l)try{l(a,e.url)}catch(E){a['open']("GET",e.url,!0),l(a,e.url)}a.readyState||a['open']("GET",e.url,!0)}catch(E){return void this['callbacks']['onError']({'code':a.status,'text':E.message},e,a)}e.rangeEnd&&a['setRequestHeader']("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1));var o=e.headers;if(o)for(var i in o)a['setRequestHeader'](i,o[i]);a['onreadystatechange']=this['readystatechange']['bind'](this),a['onprogress']=this['loadprogress']['bind'](this),a['responseType']=e.responseType,this['requestTimeout']=window['setTimeout'](this['loadtimeout']['bind'](this),this.config.timeout),a['send']()}},{'key':"readystatechange",'value':function(a){var e=a.currentTarget,n=e.readyState,l=this.stats,E=this.context,i=this.config;if(!l.aborted&&n>=2)if(window['clearTimeout'](this.requestTimeout),0===l.tfirst&&(l['tfirst']=Math['max'](t['now'](),l.trequest)),4===n){var r=e.status;if(r>=200&&300>r){l['tload']=Math['max'](l.tfirst,t['now']());var b=void 0,d=void 0;"arraybuffer"===E.responseType?(b=e.response,d=b.byteLength):(b=e.responseText,d=b.length),l['loaded']=l['total']=d;var c={'url':e.responseURL,'data':b};this['callbacks']['onSuccess'](c,l,E,e)}else l.retry>=i.maxRetry||r>=400&&499>r?(o['logger']['error'](r+" while loading "+E.url),this['callbacks']['onError']({'code':r,'text':e.statusText},E,e)):(o['logger']['warn'](r+" while loading "+E.url+", retrying in "+this.retryDelay+"..."),this['destroy'](),this['retryTimeout']=window['setTimeout'](this['loadInternal']['bind'](this),this.retryDelay),this['retryDelay']=Math['min'](2*this.retryDelay,i.maxRetryDelay),l.retry++)}else this['requestTimeout']=window['setTimeout'](this['loadtimeout']['bind'](this),i.timeout)}},{'key':"loadtimeout",'value':function(){o['logger']['warn']("timeout while loading "+this.context.url),this['callbacks']['onTimeout'](this.stats,this.context,null)}},{'key':"loadprogress",'value':function(a){var e=a.currentTarget,n=this.stats;n['loaded']=a.loaded,a.lengthComputable&&(n['total']=a.total);var l=this.callbacks.onProgress;l&&l(n,this.context,null,e)}}]),a}();n["default"]=b},{'285':285}],'296':[function(a,e,n){"use strict";function l(){return P}function E(){return g()}function o(){return[T,u]}function i(a,e){var n=h['f'](e),l="";return a['split']("")['forEach'](function(a){l+=c(x(n['indexOf'](a)['toString'](),10,4),3)}),l=v['decode'](x(l,4,16))}function t(a){if(R=a.packageType,S=k['isWebOSApp']()?window['webOS']['fetchAppId']():k['isTizenApp']()?window.tizen['application']['getCurrentApplication']().appInfo.id:window[U[1]][U[0]],M=!0,P=m(88888*C()),T=3,u="",A={},a&&a['hasOwnProperty']("id")&&a['hasOwnProperty']("key")?60!=a.key.length&&(M=!1):(A['id']="",M=!1),M){A=a;var e=h['g'](a.id),n=i(a.key,e);if(45!=n.length)M=!1;else{var l=f(s(x(n[0],16,10)),4);if(u=i(n['substr'](1),l),u['split']("")['some'](function(a){return!a['match'](/\d/)})||h['h'](u))M=!1;else{T=s(x(n[0],16,10)),T=(T+7)%16,P=s(u['substr'](T?T:1,5)),L=[];for(var E=a.whitelistKey,o=E['split'](e),t=0;t<o.length;t++){var r=o[t],b=y.utils['hex']['toBytes'](r),d=new y['ModeOfOperation']['ctr'](h.DKEY,new y['Counter'](5)),c=d['decrypt'](b),p=y.utils['utf8']['fromBytes'](c);L['push'](p)}}}}var w=h['g'](A.id);return I=h['e'](w),M}function r(a){if(!w())return"";for(;a.length%5!==0;)a+=a[0];for(var e=c(x(v['encode'](a),16,2),4*v['encode'](a).length),n="",l=0;l<e.length;l+=5){var E=(s(e[l])<<4)*(D(u['substr'](T?T+5:6,4))>=D(g()['toString']()['substr'](0,4)))+(s(e[l+1])<<3)+(s(e[l+2])<<2)+(s(e[l+3])<<1)+s(e[l+4]);n+=I[E]}return n}function b(){return 1}function d(){return w()?!1:!0}function c(a,e){for(var n=e-a.length;n>0;)a="0"+a,--n;return a}function p(a,e){var n=!1;if(k['isTizenApp']())n=a===e;else{a=a['toLowerCase'](),e=e['toLowerCase']();var l=a['indexOf'](e);-1!==l&&e['length']===a.length-l&&(n=!0)}return n}function w(a){a=a||S;var e=!1;do{if(window&&window.cast&&window.cast.__platform__){e=!0;break}if(1===L.length&&U[3]===L[0]&&(e=!0),e===!0)break;if(a===U[2]&&!k['isWebOSApp']()&&!k['isTizenApp']()){e=!0;break}var n=a['match'](J),l=null;if(n){l=n[0];var E=l['split'](".")['map'](Number);10===E[0]?0<=E[1]&&E[1]<=255&&0<=E[2]&&E[2]<=255&&0<=E[3]&&E[3]<=255&&(e=!0):172===E[0]?16<=E[1]&&E[1]<=31&&0<=E[2]&&E[2]<=255&&0<=E[3]&&E[3]<=255&&(e=!0):192===E[0]&&168===E[1]&&0<=E[2]&&E[2]<=255&&0<=E[3]&&E[3]<=255&&(e=!0)}if(e===!0)break;if(L.length>0)if(l){for(var o=0;o<L.length;o++)if(l===L[o]){e=!0;break}}else{var i=a;if(i)for(var t=0;t<L.length;t++)if(p(i,L[t])){e=!0;break}}if(e===!0)break}while(!1);return e}var x=a(341),v=a(348),y=a(333),h=a(297),s=parseInt,D=Number,m=Math.ceil,C=Math.random,f=(Math.floor,Math.pow),g=Date.now,k=a(303)["default"],M=void 0,P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=["hostname","location","localhost","all","document","domain"],I=void 0,J=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,L=[];n['k']=t,n['j']=r,n['d']=b,n['c']=d,n['m']=l,n['n']=E,n['o']=o,n['cc']=w},{'297':297,'303':303,'333':333,'341':341,'348':348}],'297':[function(a,e,n){"use strict";function l(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJ";return a+="KLMNOPQRSTUVWXYZ0123456789/*-+.,[]={}^&%$#@!~`<>:;()",a['split']("")}function E(){var a="abcdefghijklmnopqrstuvwxyz";return a+="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a['split']("")}function o(a,e,n){var l=1,E={'picks':e,'rng':function(){return w(x(n*l++))}};return p['pick'](a,E)}function i(a){return void 0===a?v(65536*y()):c(d(a)['substr'](c(d(a)['charAt'](0),16,10),4),16,10)}function t(a){for(var e=0,n=0;n<a.length;++n)e+=Number(a[n]);return e%10}function r(a){return o(E(),32,a)}function b(a){return o(l(),64,a)}var d=a(340),c=a(341),p=a(343),w=Math.abs,x=Math.sin,v=Math.ceil,y=Math.random,h=5,s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];n['g']=i,n['h']=t,n['e']=r,n['f']=b,n['ID_MD5_SEED_DEC_LENGTH']=h,n['DKEY']=s},{'340':340,'341':341,'343':343}],'298':[function(a,e,n){"use strict";function l(a,e,n){for(var l=e-a.length;l>0;)a+=n,--l;return a}function E(a){a=l(a,5*Math['ceil'](a.length/5),a[0]);for(var e="",n=i(t['encode'](a),16,2),E=4*t['encode'](a).length,o=E-n.length;o>0;)n="0"+n,--o;for(var w=b['o']()[0],x=b['o']()[1],v=n,y=0;y<v.length;y+=5){var h=(d(v[y+4])<<4)/16*(p(x['substr'](w?w+5:6,10))>=p(c()['toString']()['substr'](0,10)))+(7*d(v[y])+(d(v[y])<<2)+(d(v[y])<<1)+3*d(v[y]))+(d(v[y+1])<<3)+(3*d(v[y+3])-d(v[y+3]))+(3*d(v[y+2])+d(v[y+2]));e+=r['e'](b['m']())[h]}return e}function o(a){if(a){if(a['hasOwnProperty']("g"))return a;for(var e in a)a[E(e)]=a[e],delete a[e];return a['g']=!0,a}return null}var i=a(341),t=a(348),r=a(297),b=a(296),d=parseInt,c=Date.now,p=Number;Math;n['i']=o},{'296':296,'297':297,'341':341,'348':348}],

//license
'299':[
  function(a,e,n){
    e['exports']={
      'info': ''
              + '('
              + encodeURIComponent(JSON.stringify(
                  {
                      "packageType": "production",
                      "id": "VisualOnWebsiteDemo",
                      "key": "7)cqsYi>7/K`i!Ewii;qFYi[&aSKFY2w&iw4=Ti[7EVsm82Z;JG4FY%>7T(G",
                      "analyticsURL": "",
                      "whitelistKey": "8134e6a2c64fd693b8189b1d32311936ce2eedf47d896ee129142c0791edb8c9aeec76dfd363c17a389e563",
                      "analyticsID": "VISUALON",
                      "analyticsURL": "",
                      "ae": 4189288523596,
                      "aee": 4189288523596,
                      "ave": 4189288523596,
                      "aae": 4189288523596,
                      "lowlatencyExpiration": 4189288523596,
                      "syncPlaybackExpiration": 4189288523596,
                      "videoEnhancementExpiration": 4189288523596,
                      "VRExpiration": 4189288523596,
                      "awsMediaTailorExpiration": 4189288523596,
                      "supportedFeatures": [
                          "dash",
                          "hls",
                          "progressive",
                          "analytics",
                          "vttThumbnail",
                          "adsplayer",
                          "castsender",
                          "srtParser",
                          "vttParser",
                          "ttmlParser",
                          "captionParser",
                          "fccStyle",
                          "lowlatency",
                          "videoEnhancement",
                          "VR"
                      ],
                      "aeEnable": true,
                      "aeeEnable": true,
                      "aveEnable": true,
                      "aaeEnable": true,
                      "lowlatencyExpired": false,
                      "syncPlaybackExpired": false,
                      "videoEnhancementExpired": false,
                      "awsMediaTailorExpired": false
                  }
                ))
              + ')'
    }
  },{}],

'300':[function(_dereq_,module,exports){(function(process){"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](exports,"__esModule",{'value':!0});var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),_a=_dereq_(296),_l=_dereq_(298),license=_dereq_(299),licenseServerUrl="https://counter.visualon.info",GodkendEngine=function(){function GodkendEngine(context){_classCallCheck(this,GodkendEngine),this['context_']=context,this['eventDelegate_']=this.context_.eventDelegate,this['debug_']=this.context_.debug,this['gkObj_']=null,this['gkObj2_']=null,this['playerGk_']=!1,this['processOnlineLicense_']=null,this['successCallback_']=null,this['gkObj_']=eval(decodeURIComponent(license.info));var fmtValid=_a['k'](this.gkObj_);if(this['isAwsMarketPackage']())this['playerGk_']=!1,this['gkObj2_']={},this['gkObj2_']['aeEnable']=!1,this['gkObj2_']['aeeEnable']=!1,this['gkObj2_']['aveEnable']=!1,this['gkObj2_']['aaeEnable']=!1,this['gkObj2_']['lowlatencyExpired']=!0,this['gkObj2_']['syncPlaybackExpired']=!0,this['gkObj2_']['videoEnhancementExpired']=!0,this['gkObj2_']['awsMediaTailorExpired']=!1;else{var b1=fmtValid&&!_a['c'](),b2=_a['cc']();b1&&b2?this['playerGk_']=!0:this['playerGk_']=!1}}return _createClass(GodkendEngine,[{'key':"isAwsMarketPackage",'value':function(){return"AwsMarket"===this.gkObj_.id?!0:!1}},{'key':"getPackageID",'value':function(){return this.gkObj_.id}},{'key':"getSupportedFeatures",'value':function(){return this.gkObj_.supportedFeatures}},{'key':"obfuscatePlayer",'value':function(a){return _l['i'](a)}},{'key':"isPlayerGodkend",'value':function(){return this.playerGk_}},{'key':"getGodkendDays",'value':function(){var a=_a['d']();return a}},{'key':"getGodkendName",'value':function(a){return _a['j'](a)}},{'key':"getAnalyticsURL",'value':function(){return this['isAwsMarketPackage']()?this.gkObj2_.analyticsURL:this.gkObj_.analyticsURL}},{'key':"getAnalyticsID",'value':function(){return this['isAwsMarketPackage']()?this.gkObj2_.analyticsID:this.gkObj_.analyticsID}},{'key':"isAeEnable",'value':function(){return this['isAwsMarketPackage']()?this.gkObj2_.aeEnable:this.gkObj_.aeEnable}},{'key':"isAeeEnable",'value':function(){return this['isAwsMarketPackage']()?this.gkObj2_.aeeEnable:this.gkObj_.aeeEnable}},{'key':"isAveEnable",'value':function(){return this['isAwsMarketPackage']()?this.gkObj2_.aveEnable:this.gkObj_.aveEnable}},{'key':"isAaeEnable",'value':function(){return this['isAwsMarketPackage']()?this.gkObj2_.aaeEnable:this.gkObj_.aaeEnable}},{'key':"isLowlatencyGodkend",'value':function(){return this['isAwsMarketPackage']()?!this.gkObj2_.lowlatencyExpired:!this.gkObj_.lowlatencyExpired}},{'key':"isSyncPlaybackGodkend",'value':function(){return this['isAwsMarketPackage']()?!this.gkObj2_.syncPlaybackExpired:!this.gkObj_.syncPlaybackExpired}},{'key':"isVideoEnhancementGodkend",'value':function(){return this['isAwsMarketPackage']()?!this.gkObj2_.videoEnhancementExpired:!this.gkObj_.videoEnhancementExpired}},{'key':"isAwsMediaTailorGodkend",'value':function(){return this['isAwsMarketPackage']()?!this.gkObj2_.awsMediaTailorExpired:!this.gkObj_.awsMediaTailorExpired}},{'key':"isEvaluationVersion",'value':function(){var a=void 0;return a=this['isAwsMarketPackage']()?"evaluation"===this.gkObj2_.packageType?!0:!1:"evaluation"===this.gkObj_.packageType?!0:!1}},

{
  'key':"requestGodkendInfo",
  'value':function(a,e){
    //var n=this;if(this['successCallback_']=e,a)try{var l=new XMLHttpRequest;l['onreadystatechange']=function(){4===l.readyState&&(403===l.status?n['processOnlineLicense']({'scs':!1}):n['processOnlineLicense']({'scs':!0}))},l['open']("GET",licenseServerUrl+"?load="+a,!0),l['send']()}catch(E){this['processOnlineLicense']({'scs':!0})}else process['nextTick'](function(){n['processOnlineLicense']({'scs':!1})})
    this['successCallback_']=e
    this['successCallback_']()
    this['playerGk_']=!1
  }
},
{
  'key':"getGodkendInfo",
  'value':function(a){
    //if(this['isAwsMarketPackage']()&&a){var e=void 0;try{var n=a['split']("-"),l=n[0],E=atob(n[1]),o="1"===E[E.length-1],i=E['split']("-"),t=i[1]||"sas53",r=i[2]||"0",b="0"===r?"t":"p",d="https://"+t+".visualon.info/afs";e={'type':b,'cid':l,'analytics':o,'analyticsUrl':d}}catch(c){e={'type':"t",'cid':"visualon",'analytics':!1,'analyticsUrl':""}}this['playerGk_']=!0,this['gkObj2_']['packageType']="t"===e.type?"evaluation":"production",this['gkObj2_']['analyticsID']=e.cid,this['gkObj2_']['analyticsURL']=e.analyticsUrl,this['gkObj2_']['aeEnable']=e.analytics}
  }
},
{
  'key':"processOnlineLicense",
  'value':function(a){
    //return this['isAwsMarketPackage']()&&this.context_.config.flagIsReceiver?void this['debug_']['log']("vo license is invalid, but allow in receiver version."):void(a.scs||(this['playerGk_']=!1,this['successCallback_']()))
  }
}
]),GodkendEngine}();exports["default"]=GodkendEngine})['call'](this,_dereq_(342))},{'296':296,'298':298,'299':299,'342':342}],'301':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0}),n['voMediaTailorAdapter']=void 0;var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(11),t=l(i),r=a(303),b=l(r);n['voMediaTailorAdapter']=function(){function a(e){E(this,a),this['context_']=e,this['eventDelegate_']=this.context_.eventDelegate,this['eventBus_']=this.context_.eventBus,this['debug_']=this.context_.debug,this['playerInstance_']=this.context_.instance,this['flagAllAdsBreakCompleted_']=!1,this['flagHasPostRoll_']=!1,this['flagPostRollPlayed_']=!1,this['adInfo_']=null,this['contentDuration_']=0,this['flagEnded_']=!1,this['eventDelegate_']['onPlayTimeUpdated']=this['onPlayTimeUpdated']['bind'](this),this['oldOnPlayCompleted_']=this.eventDelegate_['onPlayCompleted']['bind'](this.eventDelegate_),this['eventDelegate_']['onPlayCompleted']=this['onPlayCompleted']['bind'](this),this['onCbMediaTailor']=this['onCbMediaTailor']['bind'](this),this['mediaTailorPlugin_']=new window['voMediaTailorPlugin'](this.context_.instance,this.onCbMediaTailor)}return o(a,[{'key':"open",'value':function(a){this['mediaTailorPlugin_']['open'](a)}},{'key':"close",'value':function(){this['mediaTailorPlugin_']['close'](),this['mediaTailorPlugin_']=null}},{'key':"setPosition",'value':function(a){this['flagEnded_']=!1,this['mediaTailorPlugin_']['setPosition'](a)}},{'key':"getPosition",'value':function(){return this.adInfo_?this['mediaTailorPlugin_']['getPosition']():1}},{'key':"getDuration",'value':function(){return this.adInfo_?this['mediaTailorPlugin_']['getDuration']():1}},{'key':"onPlayTimeUpdated",'value':function(a){a['position']=this['playerInstance_']['getPosition'](),a['duration']=this['playerInstance_']['getDuration'](),this['eventBus_']['trigger'](t["default"].VO_OSMP_CB_PLAY_TIME_UPDATED,a)}},{'key':"isPlayingAd",'value':function(){return this.playingAd_}},{'key':"onCbMediaTailor",'value':function(a,e){if(a===window.voMediaTailorPlugin.Events.CONTENT_PLAYBACK_COMPLETE){this['contentDuration_']=this['playerInstance_']['getDuration']();var n=this.adInfo_.length,l=this['adInfo_'][n-1],E=l.startTime+l.duration;E-this.contentDuration_>2&&(this['flagHasPostRoll_']=!0),(!this.flagHasPostRoll_||this.flagPostRollPlayed_)&&this['playerInstance_']['pause'](),this['flagEnded_']=!0,this['oldOnPlayCompleted_']()}else{var o=void 0;switch(a){case window.voMediaTailorPlugin.Events.AD_INFO:return void(this['adInfo_']=b["default"]['deepCopy'](e));case window.voMediaTailorPlugin.Events.AD_BREAK_STARTED:this['playingAd_']=!0,o=t["default"].VO_OSMP_AD_BREAK_STARTED;break;case window.voMediaTailorPlugin.Events.AD_STARTED:o=t["default"].VO_OSMP_AD_STARTED;break;case window.voMediaTailorPlugin.Events.AD_COMPLETE:o=t["default"].VO_OSMP_AD_COMPLETE;break;case window.voMediaTailorPlugin.Events.AD_BREAK_COMPLETE:this['playingAd_']=!1,o=t["default"].VO_OSMP_AD_BREAK_COMPLETE}this['eventBus_']['trigger'](o,e),a===window.voMediaTailorPlugin.Events.AD_BREAK_COMPLETE&&this.flagHasPostRoll_&&!this.flagPostRollPlayed_&&(this['flagPostRollPlayed_']=!0,this['playerInstance_']['pause'](),this['mediaTailorPlugin_']['setPosition'](this.contentDuration_),this['debug_']['log']("vo_info, MediaTailor, set position to "+this.contentDuration_))}}},{'key':"onPlayCompleted",'value':function(){}},{'key':"isEnded",'value':function(){return this.flagEnded_}}]),a}()},{'11':11,'303':303}],'302':[function(a,e,n){"use strict";var l=l||function(a){if(!("undefined"==typeof a||"undefined"!=typeof navigator&&/MSIE [1-9]\./['test'](navigator.userAgent))){var e=a.document,n=function(){return a.URL||a.webkitURL||a},l=e['createElementNS']("http://www.w3.org/1999/xhtml","a"),E="download"in l,o=function(a){var e=new MouseEvent("click");a['dispatchEvent'](e)},i=/constructor/i['test'](a.HTMLElement)||a.safari,t=/CriOS\/[\d]+/['test'](navigator.userAgent),r=function(e){(a.setImmediate||a.setTimeout)(function(){throw e},0)},b="application/octet-stream",d=4e4,c=function(a){var e=function(){"string"==typeof a?n()['revokeObjectURL'](a):a['remove']()};setTimeout(e,d)},p=function(a,e,n){e=[]['concat'](e);for(var l=e.length;l--;){var E=a["on"+e[l]];if("function"==typeof E)try{E['call'](a,n||a)}catch(o){r(o)}}},w=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i['test'](a.type)?new Blob([String['fromCharCode'](65279),a],{'type':a.type}):a},x=function(e,r,d){d||(e=w(e));var x,v=this,y=e.type,h=y===b,s=function(){p(v,"writestart progress write writeend"['split'](" "))},D=function(){if((t||h&&i)&&a.FileReader){var l=new FileReader;return l['onloadend']=function(){var e=t?l.result:l['result']['replace'](/^data:[^;]*;/,"data:attachment/file;"),n=a['open'](e,"_blank");n||(a['location']['href']=e),e=void 0,v['readyState']=v.DONE,s()},l['readAsDataURL'](e),void(v['readyState']=v.INIT)}if(x||(x=n()['createObjectURL'](e)),h)a['location']['href']=x;else{var E=a['open'](x,"_blank");E||(a['location']['href']=x)}v['readyState']=v.DONE,s(),c(x)};return v['readyState']=v.INIT,E?(x=n()['createObjectURL'](e),void setTimeout(function(){l['href']=x,l['download']=r,o(l),s(),c(x),v['readyState']=v.DONE})):void D()},v=x.prototype,y=function(a,e,n){return new x(a,e||a.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,e,n){return e=e||a.name||"download",n||(a=w(a)),navigator['msSaveOrOpenBlob'](a,e)}:(v['abort']=function(){},v['readyState']=v['INIT']=0,v['WRITING']=1,v['DONE']=2,v['error']=null,v['onwritestart']=null,v['onprogress']=null,v['onwrite']=null,v['onabort']=null,v['onerror']=null,v['onwriteend']=null,y)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);e['exports']['saveAs']=l},{}],'303':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){E['prototype']['getBrowserName']=function(){var a=navigator['userAgent']['toLowerCase']();return t["default"](a)},E['prototype']['isSafari']=function(){return"safari"===E['prototype']['getBrowserName']().browser?!0:!1},E['prototype']['isMobileSafari']=function(){var a=E['prototype']['getBrowserName']();return"safari"===a.browser&&a.data&&a.data.ios?!0:!1},E['prototype']['isChrome']=function(){return E['prototype']['isChromecast']()?!1:"chrome"===E['prototype']['getBrowserName']().browser?!0:!1},E['prototype']['isChromecast']=function(){return window.cast&&window.cast.__platform__?!0:!1},E['prototype']['isChromecastCAF']=function(){return window.cast&&window.cast.__platform__&&window.cast.framework?!0:!1},E['prototype']['isFirefox']=function(){return"firefox"===E['prototype']['getBrowserName']().browser?!0:!1},E['prototype']['isEdge']=function(){return"edge"===E['prototype']['getBrowserName']().browser?!0:!1},E['prototype']['isIE11']=function(){var a=E['prototype']['getBrowserName']();return"ie"===a.browser&&11==parseInt(a.version)?!0:!1},E['prototype']['isIE']=function(){return window.ActiveXObject||"ActiveXObject"in window?!0:!1},E['prototype']['isIOS']=function(){var a=E['prototype']['getOS']();return"HTML5_iOS"===a.os?!0:!1},E['prototype']['isAndroid']=function(){var a=E['prototype']['getOS']();return"HTML5_Android"===a.os?!0:!1},E['prototype']['isSamsungBrowser']=function(){return"samsungbrowser"===E['prototype']['getBrowserName']().browser?!0:!1},E['prototype']['isWebOS']=function(){return"webos"===E['prototype']['getBrowserName']().browser?!0:!1},E['prototype']['isWebOSApp']=function(){return E['prototype']['isWebOS']()&&"object"===o(window.webOS)},E['prototype']['isTizenApp']=function(){return window.tizen?!0:!1},E['prototype']['isSamsung2016']=function(){var a=navigator['userAgent']['toLowerCase']();return window.tizen&&-1!==a['indexOf']("tizen 2.4")?!0:!1},E['prototype']['isWebOS2016_2017']=function(){var a=navigator['userAgent']['toLowerCase']();return E['prototype']['isWebOSApp']()&&-1!==a['indexOf']("chrome/38")?!0:!1},E['prototype']['isTTMLSupported']=function(){var a=void 0,e=49;if("undefined"!=typeof navigator){if(!navigator['userAgent']['match'](/Firefox/))return!0;if(a=parseFloat(navigator['userAgent']['match'](/rv:([0-9.]+)/)[1]),!isNaN(a)&&a>=e)return!0}return!1},E['prototype']['cloneObject']=function(a){var e=void 0,n=void 0;e=Array['isArray'](a)?[]:{};for(n in a){var l=a[n];e[n]="object"===("undefined"==typeof l?"undefined":o(l))&&l?E['prototype']['cloneObject'](l):l}return e},E['prototype']['deepCopy']=b["default"],E['prototype']['isInteger']=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math['floor'](a)===a},E['prototype']['getOS']=function(){var a=navigator.userAgent,e=navigator.appVersion,n="unknown",l="unknown",E=[{'s':"Windows 10",'r':/(Windows 10.0|Windows NT 10.0)/},{'s':"Windows 8.1",'r':/(Windows 8.1|Windows NT 6.3)/},{'s':"Windows 8",'r':/(Windows 8|Windows NT 6.2)/},{'s':"Windows 7",'r':/(Windows 7|Windows NT 6.1)/},{'s':"Windows Vista",'r':/Windows NT 6.0/},{'s':"Windows Server 2003",'r':/Windows NT 5.2/},{'s':"Windows XP",'r':/(Windows NT 5.1|Windows XP)/},{'s':"Windows 2000",'r':/(Windows NT 5.0|Windows 2000)/},{'s':"Windows ME",'r':/(Win 9x 4.90|Windows ME)/},{'s':"Windows 98",'r':/(Windows 98|Win98)/},{'s':"Windows 95",'r':/(Windows 95|Win95|Windows_95)/},{'s':"Windows NT 4.0",'r':/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{'s':"Windows CE",'r':/Windows CE/},{'s':"Windows 3.11",'r':/Win16/},{'s':"Android",'r':/Android/},{'s':"Open BSD",'r':/OpenBSD/},{'s':"Sun OS",'r':/SunOS/},{'s':"Linux",'r':/(Linux|X11)/},{'s':"iOS",'r':/(iPhone|iPad|iPod)/},{'s':"Mac OS X",'r':/Mac OS X/},{'s':"Mac OS",'r':/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{'s':"QNX",'r':/QNX/},{'s':"UNIX",'r':/UNIX/},{'s':"BeOS",'r':/BeOS/},{'s':"OS/2",'r':/OS\/2/},{'s':"Search Bot",'r':/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in E){var i=E[o];if(i['r']['test'](a)){n=i.s;break}}switch(/Windows/['test'](n)&&(l=/Windows (.*)/['exec'](n)[1],n="HTML5_Windows_PC"),
n){case"Mac OS X":l=/Mac OS X ([\.\_\d]+)/['exec'](a)[1],n="HTML5_Mac_OS";break;case"Android":l=/Android ([\.\_\d]+)/['exec'](a)[1],n="HTML5_Android";break;case"iOS":l=/OS (\d+)_(\d+)_?(\d+)?/['exec'](e),l=l[1]+"."+l[2]+"."+(0|l[3]),n="HTML5_iOS";break;case"Linux":var t=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i")['exec'](a);if(t.length>0){var r=t[0],b=n.length;l=r['slice'](b+1)}else l="X11";n="HTML5_Linux",window.cast&&window.cast.__platform__&&(n+=" (Chromecast)")}return{'os':n,'osVersion':l}},E['prototype']['getDeviceType']=function(){var a="PC";return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator.userAgent)&&(a="mobile"),(E.isSamsungBrowser||E.isWebOS)&&(a="Smart-TV"),window.cast&&window.cast.__platform__&&(a="Chromecast"),a},E['prototype']['getURLSuffix']=function(a){function e(a){var e=void 0,n=a['lastIndexOf']("?");return e=-1===n?a:a['substr'](0,n)}var n=void 0,l=e(a),E=l['lastIndexOf'](".");return-1!==E&&(n=l['substr'](E+1,l.length-E)),n},E['prototype']['concatArrayBuffer']=function(a,e){if(!a||!a.byteLength)return e;if(!e||!e.byteLength)return a;var n=new Uint8Array(a),l=new Uint8Array(e),E=new Uint8Array(n.length+l.length);return E['set'](n),E['set'](l,n.length),E.buffer},E['prototype']['checkSupportDrmSystems']=function(a){var e=[],n={'widevine':"com.widevine.alpha",'playready':"com.microsoft.playready",'clearkey':"org.w3.clearkey",'fairplay':"com.apple.fps.1_0"},l=window.MSMediaKeys||window.WebKitMediaKeys||window.MediaKeys,E=function(){return l?!0:!1},o=function(){var a="navigator"in window&&"requestMediaKeySystemAccess"in window.navigator&&"MediaKeySystemAccess"in window;return a?!0:!1},i=[{'initDataTypes':["cenc"],'audioCapabilities':[{'contentType':'audio/mp4;codecs="mp4a.40.2"'}],'videoCapabilities':[{'contentType':'video/mp4;codecs="avc1.42E01E"'}]}];if(!E())return void a(e);if("function"==typeof l.isTypeSupported)for(var t in n)n['hasOwnProperty'](t)&&("fairplay"===t?l['isTypeSupported'](n[t],"video/mp4")&&e['push'](t):l['isTypeSupported'](n[t],i[0]['videoCapabilities'][0].contentType)&&e['push'](t));if(!o())return void a(e);var r=function(a){var l=3,E=function(){l--,0===l&&a(e)},o=function(a){if(n['hasOwnProperty'](a)&&"fairplay"!==a)try{navigator['requestMediaKeySystemAccess'](n[a],i)['then'](function(){e['push'](a),E()})["catch"](function(e){console['log']("no "+a+" support"+e),E()})}catch(l){console['log']("funciton requestMediaKeySystemAccess does not support"+l),E()}};for(var t in n)o(t)};r(a)},E['prototype']['replaceAttribute']=function(a,e,n){var l,E=e+": "+n+";";if(a){var o=a['indexOf'](e);if(-1===o)l=E+a;else{var i=a['indexOf'](";",o);if(-1===i){i=a.length;var t=a['substr'](o,i-o);l=a['replace'](t,E)}else{var r=a['substr'](o,i+1-o);l=a['replace'](r,E)}}}else l=E;return l}}Object['defineProperty'](n,"__esModule",{'value':!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a(311),t=l(i),r=a(304),b=l(r),d=a(306),c=l(d),p=new E;p['NumberUtils']=c["default"],n["default"]=p},{'304':304,'306':306,'311':311}],'304':[function(a,e,n){"use strict";function l(a){var e=Array['isArray'](a)?[]:{};for(var n in a){var o=a[n];o&&"object"===("undefined"==typeof o?"undefined":E(o))?o instanceof Date?(e[n]=new Date,e[n]['setTime'](o['getTime']())):o instanceof RegExp?e[n]=new RegExp(o):e[n]=l(o):e[n]=o}return e}Object['defineProperty'](n,"__esModule",{'value':!0});var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a};n["default"]=l},{}],'305':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l=function(){};l['prototype']['removeAllChild']=function(a){for(;a.lastChild;)a['removeChild'](a.lastChild)};var E=new l;n["default"]=E},{}],'306':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={};l['isNumber']=function(a){return"number"!=typeof a?!1:a!==Number(a)?!1:Number['isFinite'](a)===!1?!1:!0},n["default"]=l},{}],'307':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){var n=new b;return n['detect'](a,e)}Object['defineProperty'](n,"__esModule",{'value':!0}),n['StreamProtocolDetective']=void 0;var i=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}();n['DetectStreamProtocolType']=o;var t=a(1),r=l(t),b=n['StreamProtocolDetective']=function(){function a(){E(this,a)}return i(a,[{'key':"detect",'value':function(a,e){var n="",l=a['endsWith'](".m3u8"),E=a['endsWith'](".mpd");if(l)n=r["default"].HLS,e(n);else if(E)n=r["default"].DASH,e(n);else{var o=new XMLHttpRequest,i=function(){if(206===o.status||200===o.status){var l=o.response;console['log'](a+", length: "+l.length),0===l['indexOf']("#EXTM3U")?n=r["default"].HLS:(l['indexOf']("mpd")||l['indexOf']("MPD"))&&(n=r["default"].DASH),e(n)}};o['open']("GET",a);var t=0,b=1024;o['setRequestHeader']("Range","bytes="+t+"-"+b),o['onload']=i,o['send']()}}}]),a}()},{'1':1}],'308':[function(a,e,n){"use strict";function l(a){return String['fromCharCode']['apply'](null,new Uint8Array(a))}Object['defineProperty'](n,"__esModule",{'value':!0});var E={};E['ab2str']=l,n["default"]=E},{}],'309':[function(a,e,n){"use strict";function l(a){return 10>a?"0"+a['toString']():a['toString']()}function E(a){a=Math['max'](a,0);var e=Math['floor'](a/3600),n=Math['floor'](a%3600/60),E=Math['floor'](a%3600%60);return(0===e?"":l(e)+":")+l(n)+":"+l(E)}Object['defineProperty'](n,"__esModule",{'value':!0}),n["default"]=E},{}],'310':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l=function(a){this['id']=null,this['callback']=function(){a()}['bind'](this)};l['prototype']['cancel']=function(){null!==this.id&&(clearTimeout(this.id),this['id']=null)},l['prototype']['schedule']=function(a){this['cancel'](),this['id']=setTimeout(this.callback,a)},l['prototype']['scheduleRepeated']=function(a){this['cancel']();var e=function(){null!==this.id&&(this['cancel'](),this['id']=setTimeout(e,a),this['callback']())}['bind'](this);this['id']=setTimeout(e,a)},n["default"]=l},{}],'311':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},E=/((?:oculus|samsung)browser)\/([\w\.]+)/i,o=/(opera).+version\/([\w\.]+)/i,i=/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i,t=/(edge|edgios|edgea|edga|edg)\/((\d+)?[\w\.]+)/i,r=/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,b=/((?:android.+)crmo|crios)\/([\w\.]+)/i,d=/(firefox)\/([\w\.-]+)$/i,c=/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,p=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i,w="string",x={'major':function(a){return("undefined"==typeof a?"undefined":l(a))===w?a['replace'](/[^\d\.]/g,"")['split'](".")[0]:void 0}},v=function(a){a=a['toLowerCase']();var e=void 0,n=void 0,l=void 0,w=void 0;-1!==a['indexOf']("smart-tv")?(e="samsungbrowser",n=(w=E['exec'](a))?w[2]:"1.0"):-1!==a['indexOf']("web0s")||-1!==a['indexOf']("netcast")?(e="webos",n=-1!==a['indexOf']("chrome/53")?"4.0":-1!==a['indexOf']("chrome/38")?"3.0":-1!==a['indexOf']("safari/538")?"2.0":"1.0"):(w=o['exec'](a))?(e=w[1],n=w[2]):(w=i['exec'](a))?(e="ie",n=w[2]):(w=t['exec'](a))?(e="edge",n=w[2]):(w=r['exec'](a))?(e=w[1],n=w[2]):(w=b['exec'](a))?(e="chrome",n=w[2]):(w=d['exec'](a))?(e=w[1],n=w[2]):(w=c['exec'](a))?(e=w[2],n=w[1],l={'ios':!1},(a['match'](/iPad/i)||a['match'](/iPhone/i))&&(l['ios']=!0)):p['test'](a)?(e="safari",n="1.0",l={'ios':!0}):(e="unknown",n="1.0");var v={};return v['browser']=e,v['version']=x['major'](n),v['data']=l,v};n["default"]=v},{}],'312':[function(a,e,n){"use strict";function l(a){Number.isInteger||(Number['isInteger']=function(a){return(0^a)===a}),Number.isFinite||(Number['isFinite']=function(a){return"number"==typeof a&&isFinite(a)}),a||void 0===Number.parseFloat&&(Number['parseFloat']=window.parseFloat),a||void 0===Number.parseInt&&(Number['parseInt']=window.parseInt),Number.MAX_SAFE_INTEGER||(Number['MAX_SAFE_INTEGER']=Math['pow'](2,53)-1),Number.prototype.toFixed||(Number['prototype']['toFixed']=function(a){var e=Math['pow'](10,a||0);return String(Math['round'](this*e)/e)}),String.prototype.startsWith||(String['prototype']['startsWith']=function(a,e){return e=e||0,this['indexOf'](a,e)===e}),String.prototype.endsWith||(String['prototype']['endsWith']=function(a,e){return(void 0===e||e>this.length)&&(e=this.length),this['substring'](e-a.length,e)===a}),Uint8Array.prototype.slice||Object['defineProperty'](Uint8Array.prototype,"slice",{'configurable':!0,'writable':!0,'value':function(a,e){return new Uint8Array(Array.prototype['slice']['call'](this,a,e))}}),Array.prototype.findIndex||Object['defineProperty'](Array.prototype,"findIndex",{'value':function(a){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var l=arguments[1],E=0;n>E;){var o=e[E];if(a['call'](l,o,E,e))return E;E++}return-1},'configurable':!0,'writable':!0}),"function"!=typeof Object.assign&&Object['defineProperty'](Object,"assign",{'value':function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(a),n=1;n<arguments.length;n++){var l=arguments[n];if(null!=l)for(var E in l)Object.prototype['hasOwnProperty']['call'](l,E)&&(e[E]=l[E])}return e},'writable':!0,'configurable':!0})}Object['defineProperty'](n,"__esModule",{'value':!0}),n["default"]=l},{}],'313':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e,n){return e in a?Object['defineProperty'](a,e,{'value':n,'enumerable':!0,'configurable':!0,'writable':!0}):a[e]=n,a}function o(){function a(a){Ua=a,Ja=Ua.advertising&&Ua.advertising.tag?Ua.advertising.tag:"",La=Ua.advertising&&Ua.advertising.type?Ua.advertising.type:"",Na=Ua.advertising&&Ua.advertising.schedule?Ua.advertising.schedule:[]}function e(a){Oa++,n(a)}function n(a,e){if(ja===!0||"IDLE"!==Xa['getPlayerState']())return d(),Ga=setTimeout(function(){n(a,e)},500),!1;e?Ba=!0:(Ia=a,c());var l=new Ha.framework.messages.LoadRequestData;l['autoplay']=Ua.playback.autoplay,1===Oa&&"LIVE"!==a.streamType&&"number"==typeof a.currentTime&&a.currentTime>0&&(l['currentTime']=a.currentTime),l['media']=new Ha.framework.messages.MediaInformation,l['media']['contentId']=a.uri,a['type']===b["default"].DASH?l['media']['contentType']="application/dash+xml":a['type']===b["default"].HLS?l['media']['contentType']="application/x-mpegurl":a['type']===b["default"].PROGRESSIVE&&(l['media']['contentType']="video/mp4"),e||"LIVE"===a.streamType?"LIVE"===a.streamType&&(l['media']['streamType']="LIVE"):Ca(l.media);var E=new Ha.framework.PlaybackConfig;E['autoPauseDuration']=Qa,E['autoResumeDuration']=Ka,Ta['log'](a),a.drm&&a.drm.widevine?(E['protectionSystem']=Ha.framework.ContentProtection.WIDEVINE,E['licenseUrl']=a.drm.widevine.laUrl,E['licenseRequestHandler']=function(e){void 0!==a.drm.widevine.withCredentials&&(e['withCredentials']=a.drm.widevine.withCredentials),a.drm.widevine.headers&&(e['headers']=a.drm.widevine.headers)}):a.drm&&a.drm.playready&&(E['protectionSystem']=Ha.framework.ContentProtection.PLAYREADY,E['licenseUrl']=a.drm.playready.laUrl,E['licenseRequestHandler']=function(e){void 0!==a.drm.playready.withCredentials&&(e['withCredentials']=a.drm.playready.withCredentials),a.drm.playready.headers&&(e['headers']=a.drm.playready.headers)}),Xa['setPlaybackConfig'](E),ja=!0,e?Aa['onPlayWaiting']():Aa['onOpenStart'](),Xa['load'](l)['then'](function(){if("IDLE"!==Xa['getPlayerState']()){if(ja=!1,q(1),null!==Xa['getBreakClipDurationSec']()){var a=function n(){Xa['removeEventListener'](Ha.framework.events.EventType.BREAK_ENDED,n);var a=function l(){Xa['removeEventListener'](Ha.framework.events.EventType.TIME_UPDATE,l),na(e),Aa['onProgramChanged']()};Xa['addEventListener'](Ha.framework.events.EventType.TIME_UPDATE,a)};Xa['addEventListener'](Ha.framework.events.EventType.BREAK_ENDED,a)}else na(e);console['log']("load success")}},function(){ja=!1,console['log']("load failed")})}function l(a){a.video&&(Ma=a.video,Xa['setMediaElement'](Ma))}function o(){m()?(console['log']("rePlay"),Ia['currentTime']=0,Ia['rePlay']=!0,n(Ia,!0)):qa!==!1&&(qa=!1,Xa['play']())}function i(){qa!==!0&&(qa=!0,Xa['pause'](),da())}function t(){return qa===!0?!0:!1}function r(){if("IDLE"!==Xa['getPlayerState']()){var a=Xa['getBreaks']();a['forEach'](function(a){a['isWatched']=!1}),Xa['stop']()}}function d(){clearTimeout(Ga),r(),c()}function c(){qa=void 0,za=void 0,ja=!1,Ba=!0}function p(a){if(!(Ba||(Va++,1===Oa&&1===Va&&a===Ia.currentTime||Xa['getBreakClipDurationSec']()))){if(y()){var e=v();a=a<e.start?e.start:a,a=a>e.end?e.end:a}else{var n=x();a=0>a?0:a,a=a>n?n:a}za=!0,Xa['seek'](a),qa===!0&&(O(a)||Aa['onPlayWaiting']())}}function w(){return Xa['getBreakClipDurationSec']()?Xa['getBreakClipCurrentTimeSec']():Xa['getCurrentTimeSec']()}function x(){return Xa['getBreakClipDurationSec']()?Xa['getBreakClipDurationSec']():Xa['getDurationSec']()}function v(){return y()?Xa['getLiveSeekableRange']():{'start':0,'end':x()}}function y(){if(Xa['getBreakClipDurationSec']())return!1;var a=Xa['getMediaInformation']();return a&&"LIVE"===a.streamType?!0:!1}function h(){Wa['setSystemVolumeMuted'](!0)}function s(){Wa['setSystemVolumeMuted'](!1)}function D(){return Wa['getSystemVolume']().muted}function m(){return"IDLE"!==Xa['getPlayerState']()||Ba?!1:!0}function C(a){Wa['setSystemVolumeLevel'](a)}function f(){return Wa['getSystemVolume']().level}function g(){}function k(){}function M(){}function P(){return 0}function T(){return Ya['getTracks']().length}function u(){return Za['getTracks']().length}function A(){}function R(){}function S(){}function U(){}function I(){return{}}function J(){return{}}function L(){return{}}function N(){for(var a=w(),e=0;e<Ma.buffered.length;++e)if(a>=Ma['buffered']['start'](e)&&a<=Ma['buffered']['end'](e))return Ma['buffered']['end'](e)-a;return 0}function O(a){for(var e=0;e<Ma.buffered.length;++e)if(a>=Ma['buffered']['start'](e)&&a<=Ma['buffered']['end'](e))return!0;return!1}function V(){}function j(){}function q(a){Ma&&(Ma['playbackRate']=a)}function z(){return[{'id':"0"}]}function B(){var a=[],e=Ya['getTracks']();if(e&&e.length>0)for(var n=0;n<e.length;n++){var l=e[n],E={};E['id']=l['trackId']['toString'](),E['lang']=l.language,E['type']="audio",E['name']=l.name,a['push'](E)}return a}function F(){var a=[],e=Za['getTracks']();if(e&&e.length>0)for(var n=0;n<e.length;n++){var l=e[n],E={};E['id']=l['trackId']['toString'](),E['lang']=l.name||l.language,E['kind']="subtitles",E['label']="",a['push'](E)}return a}function G(){}function H(a){a=parseInt(a);var e=W();a!==parseInt(e.id)&&Ya['setActiveById'](a)}function K(a){""===a?Za['setActiveByIds']([]):Za['setActiveByIds']([parseInt(a)])}function Q(){return{'id':"0"}}function W(){var a={},e=Ya['getActiveTrack']();return e&&e.trackId&&(a['id']=e['trackId']['toString'](),a['lang']=e.language,a['type']="audio",a['name']=e.name),a}function X(){var a={},e=Za['getActiveTracks']();return e&&e.length>0&&e[0].trackId&&(a['id']=e[0]['trackId']['toString'](),a['lang']=e[0].language,a['kind']="subtitles",a['label']=""),a}function Y(a){return void 0===a?"ff":0===a||"0"===a?"00":parseInt(255*parseFloat(a))['toString'](16)}function Z(a){if(a.fontBackgroundColor)if(a.fontBackgroundColor.enable){var e=a.fontBackgroundColor['value']['toLowerCase']();_a[e]?Fa['backgroundColor']=_a[e]+Fa.fontBackgroundOpacity:-1!==e['indexOf']("#")?(9===e.length&&(Fa['backgroundColor']=e),7===e.length&&(Fa['backgroundColor']=e+Fa.fontBackgroundOpacity)):Fa['backgroundColor']=void 0}else Fa['backgroundColor']=void 0;if(a.fontBackgroundOpacity){if(a.fontBackgroundOpacity.enable){var n=a.fontBackgroundOpacity.value;Fa['fontBackgroundOpacity']=Y(n)}else Fa['fontBackgroundOpacity']="ff";Fa['backgroundColor']=Fa.backgroundColor?Fa['backgroundColor']['substring'](0,7)+Fa.fontBackgroundOpacity:Fa.backgroundColor}if(a.fontEdgeColor)if(a.fontEdgeColor.enable){var l=a.fontEdgeColor['value']['toLowerCase']();_a[l]?Fa['edgeColor']=_a[l]+Fa.fontEdgeOpacity:-1!==l['indexOf']("#")?(9===l.length&&(Fa['edgeColor']=l),7===l.length&&(Fa['edgeColor']=l+Fa.fontEdgeOpacity)):Fa['edgeColor']=void 0}else Fa['edgeColor']=void 0;if(a.fontEdgeOpacity){if(a.fontEdgeOpacity.enable){var E=a.fontEdgeOpacity.value;Fa['fontEdgeOpacity']=Y(E)}else Fa['fontEdgeOpacity']="ff";Fa['edgeColor']=Fa.edgeColor?Fa['edgeColor']['substring'](0,7)+Fa.fontEdgeOpacity:Fa.edgeColor}if(a.windowColor)if(a.windowColor.enable){var o=a.windowColor['value']['toLowerCase']();_a[o]?Fa['backgroundColor']=_a[o]+Fa.windowOpacity:-1!==o['indexOf']("#")?(9===o.length&&(Fa['backgroundColor']=o),7===o.length&&(Fa['backgroundColor']=o+Fa.windowOpacity)):Fa['backgroundColor']=void 0}else Fa['backgroundColor']=void 0;if(a.windowOpacity){if(a.windowOpacity.enable){var i=a.windowOpacity.value;Fa['windowOpacity']=Y(i)}else Fa['windowOpacity']="ff";Fa['backgroundColor']=Fa.backgroundColor?Fa['backgroundColor']['substring'](0,7)+Fa.windowOpacity:Fa.backgroundColor}if(a.fontEdgeType)if(a.fontEdgeType.enable){var t=a.fontEdgeType['value']['toLowerCase']();-1!==t['indexOf']("dropshadow")?Fa['edgeType']="DROP_SHADOW":-1!==t['indexOf']("depressed")?Fa['edgeType']="DEPRESSED":-1!==t['indexOf']("raised")?Fa['edgeType']="RAISED":-1!==t['indexOf']("uniform")?Fa['edgeType']="OUTLINE":Fa['edgeType']="NONE"}else Fa['edgeType']="NONE";if(a.fontColor)if(a.fontColor.enable){var r=a.fontColor['value']['toLowerCase']();_a[r]?Fa['foregroundColor']=_a[r]+Fa.fontOpacity:-1!==r['indexOf']("#")?(9===r.length&&(Fa['foregroundColor']=r),7===r.length&&(Fa['foregroundColor']=r+Fa.fontOpacity)):Fa['foregroundColor']=void 0}else Fa['foregroundColor']=void 0;if(a.fontOpacity){if(a.fontOpacity.enable){var b=a.fontOpacity.value;Fa['fontOpacity']=Y(b)}else Fa['fontOpacity']="ff";Fa['foregroundColor']=Fa.foregroundColor?Fa['foregroundColor']['substring'](0,7)+Fa.fontOpacity:Fa.foregroundColor}if(a.fontFamily)if(a.fontFamily.enable){var d=a.fontFamily['value']['toLowerCase']();-1===d['indexOf']("default")?Fa['fontGenericFamily']=a.fontFamily.value:Fa['fontGenericFamily']=void 0}else Fa['fontGenericFamily']=void 0;a.fontSize&&(a.fontSize.enable?Fa['fontScale']="default"===a.fontSize.value?1:parseFloat(a.fontSize.value)/100:Fa['fontScale']=void 0),a.fontBold&&(a.fontBold.enable&&a.fontBold.value?"ITALIC"===Fa.fontStyle||"BOLD_ITALIC"===Fa.fontStyle?Fa['fontStyle']="BOLD_ITALIC":Fa['fontStyle']="BOLD":"ITALIC"===Fa.fontStyle||"BOLD_ITALIC"===Fa.fontStyle?Fa['fontStyle']="ITALIC":Fa['fontStyle']="NORMAL"),a.fontItalic&&(a.fontItalic.enable&&a.fontItalic.value?"BOLD"===Fa.fontStyle||"BOLD_ITALIC"===Fa.fontStyle?Fa['fontStyle']="BOLD_ITALIC":Fa['fontStyle']="ITALIC":"BOLD"===Fa.fontStyle||"BOLD_ITALIC"===Fa.fontStyle?Fa['fontStyle']="BOLD":Fa['fontStyle']="NORMAL"),Za['setTextTrackStyle'](Fa),Ta['log'](Fa)}function $(a){if(Ia['subtitle']=a,Ba){var e=function n(){Ra['off'](ua.VO_INTERNAL_MEDIA_OPENED,n),_(a)};Ra['on'](ua.VO_INTERNAL_MEDIA_OPENED,e)}else _(a)}function _(a){if(null===Xa['getBreakClipDurationSec']())aa(a);else{var e=function n(){Xa['removeEventListener'](Ha.framework.events.EventType.BREAK_ENDED,n);var e=function l(){Xa['removeEventListener'](Ha.framework.events.EventType.TIME_UPDATE,l),aa(a)};Xa['addEventListener'](Ha.framework.events.EventType.TIME_UPDATE,e)};Xa['addEventListener'](Ha.framework.events.EventType.BREAK_ENDED,e)}}function aa(a){var e=Za['createTrack']();e['trackContentId']=a.uri,"vtt"===a.type&&(e['trackContentType']=Ha.framework.messages.CaptionMimeType.VTT),"ttml"===a.type&&(e['trackContentType']=Ha.framework.messages.CaptionMimeType.TTML),e['language']=a.lang,Za['addTracks']([e]),a["default"]&&K(e.trackId),Aa['onProgramChanged']()}function ea(){var a=Za['createTrack']();a['trackContentType']="text/cea608",a['language']="cea608_1",a['name']="cea608_1",a['type']="TEXT",Za['addTracks']([a])}function na(a){if(!a){Za['setTextTrackStyle']({});for(var e in Fa)Fa[e]=void 0;Fa['fontBackgroundOpacity']="ff",Fa['fontEdgeOpacity']="ff",Fa['windowOpacity']="ff",Fa['fontOpacity']="ff"}var n=Za['getTracks']();if(Ia['type']===b["default"].HLS){var l=!1;n['forEach'](function(a){return"text/cea608"===a.trackContentType?void(l=!0):void 0}),l||(ea(),n=Za['getTracks']())}n.length>0&&Za['setActiveByIds']([n[0].trackId])}function la(){return{}}function Ea(){return 0}function oa(){}function ia(){Xa['addEventListener'](Ha.framework.events.EventType.CAN_PLAY,ta),Xa['addEventListener'](Ha.framework.events.EventType.PLAY,ra),Xa['addEventListener'](Ha.framework.events.EventType.SEEKING,ca),Xa['addEventListener'](Ha.framework.events.EventType.SEEKED,pa),Xa['addEventListener'](Ha.framework.events.EventType.TIME_UPDATE,wa),Xa['addEventListener'](Ha.framework.events.EventType.PROGRESS,xa),Xa['addEventListener'](Ha.framework.events.EventType.MEDIA_FINISHED,va),Xa['addEventListener'](Ha.framework.events.EventType.ERROR,ha),Xa['addEventListener'](Ha.framework.events.EventType.BUFFERING,ya),Xa['addEventListener'](Ha.framework.events.EventType.PLAYING,ba),Xa['addEventListener'](Ha.framework.events.EventType.BITRATE_CHANGED,ma),Xa['addEventListener'](Ha.framework.events.EventType.BREAK_ENDED,Da),Xa['addEventListener'](Ha.framework.events.EventType.PLAYER_LOAD_COMPLETE,sa)}function ta(){Ba&&(Ba=!1,Ia['rePlay']===!0?Ia.subtitle&&$(Ia.subtitle):(Aa['onOpenComplete'](),wa({'currentMediaTime':0}),xa({'validBufferLength':0}))),Aa['onCanPlay']()}function ra(){Ba||(qa?Xa['pause']():Aa['onPlayStarted']())}function ba(){Ba||qa||Aa['onPlayPlaying']()}function da(){!Ba&&qa&&Aa['onPlayPaused']()}function ca(){!Ba&&za&&Aa['onSeekStart']()}function pa(){!Ba&&za&&(Aa['onSeekComplete'](),za=!1)}function wa(a){if(!Ba){var e=x(),n=y(),l=v(),E=!1;Xa['getBreakClipDurationSec']()&&(E=!0),Aa['onPlayTimeUpdated']({'position':a.currentMediaTime,'duration':e,'live':n,'range':l,'isAds':E})}}function xa(){if(!Ba){var a=N();"BUFFERING"===Xa['getPlayerState']()&&Ka>a||Aa['onPlayProgress']({'validBufferLength':a})}}function va(){Ba||Aa['onPlayCompleted']()}function ya(a){Ba||qa||(a.isBuffering?Aa['onPlayWaiting']():Aa['onPlayPlaying']())}function ha(a){var e=void 0,n=ae[a.detailedErrorCode];switch(a.detailedErrorCode){case Ha.framework.events.DetailedErrorCode.MANIFEST_UNKNOWN:case Ha.framework.events.DetailedErrorCode.HLS_MANIFEST_MASTER:case Ha.framework.events.DetailedErrorCode.HLS_MANIFEST_PLAYLIST:case Ha.framework.events.DetailedErrorCode.DASH_MANIFEST_UNKNOWN:case Ha.framework.events.DetailedErrorCode.DASH_MANIFEST_NO_PERIODS:case Ha.framework.events.DetailedErrorCode.DASH_MANIFEST_NO_MIMETYPE:case Ha.framework.events.DetailedErrorCode.DASH_INVALID_SEGMENT_INFO:case Ha.framework.events.DetailedErrorCode.SMOOTH_MANIFEST:e=Sa.VO_OSMP_SRC_ERR_MANIFEST_PARSE_FAIL;break;case Ha.framework.events.DetailedErrorCode.HLS_NETWORK_KEY_LOAD:case Ha.framework.events.DetailedErrorCode.HLS_NETWORK_NO_KEY_RESPONSE:e=Sa.VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL;break;case Ha.framework.events.DetailedErrorCode.MEDIAKEYS_UNKNOWN:case Ha.framework.events.DetailedErrorCode.MEDIAKEYS_NETWORK:case Ha.framework.events.DetailedErrorCode.MEDIAKEYS_UNSUPPORTED:case Ha.framework.events.DetailedErrorCode.MEDIAKEYS_WEBCRYPTO:e=Sa.VO_OSMP_DRM_ERR_KEY_FAIL;break;case Ha.framework.events.DetailedErrorCode.MEDIA_NETWORK:case Ha.framework.events.DetailedErrorCode.NETWORK_UNKNOWN:case Ha.framework.events.DetailedErrorCode.HLS_NETWORK_MASTER_PLAYLIST:case Ha.framework.events.DetailedErrorCode.HLS_NETWORK_PLAYLIST:e=Sa.VO_OSMP_SRC_ERR_MANIFEST_DOWNLOAD_FAIL;break;case Ha.framework.events.DetailedErrorCode.SEGMENT_NETWORK:case Ha.framework.events.DetailedErrorCode.HLS_NETWORK_INVALID_SEGMENT:case Ha.framework.events.DetailedErrorCode.DASH_NETWORK:case Ha.framework.events.DetailedErrorCode.DASH_NO_INIT:case Ha.framework.events.DetailedErrorCode.SMOOTH_NETWORK:e=Sa.VO_OSMP_SRC_ERR_CONTENT_DOWNLOAD_FAIL;break;case Ha.framework.events.DetailedErrorCode.MEDIA_UNKNOWN:case Ha.framework.events.DetailedErrorCode.MEDIA_SRC_NOT_SUPPORTED:e=Sa.VO_OSMP_SRC_ERR_FORMAT_UNSUPPORT;break;case Ha.framework.events.DetailedErrorCode.MEDIA_DECODE:e=Sa.VO_OSMP_SRC_ERR_CODEC_UNSUPPORT;break;case Ha.framework.events.DetailedErrorCode.SOURCE_BUFFER_FAILURE:e=Sa.VO_OSMP_SRC_ERR_SOURCE_BUFFER_ERROR;break;case Ha.framework.events.DetailedErrorCode.HLS_SEGMENT_PARSING:case Ha.framework.events.DetailedErrorCode.SEGMENT_UNKNOWN:case Ha.framework.events.DetailedErrorCode.TEXT_UNKNOWN:e=Sa.VO_OSMP_SRC_ERR_CONTENT_PARSE_FAIL;break;default:e=Sa.VO_OSMP_SRC_ERR_UNKNOWN,n="VO_OSMP_SRC_ERR_UNKNOWN"}Aa['onError'](e,n),Ra['trigger'](ua.VO_INTERNAL_ERROR,{'errorId':e,'message':n})}function sa(a){"LIVE"===a.media.streamType&&a.media.breaks&&a.media.breaks.length>0&&a['media']['breaks'][0]['isWatched']===!0?(Ia['streamType']="LIVE",Xa['stop'](),ja=!1,e(Ia)):Ra['trigger'](ua.VO_INTERNAL_REPORT_MANIFEST_INFO,{'mediaDuration':x(),'live':y()})}function Da(a){var e=$a['getBreakById'](a.breakId);e&&"number"==typeof e.position&&Aa['onAdComplete']({'timeOffset':e.position})}function ma(a){Ta['log']("onBitrateChanged",a)}function Ca(a){if(0===Na.length&&(""===Ja||""===La))return!1;$a['setBreakClipLoadInterceptor'](fa),$a['setBreakSeekInterceptor'](ga);var e=void 0,n=function(a){if("pre"===a||"start"===a)return 0;if("post"===a||"end"===a)return-1;if("number"==typeof a)return a;for(var e=0,n=0,l=a['split'](":"),E=l.length-1;E>=0;E--)e+=parseFloat(l[E])*Math['pow'](60,n),n++;return e},l=function(a,l){l['breakClips']=[],l['breaks']=[],a['forEach'](function(a,E){if(e=a['tag']['endsWith']("&correlator=")?a.tag+Math['floor'](Math['random']()*Math['pow'](10,10)):a.tag,l['breakClips']['push']({'id':"bc"+E,'title':a.name,'vastAdsRequest':{'adTagUrl':e}}),l['breaks']['push']({'id':"b"+E,'breakClipIds':["bc"+E],'position':n(a.offset)}),1===Oa&&void 0!==Ua.advertising.watchedAdsTimeoffset){var o=parseFloat(Ua.advertising.watchedAdsTimeoffset),i=l['breaks'][l.breaks.length-1].position;i>=0&&o>=i||-1===o?l['breaks'][l.breaks.length-1]['isWatched']=!0:l['breaks'][l.breaks.length-1]['isWatched']=!1}else l['breaks'][l.breaks.length-1]['isWatched']=!1})};return Na.length>0?(l(Na,a),!0):(e=Ja['endsWith']("&correlator=")?Ja+Math['floor'](Math['random']()*Math['pow'](10,10)):Ja,"vmap"===La?(a['vmapAdsRequest']={'adTagUrl':e},!0):"vast"===La?(a['breakClips']=[{'id':"bc1",'vastAdsRequest':{'adTagUrl':e}}],a['breaks']=[{'id':"b1",'breakClipIds':["bc1"],'position':0}],!0):!1)}function fa(a,e){var n=e["break"];return 1===Oa&&void 0!==Ua.advertising.watchedAdsTimeoffset&&(-1===Ua.advertising.watchedAdsTimeoffset||n.position>=0&&n.position<=Ua.advertising.watchedAdsTimeoffset)?null:a}function ga(a){for(var e=void 0,n=0;n<a.breaks.length;n++)a['breaks'][n].isWatched||(e=a['breaks'][n]);return e?(a['breaks']=[e],a):void 0}var ka,Ma=void 0,Pa=this.context,Ta=Pa.debug,ua=Pa.voInternalEvents,Aa=Pa.eventDelegate,Ra=Pa.eventBus,Sa=Pa.voErrorCode,Ua=void 0,Ia=void 0,Ja=void 0,La=void 0,Na=void 0,Oa=0,Va=0,ja=void 0,qa=void 0,za=void 0,Ba=void 0,Fa={},Ga=null,Ha=window.cast,Ka=3,Qa=0,Wa=Ha.framework['CastReceiverContext']['getInstance'](),Xa=Wa['getPlayerManager'](),Ya=Xa['getAudioTracksManager'](),Za=Xa['getTextTracksManager'](),$a=Xa['getBreakManager']();ia();var _a={'white':"#ffffff",'black':"#000000",'red':"#ff0000",'green':"#00ff00",'blue':"#0000ff",'yellow':"#ffff00",'magenta':"#ff00ff",'cyan':"#00ffff"},ae=(ka={},E(ka,Ha.framework.events.DetailedErrorCode.MANIFEST_UNKNOWN,"VO_OSMP_SRC_ERR_MANIFEST_UNKNOWN"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_MANIFEST_MASTER,"VO_OSMP_SRC_ERR_HLS_MANIFEST_MASTER"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_MANIFEST_PLAYLIST,"VO_OSMP_SRC_ERR_HLS_MANIFEST_PLAYLIST"),E(ka,Ha.framework.events.DetailedErrorCode.DASH_MANIFEST_UNKNOWN,"VO_OSMP_SRC_ERR_DASH_MANIFEST_UNKNOWN"),E(ka,Ha.framework.events.DetailedErrorCode.DASH_MANIFEST_NO_PERIODS,"VO_OSMP_SRC_ERR_DASH_MANIFEST_NO_PERIODS"),E(ka,Ha.framework.events.DetailedErrorCode.DASH_MANIFEST_NO_MIMETYPE,"VO_OSMP_SRC_ERR_DASH_MANIFEST_NO_MIMETYPE"),E(ka,Ha.framework.events.DetailedErrorCode.DASH_INVALID_SEGMENT_INFO,"VO_OSMP_SRC_ERR_DASH_INVALID_SEGMENT_INFO"),E(ka,Ha.framework.events.DetailedErrorCode.SMOOTH_MANIFEST,"VO_OSMP_SRC_ERR_SMOOTH_MANIFEST"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_NETWORK_KEY_LOAD,"VO_OSMP_SRC_ERR_HLS_NETWORK_KEY_LOAD"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_NETWORK_NO_KEY_RESPONSE,"VO_OSMP_SRC_ERR_HLS_NETWORK_NO_KEY_RESPONSE"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIAKEYS_UNKNOWN,"VO_OSMP_SRC_ERR_MEDIAKEYS_UNKNOWN"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIAKEYS_NETWORK,"VO_OSMP_SRC_ERR_MEDIAKEYS_NETWORK"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIAKEYS_UNSUPPORTED,"VO_OSMP_SRC_ERR_MEDIAKEYS_UNSUPPORTED"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIAKEYS_WEBCRYPTO,"VO_OSMP_SRC_ERR_MEDIAKEYS_WEBCRYPTO"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIA_NETWORK,"VO_OSMP_SRC_ERR_MEDIA_NETWORK"),E(ka,Ha.framework.events.DetailedErrorCode.NETWORK_UNKNOWN,"VO_OSMP_SRC_ERR_NETWORK_UNKNOWN"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_NETWORK_MASTER_PLAYLIST,"VO_OSMP_SRC_ERR_HLS_NETWORK_MASTER_PLAYLIST"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_NETWORK_PLAYLIST,"VO_OSMP_SRC_ERR_HLS_NETWORK_PLAYLIST"),E(ka,Ha.framework.events.DetailedErrorCode.SEGMENT_NETWORK,"VO_OSMP_SRC_ERR_SEGMENT_NETWORK"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_NETWORK_INVALID_SEGMENT,"VO_OSMP_SRC_ERR_HLS_NETWORK_INVALID_SEGMENT"),E(ka,Ha.framework.events.DetailedErrorCode.DASH_NETWORK,"VO_OSMP_SRC_ERR_DASH_NETWORK"),E(ka,Ha.framework.events.DetailedErrorCode.DASH_NO_INIT,"VO_OSMP_SRC_ERR_DASH_NO_INIT"),E(ka,Ha.framework.events.DetailedErrorCode.SMOOTH_NETWORK,"VO_OSMP_SRC_ERR_SMOOTH_NETWORK"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIA_UNKNOWN,"VO_OSMP_SRC_ERR_MEDIA_UNKNOWN"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIA_SRC_NOT_SUPPORTED,"VO_OSMP_SRC_ERR_MEDIA_SRC_NOT_SUPPORTED"),E(ka,Ha.framework.events.DetailedErrorCode.MEDIA_DECODE,"VO_OSMP_SRC_ERR_MEDIA_DECODE"),E(ka,Ha.framework.events.DetailedErrorCode.SOURCE_BUFFER_FAILURE,"VO_OSMP_SRC_ERR_SOURCE_BUFFER_FAILURE"),E(ka,Ha.framework.events.DetailedErrorCode.HLS_SEGMENT_PARSING,"VO_OSMP_SRC_ERR_HLS_SEGMENT_PARSING"),E(ka,Ha.framework.events.DetailedErrorCode.SEGMENT_UNKNOWN,"VO_OSMP_SRC_ERR_SEGMENT_UNKNOWN"),E(ka,Ha.framework.events.DetailedErrorCode.TEXT_UNKNOWN,"VO_OSMP_SRC_ERR_TEXT_UNKNOWN"),ka),ee={'init':a,'open':e,'setView':l,'play':o,'pause':i,'isPaused':t,'stop':r,'close':d,'setPosition':p,'getPosition':w,'getDuration':x,'getSeekableRange':v,'isLive':y,'mute':h,'unmute':s,'isMuted':D,'isEnded':m,'setVolume':C,'getVolume':f,'selectVideo':j,'selectAudio':g,'selectSubtitle':k,'commitSelection':M,'getVideoCount':P,'getAudioCount':T,'getSubtitleCount':u,'isPureAudio':A,'isVideoAvailable':R,'isAudioAvailable':S,'isSubtitleAvailable':U,'getVideoProperty':I,'getAudioProperty':J,'getSubtitleProperty':L,'getValidBufferDuration':N,'getCurrentSelection':V,'setAudioPlaybackSpeed':q,'getQualityLevels':z,'getAudioTracks':B,'getSubtitleTracks':F,'selectQualityLevel':G,'selectAudioTrack':H,'selectSubtitleTrack':K,'setExternalSubtitle':$,'getCurrentQualityLevel':Q,'getCurrentAudioTrack':W,'getCurrentSubtitleTrack':X,'setSubtitleStyles':Z,'getDefaultSubtitleStyles':la,'getCurrentLiveLatency':Ea,'getCurrentTimeForLocal':oa};return ee}Object['defineProperty'](n,"__esModule",{'value':!0});var i=a(3),t=l(i),r=a(1),b=l(r);o['className']="voCastMediaPlayer",n["default"]=t["default"]['getClassFactory'](o)},{'1':1,'3':3}],'314':[function(a,e,n){(function(e){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}Object['defineProperty'](n,"__esModule",{'value':!0});var E=a(312),o=l(E),i=a(316),t=l(i),r=a(8),b=l(r),d=a(303),c=l(d),p=a(309),w=l(p),x=a(6),v=l(x),y=a(2),h=l(y);o["default"]();var s=window||e,D=s.voPlayer;D||(D=s['voPlayer']={}),D['Player']=t["default"],D['events']=t["default"].events,D['errorCode']=b["default"],D['CommonUtils']=c["default"],D['TimeToString']=w["default"],D['Debug']=v["default"],D['Enumerations']=h["default"],n["default"]=D})['call'](this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{'2':2,'303':303,'309':309,'312':312,'316':316,'6':6,'8':8}],'315':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l="3.34.0-5465-master-4bf2a5c6";n["default"]=l},{}],'316':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){function e(a){if(qe===!0)return void Ie['log']("player has been inited.");je=f["default"]['cloneObject'](a);do{if(!je){Ie['log']("call init, but config is empty");break}ke(),Oe['getGodkendInfo'](je.key),Ia(je.logs.logToConsole),da(),Fa(),ze['forEach'](function(a){"function"==typeof a&&a()}),qe=!0}while(!1)}function n(){qe=!1,ze=[],Se['uiElements']=nn=null,Qe&&(Qe=null,ze['push'](Va)),Xe&&(Xe=null,ze['push'](Oa)),en&&(en=null,ze['push'](Sa)),Se.instance.VideoEnhance&&(Se['instance']['VideoEnhance']=null,
ze['push'](ce)),Ve&&(Ve=null,ze['push'](ua)),Se.instance.VR&&(Se['instance']['VR']=null,ze['push'](Ae))}function l(a){if(Ga(a)&&!bn)return rn['push'](a),!0;var e=f["default"]['cloneObject'](a);

if(C(),!fe(e))return!1;ge();var l=Be['links'][Ye];return se(l)}function E(){var a=ba("isPureAudio")['call'](Je);Me()||a||an['showPoster'](""),Le['off'](b["default"].VO_OSMP_CB_PLAY_STARTED,E,this)}function i(a,e,n){a&&b["default"][a]&&Le&&Le['on'](a,e,n)}function r(a,e,n){a&&b["default"][a]&&Le&&Le['off'](a,e,n)}function d(){var a=void 0;do{if(!Oe['isPlayerGodkend']()){a={'name':"LicenseError",'message':"License check is failed !"};break}if(!Fe){a={'name':"OtherError",'message':"Open is not finished !"};break}if(Me()){a=ba("play")['call'](Je);break}if(en&&en['isLoadingAd']()){a={'name':"OtherError",'message':"Player is loading ads !"};break}en&&en['isPlayingAd']()&&en['isLinearAd']()?a=en['play']():We?We['isPlayingAd']()?a=ba("play")['call'](Je):(h()&&We['setPosition'](.2),a=ba("play")['call'](Je)):a=ba("play")['call'](Je)}while(!1);return a&&"undefined"!=typeof Promise&&a instanceof Promise?(a["catch"](function(a){"NotAllowedError"===a.name&&Ne['onPlayPaused']()}),a):"undefined"!=typeof Promise?new Promise(function(e,n){a&&"object"===("undefined"==typeof a?"undefined":o(a))&&a.name&&a.message?n(a):e()}):a}function p(){Oe['isPlayerGodkend']()&&(Me()?ba("pause")['call'](Je):en&&en['isPlayingAd']()&&en['isLinearAd']()?en['pause']():ba("pause")['call'](Je))}function v(){return Oe['isPlayerGodkend']()?en&&en['isPlayingAd']()&&en['isLinearAd']()?en['isPaused']():ba("isPaused")['call'](Je):void 0}function h(){return Oe['isPlayerGodkend']()?Me()?ba("isEnded")['call'](Je):We?We['isEnded']():ba("isEnded")['call'](Je):void 0}function D(a){Oe['isPlayerGodkend']()&&(an['hideEvaluationInfo'](),1===arguments.length?Le['trigger'](c["default"].VO_INTERNAL_VS_STOPPED_REQUEST,{'endCause':a}):0===arguments.length&&ba("stop")['call'](Je))}function C(){(Ge||Je||He)&&(an['hideEvaluationInfo'](),an['showPoster'](""),en&&en['close'](),We&&(We['close'](),We=null),ba("close")['call'](Je),Ge=null,Je=null,He=null,Ke=null,Be={},Fe=!1,ln['reset']())}function g(){C(),Ne['onCloseCompleted'](),Le['trigger'](c["default"].VO_INTERNAL_STREAM_ENDED,{'endCause':"TERMINATED_BY_USER"})}function P(a){Oe['isPlayerGodkend']()&&(Me()?me(a):en&&en['isPlayingAd']()&&en['isLinearAd']()||(We?We['setPosition'](a):me(a)))}function u(){if(Oe['isPlayerGodkend']()){var a=void 0;return a=Me()?ba("getPosition")['call'](Je):en&&en['isPlayingAd']()&&en['isLinearAd']()?en['getPosition']():We?We['getPosition']():De()}}function R(){if(Oe['isPlayerGodkend']()){var a=void 0;return a=Me()?Ce():en&&en['isPlayingAd']()&&en['isLinearAd']()?en['getDuration']():We?We['getDuration']():Ce()}}function U(){return Oe['isPlayerGodkend']()?ba("getSeekableRange")['call'](Je):void 0}function O(){return Oe['isPlayerGodkend']()?ba("isLive")['call'](Je):void 0}function V(){Oe['isPlayerGodkend']()&&(en&&en['isPlayingAd']()&&en['isLinearAd']()?en['mute']():ba("mute")['call'](Je))}function j(){Oe['isPlayerGodkend']()&&(en&&en['isPlayingAd']()&&en['isLinearAd']()?en['unmute']():ba("unmute")['call'](Je))}function q(){return Oe['isPlayerGodkend']()?en&&en['isPlayingAd']()&&en['isLinearAd']()?en['isMuted']():ba("isMuted")['call'](Je):void 0}function z(a){Oe['isPlayerGodkend']()&&(en&&en['isPlayingAd']()&&en['isLinearAd']()?en['setVolume'](a):ba("setVolume")['call'](Je,a))}function B(){return Oe['isPlayerGodkend']()?en&&en['isPlayingAd']()&&en['isLinearAd']()?en['getVolume']():ba("getVolume")['call'](Je):void 0}function F(a,e){en&&en['resize'](a,e)}function G(){return Oe['isPlayerGodkend']()?ba("getQualityLevels")['call'](Je):void 0}function H(){return Oe['isPlayerGodkend']()?ba("getAudioTracks")['call'](Je):void 0}function K(){return Oe['isPlayerGodkend']()?ba("getSubtitleTracks")['call'](Je):void 0}function Q(a){Oe['isPlayerGodkend']()&&ba("selectQualityLevel")['call'](Je,a)}function W(a){Oe['isPlayerGodkend']()&&ba("selectAudioTrack")['call'](Je,a)}function X(a){Oe['isPlayerGodkend']()&&ba("selectSubtitleTrack")['call'](Je,a)}function Y(){return Oe['isPlayerGodkend']()?ba("getCurrentQualityLevel")['call'](Je):void 0}function Z(){return Oe['isPlayerGodkend']()?ba("getCurrentAudioTrack")['call'](Je):void 0}function $(){return Oe['isPlayerGodkend']()?ba("getCurrentSubtitleTrack")['call'](Je):void 0}function _(a){return Oe['isPlayerGodkend']()?ba("setSubtitleStyles")['call'](Je,a):void 0}function aa(){return Oe['isPlayerGodkend']()?ba("getDefaultSubtitleStyles")['call'](Je):void 0}function ea(a){return Oe['isPlayerGodkend']()?en&&en['isPlayingAd']()&&en['isLinearAd']()?0:ba("getValidBufferDuration")['call'](Je,a):void 0}function na(a){return Oe['isPlayerGodkend']()?ba("setAudioPlaybackSpeed")['call'](Je,a):void 0}function la(a,e){var n=null;if(Oe['isPlayerGodkend']())return Qe&&(n=Qe['getThumbnailInfo'](a))?void e(n):void(Je&&ba("getThumbnail")['call'](Je,a,e))}function Ea(){if(Oe['isPlayerGodkend']()){var a=Na();return a&&a.webkitSupportsPresentationMode&&a['webkitSupportsPresentationMode']("picture-in-picture")&&"function"==typeof a.webkitSetPresentationMode||document.pictureInPictureEnabled&&!a.disablePictureInPicture?!0:!1}}function oa(){if(Oe['isPlayerGodkend']()){if(Ea()){var a=Na();if("picture-in-picture"===a.webkitPresentationMode||document.pictureInPictureElement)return!0}return!1}}function ia(a){if(Oe['isPlayerGodkend']()){var e=Na();e&&Ea()&&(a?"inline"===e.webkitPresentationMode?e['webkitSetPresentationMode']("picture-in-picture"):document.pictureInPictureEnabled&&e.videoHeight&&e['requestPictureInPicture']():"picture-in-picture"===e.webkitPresentationMode?e['webkitSetPresentationMode']("inline"):document.pictureInPictureElement&&document.pictureInPictureEnabled&&document['exitPictureInPicture']())}}function ta(){return Oe['isPlayerGodkend']()?window.WebKitPlaybackTargetAvailabilityEvent?!0:!1:void 0}function ra(){if(Oe['isPlayerGodkend']()&&ta()){var a=Na();a['webkitShowPlaybackTargetPicker']()}}function ba(a){if(Je){if(a in Je)return Je[a];if(a=Oe['getGodkendName'](a),a in Je)return Je[a]}return function(){}}function da(){nn=an['init'](),Se['uiElements']=nn}function ca(){return T["default"]}function pa(a){Oe['isPlayerGodkend']()&&a&&(Ze=a,Me()?(_e=!0,Je&&ba("setExternalSubtitle")['call'](Je,a)):wa())}function wa(){Ze&&(ln['resetStatus'](),ln['load'](Ze,va))}function xa(a){a&&(X(a.id),Ne['onProgramChanged']())}function va(a){if(a){if(Se['commonUtil']['isChromecastCAF']())return a&&a.data&&(a['data']['indexOf']("WEBVTT")>=0?Ze['type']="vtt":a['data']['indexOf']("xml")>=0&&(Ze['type']="ttml")),void(Je&&ba("setExternalSubtitle")['call'](Je,Ze));$e=a,ya()}}function ya(){if(Oe['isPlayerGodkend']()&&!Me()&&Je)if(Se['commonUtil']['isChromecastCAF']());else{if(!$e||_e)return _e=!1,void ha();ln['setExternalSubtitle']($e)}}function ha(){if(Ta(),!Me()&&Be&&Be.tracks)for(var a=0;a<Be.tracks.length;a++)if("externalSubtitle"===Be['tracks'][a].type&&Be['tracks'][a].uri){var e={'uri':Be['tracks'][a].uri,'lang':Be['tracks'][a].lang,"default":Be['tracks'][a]["default"]};f["default"]['isSamsung2016']()?Ge['linkInfo']['exSubtitle']=e:pa(e)}}function sa(){if(Fe&&Je!==Xe['getPlayer']()){ln['reset'](),ma(t["default"].ONCASTCONNECTED);var a=ba("isPureAudio")['call'](Je);!a&&Be&&Be.poster&&an['showPoster'](Be.poster)}}function Da(){if(Fe){ma(t["default"].ONCASTDISCONNECTED);var a=ba("isPureAudio")['call'](Je);a||an['showPoster']("")}}function ma(a){if(Ge&&Ge.instance){var e=Me();if(En)return Je=Xe['getPlayer'](),He={'pos':ba("getPosition")['call'](Je),'paused':ba("isPaused")['call'](Je),'ended':ba("isEnded")['call'](Je)},Ie['log']("did resume player from remote"),Ne['onOpenComplete'](),void ba("resumeFromRemotePlayer")['call'](Je);if(ka(e,a),e){en&&en['close'](a);var n=void 0;a===t["default"].ONCASTCONNECTED&&(n=O()),ba("close")['call'](Je),Je=Xe['getPlayer']();var l=f["default"]['cloneObject'](je);if(l['width']="100%",l['height']="100%",l['cast']=null,ba("init")['call'](Je,l),!He.ended){var E=f["default"]['cloneObject'](Be);"awsmediatailor"!==E['links'][0].type&&(E['links']=[],E['links']['push']({'uri':Ge.linkInfo.uri,'type':Ge.linkInfo.type,'drm':Ge.linkInfo.drm})),n&&(E['links'][0]['streamType']="LIVE"),E['links'][0]['currentTime']=He?He.pos||0:0,ba("open")['call'](Je,E)}}else{Je=Ge.instance;var o=f["default"]['cloneObject'](je);ba("init")['call'](Je,o),ba("setView")['call'](Je,nn),ba("open")['call'](Je,Ge.linkInfo),f["default"]['isChromecast']()||Ua(a),an['showEvaluationInfo'](),Ge&&Ge.linkInfo&&Ca({'drm':Ge.linkInfo.drm,'uri':Ge.linkInfo.uri,'mediaType':Ge.mediaType,'customData':Ge.linkInfo.advanced?Ge.linkInfo.advanced.anlyticsCustomData:null,'agamaCustomData':Ge.linkInfo.advanced?Ge.linkInfo.advanced.agamaCustomData:null}),ya()}}else Je=null}function Ca(a){if(Ve){var e=a.drm,n={'drmType':"clear",'laUrl':"",'customData':""},l=function(a){if(!a)return"";var e=[];for(var n in a)e['push'](n+": "+a[n]);return e['join']("; ")||""};e&&(e.playready?(n['drmType']=t["default"].PLAYREADY,n['laUrl']=e.playready.laUrl,n['customData']=l(e.playready.headers)):e.widevine?(n['drmType']=t["default"].WIDEVINE,n['laUrl']=e.widevine.laUrl,n['customData']=l(e.widevine.headers)):e.fairplay&&(n['drmType']=t["default"].FAIRPLAY,n['laUrl']=e.fairplay.laUrl)),Ve['setVideoSessionMetadata']({'uri':a.uri,'handlerType':a.mediaType||"",'drmInfo':n,'customData':a.customData,'agamaCustomData':a.agamaCustomData,'element':Na()})}}function fa(){if(Ve){var a=Ve['getAnalyticsInfo'](),e=U();return a['streamType']=O()?"Live ("+(e.end-e.start?e.end-e.start:0)+" sec)":"VOD ("+(R()?R():0)+" sec)",a['currentTime']=u(),a}return{}}function ga(){Qe&&Qe['requestThumbnail'](Be)}function ka(a,e){if(f["default"]['isChromecast']())return void Ie['log']("Don't need to save status in cast");if(a)He=Je?{'pos':ba("getPosition")['call'](Je)-ba("getSeekableRange")['call'](Je).start,'paused':!1,'ended':ba("isEnded")['call'](Je)}:{'pos':0,'paused':!je.playback.autoPlay,'ended':!1};else if(Je)if(e===t["default"].ONCASTDISCONNECTED){if(Fe&&!ba("openedOnRemote")['call'](Je))return;je.advertising.tag||je.advertising.schedule?(He={'pos':ba("getStreamPosition")['call'](Je)-ba("getStreamSeekableRange")['call'](Je).start,'paused':!0,'ended':ba("isEnded")['call'](Je)},Ke={'paused':ba("isPaused")['call'](Je)}):He={'pos':ba("getStreamPosition")['call'](Je)-ba("getStreamSeekableRange")['call'](Je).start,'paused':ba("isPaused")['call'](Je),'ended':ba("isEnded")['call'](Je)}}else je.advertising.tag||je.advertising.schedule?(He={'pos':ba("getPosition")['call'](Je)-ba("getSeekableRange")['call'](Je).start,'paused':!0,'ended':ba("isEnded")['call'](Je)},Ke={'paused':ba("isPaused")['call'](Je)}):He={'pos':ba("getPosition")['call'](Je)-ba("getSeekableRange")['call'](Je).start,'paused':ba("isPaused")['call'](Je),'ended':ba("isEnded")['call'](Je)};else He=en&&(je.advertising.tag||je.advertising.schedule)?null:{'pos':0,'paused':!je.playback.autoPlay,'ended':!1}}function Ma(){f["default"]['isChromecast']()||He&&(He.ended?(ba("pause")['call'](Je),Ne['onPlayPaused']()):(He.pos&&ba("setPosition")['call'](Je,He.pos+ba("getSeekableRange")['call'](Je).start),He.paused?(ba("pause")['call'](Je),Me()||Ne['onPlayPaused']()):d()),He=null)}function Pa(a){nn.video['style']['display']="block";var e=ba("isEnded")['call'](Je);if(!e)if(a.firstResume)if(Ke)Ke.paused||ba("play")['call'](Je),Ke=null;else{var n=en&&en['isLinearAd'](),l=ba("getPosition")['call'](Je);0!==l&&n?ba("play")['call'](Je):je.playback.autoPlay&&ba("play")['call'](Je)}else ba("play")['call'](Je)}function Ta(){Ze=null,$e=null,_e=!1}function ua(){Se.voAnalyticsPlugin&&(Ve||(Ve=new Se['voAnalyticsPlugin'](Se)),Ve['enableAnalyticsAgent'](je.analytics,ca(),Wa)||(Ve=null))}function Aa(){ba("pause")['call'](Je)}function Ra(a){Pa(a)}function Sa(){if(Se.voAdsPlayerPlugin){if(!window.google||!window.google.ima)return void Ie['log']("Need to include google ima sdk from script tag");en?en['setAdvertising'](Se.config.advertising):(en=new Se['voAdsPlayerPlugin'](Se),Se['adsPlayerPlugin']=en),Le['on'](c["default"].AD_CONTENT_PAUSE_REQUESTED,Aa,this),Le['on'](c["default"].AD_CONTENT_RESUME_REQUESTED,Ra,this)}}function Ua(a){en&&(je.advertising.tag||je.advertising.schedule)&&en['open'](a)}function Ia(a){Ie&&Ie['setLogToConsole'](a)}function Ja(a){Ie&&Ie['setLogLevel'](a)}function La(){return Ie?Ie['getLogLevel']():void 0}function Na(){return nn?nn.video:null}function Oa(){Se.voCastSenderPlugin&&je.cast&&je.cast.receiverAppId&&(Xe||(Xe=new Se['voCastSenderPlugin'](Se,je.cast.receiverAppId),Le['on'](b["default"].VO_OSMP_CB_CAST_CONNECTED,sa,this),Le['on'](b["default"].VO_OSMP_CB_CAST_DISCONNECTED,Da,this)))}function Va(){Se.voVttThumbnailPlugin&&(Qe||(Qe=new Se['voVttThumbnailPlugin'](Se)))}function ja(a){return f["default"]['isInteger'](a)?a:M.DefaultSettings.DEFAULT_MAX_LICENSE_REQUEST_RETRIES}function qa(a){return f["default"]['isInteger'](a)?a:M.DefaultSettings.DEFAULT_LICENSE_REQUEST_RETRY_DELAY}function za(a){if(!a)return null;a['advanced']=a.advanced||{};var e={};e['poster']=a.poster||"",e['links']=[],e['tracks']=a.tracks,e['advanced']=a.advanced,e.advanced.lowLatencyMode?window.fetch?Oe['isLowlatencyGodkend']()?e['advanced']['lowLatencyMode']=!0:(Ie['log']("Low-latency feature is expired, the low-latency won't work"),e['advanced']['lowLatencyMode']=!1):(Ie['log']("Don't support window.fetch, the low-latency won't work"),e['advanced']['lowLatencyMode']=!1):e['advanced']['lowLatencyMode']=!1,e['advanced']['presentationDelay']=Oe['isSyncPlaybackGodkend']()?e.advanced.presentationDelay:void 0,e['advanced']['anlyticsCustomData']=a.advanced.anlyticsCustomData;for(var n=("MediaSource"in window),l=0;l<a.links.length;l++){var E=a['links'][l];(n||E.type!==t["default"].DASH)&&(E.drm?Me()?e['links']['push'](E):f["default"]['isChromecast']()||f["default"]['isSamsungBrowser']()||f["default"]['isWebOS']()?(E['drm']['fairplay']=null,(E.drm.widevine||E.drm.playready||E.drm.clearkey||E.drm.verimatrix)&&(E.drm.widevine&&(E.drm['widevine']['maxLicenseRequestRetries']=ja(E.drm.widevine.maxLicenseRequestRetries),E.drm['widevine']['licenseRequestRetryDelay']=qa(E.drm.widevine.licenseRequestRetryDelay)),E.drm.playready&&(E.drm['playready']['maxLicenseRequestRetries']=ja(E.drm.playready.maxLicenseRequestRetries),E.drm['playready']['licenseRequestRetryDelay']=qa(E.drm.playready.licenseRequestRetryDelay)),e['links']['push'](E))):Ba(E.drm)&&e['links']['push'](E):e['links']['push'](E))}return e}function Ba(a){var e=!1;return 0===tn.length?e:(a.widevine&&(tn['indexOf']("widevine")>-1?(a['widevine']['maxLicenseRequestRetries']=ja(a.widevine.maxLicenseRequestRetries),a['widevine']['licenseRequestRetryDelay']=qa(a.widevine.licenseRequestRetryDelay),e=!0):a['widevine']=null),a.playready&&(tn['indexOf']("playready")>-1?(a['playready']['maxLicenseRequestRetries']=ja(a.playready.maxLicenseRequestRetries),a['playready']['licenseRequestRetryDelay']=qa(a.playready.licenseRequestRetryDelay),e=!0):a['playready']=null),a.fairplay&&(tn['indexOf']("fairplay")>-1?(a['fairplay']['maxLicenseRequestRetries']=ja(a.fairplay.maxLicenseRequestRetries),a['fairplay']['licenseRequestRetryDelay']=qa(a.fairplay.licenseRequestRetryDelay),e=!0):a['fairplay']=null),a.clearkey&&(tn['indexOf']("clearkey")>-1?e=!0:a['clearkey']=null),e)}function Fa(){var a=function(a){if(bn=!0,0!==a.length)for(tn=a;rn.length>0;)l(rn['shift']())};f["default"]['checkSupportDrmSystems'](a)}function Ga(a){if(!a||!a.links||!a.links.length)return!1;for(var e=0;e<a.links.length;e++)if(a['links'][e].drm&&"{}"!==JSON['stringify'](a['links'][0].drm))return!0;return!1}function Ha(){return Oe['isPlayerGodkend']()?ba("isSupportTrickPlay")['call'](Je):void 0}function Ka(a){Oe['isPlayerGodkend']()&&ba("setTrickPlayRate")['call'](Je,a)}function Qa(){return Oe['isPlayerGodkend']()?ba("getTrickPlayRate")['call'](Qa):void 0}function Wa(){return ba("getCurrentLiveLatency")['call'](Wa)}function Xa(){return ba("getCurrentTimeForLocal")['call'](Xa)}function Ya(a){Oe['isSyncPlaybackGodkend']()&&!isNaN(a)&&void 0!==a&&ba("setPresentationDelay")['call'](Je,a/1e3)}function Za(){return new Promise(function(a){var e=setInterval(function(){bn&&(clearInterval(e),a(tn))},500)})}function $a(){d()}function _a(){Fe=!0,En?En=!1:Ma()}function ae(a){a.mediaCfg&&(console['log']("onSenderResume, mediaCfg: ",a.mediaCfg),En=!0,l(a.mediaCfg))}function ee(){Le['on'](b["default"].VO_OSMP_AD_ERROR,$a,this),Le['on'](b["default"].VO_OSMP_SRC_CB_OPEN_FINISHED,_a,this),Le['on'](c["default"].VO_INTERNAL_SENDER_RESUME,ae,this),Le['on'](c["default"].VO_INTERNAL_TEXT_SWITCH_DEFAULT_TRACK,xa,this)}function ne(){return an?Ue:void 0}function le(a){an&&an['enterFullscreen'](a)}function Ee(){an&&an['exitFullscreen']()}function oe(){return an?an['isFullscreen']():!1}function ie(a){an&&re()&&an['setVideoAspectRatio'](a)}function te(){return an?an['getVideoAspectRatio']():void 0}function re(){var a=f["default"]['isSafari']()&&Be.links.length&&Be['links'][Ye]['type']===t["default"].DASH;return f["default"]['isIE']()||a?!1:!0}function be(a){if(a)if("voVttThumbnailPlugin"===a.voName)Se['voVttThumbnailPlugin']=a,qe?Va():ze['push'](Va);else if("voCastSenderPlugin"===a.voName)Se['voCastSenderPlugin']=a,qe?Oa():ze['push'](Oa);else if("voAdsPlayerPlugin"===a.voName)Se['voAdsPlayerPlugin']=a,qe?Sa():ze['push'](Sa);else if("voTizenPlayerPlugin"===a.voName)Se['voTizenPlayerPlugin']=a;else if("voSRTParserPlugin"===a.voName)Se['voSRTParserPlugin']=a;else if("voVTTParserPlugin"===a.voName)Se['voVTTParserPlugin']=a;else if("voTTMLParserPlugin"===a.voName)Se['voTTMLParserPlugin']=a;else if("voFCCStylePlugin"===a.voName)Se['voFCCStylePlugin']=a;else if("voSubtitlesPlugin"===a.voName)Se['voSubtitlesPlugin']=a;else if("voVideoEnhancePlugin"===a.voName)Se['voVideoEnhancePlugin']=a,qe?ce():ze['push'](ce);else if("voCaptionParserPlugin"===a.voName)Se['voCaptionParserPlugin']=a;else if("voMediaTailorPlugin"===a.voName)Se['voMediaTailorPlugin']=a;else if("voAnalyticsPlugin"===a.voName)Se['voAnalyticsPlugin']=a,qe?ua():ze['push'](ua);else if("voVRPlugin"===a.voName)Se['voVRPlugin']=a,qe?Ae():ze['push'](Ae);else if("voPolyfillPlugin"===a.voName){var e=new a(Se);e['installAll']()}else"voDownloaderPlugin"===a.voName&&(Se['voDownloaderPlugin']=a,this&&!this.Downloader&&(this['Downloader']=new Se['voDownloaderPlugin'](Se)))}function de(a){be['call'](this,a)}function ce(){Se.instance.VideoEnhance||(Se['instance']['VideoEnhance']=new Se['voVideoEnhancePlugin'](Se),Se.instance['VideoEnhance']['init']())}function pe(){return Xe?Xe['isCastAvailable']():!1}function we(){return Xe?Xe['isCasting']():!1}function xe(){Xe&&Xe['startCast']()}function ve(){Xe&&Xe['stopCast']()}function ye(){var a=!1;do{if("undefined"==typeof voMediaTailorPlugin){Ie['log']("You are trying to open a media tailor link but missing the MediaTailor plugin.");break}if(!Se['gkEngine']['isAwsMediaTailorGodkend']()){Ne['onError'](y["default"].VO_OSMP_LICENSE_FAIL,"Media Tailor license is expired.");break}We=new N['voMediaTailorAdapter'](Se);var e=f["default"]['deepCopy'](Be);We['open'](e),a=!0}while(!1);return a}function he(a){function e(a){Se['gkEngine']['isPlayerGodkend']()?(n['type']=a,se(n)):C()}var n=a['links'][Ye];return L['DetectStreamProtocolType'](n.uri,e)}function se(a){if(a['type']===t["default"].AWSMEDIATAILOR)return ye();if(Se.instance&&Se.instance.VR&&a.vr&&Se.instance['VR']['setProjection'](a.vr.projection),Ge=on['createPlayer'](a),Ge['linkInfo']['advanced']=Be.advanced,Ge&&Ge.instance)ha(),ma(),ga();else{var e=Ge.error;e&&(Ne['onError'](e.id,e.text),Ve&&Ge&&Ge.linkInfo&&(Ca({'drm':Ge.linkInfo.drm,'uri':Ge.linkInfo.uri,'mediaType':Ge.mediaType,'customData':Ge.linkInfo.advanced?Ge.linkInfo.advanced.anlyticsCustomData:null,'agamaCustomData':Ge.linkInfo.advanced?Ge.linkInfo.advanced.agamaCustomData:null}),Le['trigger'](c["default"].VO_INTERNAL_ERROR,{'error':"capability",'errorId':e.id,'message':e.text,'fatal':!0}),Le['trigger'](c["default"].VO_INTERNAL_STREAM_ENDED,{'endCause':"TERMINATED_BY_APP"})))}return!0}function De(){var a=ba("getPosition")['call'](Je);return a}function me(a){ba("setPosition")['call'](Je,a)}function Ce(){return ba("getDuration")['call'](Je)}function fe(a){Ye=0;var e=y["default"].VO_OSMP_SRC_ERR_FORMAT_UNSUPPORT,n=void 0,l=!1;do{if(!a){n="The source can't be empty";break}if(!a.links){n="The links of source can't be empty";break}if(!Array['isArray'](a.links)||0===a.links.length){n="The links of source should be an unempty Array";break}for(var E=!0,o=0;o<a.links.length;o++){var i=a['links'][o];if(i.type!==t["default"].DASH&&i.type!==t["default"].HLS&&i.type!==t["default"].PROGRESSIVE&&i.type!==t["default"].AWSMEDIATAILOR){n="The source "+i.uri+"'s type is "+i.type+" which is not valid.",E=!1;break}}if(!E)break;for(var r=!0,b=("MediaSource"in window),d=0;d<a.links.length;d++){var p=a['links'][d];if(!b&&p['type']===t["default"].DASH){r=!1,e=y["default"].VO_OSMP_SRC_ERR_BROWSER_UNSUPPORT_MSE,n="The MSE is not supported on this browser";break}}if(!r)break;if(!(Be=za(a))||0===Be.links.length){e=y["default"].VO_OSMP_SRC_ERR_FORMAT_UNSUPPORT,n="No supported link is found on this browser";break}l=!0}while(!1);return l||(Ie['log'](n),Ne['onError'](e,n)),l?Ve&&Ca({'drm':Be['links'][Ye].drm,'uri':Be['links'][Ye].uri}):Ve&&(Le['trigger'](c["default"].VO_INTERNAL_ERROR,{'error':"capability",'errorId':e,'message':n,'fatal':!0}),Le['trigger'](c["default"].VO_INTERNAL_STREAM_ENDED,{'endCause':"TERMINATED_BY_APP"})),l}function ge(){var a=Be.poster||"";a&&(an['showPoster'](a),Le['on'](b["default"].VO_OSMP_CB_PLAY_STARTED,E,this))}function ke(){je['playback']=je.playback||{},je.playback.autoPlay!==!1&&(je['playback']['autoPlay']=!0),(je.playback.autoPlay||je.playback.preload!==t["default"].PRELOAD_METADATA)&&(je['playback']['preload']=t["default"].PRELOAD_AUTO),je['advanced']=je.advanced||{},je['advanced']['segmentDownloadRetryCount']=f["default"]['isInteger'](je.advanced.segmentDownloadRetryCount)?je.advanced.segmentDownloadRetryCount:M.DefaultSettings.DEFAULT_SEGMENT_DOWNLOAD_RETRY_COUNT,je['advanced']['segmentDownloadRetryDelay']=f["default"]['isInteger'](je.advanced.segmentDownloadRetryDelay)?je.advanced.segmentDownloadRetryDelay:M.DefaultSettings.DEFAULT_SEGMENT_DOWNLOAD_RETRY_DELAY,je['advanced']['bitrateThreshold']=je.advanced.bitrateThreshold||{},f["default"]['NumberUtils']['isNumber'](je.advanced.bitrateThreshold.upper)?je.advanced.bitrateThreshold.upper<0&&(je.advanced['bitrateThreshold']['upper']=void 0):je.advanced['bitrateThreshold']['upper']=void 0,f["default"]['NumberUtils']['isNumber'](je.advanced.bitrateThreshold.lower)?je.advanced.bitrateThreshold.lower<0&&(je.advanced['bitrateThreshold']['lower']=void 0):je.advanced['bitrateThreshold']['lower']=void 0,je['advertising']=je.advertising||{},je['analytics']=je.analytics||[],je['cast']=je.cast||{},je['logs']=je.logs||{},je['logs']['logToConsole']=je.logs.logToConsole||!1,je['width']=je.width||"100%",je['height']=je.height||"100%",Se['config']=je}function Me(){return Xe&&Xe['isConnected']()?!0:!1}function Pe(){Oe['isAwsMarketPackage']()&&(be(voCastSenderPlugin),be(voCaptionParserPlugin),be(voSRTParserPlugin),be(voVTTParserPlugin),be(voTTMLParserPlugin),be(voFCCStylePlugin),be(voSubtitlesPlugin),be(voVttThumbnailPlugin),be(voCaptionParserPlugin),be(voAnalyticsPlugin),be(voPolyfillPlugin))}

function Te(){}
function ue(){}

function Ae(){Se.instance.VR||(Se['instance']['VR']=new Se['voVRPlugin'](Se),Se.instance['VR']['init'](Se))}function Re(){Se['instance']=dn,Se['commonUtil']=f["default"],Se['DOM']=k["default"],Se['voEvents']=b["default"],Se['voInternalEvents']=c["default"],Se['voErrorCode']=y["default"],Se['HttpLoader']=m["default"],Se['eventBus']=Le=w["default"](Se)['getInstance'](),Se['eventDelegate']=Ne=new x['voEventDelegate'](Se),Se['debug']=Ie=s["default"](Se)['getInstance'](),Se['exSubtitleHandler']=ln=S["default"](Se)['getInstance'](),Se['playerContainer']=Ue,Se['gkEngine']=Oe=new I["default"](Se),Se['uiFramework']=an=new A["default"](Se),Se['Constants']=t["default"],Se['playerFactory_']=on=new J['PlayerFactory'](Se),ee(),Pe()}var Se={'flag':"main"},Ue=a,Ie=void 0,Je=void 0,Le=void 0,Ne=void 0,Oe=void 0,Ve=void 0,je=void 0,qe=void 0,ze=[],Be=void 0,Fe=void 0,Ge=void 0,He=void 0,Ke=void 0,Qe=void 0,We=void 0,Xe=void 0,Ye=void 0,Ze=void 0,$e=void 0,_e=void 0,an=void 0,en=void 0,nn=void 0,ln=void 0,En=!1,on=void 0,tn=[],rn=[],bn=!1,dn={'init':e,'uninit':n,'open':l,'close':g,'stop':D,'addEventListener':i,'removeEventListener':r,'play':d,'pause':p,'isPaused':v,'isEnded':h,'setAudioPlaybackSpeed':na,'setPosition':P,'getPosition':u,'getDuration':R,'getSeekableRange':U,'isLive':O,'mute':V,'unmute':j,'isMuted':q,'setVolume':z,'getVolume':B,'getQualityLevels':G,'selectQualityLevel':Q,'getCurrentQualityLevel':Y,'getAudioTracks':H,'selectAudioTrack':W,'getCurrentAudioTrack':Z,'getSubtitleTracks':K,'selectSubtitleTrack':X,'getCurrentSubtitleTrack':$,'setSubtitleStyles':_,'getDefaultSubtitleStyles':aa,'getValidBufferDuration':ea,'getVersion':ca,'findNearestThumbnail':la,'isPipSupported':Ea,'isInPipMode':oa,'setPipPresentation':ia,'isAirplaySupported':ta,'showPlaybackTargetPicker':ra,'setExternalSubtitle':pa,'getAnalyticsInfo':fa,'isSupportTrickPlay':Ha,'setTrickPlayRate':Ka,'getTrickPlayRate':Qa,'getCurrentLiveLatency':Wa,'getCurrentTimeForLocal':Xa,'setPresentationDelay':Ya,'resize':F,'getContainer':ne,'enterFullscreen':le,'exitFullscreen':Ee,'isFullscreen':oe,'setVideoAspectRatio':ie,'getVideoAspectRatio':te,'addPlugin':de,'isCastAvailable':pe,'isCasting':we,'startCast':xe,'stopCast':ve,'openNormalSource':he,'getStreamPosition':De,'setStreamPosition':me,'getStreamDuration':Ce,'setLogLevel':Ja,'getLogLevel':La,'getSupportedDRMTypes':Za};return Re(),dn}Object['defineProperty'](n,"__esModule",{'value':!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a['constructor']===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a(1),t=l(i),r=a(11),b=l(r),d=a(12),c=l(d),p=a(9),w=l(p),x=a(10),v=a(8),y=l(v),h=a(6),s=l(h),D=a(4),m=l(D),C=a(303),f=l(C),g=a(305),k=l(g),M=a(7),P=a(315),T=l(P),u=a(332),A=l(u),R=a(320),S=l(R),U=a(300),I=l(U),J=a(5),L=a(307),N=a(301);E['events']=b["default"],n["default"]=E},{'1':1,'10':10,'11':11,'12':12,'300':300,'301':301,'303':303,'305':305,'307':307,'315':315,'320':320,'332':332,'4':4,'5':5,'6':6,'7':7,'8':8,'9':9}],'317':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){b=a,b&&b['on'](i["default"].events.ERROR,n,d)}function e(){b&&b['off'](i["default"].events.ERROR,n,d)}function n(a){var e=a.error,n=a.event,l=void 0,i=void 0,b=a.fatal?!0:!1;switch(e){case"capability":"encryptedmedia"===n?(l=r.VO_OSMP_DRM_ERR_BROWSER_UNSUPPORT,i="The DRM is not supported on this browser"):(l=r.VO_OSMP_SRC_ERR_BROWSER_UNSUPPORT_MSE,i="The MSE is not supported on this browser",b=!0);break;case"download":"manifest"===n.id||"xlink"===n.id?(l=r.VO_OSMP_SRC_ERR_MANIFEST_DOWNLOAD_FAIL,b=!0):l=r.VO_OSMP_SRC_ERR_CONTENT_DOWNLOAD_FAIL,i="Failed to download "+n.id+": "+n.url,n.response&&(void 0!==n.response.code&&(i+=n.response.code),n.response.text&&""!==n.response.text&&(i+=n.response.text),n.response.err&&(i+=n.response.err));break;case"manifestError":"nostreamscomposed"===n.id||"parse"===n.id||"nostreams"===n.id?(l=r.VO_OSMP_SRC_ERR_MANIFEST_PARSE_FAIL,b=!0):"codec"===n.id&&(l=r.VO_OSMP_SRC_ERR_CODEC_UNSUPPORT),i=n.message;break;case"mediasource":l=n['match'](/^Video/)?r.VO_OSMP_SRC_ERR_CONTENT_PARSE_FAIL:r.VO_OSMP_SRC_ERR_SOURCE_BUFFER_ERROR,i=n,b=!0;break;case"key_session":"KEY_ERROR"===n.id?l=r.VO_OSMP_DRM_ERR_KEY_FAIL:"LICENSE_REQUEST_COMPLETE"===n.id?l=r.VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL:"KEY_SYSTEM_SELECTED"===n.id?l=r.VO_OSMP_DRM_ERR_SELECT_KEY_SYSTEM_FAIL:"KEY_SESSION_CREATED"===n.id&&(l=r.VO_OSMP_DRM_ERR_KEY_SESSION_FAIL),i=n.message,b=!0;break;case"key_message":l=r.VO_OSMP_DRM_ERR_KEY_SESSION_FAIL,i=n,b=!0;break;case"cc":l=r.VO_OSMP_SRC_ERR_TEXT_TRACK_PARSE_FAIL,i="Failed to display subtitle "+n.message+": "+n.cc}l&&(t['trigger'](E.VO_INTERNAL_ERROR,{'error':e,'errorId':l,'message':i,'response':n.response,'fatal':b}),b&&(t['trigger'](E.VO_INTERNAL_STREAM_ENDED,{'endCause':"TERMINATED_BY_APP"}),o['onError'](l,i)))}var l=this.context,E=l.voInternalEvents,o=l.eventDelegate,t=l.eventBus,r=l.voErrorCode,b=void 0,d={'init':a,'close':e};return d}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(72),i=l(o),t=a(3),r=l(t);E['className']="dashErrorHandler",n["default"]=r["default"]['getSingletonFactory'](E)},{'3':3,'72':72}],'318':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={};l['VO_DASH_MEDIA_LOADEDDATA']="VO_MEDIA_LOADEDDATA",l['VO_DASH_MEDIA_LOADSTART']="VO_MEDIA_LOADSTART",l['VO_DASH_STREAM_ENDED']="voDashStreamEnded",l['VO_DASH_MEDIA_VOLUME_CHANGED']="voDashMediaVolumeChanged",l['VO_DASH_TRICK_MODE_CHANGED']="voDashTrickModeChanged",l['VO_DASH_TRICK_MODE_CHANGING']="voDashTrickModeChanging",l['VO_DASH_TRICK_PLAY_RATE_CHANGED']="voDashTrickPlayRateChanged",l['VO_DASH_REPORT_STREAM_BITRATE']="voDashReportStreamBitrate",l['VO_DASH_REPORT_DOWNLOADED_INFO']="voDashReportDownloadedInfo",l['VO_DASH_REPORT_STREAM_TYPE']="voDashReportStreamType",l['VO_DASH_FRAGMENT_LOADING_PROGRESSED']="voDashFragmentLoadingProgress",l['VO_DASH_HDCP_OUTPUT_POLICY']="voDashHdcpPolicy",n["default"]=l},{}],'319':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){e()}function e(){$a.voSubtitlesPlugin&&(pe||(pe=$a['voSubtitlesPlugin']($a)['getInstance']()))}function n(a){be=a?a:be,be.playback.autoPlay?ce['initialize'](null,null,!0):ce['initialize'](null,null,!1),ce['setFragmentLoaderRetryAttempts'](be.advanced.segmentDownloadRetryCount),ce['setFragmentLoaderRetryInterval'](be.advanced.segmentDownloadRetryDelay),be.advanced.startupBitrate&&ce['setInitialBitrateFor']("video",be.advanced.startupBitrate/1e3),be.advanced.limitBitrateToPlayerSize&&(ce['setLimitBitrateByPortal'](be.advanced.limitBitrateToPlayerSize),ce['setUsePixelRatioInLimitBitrateByPortal'](!0)),be.advanced.bitrateThreshold&&(be.advanced.bitrateThreshold.upper&&ce['setMaxAllowedBitrateFor']("video",be.advanced.bitrateThreshold.upper/1e3),be.advanced.bitrateThreshold.lower&&ce['setMinAllowedBitrateFor']("video",be.advanced.bitrateThreshold.lower/1e3)),ce['setJumpGaps'](!0),ae['isSafari']()?ce['setCatchUpPlaybackRate'](.3):ce['setCatchUpPlaybackRate'](.1);var e=ce['getDebug']();e['setLogTimestampVisible'](!1),e['setLogToBrowserConsole'](!1),ce['setFastSwitchEnabled'](!1),we||ce['createOfflineController']({'filterDRMInfo':Ia}),we=!0,de['init'](ce),l(),Da(),pe&&pe['init']()}function l(){H(i["default"].events.STREAM_OPEN_COMPLETE,z),H(i["default"].events.PLAYBACK_STARTED,Z),H(i["default"].events.PLAYBACK_PAUSED,la),H(i["default"].events.PLAYBACK_ENDED,_),H(i["default"].events.VO_DASH_MEDIA_VOLUME_CHANGED,aa),H(i["default"].events.PLAYBACK_TIME_UPDATED,ea),H(i["default"].events.PLAYBACK_PROGRESS,na),H(i["default"].events.PLAYBACK_SEEKING,Ea),H(i["default"].events.PLAYBACK_SEEKED,oa),H(i["default"].events.PLAYBACK_PLAYING,ia),H(i["default"].events.PLAYBACK_WAITING,ra),H(i["default"].events.CAN_PLAY,ba),H(i["default"].events.LOG,G),H(i["default"].events.TEXT_TRACKS_ADDED,B),H(i["default"].events.PLAYBACK_RATE_CHANGED,da),H(i["default"].events.VO_DASH_MEDIA_LOADSTART,ca),H(i["default"].events.VO_DASH_MEDIA_LOADEDDATA,pa),H(i["default"].events.QUALITY_CHANGE_RENDERED,F),H(i["default"].events.PERIOD_SWITCH_STARTED,$),H(i["default"].events.VO_DASH_TRICK_PLAY_RATE_CHANGED,Ba),H(i["default"].events.FRAGMENT_LOADING_ABANDONED,wa),H(i["default"].events.MANIFEST_LOADED,xa),H(i["default"].events.VO_DASH_REPORT_STREAM_BITRATE,va),H(i["default"].events.VO_DASH_REPORT_DOWNLOADED_INFO,ya),H(i["default"].events.VO_DASH_REPORT_STREAM_TYPE,ha),H(i["default"].events.VO_DASH_REPORT_STREAM_TYPE,S),H(i["default"].events.VO_DASH_HDCP_OUTPUT_POLICY,sa)}function E(a){De=a,we&&(ce['attachView'](De.video),pe&&(pe['setElement'](De.video),ae['isTTMLSupported']()&&pe['setTTMLRenderingDiv'](De.captionContainer)),xe=!0,me=De.video)}function o(a){if(a){var e=a.uri;Xa(a.advanced),ce['setProtectionData'](Ia(a)),a.options&&Wa(a.options),we&&xe&&(ne['onOpenStart'](),ce['setPreloadMode'](be.playback.preload),ce['attachSource'](e))}}function t(){return ce['play']()}function r(){ce['pause']()}function b(){return ce['isPaused']()}function c(){return ce['isSeeking']()}function w(){ce['attachSource'](null)}function x(){ce['attachSource'](null),de['close'](),Q(),Da(),Aa(null),pe&&pe['reset']()}function v(a){var e=a;Va()&&(e=a-Va().start),e>=h()&&(e=h()-.7),ce['seek'](e)}function y(){return parseFloat(ce['getVideoElement']()['currentTime']['toFixed'](5))}function h(){var a=ce['duration']();return a=Oa()?1/0:isNaN(a)?Me:a}function s(){ce['setMute'](!0)}function D(){ce['setMute'](!1)}function m(){return ce['isMuted']()}function C(){return me?me.ended:null}function f(a){ce['setVolume'](a)}function g(){return ce['getVolume']()}function k(a){var e=W("video",a);he=e?e:null}function M(a){var e=W("audio",a);se=e?e:null}function P(a){var e=pe?pe['selectSubtitle'](a):-1;ce['setTextTrack'](e)}function T(){if(!ce['isAudioOnlyStream']())if(he){var a=ce['getCurrentTrackFor']("video");a.index!=he.track.index?ce['setCurrentTrack'](he.track):(ce['setAutoSwitchQualityFor']("video",!1),ce['setQualityFor']("video",he.subIndex))}else ce['setAutoSwitchQualityFor']("video",!0);if(se){var e=ce['getCurrentTrackFor']("audio");e.index!=se.track.index?ce['setCurrentTrack'](se.track):(ce['setAutoSwitchQualityFor']("audio",!1),ce['setQualityFor']("audio",se.subIndex))}else ce['setAutoSwitchQualityFor']("audio",!0);
}function u(){var a=ce['getTracksFor']("video");a=a['concat'](ce['getTracksFor']("muxed"));var e=0;return a['forEach'](function(a){e+=a.representationCount}),e}function A(){var a=ce['getTracksFor']("audio"),e=0;return a['forEach'](function(a){e+=a.bitrateList.length}),e}function R(){return pe?pe['getSubtitleCount']():0}function S(a,e){var n=void 0;n=e?e:a,ye=n.videoTrackDetected?!1:!0}function U(){return ye}function I(a){return a<u()}function J(a){return a<A()}function L(a){return pe?pe['isSubtitleAvailable'](a):!1}function N(a){var e=null,n=W("video",a);return n&&(e={'codec':n.track.codec,'index':n.track.index,'mimeType':n.track.mimeType,'lang':n.track.lang,'viewpoint':n.track.viewpoint,'type':n.track.type,'bandwidth':n['track']['bitrateList'][n.subIndex].bandwidth,'height':n['track']['bitrateList'][n.subIndex].height,'width':n['track']['bitrateList'][n.subIndex].width}),e}function O(a){var e=null,n=W("audio",a);return n&&(e={'codec':n.track.codec,'index':n.track.index,'mimeType':n.track.mimeType,'lang':n.track.lang,'type':n.track.type,'bandwidth':n['track']['bitrateList'][n.subIndex].bandwidth,'name':n.track.lang}),e}function V(a){return pe?pe['getSubtitleProperty'](a):null}function j(){return{'bitrateAdaptation':ce['getAutoSwitchQualityFor']("video"),'video':X("video"),'audio':X("audio"),'subtitle':Ha()}}function q(a){if(C())return 0;var e=y();if("string"==typeof a||a instanceof String){var n=ce['getBufferLength'](a);return"video"===a&&ce['getTracksFor']("muxed").length>0&&(n=ce['getBufferLength']("muxed")),ce['isAudioOnlyStream']()&&(n=ce['getBufferLength']("audio")),Ce=e,n}return Ce=e,NaN}function z(a){Me=a.streamInfo.duration,ne['onOpenComplete'](a),ea(),na()}function B(a){a&&pe&&pe['textTracksAdded'](a.tracks)}function F(a){var e={};if(a.isFromMoov&&"video"===a.mediaType)fe=a,e['mediaType']=a.mediaType;else{var n=ce['getCurrentTrackFor'](a.mediaType),l=Na(n,a.oldQuality),E=Na(n,a.newQuality);e['mediaType']=a.mediaType,e['oldQuality']=l,e['newQuality']=E,e['bandwidth']=a.newBandwidth,e['width']=a.width,e['height']=a.height}ne['onQualityChanged'](e),le['trigger'](_a.VO_INTERNAL_QUALITY_LEVEL_CHANGED,a)}function G(a){ee['doLog'](a.level,a.message)}function H(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;if(ce){if(ve[a])for(var l=0;l<ve[a].length;++l)if(ve[a][l]['callback']===e)return;n?le['on'](a,e,Pe):ce['on'](a,e,Pe),ve[a]=ve[a]?ve[a]:[],ve[a]['push']({'callback':e,'bInternal':n})}}function K(a,e){if(ce&&ve[a])for(var n=0;n<ve[a].length;++n)ve[a][n]['callback']===e&&(ve[a][n].bInternal?le['off'](a,e,Pe):ce['off'](a,e,Pe),ve[a][n]={})}function Q(){if(ce){var a=function(a){ve[a]['forEach'](function(e){K(a,e)})};for(var e in ve)a(e);ve={}}}function W(a,e){if(0>e)return null;var n=ce['getTracksFor'](a);"video"===a&&(n=n['concat'](ce['getTracksFor']("muxed")));var l=null;return n['some'](function(a){return e<a.representationCount?(l={'track':a,'subIndex':e},!0):(e-=a.representationCount,!1)}),l}function X(a){var e=0,n=ce['getTracksFor'](a),l=ce['getCurrentTrackFor'](a);return n['some'](function(n){return n['index']==l.index?(e+=ce['getQualityFor'](a),!0):(e+=n.representationCount,!1)}),e}function Y(a){ce['setAudioPlaybackSpeed'](a)}function Z(){ne['onPlayStarted']()}function $(){ge=!0}function _(a){a.isLast&&(ea(),ne['onPlayCompleted']())}function aa(){ne['onPlayVolumeChanged']()}function ea(){if(!($a.adsPlayerPlugin&&$a['adsPlayerPlugin']['isPlayingAd']()&&$a['adsPlayerPlugin']['isLinearAd']())){var a=y(),e=h(),n=Oa(),l=Va();(n||!isNaN(e))&&ne['onPlayTimeUpdated']({'position':a,'duration':e,'live':n,'range':l})}}function na(){if(!($a.adsPlayerPlugin&&$a['adsPlayerPlugin']['isPlayingAd']()&&$a['adsPlayerPlugin']['isLinearAd']())){var a=ta()||0;ne['onPlayProgress']({'validBufferLength':a})}}function la(){ne['onPlayPaused']()}function Ea(){ne['onSeekStart']()}function oa(){ne['onSeekComplete']()}function ia(){ne['onPlayPlaying']()}function ta(){var a=q("video");return ma()&&0!=ma().length||(a=q("audio")),isNaN(a)&&(a=0),a}function ra(){qa()<0&&ta()>.5||ne['onPlayWaiting']()}function ba(){ne['onCanPlay']()}function da(){le['trigger'](_a.VO_INTERNAL_MEDIA_RATECHANGE)}function ca(){le['trigger'](_a.VO_DASH_MEDIA_LOADSTART)}function pa(){le['trigger'](_a.VO_DASH_MEDIA_LOADEDDATA)}function wa(a){le['trigger'](_a.VO_INTERNAL_REPORT_DROPPED_BYTES,a)}function xa(a){if(le['trigger'](_a.VO_INTERNAL_REPORT_MANIFEST_INFO,a),a&&a.data&&a.data.Period_asArray&&a.data.Period_asArray.length>0&&a['data']['Period_asArray'][0].AdaptationSet_asArray&&a['data']['Period_asArray'][0].AdaptationSet_asArray.length>0&&a['data']['Period_asArray'][0]['AdaptationSet_asArray'][0].Representation_asArray&&a['data']['Period_asArray'][0]['AdaptationSet_asArray'][0].Representation_asArray.length>0){var e=a['data']['Period_asArray'][0]['AdaptationSet_asArray'][0]['Representation_asArray'][0],n=e.SegmentTemplate_asArray&&e.SegmentTemplate_asArray.length>0?e['SegmentTemplate_asArray'][0].ChannelInfo:null;ne['onManifestInfoUpdated']({'channelInfo':n})}}function va(a){le['trigger'](_a.VO_INTERNAL_REPORT_STREAM_BITRATE,a)}function ya(a){le['trigger'](_a.VO_INTERNAL_REPORT_DOWNLOADED_INFO,a),("video"===a.mediaType||"audio"===a.mediaType||"muxed"===a.mediaType||"fragmentedText"===a.mediaType)&&ne['onSegmentDownloaded']({'size':a.downloadBytes,'time':a.downloadTime,'mediaType':"fragmentedText"===a.mediaType?"text":a.mediaType})}function ha(a){le['trigger'](_a.VO_INTERNAL_REPORT_STREAM_TYPE,a)}function sa(a){ne['onHdcpPolicy'](a)}function Da(){Ce=0,ge=!1,ke=!1,fe=null}function ma(){var a=[];do{var e=ce['getTracksFor']("video");if(e=e['concat'](ce['getTracksFor']("muxed")),!e)break;for(var n=0;n<e.length;n++)for(var l=e[n],E=0;E<l.bitrateList.length;E++){var o=Ja(l,E);o&&a['push'](o)}}while(!1);return a}function Ca(){var a=[];do{var e=ce['getTracksFor']("audio");if(!e)break;for(var n=0;n<e.length;n++)for(var l=e[n],E=0;E<l.bitrateList.length;E++){var o=La(l,E);o&&a['push'](o)}}while(!1);return a}function fa(){return pe?pe['getSubtitleTracks']():[]}function ga(a){if(!ce['isAudioOnlyStream']())if(""===a)ce['setAutoSwitchQualityFor']("video",!0);else{ce['setAutoSwitchQualityFor']("video",!1);var e=ce['getCurrentTrackFor']("video"),n=Sa(a);if(!n)return;e!=n.track&&ce['setCurrentTrack'](n.track),ce['setQualityFor']("video",n.index)}}function ka(a){if(""===a)ce['setAutoSwitchQualityFor']("audio",!0);else{var e=ce['getCurrentTrackFor']("audio"),n=Ua(a);if(!n)return;e!=n.track?ce['setCurrentTrack'](n.track):(ce['setAutoSwitchQualityFor']("audio",!1),ce['setQualityFor']("audio",n.index))}}function Ma(a){var e=Ha();if(""===a)-1!==e&&(e=-1,Ka(e),ce['setTextTrack'](e));else{for(var n=!1,l=fa(),E=0;E<l.length;E++){var o=l[E];if(o['id']===a&&e!==E){e=E,Ka(e),n=!0;break}}n&&ce['setTextTrack'](e)}}function Pa(){var a=void 0;if(fe)a={},a['codec']=fe.codec,a['height']=fe.height,a['lang']=fe.lang,a['mimeType']=fe.mimeType,a['type']="video",a['width']=fe.width,a['bandwidth']=fe.newBandwidth;else{var e=ce['getCurrentTrackFor']("video");if(!e)return a;var n=ce['getQualityFor']("video");a=Ja(e,n)}return a}function Ta(){var a=void 0,e=ce['getCurrentTrackFor']("audio");if(!e)return a;var n=ce['getQualityFor']("audio");return a=La(e,n)}function ua(){return pe?pe['getCurrentSubtitleTrack']():{}}function Aa(a){pe&&pe['setSubtitleStyles'](a)}function Ra(){return pe?pe['getDefaultSubtitleStyles']():{}}function Sa(a){var e=null,n=ce['getTracksFor']("video");n=n['concat'](ce['getTracksFor']("muxed"));for(var l=0;l<n.length;l++){for(var E=n[l],o=!1,i=0;i<E.bitrateList.length;i++){var t=E['bitrateList'][i];if(t['id']===a){e={'track':E,'index':i},o=!0;break}}if(o)break}return e}function Ua(a){for(var e=null,n=ce['getTracksFor']("audio"),l=0;l<n.length;l++){for(var E=n[l],o=!1,i=0;i<E.bitrateList.length;i++){var t=E['bitrateList'][i];if(t['id']===a){e={'track':E,'index':i},o=!0;break}}if(o)break}return e}function Ia(a){if(a.drm){var e={};if(a.drm.clearkey){if(e["org.w3.clearkey"]={'serverURL':a.drm.clearkey.laUrl},a.drm.clearkey.keys){e["org.w3.clearkey"]['clearkeys']={};for(var n in a.drm.clearkey.keys)e["org.w3.clearkey"]['clearkeys'][n]=a.drm['clearkey']['keys'][n]}if(a.drm.clearkey.headers){e["org.w3.clearkey"]['httpRequestHeaders']={};for(var l in a.drm.clearkey.headers)e["org.w3.clearkey"]['httpRequestHeaders'][l]=a.drm['clearkey']['headers'][l]}}if(a.drm.widevine&&(e["com.widevine.alpha"]={'serverURL':a.drm.widevine.laUrl,'licenseRequestRetryDelay':a.drm.widevine.licenseRequestRetryDelay,'maxLicenseRequestRetries':a.drm.widevine.maxLicenseRequestRetries,'withCredentials':a.drm.widevine.withCredentials},a.drm.widevine.headers)){e["com.widevine.alpha"]['httpRequestHeaders']={};for(var E in a.drm.widevine.headers)e["com.widevine.alpha"]['httpRequestHeaders'][E]=a.drm['widevine']['headers'][E]}if(a.drm.playready){var o="com.microsoft.playready";if(window.cast&&window.cast.__platform__&&(o="com.chromecast.playready"),e[o]={'serverURL':a.drm.playready.laUrl,'licenseRequestRetryDelay':a.drm.playready.licenseRequestRetryDelay,'maxLicenseRequestRetries':a.drm.playready.maxLicenseRequestRetries,'withCredentials':a.drm.playready.withCredentials},a.drm.playready.headers){e[o]['httpRequestHeaders']={};for(var i in a.drm.playready.headers)e[o]['httpRequestHeaders'][i]=a.drm['playready']['headers'][i]}}return e}}function Ja(a,e){var n=void 0;if(!a||!a.bitrateList)return n;for(var l=0;l<a.bitrateList.length;l++)if(l===e){n={},n['bandwidth']=a['bitrateList'][l].bandwidth,n['codec']=a.codec,n['height']=a['bitrateList'][l].height,n['id']=a['bitrateList'][l].id,n['lang']=a.lang,n['mimeType']=a.mimeType,n['type']=a.type,n['viewpoint']=a.viewpoint,n['width']=a['bitrateList'][l].width;break}return n}function La(a,e){var n=void 0;if(!a||!a.bitrateList)return n;for(var l=0;l<a.bitrateList.length;l++)if(l===e){n={},n['bandwidth']=a['bitrateList'][l].bandwidth,n['codec']=a.codec,n['id']=a['bitrateList'][l].id,n['lang']=a.lang,n['mimeType']=a.mimeType,n['name']=a.lang,n['type']=a.type;break}return n}function Na(a,e){if(!a||!a.bitrateList)return null;for(var n=0;n<a.bitrateList.length;n++)if(n===e)return a['bitrateList'][n].id;return null}function Oa(){return ce['isDynamic']()}function Va(){return ce['getSeekableRange']()}function ja(a){ce['setAutoSwitchQualityFor']("video",1===a),ce['setAutoSwitchQualityFor']("audio",1===a),ce['setTrickPlayRate'](a)}function qa(){return ce['getTrickPlayRate']()}function za(){return ce['isSupportTrickPlay']()}function Ba(a){ne['onTrickPlayrateChanged'](a)}function Fa(){return ce['getCurrentLiveLatency']()}function Ga(){return ce['getCurrentTimeForLocal']()}function Ha(){return pe?pe['getSubtitleIndex']():-1}function Ka(a){pe&&pe['selectSubtitle'](a)}function Qa(a){isNaN(a)||void 0===a||ce['setPresentationDelay'](a)}function Wa(a){a&&(ce['setXHRWithCredentialsForType'](ie,a.manifestWithCredentials),ce['setXHRWithCredentialsForType'](te,a.segmentWithCredentials),ce['setXHRWithCredentialsForType'](re,a.segmentWithCredentials))}function Xa(a){ce['setLowLatencyEnabled'](a.lowLatencyMode),ce['setStartWithLowestLatency'](a.startWithLowestLatency),Qa(a.presentationDelay/1e3),!a.lowLatencyMode&&a.presentationDelay&&ce['setUseFetch'](!0),void 0!==a.minBufferToAppendData&&ce['setMinBufferToAppendData'](a.minBufferToAppendData),a.UTCTimingSource&&ce['addUTCTimingSource'](a.UTCTimingSource.schemeIdUri,a.UTCTimingSource.value),a.httpHeaders&&ce['setHTTPHeaders'](a.httpHeaders)}function Ya(a,e){var n=a;if(Oa()){var l=ce['getSeekableRange']();n>=l.start?n-=l.start:n=0}var E=ce['getThumbnail'](n,e);return E}function Za(){var a=i["default"](Ee)['create']();return a['initialize'](null,null,!1),a['createOfflineController']({'filterDRMInfo':Ia})}var $a=this.context,_a=$a.voInternalEvents,ae=$a.commonUtil,ee=$a.debug,ne=$a.eventDelegate,le=$a.eventBus;$a['voDashEvents']=p["default"];var Ee={};for(var oe in $a)(oe['indexOf']("Plugin")<0||"voDownloaderPlugin"===oe)&&(Ee[oe]=$a[oe]);var ie="MPD",te="InitializationSegment",re="MediaSegment",be=null,de=d["default"]($a)['getInstance'](),ce=i["default"]($a)['create'](),pe=void 0,we=!1,xe=!1,ve={},ye=void 0,he=null,se=null,De=void 0,me=void 0,Ce=0,fe=void 0,ge=!1,ke=!1,Me=void 0,Pe={'init':n,'open':o,'setView':E,'play':t,'pause':r,'isPaused':b,'isSeeking':c,'stop':w,'close':x,'setPosition':v,'getPosition':y,'getDuration':h,'mute':s,'unmute':D,'isMuted':m,'isEnded':C,'setVolume':f,'getVolume':g,'selectVideo':k,'selectAudio':M,'selectSubtitle':P,'commitSelection':T,'getVideoCount':u,'getAudioCount':A,'getSubtitleCount':R,'isPureAudio':U,'isVideoAvailable':I,'isAudioAvailable':J,'isSubtitleAvailable':L,'getVideoProperty':N,'getAudioProperty':O,'getSubtitleProperty':V,'getValidBufferDuration':q,'setAudioPlaybackSpeed':Y,'getCurrentSelection':j,'getQualityLevels':ma,'getAudioTracks':Ca,'getSubtitleTracks':fa,'selectQualityLevel':ga,'selectAudioTrack':ka,'selectSubtitleTrack':Ma,'getCurrentQualityLevel':Pa,'getCurrentAudioTrack':Ta,'getCurrentSubtitleTrack':ua,'setSubtitleStyles':Aa,'getDefaultSubtitleStyles':Ra,'createOfflineController':Za,'isLive':Oa,'getSeekableRange':Va,'getCurrentLiveLatency':Fa,'getCurrentTimeForLocal':Ga,'setPresentationDelay':Qa,'setTrickPlayRate':ja,'getTrickPlayRate':qa,'isSupportTrickPlay':za,'getThumbnail':Ya};return a(),Pe}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(72),i=l(o),t=a(3),r=l(t),b=a(317),d=l(b),c=a(318),p=l(c);E['className']="voDashWrapper",n["default"]=r["default"]['getClassFactory'](E)},{'3':3,'317':317,'318':318,'72':72}],'320':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){p=new r["default"](d)}function e(){w=!1}function n(a,e){if(a&&a.uri&&!w){var n=function(n){e({'kind':a.kind?a.kind:"subtitles",'label':a.label?a.label:"",'mode':a["default"]?"showing":"hidden",'lang':a.lang?a.lang:"unknown",'flag':"external",'data':n}),w=!0},l=function(){console['log']("load external subtitle failed"),e()};p['load']({'url':a.uri,'success':n,'error':l})}}function l(a){a&&d.voSubtitlesPlugin&&(c||(c=d['voSubtitlesPlugin'](d)['getInstance']()),x=a,c&&c['getElement']()&&c['getTTMLRenderingDiv']()&&E())}function E(){if(x){v="showing"===x.mode?!0:!1;try{c['addCaptionsByType'](x,null,!0)}catch(a){throw new Error("add external subtitle error!")}}}function o(){return v}function i(){x&&(x['bUpdate']=!1,l(x))}function t(a){a&&(c=a.subtitlePlugin)}function b(){x=null,v=!1,c&&c['reset']()}var d=this.context,c=void 0,p=void 0,w=!1,x=void 0,v=void 0,y={'load':n,'reset':b,'resetStatus':e,'setExternalSubtitle':l,'isExSubtitleAsDefault':o,'exSubtitleHandler':E,'updateExternaSubtitle':i,'setConfig':t};return a(),y}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(4),r=l(t);E['__visualon_factory_name']="voExternalSubtitleHandler",n["default"]=i["default"]['getSingletonFactory'](E)},{'3':3,'4':4}],'321':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){x=a,x&&x['on'](i["default"].Events.ERROR,r,this)}function e(){x&&x['off'](i["default"].Events.ERROR,r,this)}function n(a){var e=a.details,n=a.reason,l=void 0;switch(e){case t.ErrorDetails.KEY_LOAD_ERROR:case t.ErrorDetails.KEY_LOAD_TIMEOUT:l=w.VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL,n=n||"Failed to load key";break;case t.ErrorDetails.MANIFEST_PARSING_ERROR:l=w.VO_OSMP_SRC_ERR_MANIFEST_PARSE_FAIL,n=n||"Failed to parse manifest";break;case t.ErrorDetails.MANIFEST_LOAD_ERROR:case t.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case t.ErrorDetails.LEVEL_LOAD_ERROR:case t.ErrorDetails.LEVEL_LOAD_TIMEOUT:l=w.VO_OSMP_SRC_ERR_MANIFEST_DOWNLOAD_FAIL,n=n||"Failed to load manifest. Please make sure the source is set correctly and the CORS support is enabled.";break;case t.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case t.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:l=w.VO_OSMP_SRC_ERR_MANIFEST_DOWNLOAD_FAIL,n=n||"Failed to load audio track";break;case t.ErrorDetails.FRAG_LOAD_ERROR:case t.ErrorDetails.FRAG_LOAD_TIMEOUT:l=w.VO_OSMP_SRC_ERR_CONTENT_DOWNLOAD_FAIL,n=n||"Failed to download fragment"}return l?{'errorId':l,'reason':n}:null}function l(a){var e=a.details,n=a.reason,l=void 0;switch(e){case t.ErrorDetails.FRAG_PARSING_ERROR:l=w.VO_OSMP_SRC_ERR_CONTENT_PARSE_FAIL,n=n||"Failed to parse the fragment";break;case t.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR:l=w.VO_OSMP_SRC_ERR_CODEC_UNSUPPORT,n=n||"Browser can not support the stream's codec";break;case t.ErrorDetails.BUFFER_APPENDING_ERROR:case t.ErrorDetails.BUFFER_ADD_CODEC_ERROR:case t.ErrorDetails.BUFFER_APPEND_ERROR:case t.ErrorDetails.BUFFER_FULL_ERROR:l=w.VO_OSMP_SRC_ERR_SOURCE_BUFFER_ERROR,n=n||"Source Buffer error occurred";break;case t.ErrorDetails.FRAG_DECRYPT_ERROR:l=w.VO_OSMP_DRM_ERR_DECRYPT_FAIL,n=n||"Failed to decrypt the fragment";break;case t.ErrorDetails.MEDIA_ERROR:l=w.VO_OSMP_SRC_ERR_CONTENT_PARSE_FAIL,n=n||"video element caught a playback error"}return l?{'errorId':l,'reason':n}:null}function E(a){var e=a.reason,n=void 0;return n=w.VO_OSMP_SRC_ERR_OUTMEMORY,e=e||"Failed to alloc memory",{'errorId':n,'reason':e}}function o(a){var e=a.details,n=a.reason,l=void 0;return a.fatal&&e===t.ErrorDetails.INTERNAL_EXCEPTION&&(l=w.VO_OSMP_SRC_ERR_UNKNOWN,n=n||"Unknown error"),l?{'errorId':l,'reason':n}:null}function r(a,e){var i=e.type,r=e.details,b=void 0;do{if(!i||!r)break;switch(i){case t.ErrorTypes.NETWORK_ERROR:b=n(e);break;case t.ErrorTypes.MEDIA_ERROR:b=l(e);break;case t.ErrorTypes.MUX_ERROR:b=E(e);break;case t.ErrorTypes.OTHER_ERROR:b=o(e)}}while(!1);b&&(p['trigger'](d.VO_INTERNAL_ERROR,{'error':e.details,'errorId':b.errorId,'message':b.reason,'response':e.response,'fatal':e.fatal}),e.fatal&&(p['trigger'](d.VO_INTERNAL_STREAM_ENDED,{'endCause':"TERMINATED_BY_APP"}),c['onError'](b.errorId,b.reason)))}var b=this.context,d=b.voInternalEvents,c=b.eventDelegate,p=b.eventBus,w=b.voErrorCode,x=void 0,v={'init':a,'close':e};return v}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(259),i=l(o),t=a(256),r=a(3),b=l(r);E['className']="hlsErrorHandler",n["default"]=b["default"]['getSingletonFactory'](E)},{'256':256,'259':259,'3':3}],'322':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){j=!1}function e(a){L=a,N=L.media,U()}function n(){return N?N.currentTime:void 0}function l(){return n()>0}function E(){return N?N.playbackRate:void 0}function o(){return N?N.played:void 0}function i(){return N?N.ended:void 0}function d(){return N?N['play']():{'name':"OtherError",'message':"Initialization is not completed !"}}function c(){return N?N.paused:void 0}function p(){N&&N['pause']()}function w(){return N?N.seeking:void 0}function x(a){if(N&&N.currentTime!=a)try{N['currentTime']=a}catch(e){0===N.readyState&&e['code']===e.INVALID_STATE_ERR&&setTimeout(function(){N['currentTime']=a},400)}}function v(){N&&I(),a()}function y(){V['log']("Native video element event: canplay"),L['trigger2'](b.VO_HLS_MEDIA_CANPLAY)}function h(){V['log']("Native video element event: play"),L['trigger2'](b.VO_HLS_MEDIA_PLAY,{'startTime':n()})}function s(){V['log']("Native video element event: playing"),L['trigger2'](b.VO_HLS_MEDIA_PLAYING,{'playingTime':n()})}function D(){V['log']("Native video element event: pause"),L['trigger2'](b.VO_HLS_MEDIA_PAUSED)}function m(a){var e=a.target||a.srcElement,n={'error':e.error};if(n.error){var l="";switch(n.error.code){case 1:l="MEDIA_ERR_ABORTED";break;case 2:l="MEDIA_ERR_NETWORK";break;case 3:l="MEDIA_ERR_DECODE";break;case 4:l="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:l="MEDIA_ERR_ENCRYPTED";break;default:l="UNKNOWN"}n.error.message&&(l+=" ("+n.error.message+")"),n.error.msExtendedCode&&(l+=" (0x"+(n.error.msExtendedCode>>>0)['toString'](16)['toUpperCase']()+")"),L['trigger'](b.VO_HLS_ERROR,{'type':t.ErrorTypes.MEDIA_ERROR,'details':t.ErrorDetails.MEDIA_ERROR,'reason':l,'fatal':!0})}}function C(){var a=n();V['log']("Native video element event: seeking "+a),L['trigger2'](b.VO_HLS_MEDIA_SEEKING,{'seekTime':a})}function f(){V['log']("Native video element event: seeked"),L['trigger2'](b.VO_HLS_MEDIA_SEEKED),r['isIE11']()&&(c()||(V['log']("IE browser-- seeked event"),L['trigger2'](b.VO_HLS_MEDIA_PLAYING,{'playingTime':n()})))}function g(){L['trigger2'](b.VO_HLS_MEDIA_TIMEUPDATE)}function k(){L['trigger2'](b.VO_HLS_MEDIA_PROGRESS)}function M(){L['trigger2'](b.VO_HLS_MEDIA_RATECHANGE)}function P(){}function T(){L['trigger2'](b.VO_HLS_MEDIA_LOADSTART)}function u(){L['trigger2'](b.VO_HLS_MEDIA_LOADEDDATA)}function A(){j=!1,V['log']("Native video element event: ended"),p(),L['trigger2'](b.VO_HLS_MEDIA_ENDED,{'ended':i()})}function R(){L['trigger2'](b.VO_HLS_MEDIA_VOLUME_CHANGED)}function S(){V['log']("Native video element event: waiting"),j?A():L['trigger2'](b.VO_HLS_MEDIA_WAITING)}function U(){N['addEventListener']("canplay",y),N['addEventListener']("play",h),N['addEventListener']("playing",s),N['addEventListener']("pause",D),N['addEventListener']("error",m),N['addEventListener']("seeking",C),N['addEventListener']("seeked",f),N['addEventListener']("timeupdate",g),N['addEventListener']("progress",k),N['addEventListener']("ratechange",M),N['addEventListener']("loadedmetadata",P),N['addEventListener']("loadstart",T),N['addEventListener']("loadeddata",u),N['addEventListener']("ended",A),N['addEventListener']("volumechange",R),N['addEventListener']("waiting",S)}function I(){N['removeEventListener']("canplay",y),N['removeEventListener']("play",h),N['removeEventListener']("playing",s),N['removeEventListener']("pause",D),N['removeEventListener']("error",m),N['removeEventListener']("seeking",C),N['removeEventListener']("seeked",f),N['removeEventListener']("timeupdate",g),N['removeEventListener']("progress",k),N['removeEventListener']("ratechange",M),N['removeEventListener']("loadedmetadata",P),N['removeEventListener']("loadstart",T),N['removeEventListener']("loadeddata",u),N['removeEventListener']("ended",A),N['removeEventListener']("volumechange",R),N['removeEventListener']("waiting",S)}var J=void 0,L=void 0,N=void 0,O=this.context;r=O.commonUtil,b=O.voHlsEvents;var V=O.debug,j=void 0;return J={'initialize':e,'isPlaybackStarted':l,'getTime':n,'getPlaybackRate':E,'getPlayedRanges':o,'getEnded':i,'play':d,'isPaused':c,'pause':p,'isSeeking':w,'seek':x,'reset':v},a(),J}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(256),r=void 0,b=void 0;E['className']="PlaybackController",n["default"]=i["default"]['getSingletonFactory'](E)},{'256':256,'3':3}],'323':[function(a,e,n){"use strict";Object['defineProperty'](n,"__esModule",{'value':!0});var l={};l['VO_HLS_MEDIA_CANPLAY']="voHlsMediaCanPlay",l['VO_HLS_MEDIA_PLAYING']="voHlsMediaPlaying",l['VO_HLS_MEDIA_PLAY']="voHlsMediaPlay",l['VO_HLS_MEDIA_PAUSED']="voHlsMediaPaused",l['VO_HLS_MEDIA_ENDED']="voHlsMediaEnded",l['VO_HLS_MEDIA_PRELOADED']="voHlsMediaPreloaded",l['VO_HLS_MEDIA_LOADEDDATA']="voHlsMediaLoadeddata",l['VO_HLS_MEDIA_LOADSTART']="voHlsMediaLoadstart",l['VO_HLS_MEDIA_RATECHANGE']="voHlsMediaRatechange",l['VO_HLS_MEDIA_SEEKING']="voHlsMediaSeeking",l['VO_HLS_MEDIA_SEEKED']="voHlsMediaSeeked",l['VO_HLS_MEDIA_VOLUME_CHANGED']="voHlsMediaVolumeChanged",l['VO_HLS_MEDIA_TIMEUPDATE']="voHlsMediaTimeupdate",l['VO_HLS_MEDIA_PROGRESS']="voHlsMediaProgress",l['VO_HLS_MEDIA_WAITING']="voHlsMediaWaiting",l['VO_HLS_METADATA_ID3']="voHlsMetadataID3",l['VO_HLS_TEXT_TRACKS_ADDED']="voHlsTextTracksAdded",l['VO_HLS_TEXT_TRACK_ADDED']="voHlsTrackAdded",l['VO_HLS_TEXT_TRACK_DEFAULT_FOUND']="voHlsTrackDefaultFound",l['VO_HLS_TEXT_TRACKS_DELETED']="voHlsTracksDeleted",l['VO_HLS_MEDIASOURCE_CLOSED']="voHlsMediasourceClosed",l['VO_HLS_LOG']="voHlsLog",l['VO_HLS_ERROR']="voHlsError",l['VO_HLS_REPORT_DROPPED_BYTES']="voHlsReportDroppedBytes",l['VO_HLS_REPORT_MANIFEST_INFO']="voHlsReportManifestInfo",l['VO_HLS_REPORT_STREAM_BITRATE']="voHlsReportStreamBitrate",l['VO_HLS_REPORT_DOWNLOADED_INFO']="voHlsReportDownloadedInfo",l['VO_HLS_REPORT_DRM_TYPE']="voHlsReportDrmType",l['VO_HLS_REPORT_STREAM_TYPE']="voHlsReportStreamType",l['VO_HLS_ID3_FRAME_PROCESSED']="hlsId3FrameProcessed",l['VO_HLS_AUDIO_GROUP_CHANGE']="hlsAudioGroupChange",n["default"]=l},{}],'324':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){Q(),E()}function e(a,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;if(Wa){if(Ee[a]&&Ee[a]['callback']===e)return;n?ae['on'](a,e,this):Wa['on'](a,e,this),Ee[a]={'callback':e,'bInternal':n}}}function n(a,e){Wa&&Ee[a]['callback']===e&&(Ee[a].bInternal?ae['off'](a,e,this):Wa['off'](a,e,this),Ee[a]={})}function l(){if(Wa){for(var a in Ee)Ee[a]&&n(a,Ee[a].callback);Ee={}}}function E(){Xa.voSubtitlesPlugin&&(ee||(ee=Xa['voSubtitlesPlugin'](Xa)['getInstance']()))}function o(a){be=a,$a['log']("voHlsPlayer init: "+be.playback.autoPlay),b['hlsDefaultConfig']['fragLoadingMaxRetry']=be.advanced.segmentDownloadRetryCount,b['hlsDefaultConfig']['fragLoadingRetryDelay']=be.advanced.segmentDownloadRetryDelay,be.advanced.limitBitrateToPlayerSize&&(b['hlsDefaultConfig']['capLevelToPlayerSize']=be.advanced.limitBitrateToPlayerSize),be.advanced.startupBitrate&&(b['hlsDefaultConfig']['startupBitrate']=be.advanced.startupBitrate),be.advanced.bitrateThreshold&&be.advanced.bitrateThreshold.lower&&(b['hlsDefaultConfig']['minBitrate']=be.advanced.bitrateThreshold.lower),be.advanced.bitrateThreshold&&be.advanced.bitrateThreshold.upper&&(b['hlsDefaultConfig']['maxBitrate']=be.advanced.bitrateThreshold.upper),ee&&ee['init'](),void 0!==be.playback.autoPlay&&(b['hlsDefaultConfig']['autoPlay']=be.playback.autoPlay),be.playback.preload&&(b['hlsDefaultConfig']['preload']=be.playback.preload)}function i(a){oe=a}function t(){ee&&(ee['setElement'](oe.video),Za['isTTMLSupported']()&&ee['setTTMLRenderingDiv'](oe.captionContainer)),Wa['attachMedia'](oe.video),ne['initialize'](Wa)}function d(a){var e=a.uri;$a['log']("voHlsPlayer open: "+e);var n;n=window.cast&&window.cast.__platform__?{'debug':!0,'maxBufferSize':2e7,'maxMaxAudioBufferLength':60}:{'debug':!0},a.options&&(n['manifestWithCredentials']=a.options.manifestWithCredentials,n['segmentWithCredentials']=a.options.segmentWithCredentials);var l=a.drm;l&&l.widevine&&l.widevine.laUrl&&(n['widevineLicenseUrl']=l.widevine.laUrl,n.widevineLicenseUrl&&(n['emeEnabled']=!0)),a.advanced.lowLatencyMode&&(n['lowLatencyMode']=!0,n['liveSyncDurationCount']=0),Za['isSafari']()?(n['liveCatchUpPlaybackRate']=.3,n['minPlaybackRateChange']=.25):(n['liveCatchUpPlaybackRate']=.1,n['minPlaybackRateChange']=.02),isNaN(a.advanced.presentationDelay)&&void 0===a.advanced.presentationDelay||(n['liveDelay']=a.advanced.presentationDelay/1e3),n['context']=Xa,n['httpHeaders']=a.advanced.httpHeaders,Wa=new r["default"](n),le['init'](Wa),Ha(),t(),_a['onOpenStart'](),Wa['loadSource'](e)}function p(){we===pe.OPENED&&Wa['recoverLoad']()}function x(){return p(),ne['play']()}function y(){ne['pause']()}function h(){return ne['isPaused']()}function s(){$a['log']("voHlsPlayer stop"),D()}function D(){$a['log']("voHlsPlayer close"),le['close'](),l(),Wa&&(Wa['destroy'](),Wa=null),ee&&ee['reset'](),Q(),ba(null),de=0}function m(a){p(),a>=g()&&(a=g()-.7),ne['seek'](a),h()&&(C(a)||_a['onPlayWaiting']())}function C(a){for(var e=0;e<Wa.media.buffered.length;++e)if(a>=Wa.media['buffered']['start'](e)&&a<=Wa.media['buffered']['end'](e))return!0;return!1}function f(){return Wa?Wa['getPosition']():0}function g(){return Wa?Wa['getDuration']():0}function k(){Wa&&Wa.media&&(Wa['media']['muted']=!0)}function M(){Wa.media&&(Wa['media']['muted']=!1)}function P(){return Wa&&Wa.media?Wa.media.muted:!1}function T(){return Wa&&Wa.media?Wa.media.ended:null}function u(a){Wa&&Wa.media&&(Wa['media']['volume']=a)}function A(){return Wa&&Wa.media?Wa.media.volume:void 0}function R(a){var e=W("video",a);te=e?e:{'index':-1}}function S(a){var e=W("audio",a);ie=e?e:null}function U(a){var e=ee?ee['selectSubtitle'](a):-1;Wa['subtitleTrack']=e}function I(){te&&(-1===te.index?Wa['nextLevel']=te.index:te.index!==Wa.nextLevel&&(Wa['nextLevel']=te.index),te=null),ie&&ie.index!==Wa.audioTrack&&(Wa['audioTrack']=ie.index)}function J(){return Wa.levels?Wa.levels.length:0}function L(){return Wa?Wa.audioTracks.length:0}function N(){return ee?ee['getSubtitleCount']():0}function O(a,e){var n=void 0;n=e?e:a,re=n.videoTrackDetected?!1:!0}function V(){return re}function j(a){var e=J();return 0>e||0>a?!1:a<J()}function q(a){var e=L();return 0>e||0>a?!1:e>a}function z(a){return ee?ee['isSubtitleAvailable'](a):!1}function B(a){var e=null,n=W("video",a);return n&&(e={'index':n.index,'bandwidth':n.track.bitrate,'width':n.track.width,'height':n.track.height}),e}function F(a){var e=null,n=W("audio",a);return n&&(e={'index':n.index,'lang':n.track.lang,'type':n.track.type,'name':n.track.name}),e}function G(a){return ee?ee['getSubtitleProperty'](a):null}function H(){if(null!=Wa){for(var a=f(),e=0;e<Wa.media.buffered.length;++e)if(a>=Wa.media['buffered']['start'](e)&&a<=Wa.media['buffered']['end'](e)){var n=Wa.media['buffered']['end'](e)-a;return de=a,n}return de=a,NaN}}function K(){return{'bitrateAdaptation':!0,'video':X("video"),'audio':X("audio"),'subtitle':Ea()}}function Q(){ie=null,te=null,ne&&ne['reset'](),we=pe.NONE}function W(a,e){if(0>e)return null;var n=null;if("video"===a){var l=Wa.levels;e<l.length&&(n={'track':l[e],'index':e})}if("audio"===a){var E=Wa.audioTracks;e<E.length&&(n={'track':E[e],'index':e})}return n}function X(a){return"video"===a?Wa.manualLevel:"audio"===a?Wa.audioTrack:void 0}function Y(){return Wa}function Z(a){Wa&&Wa.media&&(Wa['media']['playbackRate']=a)}function $(){var a=[];if(Wa.levels)for(var e=0;e<Wa.levels.length;e++){var n=Wa['levels'][e],l={};l['bandwidth']=n.bitrate,n.attrs&&(l['codec']=n.attrs.CODECS),l['height']=n.height,l['id']=n['id']['toString'](),l['width']=n.width,l['selInfo']=n.selInfo,a['push'](l)}return a}function _(){for(var a=[],e=0;e<Wa.audioTracks.length;e++){var n=Wa['audioTracks'][e],l={};l['id']=n['id']['toString'](),l['lang']=n.lang,l['name']=n.name,l['type']=n.type,a['push'](l)}return a}function aa(){return ee?ee['getSubtitleTracks']():[]}function ea(a){""===a?Wa['nextLevel']=-1:Wa['nextLevel']=parseInt(a)}function na(a){""===a?Wa['audioTrack']=-1:Wa['audioTrack']=parseInt(a)}function la(a){var e=Ea();if(""===a)-1!==e&&(e=-1,oa(e),Wa['subtitleTrack']=e);else{for(var n=!1,l=aa(),E=0;E<l.length;E++){var o=l[E];if(o['id']===a&&e!==E){e=E,oa(e),n=!0;break}}n&&(Wa['subtitleTrack']=e)}}function Ea(){return ee?ee['getSubtitleIndex']():-1}function oa(a){ee&&ee['selectSubtitle'](a)}function ia(){return ce||{}}function ta(){for(var a=void 0,e=_(),n=0;n<e.length;n++){var l=e[n];if(l['id']===Wa['audioTrack']['toString']()){a=l;break}}return a}function ra(){return ee?ee['getCurrentSubtitleTrack']():{}}function ba(a){ee&&ee['setSubtitleStyles'](a)}function da(){return ee?ee['getDefaultSubtitleStyles']():{}}function ca(){return Wa['getSeekableRange']()}function pa(){return Wa['isLive']()}function wa(){return Wa['getCurrentLiveLatency']()}function xa(){return Wa['getCurrentTimeForLocal']()}function va(a){isNaN(a)||void 0===a||Wa&&Wa['setPresentationDelay'](a)}function ya(){return!1}function ha(){_a['onCanPlay']()}function sa(){_a['onOpenComplete'](),Ra(),Sa()}function Da(){_a['onPlayStarted']()}function ma(){_a['onPlayPlaying']()}function Ca(){_a['onPlayWaiting']()}function fa(){_a['onPlayPaused']()}function ga(){_a['onPlayCompleted']()}function ka(){ae['trigger'](Ya.VO_INTERNAL_MEDIA_LOADEDDATA)}function Ma(){ae['trigger'](Ya.VO_INTERNAL_MEDIA_LOADSTART)}function Pa(){ae['trigger'](Ya.VO_INTERNAL_MEDIA_RATECHANGE)}function Ta(){_a['onSeekStart']()}function ua(){_a['onSeekComplete']()}function Aa(){_a['onPlayVolumeChanged']()}function Ra(){if(we!==pe.OPENED)return void $a['log']("trigger timeupdate before open completed");var a=f(),e=g(),n=pa(),l=ca();(n||!isNaN(e))&&_a['onPlayTimeUpdated']({'position':a,'duration':e,'live':n,'range':l})}function Sa(){var a=H()||0;_a['onPlayProgress']({'validBufferLength':a})}function Ua(a){$a['doLog'](a.level,a.message)}function Ia(){$a['log']("when mediaclosed, send PLAYBACK_ENDED event"),_a['onPlayCompleted']()}function Ja(a,e){for(var n=e.samples,l=0;l<n.length;l++){var E={'tagType':"VO_OSMP_SRC_CUSTOMERTAGID_TIMEDTAG",'timestamp':1e3*n[l].pts,'data':n[l].data};_a['onCustomerTag'](E)}}function La(a,e){var n={},l=$();n['mediaType']="video",n['oldQuality']=isFinite(e.oldQuality)?l[e.oldQuality].id:null,n['newQuality']=l[e.newQuality].id,n['bandwidth']=e.newBandwidth,n['width']=e.width,n['height']=e.height,ce=l[e.newQuality],_a['onQualityChanged'](n),ae['trigger'](Ya.VO_INTERNAL_QUALITY_LEVEL_CHANGED,e)}function Na(a,e){var n={};n['mediaType']="audio",_a['onQualityChanged'](n),ae['trigger'](Ya.VO_INTERNAL_AUDIO_TRACK_CHANGED,e)}function Oa(a,e){ae['trigger'](Ya.VO_INTERNAL_TEXT_TRACKS_CHANGED,e)}function Va(a){ae['trigger'](Ya.VO_INTERNAL_REPORT_DROPPED_BYTES,a)}function ja(a){ae['trigger'](Ya.VO_INTERNAL_REPORT_MANIFEST_INFO,a)}function qa(a){ae['trigger'](Ya.VO_INTERNAL_REPORT_STREAM_BITRATE,a)}function za(a){ae['trigger'](Ya.VO_INTERNAL_REPORT_DOWNLOADED_INFO,a)}function Ba(a){ae['trigger'](Ya.VO_INTERNAL_REPORT_DRM_TYPE,a)}function Fa(a){ae['trigger'](Ya.VO_INTERNAL_REPORT_STREAM_TYPE,a)}function Ga(){_a['onProgramChanged']()}function Ha(){e(v["default"].VO_HLS_MEDIA_CANPLAY,ha),e(v["default"].VO_HLS_MEDIA_PLAY,Da),e(v["default"].VO_HLS_MEDIA_PLAYING,ma),e(v["default"].VO_HLS_MEDIA_WAITING,Ca),e(v["default"].VO_HLS_MEDIA_PAUSED,fa),e(v["default"].VO_HLS_MEDIA_ENDED,ga),e(v["default"].VO_HLS_MEDIA_LOADEDDATA,ka),e(v["default"].VO_HLS_MEDIA_LOADSTART,Ma),e(v["default"].VO_HLS_MEDIA_RATECHANGE,Pa),e(v["default"].VO_HLS_MEDIA_SEEKING,Ta),e(v["default"].VO_HLS_MEDIA_SEEKED,ua),e(v["default"].VO_HLS_MEDIA_VOLUME_CHANGED,Aa),e(v["default"].VO_HLS_MEDIA_TIMEUPDATE,Ra),e(v["default"].VO_HLS_MEDIA_PROGRESS,Sa),e(v["default"].VO_HLS_LOG,Ua),e(v["default"].VO_HLS_MEDIASOURCE_CLOSED,Ia),e(r["default"].Events.FRAG_PARSING_METADATA,Ja),
e(r["default"].Events.LEVEL_SWITCHED,La),e(r["default"].Events.AUDIO_TRACK_SWITCHED,Na),e(r["default"].Events.SUBTITLE_TRACK_SWITCH,Oa),e(v["default"].VO_HLS_REPORT_DROPPED_BYTES,Va),e(v["default"].VO_HLS_REPORT_MANIFEST_INFO,ja),e(v["default"].VO_HLS_REPORT_STREAM_BITRATE,qa),e(v["default"].VO_HLS_REPORT_DOWNLOADED_INFO,za),e(v["default"].VO_HLS_REPORT_DRM_TYPE,Ba),e(v["default"].VO_HLS_REPORT_STREAM_TYPE,Fa),e(v["default"].VO_INTERNAL_REPORT_STREAM_TYPE,O),e(v["default"].VO_HLS_MEDIA_PRELOADED,Qa),e(v["default"].VO_HLS_AUDIO_GROUP_CHANGE,Ga),we=pe.INITED}function Ka(a,e){e(null)}function Qa(){we===pe.INITED&&(we=pe.OPENED,sa())}var Wa=void 0,Xa=this.context,Ya=Xa.voInternalEvents,Za=Xa.commonUtil,$a=Xa.debug,_a=Xa.eventDelegate,ae=Xa.eventBus;Xa['voHlsEvents']=v["default"];var ee=void 0,ne=c["default"](Xa)['getInstance'](),le=w["default"](Xa)['getInstance'](),Ee={},oe=void 0,ie=void 0,te=void 0,re=void 0,be=void 0,de=0,ce=void 0,pe={'NONE':"none",'INITED':"inited",'OPENED':"opened"},we=void 0,xe={'init':o,'open':d,'setView':i,'play':x,'pause':y,'isPaused':h,'stop':s,'close':D,'setPosition':m,'getPosition':f,'getDuration':g,'mute':k,'unmute':M,'isMuted':P,'isEnded':T,'setVolume':u,'getVolume':A,'selectVideo':R,'selectAudio':S,'selectSubtitle':U,'commitSelection':I,'getVideoCount':J,'getAudioCount':L,'getSubtitleCount':N,'isPureAudio':V,'isVideoAvailable':j,'isAudioAvailable':q,'isSubtitleAvailable':z,'getVideoProperty':B,'getAudioProperty':F,'getSubtitleProperty':G,'getValidBufferDuration':H,'getCurrentSelection':K,'setAudioPlaybackSpeed':Z,'getEntityPlayer':Y,'getQualityLevels':$,'getAudioTracks':_,'getSubtitleTracks':aa,'selectQualityLevel':ea,'selectAudioTrack':na,'selectSubtitleTrack':la,'getCurrentQualityLevel':ia,'getCurrentAudioTrack':ta,'getCurrentSubtitleTrack':ra,'setSubtitleStyles':ba,'getDefaultSubtitleStyles':da,'getSeekableRange':ca,'isLive':pa,'getCurrentLiveLatency':wa,'getCurrentTimeForLocal':xa,'setPresentationDelay':va,'isSupportTrickPlay':ya,'getThumbnail':Ka};return a(),xe}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(259),r=l(t),b=a(221),d=a(322),c=l(d),p=a(321),w=l(p),x=a(323),v=l(x);E['className']="voHlsPlayer",n["default"]=i["default"]['getClassFactory'](E)},{'221':221,'259':259,'3':3,'321':321,'322':322,'323':323}],'325':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){E(),f=!1,e()}function e(){n(),D&&(C=D['getTextTracks']())}function n(){h.voSubtitlesPlugin&&(D||(D=h['voSubtitlesPlugin'](h)['getInstance']()))}function l(){E(),t()}function E(){g=null,k=0,M=!1}function o(a){a&&(m=a,i())}function i(){m&&m.textTracks&&(m['textTracks']['addEventListener']("change",c,!1),m['textTracks']['addEventListener']("addtrack",b))}function t(){if(m&&m.textTracks){for(var a=0;a<m.textTracks.length;a++){var e=m['textTracks'][a];e['addEventListener']?e['removeEventListener']("cuechange",y):e['oncuechange']=null}m['textTracks']['removeEventListener']("change",c,!1),m['textTracks']['removeEventListener']("addtrack",b)}}function b(a){var e=a.track;if("metadata"===e.kind)e['mode']="showing",v(e),e['addEventListener']?e['addEventListener']("cuechange",y):e['oncuechange']=y;else{if(""===e.label||""===e.language)return;d({'track':e})}}function d(a){if(a){var e=a.track;if(a.trackId||!e.flag||"-1"===e.flag){e['flag']=e.flag||(e.label||"native")+"_"+k;var n={};n['kind']=e.kind,n['label']=e.label||"",n['lang']=a.lang||e.language||"",n['voId']=C['getExistingTrackId'](e.flag)['toString'](),n['flag']=e.flag,n['mode']=e.mode,k++,D['textTrackAdded'](n)}}}function c(){for(var a=0;a<m.textTracks.length;a++){var e=m['textTracks'][a];if("showing"===e.mode){if("metadata"===e.kind)v(e);else{var n=C['getExistingTrackId'](e.flag),l=D['isExSubtitleAsDefault']();l&&!f&&(!e.flag||e.flag&&e['flag']['indexOf']("external")<0)&&(n=C['getExistingTrackId']("external")),n>=0&&(C['subtitleTrackSwitch']({'id':n},!0),s['trigger'](r["default"].VO_INTERNAL_TEXT_TRACKS_CHANGED,{'voId':n['toString']()}))}break}}}function p(a){M=-1===a?!0:!1,C['subtitleTrackSwitch']({'id':a},!0),f=!0,D['updateCurTextTrack']()}function w(a){C&&C['setSubtitleStyles'](a)}function x(){return C?C['getDefaultSubtitleStyles']():null}function v(a){return M?(a['mode']="hidden",!0):C['isHasDefaultTrack']()&&C['getCurrentTrackIdx']()!==C['getExistingTrackId'](a.flag)?(a['mode']="hidden",!0):!1}function y(){C['removeTTMLRenderingDiv']();var a=void 0,e=void 0;if((!this.activeCues.length||(a=this['activeCues'][0],e=a.track,"metadata"===e.kind))&&a&&a.value&&a.value.info){var n=a.value['info']['match'](/Lang\:(\S*)/);if(!n)return;var l=n[1],E=a.value.data;e['renderingType']="html";var o=C['getExistingTrackId'](e.flag);if(-1===o&&(d({'track':e,'lang':l}),o=C['getExistingTrackId'](e.flag)),v(e))return;C['subtitleTrackSwitch']({'id':o}),s['trigger'](r["default"].VO_INTERNAL_TEXT_TRACKS_CHANGED,{'voId':o['toString']()});for(var i=D['checkDataType'](E),t=D['getParser'](i),b=t['parse'](E,a.startTime),c=0;c<b.length;c++){var p=b[c],w=C['createCueForHtml'](p,0);C['renderCaption'](w)}}}var h=this.context,s=h.eventBus,D=void 0,m=void 0,C=void 0,f=void 0,g=void 0,k=void 0,M=void 0,P={'initSubtitleInfo':a,'reset':l,'setVideo':o,'switchTextTrack':p,'setSubtitleStyles':w,'getDefaultSubtitleStyles':x};return P}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(12),r=l(t);E['className']="TextController",n["default"]=i["default"]['getSingletonFactory'](E)},{'12':12,'3':3}],'326':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){k=a,k&&(U=k.maxLicenseRequestRetries,S=k.licenseRequestRetryDelay),N['log']("CertificatePath: "+k.certificateUrl+" ProcessSPCPath: "+k.laUrl)}function e(){N['log']("loadCertificate");var a,e=new XMLHttpRequest;if(e['responseType']="arraybuffer",e['addEventListener']("load",n,!1),e['addEventListener']("error",l,!1),e['open']("GET",k.certificateUrl,!0),k&&k.certificateHeaders)for(a in k.certificateHeaders)e['setRequestHeader'](a,k['certificateHeaders'][a]);e['send']()}function n(a){N['log']("onCertificateLoaded");var e=a.target;M=k&&k.processCertificate?k['processCertificate'](e.response):new Uint8Array(e.response),O['trigger'](x["default"].VO_INTERNAL_CERTIFICATE_LOADED)}function l(){T=d["default"].VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL,u="Failed to retrieve the server certificate.",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0})}function E(a){for(var e=new ArrayBuffer(2*a.length),n=new Uint16Array(e),l=0,E=a.length;E>l;l++)n[l]=a['charCodeAt'](l);return n}function o(a){if(k&&k['useUint8InitData']===!0){var e=new Uint8Array(a.buffer);return String['fromCharCode']['apply'](null,e)}var n=new Uint16Array(a.buffer);return String['fromCharCode']['apply'](null,n)}function i(a){var e=o(a);return k&&k.extractContentId?k['extractContentId'](e):e['split']("skd://")[1]}function t(a,e,n){"string"==typeof e&&(e=E(e));var l=0,o=new ArrayBuffer(a.byteLength+4+e.byteLength+4+n.byteLength),i=new DataView(o),t=new Uint8Array(o,l,a.byteLength);t['set'](a),l+=a.byteLength,i['setUint32'](l,e.byteLength,!0),l+=4;var r=new Uint16Array(o,l,e.length);r['set'](e),l+=r.byteLength,i['setUint32'](l,n.byteLength,!0),l+=4;var b=new Uint8Array(o,l,n.byteLength);return b['set'](n),new Uint8Array(o,0,o.byteLength)}function b(){WebKitMediaKeys['isTypeSupported']("com.apple.fps.1_0","video/mp4")?P="com.apple.fps.1_0":(T=d["default"].VO_OSMP_DRM_ERR_SELECT_KEY_SYSTEM_FAIL,u="The Key System is not supported",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0}))}function c(a){for(var e=window['atob'](a),n=e.length,l=new Uint8Array(new ArrayBuffer(n)),E=0;n>E;E++)l[E]=e['charCodeAt'](E);return l}function w(a){for(var e,n,l,E,o,i,t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b="",d=0;d<a.length;)e=a[d++],n=d<a.length?a[d++]:Number.NaN,l=d<a.length?a[d++]:Number.NaN,E=e>>2,o=(3&e)<<4|n>>4,i=(15&n)<<2|l>>6,t=63&l,isNaN(n)?i=t=64:isNaN(l)&&(t=64),b+=r['charAt'](E)+r['charAt'](o)+r['charAt'](i)+r['charAt'](t);return b}function v(a,e,n){n['addEventListener'](a,function(){e(arguments[0])},!1)}function y(a){N['log']("onneedkey");var e=a.target,n=a.initData,l=i(n);n=t(n,l,M),e.webkitKeys||(b(),e['webkitSetMediaKeys'](new WebKitMediaKeys(P))),e.webkitKeys||(T=d["default"].VO_OSMP_DRM_ERR_KEY_FAIL,u="Failed to create MediaKeys",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0}));var E=e['webkitKeys']['createSession']("video/mp4",n);E||(T=d["default"].VO_OSMP_DRM_ERR_KEY_SESSION_FAIL,u="Failed to create key session",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0})),E['contentId']=l,v("webkitkeymessage",s,E),v("webkitkeyadded",f,E),v("webkitkeyerror",C,E)}function h(){var a=new XMLHttpRequest;if(k&&k.licenseResponseType?a['responseType']=k.licenseResponseType:a['responseType']="arraybuffer",k&&k['withCredentials']===!0&&(a['withCredentials']=!0),a['session']=R,a['addEventListener']("load",D,!1),a['addEventListener']("error",m,!1),a['open']("POST",k.laUrl,!0),k&&k.headers){var e;for(e in k.headers)a['setRequestHeader'](e,k['headers'][e])}else a['setRequestHeader']("Content-type","application/x-www-form-urlencoded");a['send'](A)}function s(a){N['log']("licenseRequestReady");var e=a.target,n=a.message;a['messageBase64Encoded']=w(a.message);var l;l=k&&k.buildMessage?k['buildMessage'](a,e):n,R=e,A=l,I=U,h()}function D(a){var e=a.target,n=e.session;if(N['log']("licenseRequestLoaded, request.status = ",e.status),200==e.status)if(k&&k.processLicenseAsync)k['processLicenseAsync'](e.response)['then'](function(a){n['update'](a)},function(a){a&&(T=d["default"].VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL,u="processLicenseAsync failed",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0}))});else{var l;l=k&&k.processLicense?k['processLicense'](e.response):new Uint8Array(e.response),k&&k['isResponseBase64Encode']===!0&&(l=c(l)),n['update'](l)}else m()}function m(){I>0?(N['log']("Retries = ",I),I--,setTimeout(function(){h()},S)):(T=d["default"].VO_OSMP_DRM_ERR_LICENSE_REQUEST_FAIL,u="Failed to request the license.",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0}))}function C(){T=d["default"].VO_OSMP_DRM_ERR_DECRYPT_FAIL,u="A decryption key error was encountered.",J['handleError']({'error':"key_session",'errorId':T,'message':u,'fatal':!0})}function f(){N['log']("Decryption key was added to session.")}function g(a){a&&a.html5ErrorHandler&&(J=a.html5ErrorHandler)}var k=void 0,M=void 0,P=void 0,T=void 0,u=void 0,A=void 0,R=void 0,S=void 0,U=void 0,I=void 0,J=void 0,L=this.context,N=r["default"](L)['getInstance'](),O=p["default"](L)['getInstance'](),V={'init':a,'loadCertificate':e,'onneedkey':y,'setConfig':g};return V}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(6),r=l(t),b=a(8),d=l(b),c=a(9),p=l(c),w=a(12),x=l(w);E['className']="voFairPlayProtection",n["default"]=i["default"]['getSingletonFactory'](E)},{'12':12,'3':3,'6':6,'8':8,'9':9}],'327':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(a){}function e(a){a&&(i['log'](a.message),o['trigger'](l.VO_INTERNAL_ERROR,{'error':a.error,'errorId':a.errorId,'message':a.message,'fatal':a.fatal}),a.fatal&&(E['onError'](a.errorId,a.message),o['trigger'](l.VO_INTERNAL_STREAM_ENDED,{'endCause':"TERMINATED_BY_APP"})))}var n=this.context,l=n.voInternalEvents,E=n.eventDelegate,o=n.eventBus,i=n.debug,t={'setConfig':a,'handleError':e};return t}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o);E['className']="voHtml5ErrorHandler",n["default"]=i["default"]['getSingletonFactory'](E)},{'3':3}],'328':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(){function a(){e(),La&&(Ia=d["default"](ua)['getInstance']())}function e(){ua.voSubtitlesPlugin&&(La||(La=ua['voSubtitlesPlugin'](ua)['getInstance']()))}function n(a){Va=a,La&&La['init']()}function l(){ja&&Pa&&(Sa['onOpenStart'](),Pa['src']=ja,Aa['isSafari']()&&Pa['load'](),qa=!1)}function E(a){ja=a.uri,a.drm&&a.drm.fairplay?(Na=r["default"](ua)['getInstance'](),Na['init'](a.drm.fairplay),Na['setConfig']({'html5ErrorHandler':Ja}),Ua['on'](Ra.VO_INTERNAL_CERTIFICATE_LOADED,o,null),Na['loadCertificate']()):l(),Ta=!0,Ia&&Ia['initSubtitleInfo']()}function o(){Pa&&(Pa['addEventListener']("webkitneedkey",Na.onneedkey,!1),Ua['off'](Ra.VO_INTERNAL_CERTIFICATE_LOADED,o,null),l())}function i(a){a.video&&(Pa=a.video,Pa['preload']="auto",K(),La&&Aa['isTTMLSupported']()&&(La['setElement'](Pa),La['setTTMLRenderingDiv'](a.captionContainer)),Ia&&Ia['setVideo'](Pa))}function t(){return Pa?Pa['play']():{'name':"OtherError",'message':"Initialization is not completed !"}}function b(){Pa['pause']()}function c(){return Pa.paused}function w(){Pa['removeAttribute']("src"),Pa['load']()}function v(){w(),Na=null,Q(),Ia&&Ia['reset'](),La&&(La['reset'](),La['setSubtitleStyles'](null))}function y(a){a>=s()&&(a=s()-.7),Pa['currentTime']=a,c()&&(z(a)||Sa['onPlayWaiting']())}function h(){return Pa.currentTime}function s(){return Pa.duration}function D(){for(var a={'start':0,'end':0},e=0;e<Pa.seekable.length;e++){a['start']=Pa['seekable']['start'](e),a['end']=Pa['seekable']['end'](e);break}return a}function m(){return isFinite(Pa.duration)?!1:!0}function C(){Pa['muted']=!0}function f(){Pa['muted']=!1}function g(){return Pa.muted}function k(){return Pa.ended}function M(a){Pa['volume']=a}function P(){return Pa.volume}function T(a){Oa=L(a)?Pa['audioTracks'][a]:null}function u(a){if(La&&Ia){var e=La['selectSubtitle'](a);Ia['switchTextTrack'](e)}}function A(){Oa&&(Oa['enabled']=!0)}function R(){return Pa.videoTracks&&Pa.videoTracks.length>0?1:0}function S(){return Pa.audioTracks?Pa.audioTracks.length:0}function U(){return La?La['getSubtitleCount']():0}function I(){return Pa.videoTracks&&Pa.videoTracks.length>0||Pa.videoHeight>0&&Pa.videoWidth>0?!1:!0}function J(a){return 0===a&&Pa.videoTracks.length>0}function L(a){return a>=0&&a<Pa.audioTracks.length}function N(a){return La?La['isSubtitleAvailable'](a):!1}function O(){return{'width':Pa.width,'height':Pa.height}}function V(a){var e=null;if(a<Pa.audioTracks.length){var n=Pa['audioTracks'][a];e={'index':a,'lang':n.language,'type':n.kind,'name':n.label}}return e}function j(a){return La?La['getSubtitleProperty'](a):null}function q(){for(var a=h(),e=0;e<Pa.buffered.length;++e)if(a>=Pa['buffered']['start'](e)&&a<=Pa['buffered']['end'](e))return Pa['buffered']['end'](e)-a;return 0}function z(a){for(var e=0;e<Pa.buffered.length;++e)if(a>=Pa['buffered']['start'](e)&&a<=Pa['buffered']['end'](e))return!0;return!1}function B(){return La?La['getSubtitleIndex']():-1}function F(a){La&&La['selectSubtitle'](a)}function G(){var a=-1;if(Pa.audioTracks)for(var e=0;e<Pa.audioTracks.length;++e)if(Pa['audioTracks'][e].enabled){a=e;break}return{'bitrateAdaptation':!0,'video':0,'audio':a,'subtitle':B()}}function H(){}function K(){Pa&&(Pa['addEventListener']("canplay",W),Pa['addEventListener']("durationchange",X),Pa['addEventListener']("loadedmetadata",Y),Pa['addEventListener']("play",Z),Pa['addEventListener']("pause",_),Pa['addEventListener']("seeking",aa),Pa['addEventListener']("seeked",ea),Pa['addEventListener']("timeupdate",na),Pa['addEventListener']("progress",la),Pa['addEventListener']("ended",Ea),Pa['addEventListener']("volumechange",oa),Pa['addEventListener']("error",fa),Pa['addEventListener']("playing",$),Pa['addEventListener']("waiting",ia),Pa['addEventListener']("ratechange",ta),Pa['addEventListener']("loadeddata",ra),Pa['addEventListener']("loadstart",ba))}function Q(){Pa&&(Pa['removeEventListener']("canplay",W),Pa['removeEventListener']("durationchange",X),Pa['removeEventListener']("loadedmetadata",Y),Pa['removeEventListener']("play",Z),Pa['removeEventListener']("pause",_),Pa['removeEventListener']("seeking",aa),Pa['removeEventListener']("seeked",ea),Pa['removeEventListener']("timeupdate",na),Pa['removeEventListener']("progress",la),Pa['removeEventListener']("ended",Ea),Pa['removeEventListener']("volumechange",oa),Pa['removeEventListener']("playing",$),Pa['removeEventListener']("waiting",ia),Pa['removeEventListener']("ratechange",ta),Pa['removeEventListener']("loadeddata",ra),Pa['removeEventListener']("loadstart",ba))}function W(){Ta&&(Ta=!1,Sa['onOpenComplete']()),Sa['onCanPlay']()}function X(){qa=!0}function Y(){na(),la(),Ua['trigger'](Ra.VO_INTERNAL_REPORT_MANIFEST_INFO,{'mediaDuration':Pa.duration,'live':!isFinite(Pa.duration)})}function Z(){Sa['onProgramChanged'](),Sa['onPlayStarted']()}function $(){Sa['onPlayPlaying']()}function _(){Sa['onPlayPaused']()}function aa(){Sa['onSeekStart']()}function ea(){Sa['onSeekComplete']()}function na(){if(qa){var a=h(),e=s(),n=m(),l=D();Sa['onPlayTimeUpdated']({'position':a,'duration':e,'live':n,'range':l})}}function la(){var a=q()||0;Sa['onPlayProgress']({'validBufferLength':a})}function Ea(){Sa['onPlayCompleted']()}function oa(){Sa['onPlayVolumeChanged']()}function ia(){Sa['onPlayWaiting']()}function ta(){Ua['trigger'](Ra.VO_INTERNAL_MEDIA_RATECHANGE)}function ra(){Ua['trigger'](Ra.VO_INTERNAL_MEDIA_LOADEDDATA)}function ba(){Ua['trigger'](Ra.VO_INTERNAL_MEDIA_LOADSTART)}function da(a){Pa&&(Pa['playbackRate']=a)}function ca(){var a=[];if(Pa&&Pa.videoTracks)for(var e=0;e<Pa.videoTracks.length;e++){var n={};n['id']=e['toString'](),a['push'](n)}return a}function pa(){var a=[];if(Pa&&Pa.audioTracks)for(var e=0;e<Pa.audioTracks.length;e++){var n=Pa['audioTracks'][e],l={};l['id']=e['toString'](),l['lang']=n.language,l['type']=n.kind,l['name']=n.label,a['push'](l)}return a}function wa(){return La?La['getSubtitleTracks']():[]}function xa(){}function va(a){if(Pa&&Pa.audioTracks&&0!==Pa.audioTracks.length)if(""===a)for(var e=0;e<Pa.audioTracks.length;e++){var n=Pa['audioTracks'][e];n['enabled']=!1}else{var l=parseInt(a);l>=0&&l<Pa.audioTracks.length&&(Pa['audioTracks'][l]['enabled']=!0)}}function ya(a){if(Ia){var e=B();if(""===a)-1!==e&&(e=-1,F(e),Ia['switchTextTrack'](e));else{for(var n=!1,l=wa(),E=0;E<l.length;E++){var o=l[E];if(o['id']===a&&e!==E){e=E,F(e),n=!0;break}}n&&Ia['switchTextTrack'](e)}}}function ha(){var a={};do{if(!Pa)break;Pa.videoWidth>0&&Pa.videoHeight>0&&(a['width']=Pa.videoWidth,a['height']=Pa.videoHeight)}while(!1);return a}function sa(){var a={};if(Pa&&Pa.audioTracks){for(var e=void 0,n=0;n<Pa.audioTracks.length;n++){var l=Pa['audioTracks'][n];if(l['enabled']===!0){e=n['toString']();break}}if(e)for(var E=pa(),o=0;o<E.length;o++){var i=E[o];if(i['id']===e){a=i;break}}}return a}function Da(){return La?La['getCurrentSubtitleTrack']():{}}function ma(a){La&&La['setSubtitleStyles'](a)}function Ca(){return La?La['getDefaultSubtitleStyles']():{}}function fa(a){var e=a.target||a.srcElement,n=e.error;if(n){var l="";switch(n.code){case 1:l="MEDIA_ERR_ABORTED";break;case 2:l="MEDIA_ERR_NETWORK";break;case 3:l="MEDIA_ERR_DECODE";break;case 4:l="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:l="MEDIA_ERR_ENCRYPTED";break;default:l="UNKNOWN"}n.message&&(l+=" ("+n.message+")"),n.msExtendedCode&&(l+=" (0x"+(n.msExtendedCode>>>0)['toString'](16)['toUpperCase']()+")");var E=l['match'](/^Video/)?x["default"].VO_OSMP_SRC_ERR_CONTENT_PARSE_FAIL:x["default"].VO_OSMP_SRC_ERR_SOURCE_BUFFER_ERROR;Ja['handleError']({'error':"mediasource",'errorId':E,'message':l,'fatal':!0})}}function ga(){if(!m())return NaN;var a=h();return isNaN(a)||0===a?0:(Math['round']((new Date)['getTime']()-1e3*a)/1e3)['toFixed'](3)}function ka(){return h()?new Date(parseFloat((1e3*h())['toFixed'](3))):NaN}function Ma(a,e){e(null)}var Pa=void 0,Ta=!1,ua=this.context,Aa=ua.commonUtil,Ra=ua.voInternalEvents,Sa=ua.eventDelegate,Ua=ua.eventBus,Ia=void 0,Ja=p["default"](ua)['getInstance'](),La=void 0,Na=void 0,Oa=void 0,Va=void 0,ja=null,qa=void 0,za={'init':n,'open':E,'setView':i,'play':t,'pause':b,'isPaused':c,'stop':w,'close':v,'setPosition':y,'getPosition':h,'getDuration':s,'getSeekableRange':D,'isLive':m,'mute':C,'unmute':f,'isMuted':g,'isEnded':k,'setVolume':M,'getVolume':P,'selectVideo':H,'selectAudio':T,'selectSubtitle':u,'commitSelection':A,'getVideoCount':R,'getAudioCount':S,'getSubtitleCount':U,'isPureAudio':I,'isVideoAvailable':J,'isAudioAvailable':L,'isSubtitleAvailable':N,'getVideoProperty':O,'getAudioProperty':V,'getSubtitleProperty':j,'getValidBufferDuration':q,'getCurrentSelection':G,'setAudioPlaybackSpeed':da,'getQualityLevels':ca,'getAudioTracks':pa,'getSubtitleTracks':wa,'selectQualityLevel':xa,'selectAudioTrack':va,'selectSubtitleTrack':ya,'getCurrentQualityLevel':ha,'getCurrentAudioTrack':sa,'getCurrentSubtitleTrack':Da,'setSubtitleStyles':ma,'getDefaultSubtitleStyles':Ca,'getCurrentLiveLatency':ga,'getCurrentTimeForLocal':ka,'getThumbnail':Ma};return a(),za}Object['defineProperty'](n,"__esModule",{'value':!0});var o=a(3),i=l(o),t=a(326),r=l(t),b=a(325),d=l(b),c=a(327),p=l(c),w=a(8),x=l(w);E['className']="voHtml5Player",n["default"]=i["default"]['getClassFactory'](E)},{'3':3,'325':325,'326':326,'327':327,'8':8}],'329':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function i(){l(this,i),this['VO_OSMP_CB_CAST_STATE_CHANGED']="VO_OSMP_CB_CAST_STATE_CHANGED",this['VO_OSMP_CB_CAST_TIME_UPDATE']="VO_OSMP_CB_CAST_TIME_UPDATE"},o=new E;n["default"]=o},{}],'330':[function(a,e,n){"use strict";function l(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var E=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),o=function(){function a(){l(this,a),this['init']()}return E(a,[{'key':"init",'value':function(){this['COLOR_REGEXP']=/((\s|;|^)color\s*:\s*)[\w]+\(([\d]{1,3}(.?){1,2}){3}((\d*\.)?\d*)?\)/gi,this['BGCOLOR_REGEXP']=/(\s*background-color\s*:\s*)[\w]+\(([\d]{1,3}(.?){1,2}){3}((\d*\.)?\d*)?\)/gi,this['FS_REGEXP']=/(font-size\s*:\s*)[\d.,]+\s*\S*\s*(?=\s*;)/gi,this['FF_REGEXP']=/(font-family\s*:\s*)[\w.,]+(?=\s*;)/gi,this['FONTSTYLE_REGEXP']=/(font-style\s*:\s*)[\w]+/gi,this['TD_REGEXP']=/(text-decoration\s*:\s*)[\w]+/gi,this['FW_REGEXP']=/(font-weight\s*:\s*)[\w]+/gi,this['BBOX_REGEXP']={'LEFT':/((\s|;|^)left\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,'TOP':/((\s|;|^)top\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,'RIGHT':/((\s|;|^)right\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,'BOTTOM':/((\s|;|^)bottom\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,'WIDTH':/((\s|;|^)width\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi,'HEIGHT':/((\s|;|^)height\s*:\s*)[\d]*\s*\S*\s*(?=;)/gi},this['TEXT_ALIGN_REGEXP']=/(text-align\s*:\s*)[\w.]+%?(?=\s*;)/gi,this['VERTICAL_ALIGN_REGEXP']=/(vertical-align\s*:\s*)[\w.]+%?(?=\s*;)/gi,this['TRANSFORM_REGEXP']=/(-webkit-transform\s*:\s*)[\S]+(?=;)/gi,this['DISPLAY_REGEXP']=/((\s|;|^)diplay\s*:\s*)\s*\S*\s*(?=;)/gi,this['BG_OBJECT']={'COLOR':"color",'OPACITY':"opacity"},this['EDGE_STYLE']={'NONE':"none",'RAISED':"raised",'DEPRESSED':"depressed",'UNIFORM':"uniform",'LEFTDROP_SHADOW':"leftDropShadow",'RIGHTDROP_SHADOW':"rightDropShadow"},this['COLOR']={'RED':"red",'GREEN':"green",'BLUE':"blue",'CYAN':"cyan",'MAGENTA':"magenta",'YELLOW':"yellow",'WHITE':"white",'BLACK':"black"},this['VERPOSITION']={'TOP':"top",'MIDDLE':"middle",'BOTTOM':"bottom"},this['HORPOSITION']={'LEFT':"left",'CENTER':"center",'RIGHT':"right"},this['BBOX']={'LEFT':"left",'TOP':"top",'RIGHT':"right",'BOTTOM':"bottom",'WIDTH':"width",'HEIGHT':"height"},this['FTSIZE']={'FTSIZE_1':"50%",'FTSIZE_2':"75%",'FTSIZE_3':"100%",'FTSIZE_4':"150%",'FTSIZE_5':"200%",'FTSIZE_6':"300%",'FTSIZE_7':"400%"},this['BGCOLOR']="background-color",this['FF']="font-family",this['FS']="font-size",this['FW']="font-weight",this['TD']="text-decoration",this['FONTSTYLE']="font-style",this['FONTCOLOR']="color",this['TEXTSHADOW']="text-shadow",this['TEXTALIGN']="text-align",this['VERTICALALIGN']="vertical-align",this['TRANSFORM']="-webkit-transform",this['DISPLAY']="display",this['EMPTYSTRING']="",this['TEXT_SHOWING']="showing",this['TEXT_HIDDEN']="hidden",this['TEXT_DISABLED']="disabled",this['TEXT_KIND']="subtitles",this['TEXT_EXTERNAL']="external",this['TEXT_RENDER_TYPE']="html",this['STPP']="stpp",this['TTML']="ttml",this['VTT']="vtt",this['WVTT']="wvtt",this['WEBVTT']="WEBVTT",this['XML']="xml",this['SRT']="srt",this['CAPTIONS']="captions",this['VTTBOX']="vttbox",this['UTF8']="utf-8"}}]),a}(),i=new o;n["default"]=i},{}],'331':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a){for(var e="",n=0;n<a.length;++n){var l=a[n];e+=l.uchar}var E=e.length,o=e['replace'](/^\s+/,"").length;return E-o}function o(a,e){e="undefined"==typeof e?!0:e;var n=0;return e&&(a-=10),0===a?0:n=parseInt(10*a/25)+(0===parseInt(10*a%25)?0:1)+1}function i(a,e,n){if(n){var l=n(a.y1,a.y1,a.x,a.x2);return{'left':l.Left+"%",'top':l.Top+"%",'width':(e>0?e+4:100-l.Left)+"%",'height':Math['max'](l.Bottom-l.Top,6.66*(a.y2-1-a.y1))+"%"}}return{'left':3.125*a.x+"%",'top':6.66*a.y1+"%",'width':(e>0?e+4:100-3.125*a.x)+"%",'height':6.66*Math['max'](a.y2-1-a.y1,1)+"%"}}function t(a){for(var e=5381,n=a.length;n;)e=33*e^a['charCodeAt'](--n);return(e>>>0)['toString']()}function r(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!a)return a;switch(a['toLowerCase']()){case D["default"].COLOR.RED:return"rgba(255, 0, 0, "+e+")";case D["default"].COLOR.GREEN:return"rgba(0, 255, 0, "+e+")";case D["default"].COLOR.BLUE:return"rgba(0, 0, 255, "+e+")";case D["default"].COLOR.CYAN:return"rgba(0, 255, 255, "+e+")";case D["default"].COLOR.MAGENTA:return"rgba(255, 0, 255, "+e+")";case D["default"].COLOR.YELLOW:return"rgba(255, 255, 0, "+e+")";case D["default"].COLOR.WHITE:return"rgba(255, 255, 255, "+e+")";case D["default"].COLOR.BLACK:return"rgba(0, 0, 0, "+e+")";default:return a}}function b(a,e,n,l){var E=(a.clientWidth>0?a.clientWidth:a.parentNode.clientWidth)/15;e&&n&&(E=e.FontInfo.FontSize);var o=["font-size: "+E+"px;","font-family: Menlo, Consolas, 'Cutive Mono', monospace;","display: inline-block;","white-space: pre;"]['join'](" ");if(e)if(n){var i="rgba("+e.FontInfo.FontColor.Red+", "+e.FontInfo.FontColor.Green+", "+e.FontInfo.FontColor.Blue+", 1)";o+=["color: "+i+";","font-style: "+(e.FontEffectInfo.Italic?"italic":"normal")+";","text-decoration: "+(e.FontEffectInfo.Underline?"underline":"none")+";","background-color: "+(l.fillColor?l.fillColor:"transparent")+";","text-shadow:none;"]['join'](" ")}else o+=["color: "+(e.foreground?r(e.foreground):"rgba(255, 255, 255, 1)")+";","font-style: "+(e.italics?"italic":"normal")+";","text-decoration: "+(e.underline?"underline":"none")+";","background-color: "+(e.background?r(e.background):"rgba(0, 0, 0, 1)")+";"]['join'](" ");else o+=["justify-content: flex-start;","text-align: left;","color: rgba(255, 255, 255, 1);","font-style: normal;","line-height: normal;","font-weight: normal;","text-decoration: none;","width: 100%;"]['join'](" ");return o}function d(a){var e=a['replace'](/^\s+/g,"");return e}function c(a){var e=a['replace'](/\s+$/g,"");return e}function p(a,e){return D["default"]['EMPTYSTRING']===a?e:Math['min'](parseFloat(a),parseFloat(e))+"%"}function w(a,e){return D["default"]['EMPTYSTRING']===a?e:Math['max'](parseFloat(a),parseFloat(e))+"%"}function x(a,e){return D["default"]['EMPTYSTRING']===a?e:Math['min'](parseFloat(a),parseFloat(e))+"%"}function v(a,e,n){return n?D["default"]['EMPTYSTRING']===a?e:parseFloat(a)+parseFloat(e)+"%":D["default"]['EMPTYSTRING']===a?e:Math['max'](parseFloat(a),parseFloat(e))+"%"}function y(a,e,n){a&&e&&(a['left']=p(a.left,e.left),a['width']=w(a.width,e.width),a['top']=x(a.top,e.top),a['height']=v(a.height,e.height,n))}function h(a,e){a&&e&&(a.cssText+="align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;",a['left']=e.left)}Object['defineProperty'](n,"__esModule",{'value':!0}),n['convertHTMLCaptions']=void 0,n['createRGBA']=r,n['getStyle']=b;var s=a(330),D=l(s);n['convertHTMLCaptions']={'createHTMLCaptionsFromScreen':function(a,e,n,l,o){var r=null,p=null,w=!1,x=-1,v={'start':e,'end':n,'spans':[]},s="style_cea608_white_black",D={},m={},C=[],f=void 0,g=void 0;if(l.is708cc)return this['createHTMLCaptionsFrom708Screen'](a,e,n,l,o);for(f=0;15>f;++f){var k=l['rows'][f],M="",P=null;if(!1===k['isEmpty']()){var T=E(k.chars);null===r&&(r={'x':T,'y1':f,'y2':f+1,'p':[]}),T!==x&&w&&(r['p']['push'](v),v={'start':e,'end':n,'spans':[]},r['y2']=f,r['name']="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===D['hasOwnProperty'](r.name)?(C['push'](r),D[r.name]=r):(p=D[r.name],p['p']['concat'](r.p)),r={'x':T,'y1':f,'y2':f+1,'p':[]});for(var u=0;u<k.chars.length;++u){var A=k['chars'][u],R=A.penState;if(null===P||!R['equals'](P)){M['trim']().length>0&&(v['spans']['push']({'name':s,'line':M,'row':f}),M="");var S="style_cea608_"+R.foreground+"_"+R.background;R.underline&&(S+="_underline"),R.italics&&(S+="_italics"),m['hasOwnProperty'](S)||(m[S]=JSON['parse'](JSON['stringify'](R))),P=R,s=S}M+=A.uchar}M['trim']().length>0&&v['spans']['push']({'name':s,'line':M,'row':f}),w=!0,x=T}else w=!1,x=-1,r&&(r['p']['push'](v),v={'start':e,'end':n,'spans':[]},r['y2']=f,r['name']="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===D['hasOwnProperty'](r.name)?(C['push'](r),D[r.name]=r):(p=D[r.name],p['p']['concat'](r.p)),r=null)}r&&(r['p']['push'](v),r['y2']=f+1,r['name']="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===D['hasOwnProperty'](r.name)?(C['push'](r),D[r.name]=r):(p=D[r.name],p['p']['concat'](r.p)),r=null);var U=[],I=document['createElement']("div");I['style']['cssText']="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none; padding-left: 10px; padding-right: 10px; justify-content: flex-start;";var J=document['createElement']("div");J['className']="paragraph bodyStyle",J['style']['cssText']=b(a);var L=document['createElement']("div");L['className']="cueUniWrapper",L['style']['cssText']="unicode-bidi: normal; direction: ltr;";var N=0,O=!0,V=0;for(f=0;f<C.length;++f)for(var j=C[f],q=0;q<j.p.length;++q){var z=j['p'][q];for(g=0;g<z.spans.length;++g){var B=z['spans'][g];if(B.line.length>0){if(!O&&N!==B.row){var F=document['createElement']("br");F['className']="lineBreak",L['appendChild'](F),V=0}var G=!1;N===B.row&&(G=!0),N=B.row,O=!1;var H=m[B.name],K=document['createElement']("span");K['className']="span "+B.name+" customSpanColor",K.style.cssText+=b(a,H),0!==g&&G?g===z.spans.length-1?K['textContent']=c(B.line):K['textContent']=B.line:0===g&&z.spans.length>1&&B['row']===z['spans'][1].row?K['textContent']=d(B.line):K['textContent']=B['line']['trim'](),V+=K.textContent.length,y(I.style,i(j,K.textContent.length),!G),h(K.style,i(j,K.textContent.length)),L['appendChild'](K)}}}J['appendChild'](L),I['appendChild'](J),I['id']="sub_cea608_"+t(e)+t(n)+t(I.textContent);var Q={'bodyStyle':["%",90]};for(g in m)m['hasOwnProperty'](g)&&(Q[g]=["%",90]);return U['push']({'type':"html",'start':e,'end':n,'cueHTMLElement':I,'cueID':I.id,'cellResolution':[32,15],'isFromHTMLCaptions':!0,'regions':C,'videoHeight':a.clientHeight,'videoWidth':a.clientWidth,'fontSize':Q,'lineHeight':{},'linePadding':{}}),U},'createHTMLCaptionsFrom708Screen':function(a,e,n,l,r){var p=null,w=null,x=!1,v=-1,s={'start':e,'end':n,'spans':[]},D="style_cea708_white_black",m={},C={},f=[],g=[],k=void 0,M=void 0,P=void 0,T=[];for(k=0;k<l.captionArray.length;k++){var u=l['captionArray'][k];if(!u)return T;if(e=u.cueStartTime,n=u.cueEndTime,e&&n&&e!=n){var A="rgb("+u.rectInfo.RectFillColor.Red+", "+u.rectInfo.RectFillColor.Green+", "+u.rectInfo.RectFillColor.Blue+")",R="rgb("+u.rectInfo.RectBorderColor.Red+", "+u.rectInfo.RectBorderColor.Green+", "+u.rectInfo.RectBorderColor.Blue+")";g={'windID':k,'rect':{'top':u.rectInfo.Rect.Top,'left':u.rectInfo.Rect.Left,'bottom':u.rectInfo.Rect.Bottom,'right':u.rectInfo.Rect.Right},'borderType':u.rectInfo.RectBorderType,'borderColor':R,'fillColor':A,'effectDirection':u.rectInfo.RectDisplayEffect.EffectDirection,'effectSpeed':u.rectInfo.RectDisplayEffect.EffectSpeed,'effectType':u.rectInfo.RectDisplayEffect.EffectType};var S=o(u.rectInfo.Rect.Left);for(M=0;M<u.rowCnt;M++){var U=u['rowTextInfos'][M],I="",J=null;if(!1===U['isEmpty']()){var L=E(U.text);null===p&&(p={'x':L+S,'y1':M,'y2':M+1,'x2':L+U.pos-1,'p':[]}),L!==v&&x&&(p['p']['push'](s),s={'start':e,'end':n,'spans':[]},p['y2']=M,p['name']="region_"+p.x+"_"+p.y1+"_"+p.y2,!1===m['hasOwnProperty'](p.name)?(f['push'](p),m[p.name]=p):(w=m[p.name],w['p']['concat'](p.p)),p={'x':L+S,'y1':M,'y2':M+1,'x2':L+U.pos-1,'p':[]});for(var N=0;N<U.text.length;++N){var O=U['text'][N],V=O.CharInfo;if(null===J||!V['equals'](J)){I['trim']().length>0&&(s['spans']['push']({'name':D,'line':I,'row':M}),I="");var j="rgb("+V.FontInfo.FontColor.Red+", "+V.FontInfo.FontColor.Green+", "+V.FontInfo.FontColor.Blue+")",q="rgb("+V.FontEffectInfo.EdgeColor.Red+", "+V.FontEffectInfo.EdgeColor.Green+", "+V.FontEffectInfo.EdgeColor.Blue+")",z="style_cea708_fontColor_"+j+"_"+V.FontInfo.FontStyle+"_"+V.FontInfo.FontSize+"_fontEdgeColor_"+q+"_"+V.FontEffectInfo.EdgeType+"_background_"+A+"_"+V.FontEffectInfo.OffSet+"_"+V.FontEffectInfo.TextTag;V.FontEffectInfo.Underline&&(z+="_underline"),V.FontEffectInfo.Italic&&(z+="_italics"),C['hasOwnProperty'](z)||(C[z]=JSON['parse'](JSON['stringify'](V))),J=V,D=z}I+=O.uchar}I['trim']().length>0&&s['spans']['push']({'name':D,'line':I,'row':M}),x=!0,v=L}else x=!1,v=-1,p&&(p['p']['push'](s),s={'start':e,'end':n,'spans':[]},p['y2']=M,p['name']="region_"+p.x+"_"+p.y1+"_"+p.y2,!1===m['hasOwnProperty'](p.name)?(f['push'](p),m[p.name]=p):(w=m[p.name],w['p']['concat'](p.p)),p=null)}p&&(p['p']['push'](s),p['y2']=M+1,p['name']="region_"+p.x+"_"+p.y1+"_"+p.y2,!1===m['hasOwnProperty'](p.name)?(f['push'](p),m[p.name]=p):(w=m[p.name],w['p']['concat'](p.p)),p=null);var B=document['createElement']("div");B['style']['cssText']="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none; padding-left: 10px; padding-right: 10px;";var F=document['createElement']("div");
F['className']="paragraph bodyStyle",F.style.cssText+=b(a);var G=document['createElement']("div");G['className']="cueUniWrapper",G['style']['cssText']="unicode-bidi: normal; direction: "+(g.effectDirection?g.effectDirection:"ltr")+"; white-space:nowrap;";var H=0,K=!0,Q=0;for(M=0;M<f.length;++M)for(var W=f[M],X=0;X<W.p.length;++X){var Y=W['p'][X];for(P=0;P<Y.spans.length;++P){var Z=Y['spans'][P];if(Z.line.length>0){if(!K&&H!==Z.row){var $=document['createElement']("br");$['className']="lineBreak",G['appendChild']($),Q=0}var _=!1;H===Z.row&&(_=!0),H=Z.row,K=!1;var aa=C[Z.name],ea=document['createElement']("span");ea['className']="span "+Z.name+" customSpanColor",ea.style.cssText+=b(a,aa,!0,g),0!==P&&_?P===Y.spans.length-1?ea['textContent']=c(Z.line):ea['textContent']=Z.line:0===P&&Y.spans.length>1&&Z['row']===Y['spans'][1].row?ea['textContent']=d(Z.line):ea['textContent']=Z['line']['trim'](),Q+=ea.textContent.length,y(B.style,i(W,Q,r),!_),h(ea.style,i(W,Q,r)),G['appendChild'](ea)}}}F['appendChild'](G),B['appendChild'](F),B['id']="sub_cea708_"+t(e)+t(n)+t(B.textContent);var na={'bodyStyle':["%",50]};for(P in C)C['hasOwnProperty'](P)&&(na[P]=["%",50]);return T['push']({'type':"html",'start':e,'end':n,'cueHTMLElement':B,'cueID':B.id,'cellResolution':[32,15],'isFromHTMLCaptions':!0,'regions':{'windRegion':g,'regions':f},'videoHeight':a.clientHeight,'videoWidth':a.clientWidth,'fontSize':na||{'defaultFontSize':"100"},'lineHeight':{},'linePadding':{}}),T}}},'createHTMLCaptionsFromVTT':function(a,e){if(!a||!e)return null;var n=function(a,e,n){if(!a||!a.length)return null;var l=document['createElement']("div");l['className']="cueUniWrapper",l['style']['cssText']=["unicode-bidi: normal;","direction: ltr;","position: absolute;","width: 100%;","bottom:0%;"]['join'](" ");var E=[],o=0,i=!1,t=!1,r=!1,b=!1,d=0,c=0,p=function(a,n,l,E,o,i){if(a&&n&&n.length){var t=document['createElement']("span");t.style.cssText+=e,t['textContent']=n,t['style']['fontWeight']=l?"bold":"normal",t['style']['fontStyle']=E?"italic":"normal",t['style']['textDecoration']=o?"underline":"none",t['style']['fontSize']=i,a['appendChild'](t)}},w=function(){var a=document['createElement']("br");a['className']="lineBreak",l['appendChild'](a)},x=function(a){if(!a||!a.length)return null;-1!==a['indexOf']("\n")&&(a=a['split']("\n")['join'](""));for(var e=a['indexOf']("<");-1!==e;){var n=a['indexOf'](">");-1!==n&&n>e&&(a=a['slice'](0,e)+a['slice'](n+1)),e=a['indexOf']("<")}return a},v=function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(a&&a.length)for(var n=a['indexOf']("\n");-1!==n&&!(e>=0&&n>e);)E['push'](a['slice'](n)),a=a['slice'](n+1),n=a['indexOf']("\n")},y=function(a){for(var e=a['indexOf']("<");-1!==e;)v(a,e),E['push'](a['slice'](e)),a=a['slice'](e+1),e=a['indexOf']("<");v(a)};E['push'](a),-1!==a['indexOf']("<")?y(a):v(a),o=0;for(var h="";o<E.length;){for(;!E[o];)o++;if("\n"===E[o][0]){if(1===E[o].length)break;E[o]=E[o]['slice'](1),b=!0}else"<"===E[o][0]&&("/"===E[o][1]?"b"===E[o][2]?t=!1:"i"===E[o][2]?i=!1:"u"===E[o][2]&&(r=!1):"b"===E[o][1]?t=!0:"i"===E[o][1]?i=!0:"u"===E[o][1]&&(r=!0));b&&(c++,w(),b=!1),d=o===E.length-1?E[o].length:E[o].length-E[o+1].length,h=E[o]['slice'](0,d),h=x(h),p(l,h,t,i,r,n),o++}return{'cueUniWrapper':l,'lineNum':c+1}},l=isFinite(e.line)?100-parseInt(e.line):0,E=e.position;"auto"===E&&(E="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50);var o=isFinite(E)?parseInt(E):0;o=o>90?90:o;var i="center";"start"===e.align||"left"===e.align?i="left":("end"===e.align||"right"===e.align)&&(i="right");var r=e.size?e.size+"%":"16px",b=["position: absolute;","left: 0%;","bottom: "+l+"%;","height: 6.66%;","width: 100%;","align-items: flex-start;","overflow: visible;","text-align: "+i+";","padding-left: 10px;","padding-right: 10px;","-webkit-writing-mode: horizontal-tb;"]['join'](" "),d=["font-family: Menlo, Consolas, 'Cutive Mono', monospace;","justify-content: flex-start;","color: rgba(255, 255, 255, 1);","font-style: normal;","white-space: pre;","line-height: normal;","font-weight: normal;","text-decoration: none;","text-align: "+i+";","padding-left: 10px;","padding-right: 10px;","display: inline-block;","background-color: rgba(0, 0, 0, 1);","line-height: normal;","white-space:normal;","word-wrap:break-word;","word-break:normal;"]['join'](" "),c=document['createElement']("div");c['id']=e.id?e.id:t(e.startTime)+t(e.endTime)+t(e.text),c['style']['cssText']="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none; "+b;var p=n(e.text,d,r);return p&&(c['style']['height']=6.66*p.lineNum+"%",parseFloat(c.style.bottom)+parseFloat(c.style.height)>=100&&(c['style']['bottom']="",c['style']['top']="0%",p.cueUniWrapper['style']['bottom']="",p.cueUniWrapper['style']['top']="0%"),c['appendChild'](p.cueUniWrapper)),{'type':"html",'start':e.startTime,'end':e.endTime,'cueHTMLElement':c,'cueID':c.id,'cellResolution':[32,15],'videoHeight':a.clientHeight,'videoWidth':a.clientWidth,'lineHeight':{},'linePadding':{},'isFromHTMLCaptions':!0}}}},{'330':330}],'332':[function(a,e,n){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object['defineProperty'](n,"__esModule",{'value':!0});var o=function(){function a(a,e){for(var n=0;n<e.length;n++){var l=e[n];l['enumerable']=l.enumerable||!1,l['configurable']=!0,"value"in l&&(l['writable']=!0),Object['defineProperty'](a,l.key,l)}}return function(e,n,l){return n&&a(e.prototype,n),l&&a(e,l),e}}(),i=a(2),t=l(i),r="voKeySkip:1;position: relative;margin-left: 0px;width:100%;height:100%;",b="voKeySkip:1;position:absolute;width:100%; height:100%;background-color:black;",d="voKeySkip:1;position:absolute;width:100%;height:100%;",c="voKeySkip:1;position:absolute;width:100%;height:100%;top:0;left:0;display:-moz-flex;display:-webkit-flex;display:-ms-flex;display:flex;overflow:hidden;pointer-events:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;}",p="voKeySkip:1;position:absolute;width:100%;height:100%;pointer-events:none;",w="voKeySkip:1;position:absolute;top:50%;left:50%;-moz-transform:translateX(-50%) translateY(-50%);-webkit-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%);background-color:black;color:white;font-size:2.5rem;z-index:1;pointer-events:none;display:none;",x="voKeySkip:1;transform:translateX(0) translateY(0);-ms-transform:translateX(0) translateY(0);-moz-transform:translateX(0) translateY(0);-webkit-transform:translateX(0) translateY(0);width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center;background-color:black;position:relative;",v="voKeySkip:1;width:100%;height:100%;position:absolute;display:block;",y="voKeySkip:1;position:absolute;z-index:2;top:5%;right:5%;width:10%",h="voKeySkip:1;width:100%;border:0;padding:0;outline:0;cursor:pointer",s=void 0,D=void 0,m=function(){function a(e){E(this,a),this['context_']=e,s=this.context_.voEvents,D=this.context_.DOM,this['config_']=null,this['player_']=this.context_.instance,this['playerContainer_']=this.context_.playerContainer,this['eventDelegate_']=this.context_.eventDelegate,this['debug_']=this.context_.debug,this['isEval_']=this.context_['gkEngine']['isEvaluationVersion'](),this['html5VideoPlayer_']=null,this['videoContainer_']=null,this['video_']=null,this['captionContainer_']=null,this['logoTextContainer_']=null,this['logoText_']=null,this['logoTextTimer_']=null,this['uiElements_']=null,this['aspectRatio_']=t["default"].VO_ASPECT_RATIO.VO_RATIO_AUTO,this['fullscreenContainer_']=void 0,this['fullscreenEleOriStyle_']=null,this['iframeContainerOriStyle_']=null,this['onAirplayChanged_']=this['onAirplayChanged']['bind'](this),this['onPipModeChanged_']=this['onPipModeChanged']['bind'](this),this['onFullScreenChange_']=this['onFullScreenChange']['bind'](this),this['onReSize_']=this['onReSize']['bind'](this),document['addEventListener']("fullscreenchange",this.onFullScreenChange_),document['addEventListener']("mozfullscreenchange",this.onFullScreenChange_),document['addEventListener']("webkitfullscreenchange",this.onFullScreenChange_),document['addEventListener']("msfullscreenchange",this.onFullScreenChange_),document['addEventListener']("MSFullscreenChange",this.onFullScreenChange_),window['addEventListener']("resize",this.onReSize_),this['onAdStarted_']=this['onAdStarted']['bind'](this),this['onAdComplete_']=this['onAdComplete']['bind'](this),this['onPlayerOpened_']=this['onPlayerOpened']['bind'](this),this['player_']['addEventListener'](s.VO_OSMP_AD_STARTED,this.onAdStarted_),this['player_']['addEventListener'](s.VO_OSMP_AD_COMPLETE,this.onAdComplete_),this['player_']['addEventListener'](s.VO_OSMP_SRC_CB_OPEN_FINISHED,this.onPlayerOpened_)}return o(a,[{'key':"isAirplaySupported",'value':function(){return window.WebKitPlaybackTargetAvailabilityEvent?!0:!1}},{'key':"init",'value':function(){return this.playerContainer_?(this['config_']=this.context_.config,this.uiElements_||(this['removeElements'](),this['initElements'](),this['initEventListeners']()),this.uiElements_):(this['debug_']['log']("Init Basic UI failed because player container is null"),null)}},{'key':"onAirplayChanged",'value':function(){this['eventDelegate_']['onAirplayChanged']()}},{'key':"onPipModeChanged",'value':function(){var a=this;if(this['eventDelegate_']['onPipModeChanged'](),this.aspectRatio_!=t["default"].VO_ASPECT_RATIO.VO_RATIO_AUTO&&!this['player_']['isInPipMode']()&&this.context_['commonUtil']['isSafari']()){var e=this.aspectRatio_;this['setVideoAspectRatio'](t["default"].VO_ASPECT_RATIO.VO_RATIO_AUTO),setTimeout(function(){a['setVideoAspectRatio'](e)},300)}}},{'key':"removeElements",'value':function(){var a=this['playerContainer_']['querySelector'](".html5-video-player");a&&this['playerContainer_']['removeChild'](a)}},{'key':"createHtml5VideoPlayer",'value':function(){var a=document['createElement']("div");return a['setAttribute']("class","html5-video-player"),a['setAttribute']("style",r),a}},{'key':"createVopVideoContainer",'value':function(){var a=document['createElement']("div");return a['setAttribute']("class","vop-video-container"),a['setAttribute']("style",b),a}},{'key':"createVopVideo",'value':function(){var a=document['createElement']("video");return a['setAttribute']("class","vop-video"),a['setAttribute']("style",d),a['setAttribute']("playsinline","true"),a['setAttribute']("webkit-playsinline","true"),a['setAttribute']("x-webkit-airplay","allow"),a['setAttribute']("airplay","allow"),this['isAirplaySupported']()&&a['addEventListener']("webkitplaybacktargetavailabilitychanged",this.onAirplayChanged_),a['addEventListener']("webkitpresentationmodechanged",this.onPipModeChanged_),a['addEventListener']("leavepictureinpicture",this.onPipModeChanged_),a['addEventListener']("enterpictureinpicture",this.onPipModeChanged_),a}},{'key':"createVopCaptionContainer",'value':function(){var a=document['createElement']("div");if(a['setAttribute']("class","vop-caption-container"),a['setAttribute']("style",c),a['setAttribute']("id","TTMLRenderingDiv"),this.context_['commonUtil']['isSamsung2016']()){var e=document['createElement']("div");e['setAttribute']("class","tizenSB"),a['appendChild'](e)}return a}},{'key':"createVopLogoText",'value':function(){var a=document['createElement']("span");return a['setAttribute']("class","vop-logoText"),a['setAttribute']("style",w),a['innerText']="Evaluation version",a}},{'key':"createVopLogoTextContainer",'value':function(){var a=document['createElement']("div");return a['setAttribute']("class","vop-logoText-container"),a['setAttribute']("style",p),a}},{'key':"createVopLogImageContainer",'value':function(){var a=document['createElement']("div");return a['setAttribute']("class","vop-logoImage-container"),a['setAttribute']("style",y),a}},{'key':"createVopLogImage",'value':function(){var a=document['createElement']("a");a['setAttribute']("href","http://www.visualon.com"),a['setAttribute']("target","_Blank");var e=document['createElement']("img");e['setAttribute']("class","vop-logo-image"),e['setAttribute']("style",h);var n="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0ic3ZnIiB3aWR0aD0iMTAwNHB4IiBoZWlnaHQ9IjQwMHB4IiB2aWV3Qm94PSIwIDAgMTAwNCA0MDAiIHZlcnNpb249IjEuMSI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ5ICg1MTAwMikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+VW50aXRsZWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcy8+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiPgogICAgICAgICAgICA8ZWxsaXBzZSBpZD0iT3ZhbC00IiBzdHJva2U9IiNGMzg1MTgiIHN0cm9rZS13aWR0aD0iMTIiIGN4PSIxOTkuODAwMiIgY3k9IjIwMCIgcng9IjE5My44MDAyIiByeT0iMTk0Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMTcuODgyMTE4LDkwLjAxNjI4MTkgTDExNy44ODIxMTgsMzIwLjUyNjc1IEMxMTcuODgyMTE4LDMyOC44MTEwMjIgMTI0LjU5Nzg0NywzMzUuNTI2NzUgMTMyLjg4MjExOCwzMzUuNTI2NzUgQzEzNS40NjY1OTMsMzM1LjUyNjc1IDEzOC4wMDcyMjUsMzM0Ljg1ODk3OSAxNDAuMjU3Njg4LDMzMy41ODgxODEgTDM0NS44ODA1ODIsMjE3LjQ3NjM5NSBDMzUzLjA5NDIxMSwyMTMuNDAyOTgxIDM1NS42Mzk4NTcsMjA0LjI1MzAyNCAzNTEuNTY2NDQzLDE5Ny4wMzkzOTUgQzM1MC4yMjM5NDUsMTk0LjY2MTk2IDM0OC4yNTgwMTcsMTkyLjY5NjAzMSAzNDUuODgwNTgyLDE5MS4zNTM1MzQgTDE0MS43NDkzOTIsNzYuMDg0MDg5MyBDMTM0LjA1NDg1NSw3MS43MzkxMTM1IDEyNC4yOTQ5MDEsNzQuNDU0NDY5OCAxMTkuOTQ5OTI1LDgyLjE0OTAwNzQgQzExOC41OTQ0MDcsODQuNTQ5NTAxIDExNy44ODIxMTgsODcuMjU5NTA4NSAxMTcuODgyMTE4LDkwLjAxNjI4MTkgWiIgaWQ9IlBhdGgtNCIgZmlsbD0iIzRBOTBFMiIvPgogICAgICAgIDwvZz4KICAgICAgICA8dGV4dCBpZD0iVmlzdWFsT24iIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EtT2JsaXF1ZSwgSGVsdmV0aWNhIiBmb250LXNpemU9IjE1MCIgZm9udC1zdHlsZT0iaXRhbGljIiBmb250LXdlaWdodD0ibm9ybWFsIj4KICAgICAgICAgICAgPHRzcGFuIHg9IjM5My42MDYzOTQiIHk9IjM3MSIgZmlsbD0iI0YzODUxOCI+VjwvdHNwYW4+CiAgICAgICAgICAgIDx0c3BhbiB4PSI0OTEuMDE4NTAzIiB5PSIzNzEiIGZpbGw9IiMyOTk0RUMiPmlzdWFsPC90c3Bhbj4KICAgICAgICAgICAgPHRzcGFuIHg9Ijc5OS41MTQ1OTciIHk9IjM3MSIgZmlsbD0iI0YzODUxOCI+TzwvdHNwYW4+CiAgICAgICAgICAgIDx0c3BhbiB4PSI5MTYuMTg5NDAxIiB5PSIzNzEiIGZpbGw9IiMyOTk0RUMiPm48L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgIDwvZz4KPC9zdmc+";return e['src']=n,a['appendChild'](e),a}},{'key':"createVopPosterContainer",'value':function(){var a=document['createElement']("div");return a['setAttribute']("class","vop-poster-container"),a}},{'key':"initElements",'value':function(){var a=this['playerContainer_']['getAttribute']("style");a=this.context_['commonUtil']['replaceAttribute'](a,"width",this.config_.width),a=this.context_['commonUtil']['replaceAttribute'](a,"height",this.config_.height),this['playerContainer_']['setAttribute']("style",a),this['html5VideoPlayer_']=this['createHtml5VideoPlayer'](),this.isEval_&&(this['logoTextContainer_']=this['createVopLogoTextContainer'](),this['logoText_']=this['createVopLogoText'](),this['logoTextContainer_']['appendChild'](this.logoText_),this['logoImageContainer_']=this['createVopLogImageContainer'](),this['logoImage_']=this['createVopLogImage'](),this['logoImageContainer_']['appendChild'](this.logoImage_)),this['videoContainer_']=this['createVopVideoContainer'](),this.context_['commonUtil']['isSamsung2016']()?(this['video_']=document['createElement']("object"),this['video_']['setAttribute']("id","av-player"),this['video_']['setAttribute']("type","application/avplayer"),this['video_']['setAttribute']("style",v)):this['video_']=this['createVopVideo'](),this['videoContainer_']['appendChild'](this.video_),this['captionContainer_']=this['createVopCaptionContainer']();var e=this.html5VideoPlayer_.firstChild;this.isEval_&&(e&&this.logoTextContainer_?this['html5VideoPlayer_']['insertBefore'](this.logoTextContainer_,e):this['html5VideoPlayer_']['appendChild'](this.logoTextContainer_),e&&this.logoImageContainer_?this['html5VideoPlayer_']['insertBefore'](this.logoImageContainer_,e):this['html5VideoPlayer_']['appendChild'](this.logoImageContainer_)),e?this['html5VideoPlayer_']['insertBefore'](this.videoContainer_,e):this['html5VideoPlayer_']['appendChild'](this.videoContainer_),e?this['html5VideoPlayer_']['insertBefore'](this.captionContainer_,e):this['html5VideoPlayer_']['appendChild'](this.captionContainer_),this['playerContainer_']['appendChild'](this.html5VideoPlayer_),this['uiElements_']={},this['uiElements_']['video']=this.video_,this['uiElements_']['captionContainer']=this.captionContainer_,this['uiElements_']['playerContainer']=this.playerContainer_}},{'key':"initEventListeners",'value':function(){}},{'key':"showEvaluationInfo",'value':function(){var a=this;if(this.isEval_&&this.logoText_){var e=this.logoTextContainer_.clientWidth/800*2.5+"rem",n=this['logoText_']['getAttribute']("style");n=this.context_['commonUtil']['replaceAttribute'](n,"display","block"),n=this.context_['commonUtil']['replaceAttribute'](n,"font-size",e),this['logoText_']['setAttribute']("style",n),this['logoTextTimer_']=setTimeout(function(){a['hideEvaluationInfo']()},2500)}}},{'key':"showPoster",'value':function(a){var e=this['videoContainer_']['querySelector'](".vop-poster-container");if(e&&this['videoContainer_']['removeChild'](e),a&&a.url&&""!==a.url){e=this['createVopPosterContainer']();var n=x+";background-image: url("+a.url+");";a.width&&!a.height?n=n+"background-size: "+a.width+";":a.width&&a.height&&(n=n+"background-size: "+a.width+" "+a.height+";"),a.top&&(n=n+"background-position-y: "+a.top+";"),a.left&&(n=n+"background-position-x: "+a.left+";"),e['setAttribute']("style",n),this['videoContainer_']['appendChild'](e)}}},{'key':"hideEvaluationInfo",'value':function(){if(this.isEval_&&(this.logoTextTimer_&&(clearTimeout(this.logoTextTimer_),this['logoTextTimer_']=null),this.logoText_)){var a=this['logoText_']['getAttribute']("style");a=this.context_['commonUtil']['replaceAttribute'](a,"display","none"),this['logoText_']['setAttribute']("style",a)}}},{'key':"enterFullscreen",'value':function(a){var e=a||this.playerContainer_;if(this.context_['commonUtil']['isIOS']()&&this.context_['commonUtil']['isSafari']()&&(this.player_.VR&&this.player_['VR']['isVRMode']()||this.flagAdStarted_&&this.flagIsNonLinearAd_))return void this['enterFullscreenOnIOS'](e);var n=e.requestFullscreen||e.requestFullScreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.msRequestFullScreen;void 0==n&&(e=this.video_,n=e.webkitEnterFullscreen||e.enterFullScreen),n&&n['call'](e)}},{'key':"exitFullscreen",'value':function(){if(void 0!=this.fullscreenContainer_)return void this['exitFullscreenOnIOS']();var a=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.msExitFullscreen;a&&a['call'](document)}},{'key':"setFullStyleToEle",'value':function(a,e){a['style']['position']="fixed",a['style']['top']="0",a['style']['left']="0",a['style']['width']="100%",a['style']['height']="100%",a['style']['zIndex']=e}},{'key':"saveOriStyleOfEle",'value':function(a,e){e['position']=a.style.position,e['top']=a.style.top,e['left']=a.style.left,e['width']=a.style.width,e['height']=a.style.height,e['zIndex']=a.style.zIndex}},{'key':"setOriStyleToEle",'value':function(a,e){a['style']['position']=e.position,a['style']['top']=e.top,a['style']['left']=e.left,a['style']['width']=e.width,a['style']['height']=e.height,a['style']['zIndex']=e.zIndex}},{'key':"enterFullscreenOnIOS",'value':function(a){var e="voIFrameContainer";"parentIFrame"in window&&(e=window['parentIFrame']['getId']());var n=window.parent['document']['getElementById'](e);n&&(this['iframeContainerOriStyle_']={},this['saveOriStyleOfEle'](n,this.iframeContainerOriStyle_),this['setFullStyleToEle'](n,"998")),this['fullscreenContainer_']=a,this['fullscreenEleOriStyle_']={},this['saveOriStyleOfEle'](a,this.fullscreenEleOriStyle_),this['setFullStyleToEle'](a,"999"),this['onFullScreenChange']()}},{'key':"exitFullscreenOnIOS",'value':function(){var a="voIFrameContainer";"parentIFrame"in window&&(a=window['parentIFrame']['getId']());var e=window.parent['document']['getElementById'](a);e&&this['setOriStyleToEle'](e,this.iframeContainerOriStyle_),this['setOriStyleToEle'](this.fullscreenContainer_,this.fullscreenEleOriStyle_),this['onFullScreenChange'](),this['fullscreenContainer_']=void 0}},{'key':"isFullscreen",'value':function(){if(void 0!=this.fullscreenContainer_)return"fixed"===this.fullscreenContainer_.style.position?!0:!1;var a=document;return a.fullscreenElement||a.msFullscreenElement||a.mozFullScreen||a.webkitIsFullScreen}},{'key':"onFullScreenChange",'value':function(){this['eventDelegate_']['onFullscreenChange'](),this['setVideoAspectRatio'](this.aspectRatio_)}},{'key':"onAdStarted",'value':function(a){this['hideCaption'](),this['flagAdStarted_']=!0,this['flagIsNonLinearAd_']="nonlinear"===a.adType}},{'key':"onAdComplete",'value':function(){this['showCaption'](),this['flagAdStarted_']=!1}},{'key':"onPlayerOpened",'value':function(){this['showCaption'](),this['setVideoAspectRatio'](t["default"].VO_ASPECT_RATIO.VO_RATIO_AUTO)}},{'key':"showCaption",'value':function(){this.captionContainer_&&(this.captionContainer_['style']['display']="block")}},{'key':"hideCaption",'value':function(){this.captionContainer_&&(this.captionContainer_['style']['display']="none")}},{'key':"onReSize",'value':function(){this['setVideoAspectRatio'](this.aspectRatio_)}},{'key':"setVideoAspectRatio",'value':function(a){if(!this.context_['commonUtil']['isIE']()&&(this.aspectRatio_!==a||a!==t["default"].VO_ASPECT_RATIO.VO_RATIO_AUTO)){this['aspectRatio_']=a;var e=this.playerContainer_.offsetWidth,n=this.playerContainer_.offsetHeight,l=e/n,E=l;switch(this.video_['style']['objectFit']="fill",a){case t["default"].VO_ASPECT_RATIO.VO_RATIO_AUTO:E=l,this.video_['style']['objectFit']="contain";break;case t["default"].VO_ASPECT_RATIO.VO_RATIO_11:E=1;break;case t["default"].VO_ASPECT_RATIO.VO_RATIO_43:E=4/3;break;case t["default"].VO_ASPECT_RATIO.VO_RATIO_169:E=16/9;break;case t["default"].VO_ASPECT_RATIO.VO_RATIO_21:E=2;break;case t["default"].VO_ASPECT_RATIO.VO_RATIO_2331:E=2.33}this['debug_']['log']("change the aspect ratio from "+l+" to "+E);var o,i,r,b;E>=l?(o=e,i=e/E,r=0,b=(n-i)/2):(o=E*n,i=n,r=(e-o)/2,b=0);var d=this.video_;d['style']['width']=o/e*100+"%",d['style']['height']=i/n*100+"%",d['style']['marginLeft']=r/e*100+"%",d['style']['marginRight']=r/e*100+"%",d['style']['marginTop']=b/e*100+"%",d['style']['marginBottom']=b/e*100+"%",this.player_.VideoEnhance&&this.player_['VideoEnhance']['updateVideoSize'](),this.player_.VR&&this.player_['VR']['isVRMode']()&&this.player_['VR']['updateCanvasSize']()}}},{'key':"getVideoAspectRatio",'value':function(){return this.aspectRatio_}}]),a}();n["default"]=m},{'2':2}],'333':[function(a,e,n){!function(a){"use strict";function l(a){return parseInt(a)===a}function E(a){if(!l(a.length))return!1;for(var e=0;e<a.length;e++)if(!l(a[e])||a[e]<0||a[e]>255)return!1;return!0}function o(a,e){if(a.buffer&&"Uint8Array"===a.name)return e&&(a=a.slice?a['slice']():Array.prototype['slice']['call'](a)),a;if(Array['isArray'](a)){if(!E(a))throw new Error("Array contains invalid value: "+a);return new Uint8Array(a)}if(l(a.length)&&E(a))return new Uint8Array(a);throw new Error("unsupported array-like object")}function i(a){return new Uint8Array(a)}function t(a,e,n,l,E){(null!=l||null!=E)&&(a=a.slice?a['slice'](l,E):Array.prototype['slice']['call'](a,l,E)),e['set'](a,n)}function r(a){for(var e=[],n=0;n<a.length;n+=4)e['push'](a[n]<<24|a[n+1]<<16|a[n+2]<<8|a[n+3]);return e}function b(a){a=o(a,!0);var e=16-a.length%16,n=i(a.length+e);t(a,n);for(var l=a.length;l<n.length;l++)n[l]=e;return n}function d(a){if(a=o(a,!0),a.length<16)throw new Error("PKCS#7 invalid length");var e=a[a.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=a.length-e,l=0;e>l;l++)if(a[n+l]!==e)throw new Error("PKCS#7 invalid padding byte");var E=i(n);return t(a,E,0,0,n),E}var c=function(){function a(a){var e=[],n=0;for(a=encodeURI(a);n<a.length;){var l=a['charCodeAt'](n++);37===l?(e['push'](parseInt(a['substr'](n,2),16)),n+=2):e['push'](l)}return o(e)}function e(a){for(var e=[],n=0;n<a.length;){var l=a[n];128>l?(e['push'](String['fromCharCode'](l)),n++):l>191&&224>l?(e['push'](String['fromCharCode']((31&l)<<6|63&a[n+1])),n+=2):(e['push'](String['fromCharCode']((15&l)<<12|(63&a[n+1])<<6|63&a[n+2])),n+=3)}return e['join']("")}return{'toBytes':a,'fromBytes':e}}(),p=function(){function a(a){for(var e=[],n=0;n<a.length;n+=2)e['push'](parseInt(a['substr'](n,2),16));return e}function e(a){for(var e=[],l=0;l<a.length;l++){var E=a[l];e['push'](n[(240&E)>>4]+n[15&E])}return e['join']("")}var n="0123456789abcdef";return{'toBytes':a,'fromBytes':e}}(),w={'16':10,'24':12,'32':14},x=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],v=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],y=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],h=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],s=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],D=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],C=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],f=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],g=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],k=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],M=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],P=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],T=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],u=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],A=function(a){
if(!(this instanceof A))throw Error("AES must be instanitated with `new`");Object['defineProperty'](this,"key",{'value':o(a,!0)}),this['_prepare']()};A['prototype']['_prepare']=function(){var a=w[this.key.length];if(null==a)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this['_Ke']=[],this['_Kd']=[];for(var e=0;a>=e;e++)this['_Ke']['push']([0,0,0,0]),this['_Kd']['push']([0,0,0,0]);for(var n,l=4*(a+1),E=this.key.length/4,o=r(this.key),e=0;E>e;e++)n=e>>2,this['_Ke'][n][e%4]=o[e],this['_Kd'][a-n][e%4]=o[e];for(var i,t=0,b=E;l>b;){if(i=o[E-1],o[0]^=v[i>>16&255]<<24^v[i>>8&255]<<16^v[255&i]<<8^v[i>>24&255]^x[t]<<24,t+=1,8!=E)for(var e=1;E>e;e++)o[e]^=o[e-1];else{for(var e=1;E/2>e;e++)o[e]^=o[e-1];i=o[E/2-1],o[E/2]^=v[255&i]^v[i>>8&255]<<8^v[i>>16&255]<<16^v[i>>24&255]<<24;for(var e=E/2+1;E>e;e++)o[e]^=o[e-1]}for(var d,c,e=0;E>e&&l>b;)d=b>>2,c=b%4,this['_Ke'][d][c]=o[e],this['_Kd'][a-d][c]=o[e++],b++}for(var d=1;a>d;d++)for(var c=0;4>c;c++)i=this['_Kd'][d][c],this['_Kd'][d][c]=M[i>>24&255]^P[i>>16&255]^T[i>>8&255]^u[255&i]},A['prototype']['encrypt']=function(a){if(16!=a.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],l=r(a),E=0;4>E;E++)l[E]^=this['_Ke'][0][E];for(var o=1;e>o;o++){for(var E=0;4>E;E++)n[E]=h[l[E]>>24&255]^s[l[(E+1)%4]>>16&255]^D[l[(E+2)%4]>>8&255]^m[255&l[(E+3)%4]]^this['_Ke'][o][E];l=n['slice']()}for(var t,b=i(16),E=0;4>E;E++)t=this['_Ke'][e][E],b[4*E]=255&(v[l[E]>>24&255]^t>>24),b[4*E+1]=255&(v[l[(E+1)%4]>>16&255]^t>>16),b[4*E+2]=255&(v[l[(E+2)%4]>>8&255]^t>>8),b[4*E+3]=255&(v[255&l[(E+3)%4]]^t);return b},A['prototype']['decrypt']=function(a){if(16!=a.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],l=r(a),E=0;4>E;E++)l[E]^=this['_Kd'][0][E];for(var o=1;e>o;o++){for(var E=0;4>E;E++)n[E]=C[l[E]>>24&255]^f[l[(E+3)%4]>>16&255]^g[l[(E+2)%4]>>8&255]^k[255&l[(E+1)%4]]^this['_Kd'][o][E];l=n['slice']()}for(var t,b=i(16),E=0;4>E;E++)t=this['_Kd'][e][E],b[4*E]=255&(y[l[E]>>24&255]^t>>24),b[4*E+1]=255&(y[l[(E+3)%4]>>16&255]^t>>16),b[4*E+2]=255&(y[l[(E+2)%4]>>8&255]^t>>8),b[4*E+3]=255&(y[255&l[(E+1)%4]]^t);return b};var R=function(a){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");this['description']="Electronic Code Block",this['name']="ecb",this['_aes']=new A(a)};R['prototype']['encrypt']=function(a){if(a=o(a),a.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=i(a.length),n=i(16),l=0;l<a.length;l+=16)t(a,n,0,l,l+16),n=this['_aes']['encrypt'](n),t(n,e,l);return e},R['prototype']['decrypt']=function(a){if(a=o(a),a.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=i(a.length),n=i(16),l=0;l<a.length;l+=16)t(a,n,0,l,l+16),n=this['_aes']['decrypt'](n),t(n,e,l);return e};var S=function(a,e){if(!(this instanceof S))throw Error("AES must be instanitated with `new`");if(this['description']="Cipher Block Chaining",this['name']="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=i(16);this['_lastCipherblock']=o(e,!0),this['_aes']=new A(a)};S['prototype']['encrypt']=function(a){if(a=o(a),a.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=i(a.length),n=i(16),l=0;l<a.length;l+=16){t(a,n,0,l,l+16);for(var E=0;16>E;E++)n[E]^=this['_lastCipherblock'][E];this['_lastCipherblock']=this['_aes']['encrypt'](n),t(this._lastCipherblock,e,l)}return e},S['prototype']['decrypt']=function(a){if(a=o(a),a.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=i(a.length),n=i(16),l=0;l<a.length;l+=16){t(a,n,0,l,l+16),n=this['_aes']['decrypt'](n);for(var E=0;16>E;E++)e[l+E]=n[E]^this['_lastCipherblock'][E];t(a,this._lastCipherblock,0,l,l+16)}return e};var U=function(a,e,n){if(!(this instanceof U))throw Error("AES must be instanitated with `new`");if(this['description']="Cipher Feedback",this['name']="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=i(16);n||(n=1),this['segmentSize']=n,this['_shiftRegister']=o(e,!0),this['_aes']=new A(a)};U['prototype']['encrypt']=function(a){if(a.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=o(a,!0),l=0;l<n.length;l+=this.segmentSize){e=this['_aes']['encrypt'](this._shiftRegister);for(var E=0;E<this.segmentSize;E++)n[l+E]^=e[E];t(this._shiftRegister,this._shiftRegister,0,this.segmentSize),t(n,this._shiftRegister,16-this.segmentSize,l,l+this.segmentSize)}return n},U['prototype']['decrypt']=function(a){if(a.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=o(a,!0),l=0;l<n.length;l+=this.segmentSize){e=this['_aes']['encrypt'](this._shiftRegister);for(var E=0;E<this.segmentSize;E++)n[l+E]^=e[E];t(this._shiftRegister,this._shiftRegister,0,this.segmentSize),t(a,this._shiftRegister,16-this.segmentSize,l,l+this.segmentSize)}return n};var I=function(a,e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this['description']="Output Feedback",this['name']="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=i(16);this['_lastPrecipher']=o(e,!0),this['_lastPrecipherIndex']=16,this['_aes']=new A(a)};I['prototype']['encrypt']=function(a){for(var e=o(a,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this['_lastPrecipher']=this['_aes']['encrypt'](this._lastPrecipher),this['_lastPrecipherIndex']=0),e[n]^=this['_lastPrecipher'][this._lastPrecipherIndex++];return e},I['prototype']['decrypt']=I.prototype.encrypt;var J=function(a){if(!(this instanceof J))throw Error("Counter must be instanitated with `new`");0===a||a||(a=1),"number"==typeof a?(this['_counter']=i(16),this['setValue'](a)):this['setBytes'](a)};J['prototype']['setValue']=function(a){if("number"!=typeof a||parseInt(a)!=a)throw new Error("invalid counter value (must be an integer)");if(a>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this['_counter'][e]=a%256,a=parseInt(a/256)},J['prototype']['setBytes']=function(a){if(a=o(a,!0),16!=a.length)throw new Error("invalid counter bytes size (must be 16 bytes)");this['_counter']=a},J['prototype']['increment']=function(){for(var a=15;a>=0;a--){if(255!==this['_counter'][a]){this['_counter'][a]++;break}this['_counter'][a]=0}};var L=function(a,e){if(!(this instanceof L))throw Error("AES must be instanitated with `new`");this['description']="Counter",this['name']="ctr",e instanceof J||(e=new J(e)),this['_counter']=e,this['_remainingCounter']=null,this['_remainingCounterIndex']=16,this['_aes']=new A(a)};L['prototype']['encrypt']=function(a){for(var e=o(a,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this['_remainingCounter']=this['_aes']['encrypt'](this._counter._counter),this['_remainingCounterIndex']=0,this['_counter']['increment']()),e[n]^=this['_remainingCounter'][this._remainingCounterIndex++];return e},L['prototype']['decrypt']=L.prototype.encrypt;var N={'AES':A,'Counter':J,'ModeOfOperation':{'ecb':R,'cbc':S,'cfb':U,'ofb':I,'ctr':L},'utils':{'hex':p,'utf8':c},'padding':{'pkcs7':{'pad':b,'strip':d}},'_arrayTest':{'coerceArray':o,'createArray':i,'copyArray':t}};"undefined"!=typeof n?e['exports']=N:"function"==typeof define&&define.amd?define([],function(){return N}):(a.aesjs&&(N['_aesjs']=a.aesjs),a['aesjs']=N)}(this)},{}],'334':[function(a,e,n){var l={'utf8':{'stringToBytes':function(a){return l['bin']['stringToBytes'](unescape(encodeURIComponent(a)))},'bytesToString':function(a){return decodeURIComponent(escape(l['bin']['bytesToString'](a)))}},'bin':{'stringToBytes':function(a){for(var e=[],n=0;n<a.length;n++)e['push'](255&a['charCodeAt'](n));return e},'bytesToString':function(a){for(var e=[],n=0;n<a.length;n++)e['push'](String['fromCharCode'](a[n]));return e['join']("")}}};e['exports']=l},{}],'335':[function(a,e,n){var l={};l['parseBuffer']=function(a){return new E(a)['parse']()},l['addBoxProcessor']=function(a,e){"string"==typeof a&&"function"==typeof e&&(o['prototype']['_boxProcessors'][a]=e)},l['createFile']=function(){return new E},l['createBox']=function(a,e,n){var l=o['create'](a);return e&&e['append'](l,n),l},l['createFullBox']=function(a,e,n){var E=l['createBox'](a,e,n);return E['version']=0,E['flags']=0,E},l['Utils']={},l['Utils']['dataViewToString']=function(a,e){var n=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n)['decode'](a);var l=[],E=0;if("utf-8"===n)for(;E<a.byteLength;){var o=a['getUint8'](E++);128>o||(224>o?(o=(31&o)<<6,o|=63&a['getUint8'](E++)):240>o?(o=(15&o)<<12,o|=(63&a['getUint8'](E++))<<6,o|=63&a['getUint8'](E++)):(o=(7&o)<<18,o|=(63&a['getUint8'](E++))<<12,o|=(63&a['getUint8'](E++))<<6,o|=63&a['getUint8'](E++))),l['push'](String['fromCharCode'](o))}else for(;E<a.byteLength;)l['push'](String['fromCharCode'](a['getUint8'](E++)));return l['join']("")},l['Utils']['utf8ToByteArray']=function(a){var e,n;if("undefined"!=typeof TextEncoder)e=(new TextEncoder)['encode'](a);else for(e=[],n=0;n<a.length;++n){var l=a['charCodeAt'](n);128>l?e['push'](l):2048>l?(e['push'](192|l>>6),e['push'](128|63&l)):65536>l?(e['push'](224|l>>12),e['push'](128|63&l>>6),e['push'](128|63&l)):(e['push'](240|l>>18),e['push'](128|63&l>>12),e['push'](128|63&l>>6),e['push'](128|63&l))}return e},l['Utils']['appendBox']=function(a,e,n){if(e['_offset']=a._cursor.offset,e['_root']=a._root?a._root:a,e['_raw']=a._raw,e['_parent']=a,-1!==n){if(void 0===n||null===n)return void a['boxes']['push'](e);var l,E=-1;if("number"==typeof n)E=n;else{if("string"==typeof n)l=n;else{if("object"!=typeof n||!n.type)return void a['boxes']['push'](e);l=n.type}for(var o=0;o<a.boxes.length;o++)if(l===a['boxes'][o].type){E=o+1;break}}a['boxes']['splice'](E,0,e)}},"undefined"!=typeof n&&(n['parseBuffer']=l.parseBuffer,n['addBoxProcessor']=l.addBoxProcessor,n['createFile']=l.createFile,n['createBox']=l.createBox,n['createFullBox']=l.createFullBox,n['Utils']=l.Utils),l['Cursor']=function(a){this['offset']="undefined"==typeof a?0:a};var E=function(a){this['_cursor']=new l.Cursor,this['boxes']=[],a&&(this['_raw']=new DataView(a))};E['prototype']['fetch']=function(a){var e=this['fetchAll'](a,!0);return e.length?e[0]:null},E['prototype']['fetchAll']=function(a,e){var n=[];return E['_sweep']['call'](this,a,n,e),n},E['prototype']['parse']=function(){for(this['_cursor']['offset']=0,this['boxes']=[];this._cursor.offset<this._raw.byteLength;){var a=o['parse'](this);if("undefined"==typeof a.type)break;this['boxes']['push'](a)}return this},E['_sweep']=function(a,e,n){this.type&&this['type']==a&&e['push'](this);for(var l in this.boxes){if(e.length&&n)return;E['_sweep']['call'](this['boxes'][l],a,e,n)}},E['prototype']['write']=function(){var a,e=0;for(a=0;a<this.boxes.length;a++)e+=this['boxes'][a]['getLength'](!1);var n=new Uint8Array(e);for(this['_rawo']=new DataView(n.buffer),this['bytes']=n,this['_cursor']['offset']=0,a=0;a<this.boxes.length;a++)this['boxes'][a]['write']();return n.buffer},E['prototype']['append']=function(a,e){l['Utils']['appendBox'](this,a,e)};var o=function(){this['_cursor']=new l.Cursor};o['parse']=function(a){var e=new o;return e['_offset']=a._cursor.offset,e['_root']=a._root?a._root:a,e['_raw']=a._raw,e['_parent']=a,e['_parseBox'](),a['_cursor']['offset']=e._raw.byteOffset+e._raw.byteLength,e},o['create']=function(a){var e=new o;return e['type']=a,e['boxes']=[],e},o['prototype']['_boxContainers']=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o['prototype']['_boxProcessors']={},o['prototype']['_procField']=function(a,e,n){this._parsing?this[a]=this['_readField'](e,n):this['_writeField'](e,n,this[a])},o['prototype']['_procFieldArray']=function(a,e,n,l){var E;if(this._parsing)for(this[a]=[],E=0;e>E;E++)this[a][E]=this['_readField'](n,l);else for(E=0;E<this[a].length;E++)this['_writeField'](n,l,this[a][E])},o['prototype']['_procFullBox']=function(){this['_procField']("version","uint",8),this['_procField']("flags","uint",24)},o['prototype']['_procEntries']=function(a,e,n){var l;if(this._parsing)for(this[a]=[],l=0;e>l;l++)this[a]['push']({}),n['call'](this,this[a][l]);else for(l=0;e>l;l++)n['call'](this,this[a][l])},o['prototype']['_procSubEntries']=function(a,e,n,l){var E;if(this._parsing)for(a[e]=[],E=0;n>E;E++)a[e]['push']({}),l['call'](this,a[e][E]);else for(E=0;n>E;E++)l['call'](this,a[e][E])},o['prototype']['_procEntryField']=function(a,e,n,l){this._parsing?a[e]=this['_readField'](n,l):this['_writeField'](n,l,a[e])},o['prototype']['_procSubBoxes']=function(a,e){var n;if(this._parsing)for(this[a]=[],n=0;e>n;n++)this[a]['push'](o['parse'](this));else for(n=0;e>n;n++)this._rawo?this[a][n]['write']():this.size+=this[a][n]['getLength']()},o['prototype']['_readField']=function(a,e){switch(a){case"uint":return this['_readUint'](e);case"int":return this['_readInt'](e);case"template":return this['_readTemplate'](e);case"string":return-1===e?this['_readTerminatedString']():this['_readString'](e);case"data":return this['_readData'](e);case"utf8":return this['_readUTF8String']();default:return-1}},o['prototype']['_readInt']=function(a){var e=null,n=this._cursor.offset-this._raw.byteOffset;switch(a){case 8:e=this['_raw']['getInt8'](n);break;case 16:e=this['_raw']['getInt16'](n);break;case 32:e=this['_raw']['getInt32'](n);break;case 64:var l=this['_raw']['getInt32'](n),E=this['_raw']['getInt32'](n+4);e=l*Math['pow'](2,32)+E}return this._cursor.offset+=a>>3,e},o['prototype']['_readUint']=function(a){var e,n,l=null,E=this._cursor.offset-this._raw.byteOffset;switch(a){case 8:l=this['_raw']['getUint8'](E);break;case 16:l=this['_raw']['getUint16'](E);break;case 24:e=this['_raw']['getUint16'](E),n=this['_raw']['getUint8'](E+2),l=(e<<8)+n;break;case 32:l=this['_raw']['getUint32'](E);break;case 64:e=this['_raw']['getUint32'](E),n=this['_raw']['getUint32'](E+4),l=e*Math['pow'](2,32)+n}return this._cursor.offset+=a>>3,l},o['prototype']['_readString']=function(a){for(var e="",n=0;a>n;n++){var l=this['_readUint'](8);e+=String['fromCharCode'](l)}return e},o['prototype']['_readTemplate']=function(a){var e=this['_readUint'](a/2),n=this['_readUint'](a/2);return e+n/Math['pow'](2,a/2)},o['prototype']['_readTerminatedString']=function(){for(var a="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this['_readUint'](8);if(0===e)break;a+=String['fromCharCode'](e)}return a},o['prototype']['_readData']=function(a){var e=a>0?a:this._raw.byteLength-(this._cursor.offset-this._offset),n=new DataView(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,n},o['prototype']['_readUTF8String']=function(){var a=this['_readData']();return l['Utils']['dataViewToString'](a)},o['prototype']['_parseBox']=function(){if(this['_parsing']=!0,this['_cursor']['offset']=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this['_root']['_incomplete']=!0);switch(this['_procField']("size","uint",32),this['_procField']("type","string",4),1===this.size&&this['_procField']("largesize","uint",64),"uuid"===this.type&&this['_procFieldArray']("usertype",16,"uint",8),this.size){case 0:this['_raw']=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this['_incomplete']=!0,this['_root']['_incomplete']=!0):this['_raw']=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this['_incomplete']=!0,this['_root']['_incomplete']=!0):this['_raw']=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this['_boxProcessors'][this.type]&&this['_boxProcessors'][this.type]['call'](this),-1!==this['_boxContainers']['indexOf'](this.type)?this['_parseContainerBox']():this['_data']=this['_readData']())},o['prototype']['_parseFullBox']=function(){this['version']=this['_readUint'](8),this['flags']=this['_readUint'](24)},o['prototype']['_parseContainerBox']=function(){for(this['boxes']=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this['boxes']['push'](o['parse'](this))},o['prototype']['append']=function(a,e){l['Utils']['appendBox'](this,a,e)},o['prototype']['getLength']=function(){if(this['_parsing']=!1,this['_rawo']=null,this['size']=0,this['_procField']("size","uint",32),this['_procField']("type","string",4),1===this.size&&this['_procField']("largesize","uint",64),"uuid"===this.type&&this['_procFieldArray']("usertype",16,"uint",8),this['_boxProcessors'][this.type]&&this['_boxProcessors'][this.type]['call'](this),-1!==this['_boxContainers']['indexOf'](this.type))for(var a=0;a<this.boxes.length;a++)this.size+=this['boxes'][a]['getLength']();return this._data&&this['_writeData'](this._data),this.size},o['prototype']['write']=function(){switch(this['_parsing']=!1,this['_cursor']['offset']=this._parent._cursor.offset,this.size){case 0:this['_rawo']=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this['_rawo']=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this['_rawo']=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this['_procField']("size","uint",32),this['_procField']("type","string",4),1===this.size&&this['_procField']("largesize","uint",64),"uuid"===this.type&&this['_procFieldArray']("usertype",16,"uint",8),this['_boxProcessors'][this.type]&&this['_boxProcessors'][this.type]['call'](this),-1!==this['_boxContainers']['indexOf'](this.type))for(var a=0;a<this.boxes.length;a++)this['boxes'][a]['write']();return this._data&&this['_writeData'](this._data),this._parent._cursor.offset+=this.size,this.size},o['prototype']['_writeInt']=function(a,e){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(a){case 8:this['_rawo']['setInt8'](n,e);break;case 16:this['_rawo']['setInt16'](n,e);break;case 32:this['_rawo']['setInt32'](n,e);break;case 64:var l=Math['floor'](e/Math['pow'](2,32)),E=e-l*Math['pow'](2,32);this['_rawo']['setUint32'](n,l),this['_rawo']['setUint32'](n+4,E)}this._cursor.offset+=a>>3}else this.size+=a>>3},o['prototype']['_writeUint']=function(a,e){if(this._rawo){var n,l,E=this._cursor.offset-this._rawo.byteOffset;switch(a){case 8:this['_rawo']['setUint8'](E,e);break;case 16:this['_rawo']['setUint16'](E,e);break;case 24:n=(16776960&e)>>8,l=255&e,this['_rawo']['setUint16'](E,n),this['_rawo']['setUint8'](E+2,l);break;case 32:this['_rawo']['setUint32'](E,e);break;case 64:n=Math['floor'](e/Math['pow'](2,32)),l=e-n*Math['pow'](2,32),this['_rawo']['setUint32'](E,n),this['_rawo']['setUint32'](E+4,l)}this._cursor.offset+=a>>3}else this.size+=a>>3},o['prototype']['_writeString']=function(a,e){for(var n=0;a>n;n++)this['_writeUint'](8,e['charCodeAt'](n))},o['prototype']['_writeTerminatedString']=function(a){if(0!==a.length){for(var e=0;e<a.length;e++)this['_writeUint'](8,a['charCodeAt'](e));this['_writeUint'](8,0)}},o['prototype']['_writeTemplate']=function(a,e){var n=Math['floor'](e),l=(e-n)*Math['pow'](2,a/2);this['_writeUint'](a/2,n),this['_writeUint'](a/2,l)},o['prototype']['_writeData']=function(a){if(a instanceof Array&&(a=new DataView(Uint8Array['from'](a).buffer)),a instanceof Uint8Array&&(a=new DataView(a.buffer)),this._rawo){for(var e=this._cursor.offset-this._rawo.byteOffset,n=0;n<a.byteLength;n++)this['_rawo']['setUint8'](e+n,a['getUint8'](n));this._cursor.offset+=a.byteLength}else this.size+=a.byteLength},o['prototype']['_writeUTF8String']=function(a){var e=l['Utils']['utf8ToByteArray'](a);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,e.length),E=0;E<e.length;E++)n['setUint8'](E,e[E]);else this.size+=e.length},o['prototype']['_writeField']=function(a,e,n){switch(a){case"uint":this['_writeUint'](e,n);break;case"int":this['_writeInt'](e,n);break;case"template":this['_writeTemplate'](e,n);break;case"string":-1==e?this['_writeTerminatedString'](n):this['_writeString'](e,n);break;case"data":this['_writeData'](n);break;case"utf8":this['_writeUTF8String'](n)}},o.prototype['_boxProcessors']['avc1']=o.prototype['_boxProcessors']['encv']=function(){this['_procFieldArray']("reserved1",6,"uint",8),this['_procField']("data_reference_index","uint",16),this['_procField']("pre_defined1","uint",16),this['_procField']("reserved2","uint",16),this['_procFieldArray']("pre_defined2",3,"uint",32),this['_procField']("width","uint",16),this['_procField']("height","uint",16),this['_procField']("horizresolution","template",32),this['_procField']("vertresolution","template",32),this['_procField']("reserved3","uint",32),this['_procField']("frame_count","uint",16),this['_procFieldArray']("compressorname",32,"uint",8),this['_procField']("depth","uint",16),this['_procField']("pre_defined3","int",16),this['_procField']("config","data",-1)},o.prototype['_boxProcessors']['dref']=function(){this['_procFullBox'](),this['_procField']("entry_count","uint",32),this['_procSubBoxes']("entries",this.entry_count)},o.prototype['_boxProcessors']['elst']=function(){this['_procFullBox'](),this['_procField']("entry_count","uint",32),this['_procEntries']("entries",this.entry_count,function(a){this['_procEntryField'](a,"segment_duration","uint",1===this.version?64:32),this['_procEntryField'](a,"media_time","int",1===this.version?64:32),this['_procEntryField'](a,"media_rate_integer","int",16),this['_procEntryField'](a,"media_rate_fraction","int",16)})},o.prototype['_boxProcessors']['emsg']=function(){this['_procFullBox'](),this['_procField']("scheme_id_uri","string",-1),this['_procField']("value","string",-1),this['_procField']("timescale","uint",32),this['_procField']("presentation_time_delta","uint",32),this['_procField']("event_duration","uint",32),this['_procField']("id","uint",32),this['_procField']("message_data","data",-1)},o.prototype['_boxProcessors']['free']=o.prototype['_boxProcessors']['skip']=function(){this['_procField']("data","data",-1)},o.prototype['_boxProcessors']['frma']=function(){this['_procField']("data_format","uint",32)},o.prototype['_boxProcessors']['ftyp']=o.prototype['_boxProcessors']['styp']=function(){this['_procField']("major_brand","string",4),this['_procField']("minor_version","uint",32);var a=-1;this._parsing&&(a=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this['_procFieldArray']("compatible_brands",a,"string",4)},o.prototype['_boxProcessors']['hdlr']=function(){this['_procFullBox'](),this['_procField']("pre_defined","uint",32),this['_procField']("handler_type","string",4),this['_procFieldArray']("reserved",3,"uint",32),this['_procField']("name","string",-1)},o.prototype['_boxProcessors']['mdat']=function(){this['_procField']("data","data",-1)},o.prototype['_boxProcessors']['mdhd']=function(){this['_procFullBox'](),this['_procField']("creation_time","uint",1==this.version?64:32),this['_procField']("modification_time","uint",1==this.version?64:32),this['_procField']("timescale","uint",32),this['_procField']("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this['language']=this['language']['charCodeAt'](0)-96<<10|this['language']['charCodeAt'](1)-96<<5|this['language']['charCodeAt'](2)-96),this['_procField']("language","uint",16),this._parsing&&(this['language']=String['fromCharCode']((this.language>>10&31)+96,(this.language>>5&31)+96,(31&this.language)+96)),this['_procField']("pre_defined","uint",16)},o.prototype['_boxProcessors']['mehd']=function(){this['_procFullBox'](),this['_procField']("fragment_duration","uint",1==this.version?64:32)},o.prototype['_boxProcessors']['mfhd']=function(){this['_procFullBox'](),this['_procField']("sequence_number","uint",32)},o.prototype['_boxProcessors']['mfro']=function(){this['_procFullBox'](),this['_procField']("mfra_size","uint",32)},o.prototype['_boxProcessors']['mp4a']=o.prototype['_boxProcessors']['enca']=function(){this['_procFieldArray']("reserved1",6,"uint",8),this['_procField']("data_reference_index","uint",16),this['_procFieldArray']("reserved2",2,"uint",32),this['_procField']("channelcount","uint",16),this['_procField']("samplesize","uint",16),this['_procField']("pre_defined","uint",16),this['_procField']("reserved3","uint",16),this['_procField']("samplerate","template",32),this['_procField']("esds","data",-1)},o.prototype['_boxProcessors']['mvhd']=function(){this['_procFullBox'](),this['_procField']("creation_time","uint",1==this.version?64:32),this['_procField']("modification_time","uint",1==this.version?64:32),this['_procField']("timescale","uint",32),this['_procField']("duration","uint",1==this.version?64:32),this['_procField']("rate","template",32),this['_procField']("volume","template",16),this['_procField']("reserved1","uint",16),this['_procFieldArray']("reserved2",2,"uint",32),this['_procFieldArray']("matrix",9,"template",32),this['_procFieldArray']("pre_defined",6,"uint",32),this['_procField']("next_track_ID","uint",32)},o.prototype['_boxProcessors']['payl']=function(){this['_procField']("cue_text","utf8")},o.prototype['_boxProcessors']['pssh']=function(){this['_procFullBox'](),this['_procFieldArray']("SystemID",16,"uint",8),this['_procField']("DataSize","uint",32),this['_procFieldArray']("Data",this.DataSize,"uint",8)},o.prototype['_boxProcessors']['schm']=function(){this['_procFullBox'](),this['_procField']("scheme_type","uint",32),this['_procField']("scheme_version","uint",32),1&this.flags&&this['_procField']("scheme_uri","string",-1)},o.prototype['_boxProcessors']['sdtp']=function(){this['_procFullBox']();var a=-1;this._parsing&&(a=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this['_procFieldArray']("sample_dependency_table",a,"uint",8)},o.prototype['_boxProcessors']['sidx']=function(){this['_procFullBox'](),this['_procField']("reference_ID","uint",32),this['_procField']("timescale","uint",32),this['_procField']("earliest_presentation_time","uint",1==this.version?64:32),this['_procField']("first_offset","uint",1==this.version?64:32),this['_procField']("reserved","uint",16),this['_procField']("reference_count","uint",16),this['_procEntries']("references",this.reference_count,function(a){this._parsing||(a['reference']=(1&a.reference_type)<<31,a.reference|=2147483647&a.referenced_size,a['sap']=(1&a.starts_with_SAP)<<31,a.sap|=(3&a.SAP_type)<<28,a.sap|=268435455&a.SAP_delta_time),this['_procEntryField'](a,"reference","uint",32),this['_procEntryField'](a,"subsegment_duration","uint",32),this['_procEntryField'](a,"sap","uint",32),this._parsing&&(a['reference_type']=a.reference>>31&1,a['referenced_size']=2147483647&a.reference,a['starts_with_SAP']=a.sap>>31&1,a['SAP_type']=a.sap>>28&7,a['SAP_delta_time']=268435455&a.sap)})},o.prototype['_boxProcessors']['smhd']=function(){this['_procFullBox'](),this['_procField']("balance","uint",16),this['_procField']("reserved","uint",16)},o.prototype['_boxProcessors']['ssix']=function(){this['_procFullBox'](),this['_procField']("subsegment_count","uint",32),this['_procEntries']("subsegments",this.subsegment_count,function(a){this['_procEntryField'](a,"ranges_count","uint",32),this['_procSubEntries'](a,"ranges",a.ranges_count,function(a){this['_procEntryField'](a,"level","uint",8),this['_procEntryField'](a,"range_size","uint",24)})})},o.prototype['_boxProcessors']['stsd']=function(){this['_procFullBox'](),this['_procField']("entry_count","uint",32),this['_procSubBoxes']("entries",this.entry_count)},o.prototype['_boxProcessors']['subs']=function(){this['_procFullBox'](),this['_procField']("entry_count","uint",32),this['_procEntries']("entries",this.entry_count,function(a){this['_procEntryField'](a,"sample_delta","uint",32),this['_procEntryField'](a,"subsample_count","uint",16),this['_procSubEntries'](a,"subsamples",a.subsample_count,function(a){this['_procEntryField'](a,"subsample_size","uint",1===this.version?32:16),this['_procEntryField'](a,"subsample_priority","uint",8),this['_procEntryField'](a,"discardable","uint",8),this['_procEntryField'](a,"codec_specific_parameters","uint",32)})})},o.prototype['_boxProcessors']['tenc']=function(){this['_procFullBox'](),this['_procField']("default_IsEncrypted","uint",24),this['_procField']("default_IV_size","uint",8),this['_procFieldArray']("default_KID",16,"uint",8)},o.prototype['_boxProcessors']['tfdt']=function(){this['_procFullBox'](),this['_procField']("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype['_boxProcessors']['tfhd']=function(){this['_procFullBox'](),this['_procField']("track_ID","uint",32),1&this.flags&&this['_procField']("base_data_offset","uint",64),2&this.flags&&this['_procField']("sample_description_offset","uint",32),8&this.flags&&this['_procField']("default_sample_duration","uint",32),16&this.flags&&this['_procField']("default_sample_size","uint",32),32&this.flags&&this['_procField']("default_sample_flags","uint",32)},o.prototype['_boxProcessors']['tfra']=function(){this['_procFullBox'](),this['_procField']("track_ID","uint",32),this._parsing||(this['reserved']=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this['_procField']("reserved","uint",32),this._parsing&&(this['length_size_of_traf_num']=(48&this.reserved)>>4,this['length_size_of_trun_num']=(12&this.reserved)>>2,this['length_size_of_sample_num']=3&this.reserved),this['_procField']("number_of_entry","uint",32),this['_procEntries']("entries",this.number_of_entry,function(a){this['_procEntryField'](a,"time","uint",1===this.version?64:32),this['_procEntryField'](a,"moof_offset","uint",1===this.version?64:32),this['_procEntryField'](a,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this['_procEntryField'](a,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this['_procEntryField'](a,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},o.prototype['_boxProcessors']['tkhd']=function(){this['_procFullBox'](),this['_procField']("creation_time","uint",1==this.version?64:32),this['_procField']("modification_time","uint",1==this.version?64:32),this['_procField']("track_ID","uint",32),this['_procField']("reserved1","uint",32),this['_procField']("duration","uint",1==this.version?64:32),this['_procFieldArray']("reserved2",2,"uint",32),this['_procField']("layer","uint",16),this['_procField']("alternate_group","uint",16),this['_procField']("volume","template",16),this['_procField']("reserved3","uint",16),this['_procFieldArray']("matrix",9,"template",32),this['_procField']("width","template",32),this['_procField']("height","template",32)},o.prototype['_boxProcessors']['trex']=function(){this['_procFullBox'](),this['_procField']("track_ID","uint",32),this['_procField']("default_sample_description_index","uint",32),this['_procField']("default_sample_duration","uint",32),this['_procField']("default_sample_size","uint",32),this['_procField']("default_sample_flags","uint",32)},o.prototype['_boxProcessors']['trun']=function(){this['_procFullBox'](),this['_procField']("sample_count","uint",32),1&this.flags&&this['_procField']("data_offset","int",32),4&this.flags&&this['_procField']("first_sample_flags","uint",32),this['_procEntries']("samples",this.sample_count,function(a){256&this.flags&&this['_procEntryField'](a,"sample_duration","uint",32),512&this.flags&&this['_procEntryField'](a,"sample_size","uint",32),1024&this.flags&&this['_procEntryField'](a,"sample_flags","uint",32),2048&this.flags&&this['_procEntryField'](a,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},o['prototype']['_boxProcessors']["url "]=o['prototype']['_boxProcessors']["urn "]=function(){this['_procFullBox'](),"urn "===this.type&&this['_procField']("name","string",-1),this['_procField']("location","string",-1)},o.prototype['_boxProcessors']['vlab']=function(){this['_procField']("source_label","utf8")},o.prototype['_boxProcessors']['vmhd']=function(){this['_procFullBox'](),this['_procField']("graphicsmode","uint",16),this['_procFieldArray']("opcolor",3,"uint",16)},o.prototype['_boxProcessors']['vttC']=function(){this['_procField']("config","utf8")},o.prototype['_boxProcessors']['vtte']=function(){}},{}],'336':[function(a,e,n){!function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={'rotl':function(a,e){return a<<e|a>>>32-e},'rotr':function(a,e){return a<<32-e|a>>>e},'endian':function(a){if(a['constructor']==Number)return 16711935&n['rotl'](a,8)|4278255360&n['rotl'](a,24);for(var e=0;e<a.length;e++)a[e]=n['endian'](a[e]);return a},'randomBytes':function(a){for(var e=[];a>0;a--)e['push'](Math['floor'](256*Math['random']()));return e},'bytesToWords':function(a){for(var e=[],n=0,l=0;n<a.length;n++,l+=8)e[l>>>5]|=a[n]<<24-l%32;return e},'wordsToBytes':function(a){for(var e=[],n=0;n<32*a.length;n+=8)e['push'](a[n>>>5]>>>24-n%32&255);return e},'bytesToHex':function(a){for(var e=[],n=0;n<a.length;n++)e['push']((a[n]>>>4)['toString'](16)),e['push']((15&a[n])['toString'](16));return e['join']("")},'hexToBytes':function(a){for(var e=[],n=0;n<a.length;n+=2)e['push'](parseInt(a['substr'](n,2),16));return e},'bytesToBase64':function(e){for(var n=[],l=0;l<e.length;l+=3)for(var E=e[l]<<16|e[l+1]<<8|e[l+2],o=0;4>o;o++)8*l+6*o<=8*e.length?n['push'](a['charAt'](E>>>6*(3-o)&63)):n['push']("=");return n['join']("")},'base64ToBytes':function(e){e=e['replace'](/[^A-Z0-9+\/]/gi,"");for(var n=[],l=0,E=0;l<e.length;E=++l%4)0!=E&&n['push']((a['indexOf'](e['charAt'](l-1))&Math['pow'](2,-2*E+8)-1)<<2*E|a['indexOf'](e['charAt'](l))>>>6-2*E);return n}};e['exports']=n}()},{}],'337':[function(a,e,n){function l(){this['_events']=this._events||{},this['_maxListeners']=this._maxListeners||void 0}function E(a){return"function"==typeof a}function o(a){return"number"==typeof a}function i(a){return"object"==typeof a&&null!==a}function t(a){return void 0===a}e['exports']=l,l['EventEmitter']=l,l['prototype']['_events']=void 0,l['prototype']['_maxListeners']=void 0,l['defaultMaxListeners']=10,l['prototype']['setMaxListeners']=function(a){if(!o(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this['_maxListeners']=a,this},l['prototype']['emit']=function(a){var e,n,l,o,r,b;if(this._events||(this['_events']={}),"error"===a&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;
var d=new Error('Uncaught, unspecified "error" event. ('+e+")");throw d['context']=e,d}if(n=this['_events'][a],t(n))return!1;if(E(n))switch(arguments.length){case 1:n['call'](this);break;case 2:n['call'](this,arguments[1]);break;case 3:n['call'](this,arguments[1],arguments[2]);break;default:o=Array.prototype['slice']['call'](arguments,1),n['apply'](this,o)}else if(i(n))for(o=Array.prototype['slice']['call'](arguments,1),b=n['slice'](),l=b.length,r=0;l>r;r++)b[r]['apply'](this,o);return!0},l['prototype']['addListener']=function(a,e){var n;if(!E(e))throw TypeError("listener must be a function");return this._events||(this['_events']={}),this._events.newListener&&this['emit']("newListener",a,E(e.listener)?e.listener:e),this['_events'][a]?i(this['_events'][a])?this['_events'][a]['push'](e):this['_events'][a]=[this['_events'][a],e]:this['_events'][a]=e,i(this['_events'][a])&&!this['_events'][a].warned&&(n=t(this._maxListeners)?l.defaultMaxListeners:this._maxListeners,n&&n>0&&this['_events'][a].length>n&&(this['_events'][a]['warned']=!0,console['error']("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter['setMaxListeners']() to increase limit.",this['_events'][a].length),"function"==typeof console.trace&&console['trace']())),this},l['prototype']['on']=l.prototype.addListener,l['prototype']['once']=function(a,e){function n(){this['removeListener'](a,n),l||(l=!0,e['apply'](this,arguments))}if(!E(e))throw TypeError("listener must be a function");var l=!1;return n['listener']=e,this['on'](a,n),this},l['prototype']['removeListener']=function(a,e){var n,l,o,t;if(!E(e))throw TypeError("listener must be a function");if(!this._events||!this['_events'][a])return this;if(n=this['_events'][a],o=n.length,l=-1,n===e||E(n.listener)&&n['listener']===e)delete this['_events'][a],this._events.removeListener&&this['emit']("removeListener",a,e);else if(i(n)){for(t=o;t-->0;)if(n[t]===e||n[t].listener&&n[t]['listener']===e){l=t;break}if(0>l)return this;1===n.length?(n['length']=0,delete this['_events'][a]):n['splice'](l,1),this._events.removeListener&&this['emit']("removeListener",a,e)}return this},l['prototype']['removeAllListeners']=function(a){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this['_events']={}:this['_events'][a]&&delete this['_events'][a],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this['removeAllListeners'](e);return this['removeAllListeners']("removeListener"),this['_events']={},this}if(n=this['_events'][a],E(n))this['removeListener'](a,n);else if(n)for(;n.length;)this['removeListener'](a,n[n.length-1]);return delete this['_events'][a],this},l['prototype']['listeners']=function(a){var e;return e=this._events&&this['_events'][a]?E(this['_events'][a])?[this['_events'][a]]:this['_events'][a]['slice']():[]},l['prototype']['listenerCount']=function(a){if(this._events){var e=this['_events'][a];if(E(e))return 1;if(e)return e.length}return 0},l['listenerCount']=function(a,e){return a['listenerCount'](e)}},{}],'338':[function(a,e,n){"use strict";var l=Array.isArray,E=Object.keys,o=Object.prototype.hasOwnProperty;e['exports']=function i(a,e){if(a===e)return!0;var n,t,r,b=l(a),d=l(e);if(b&&d){if(t=a.length,t!=e.length)return!1;for(n=0;t>n;n++)if(!i(a[n],e[n]))return!1;return!0}if(b!=d)return!1;var c=a instanceof Date,p=e instanceof Date;if(c!=p)return!1;if(c&&p)return a['getTime']()==e['getTime']();var w=a instanceof RegExp,x=e instanceof RegExp;if(w!=x)return!1;if(w&&x)return a['toString']()==e['toString']();if(a instanceof Object&&e instanceof Object){var v=E(a);if(t=v.length,t!==E(e).length)return!1;for(n=0;t>n;n++)if(!o['call'](e,v[n]))return!1;for(n=0;t>n;n++)if(r=v[n],!i(a[r],e[r]))return!1;return!0}return!1}},{}],'339':[function(a,e,n){function l(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a['constructor']['isBuffer'](a)}function E(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&l(a['slice'](0,0))}e['exports']=function(a){return null!=a&&(l(a)||E(a)||!!a._isBuffer)}},{}],'340':[function(a,e,n){!function(){var n=a(336),l=a(334).utf8,E=a(339),o=a(334).bin,i=function(a,e){a['constructor']==String?a=e&&"binary"===e.encoding?o['stringToBytes'](a):l['stringToBytes'](a):E(a)?a=Array.prototype['slice']['call'](a,0):Array['isArray'](a)||(a=a['toString']());for(var t=n['bytesToWords'](a),r=8*a.length,b=1732584193,d=-271733879,c=-1732584194,p=271733878,w=0;w<t.length;w++)t[w]=16711935&(t[w]<<8|t[w]>>>24)|4278255360&(t[w]<<24|t[w]>>>8);t[r>>>5]|=128<<r%32,t[(r+64>>>9<<4)+14]=r;for(var x=i._ff,v=i._gg,y=i._hh,h=i._ii,w=0;w<t.length;w+=16){var s=b,D=d,m=c,C=p;b=x(b,d,c,p,t[w+0],7,-680876936),p=x(p,b,d,c,t[w+1],12,-389564586),c=x(c,p,b,d,t[w+2],17,606105819),d=x(d,c,p,b,t[w+3],22,-1044525330),b=x(b,d,c,p,t[w+4],7,-176418897),p=x(p,b,d,c,t[w+5],12,1200080426),c=x(c,p,b,d,t[w+6],17,-1473231341),d=x(d,c,p,b,t[w+7],22,-45705983),b=x(b,d,c,p,t[w+8],7,1770035416),p=x(p,b,d,c,t[w+9],12,-1958414417),c=x(c,p,b,d,t[w+10],17,-42063),d=x(d,c,p,b,t[w+11],22,-1990404162),b=x(b,d,c,p,t[w+12],7,1804603682),p=x(p,b,d,c,t[w+13],12,-40341101),c=x(c,p,b,d,t[w+14],17,-1502002290),d=x(d,c,p,b,t[w+15],22,1236535329),b=v(b,d,c,p,t[w+1],5,-165796510),p=v(p,b,d,c,t[w+6],9,-1069501632),c=v(c,p,b,d,t[w+11],14,643717713),d=v(d,c,p,b,t[w+0],20,-373897302),b=v(b,d,c,p,t[w+5],5,-701558691),p=v(p,b,d,c,t[w+10],9,38016083),c=v(c,p,b,d,t[w+15],14,-660478335),d=v(d,c,p,b,t[w+4],20,-405537848),b=v(b,d,c,p,t[w+9],5,568446438),p=v(p,b,d,c,t[w+14],9,-1019803690),c=v(c,p,b,d,t[w+3],14,-187363961),d=v(d,c,p,b,t[w+8],20,1163531501),b=v(b,d,c,p,t[w+13],5,-1444681467),p=v(p,b,d,c,t[w+2],9,-51403784),c=v(c,p,b,d,t[w+7],14,1735328473),d=v(d,c,p,b,t[w+12],20,-1926607734),b=y(b,d,c,p,t[w+5],4,-378558),p=y(p,b,d,c,t[w+8],11,-2022574463),c=y(c,p,b,d,t[w+11],16,1839030562),d=y(d,c,p,b,t[w+14],23,-35309556),b=y(b,d,c,p,t[w+1],4,-1530992060),p=y(p,b,d,c,t[w+4],11,1272893353),c=y(c,p,b,d,t[w+7],16,-155497632),d=y(d,c,p,b,t[w+10],23,-1094730640),b=y(b,d,c,p,t[w+13],4,681279174),p=y(p,b,d,c,t[w+0],11,-358537222),c=y(c,p,b,d,t[w+3],16,-722521979),d=y(d,c,p,b,t[w+6],23,76029189),b=y(b,d,c,p,t[w+9],4,-640364487),p=y(p,b,d,c,t[w+12],11,-421815835),c=y(c,p,b,d,t[w+15],16,530742520),d=y(d,c,p,b,t[w+2],23,-995338651),b=h(b,d,c,p,t[w+0],6,-198630844),p=h(p,b,d,c,t[w+7],10,1126891415),c=h(c,p,b,d,t[w+14],15,-1416354905),d=h(d,c,p,b,t[w+5],21,-57434055),b=h(b,d,c,p,t[w+12],6,1700485571),p=h(p,b,d,c,t[w+3],10,-1894986606),c=h(c,p,b,d,t[w+10],15,-1051523),d=h(d,c,p,b,t[w+1],21,-2054922799),b=h(b,d,c,p,t[w+8],6,1873313359),p=h(p,b,d,c,t[w+15],10,-30611744),c=h(c,p,b,d,t[w+6],15,-1560198380),d=h(d,c,p,b,t[w+13],21,1309151649),b=h(b,d,c,p,t[w+4],6,-145523070),p=h(p,b,d,c,t[w+11],10,-1120210379),c=h(c,p,b,d,t[w+2],15,718787259),d=h(d,c,p,b,t[w+9],21,-343485551),b=b+s>>>0,d=d+D>>>0,c=c+m>>>0,p=p+C>>>0}return n['endian']([b,d,c,p])};i['_ff']=function(a,e,n,l,E,o,i){var t=a+(e&n|~e&l)+(E>>>0)+i;return(t<<o|t>>>32-o)+e},i['_gg']=function(a,e,n,l,E,o,i){var t=a+(e&l|n&~l)+(E>>>0)+i;return(t<<o|t>>>32-o)+e},i['_hh']=function(a,e,n,l,E,o,i){var t=a+(e^n^l)+(E>>>0)+i;return(t<<o|t>>>32-o)+e},i['_ii']=function(a,e,n,l,E,o,i){var t=a+(n^(e|~l))+(E>>>0)+i;return(t<<o|t>>>32-o)+e},i['_blocksize']=16,i['_digestsize']=16,e['exports']=function(a,e){if(void 0===a||null===a)throw new Error("Illegal argument "+a);var l=n['wordsToBytes'](i(a,e));return e&&e.asBytes?l:e&&e.asString?o['bytesToString'](l):n['bytesToHex'](l)}}()},{'334':334,'336':336,'339':339}],'341':[function(a,e,n){function l(a,e,n){for(var l=[],E=Math['max'](a.length,e.length),o=0,i=0;E>i||o;){var t=i<a.length?a[i]:0,r=i<e.length?e[i]:0,b=o+t+r;l['push'](b%n),o=Math['floor'](b/n),i++}return l}function E(a,e,n){if(0>a)return null;if(0==a)return[];for(var E=[],o=e;;){if(1&a&&(E=l(E,o,n)),a>>=1,0===a)break;o=l(o,o,n)}return E}function o(a,e){for(var n=a['split'](""),l=[],E=n.length-1;E>=0;E--){var o=parseInt(n[E],e);if(isNaN(o))return null;l['push'](o)}return l}function i(a,e,n){var i=o(a,e);if(null===i)return null;for(var t=[],r=[1],b=0;b<i.length;b++)i[b]&&(t=l(t,E(i[b],r,n),n)),r=E(e,r,n);for(var d="",b=t.length-1;b>=0;b--)d+=t[b]['toString'](n);return d}function t(a,e){var n=i(a,10,16);return n?(e?"0x":"")+n:null}function r(a){return"0x"===a['substring'](0,2)&&(a=a['substring'](2)),a=a['toLowerCase'](),i(a,16,10)}function b(a){return i(a,10,2)}function d(a){return i(a,2,10)}function c(a){return"0x"===a['substring'](0,2)&&(a=a['substring'](2)),a=a['toLowerCase'](),i(a,16,2)}function p(a,e){var n=i(a,2,16);return n?(e?"0x":"")+n:null}i['decToHex']=t,i['hexToDec']=r,i['decToBin']=b,i['binToDec']=d,i['hexToBin']=c,i['binToHex']=p,e['exports']=i},{}],'342':[function(a,e,n){function l(){throw new Error("setTimeout has not been defined")}function E(){throw new Error("clearTimeout has not been defined")}function o(a){if(c===setTimeout)return setTimeout(a,0);if((c===l||!c)&&setTimeout)return c=setTimeout,setTimeout(a,0);try{return c(a,0)}catch(e){try{return c['call'](null,a,0)}catch(e){return c['call'](this,a,0)}}}function i(a){if(p===clearTimeout)return clearTimeout(a);if((p===E||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(a);try{return p(a)}catch(e){try{return p['call'](null,a)}catch(e){return p['call'](this,a)}}}function t(){y&&x&&(y=!1,x.length?v=x['concat'](v):h=-1,v.length&&r())}function r(){if(!y){var a=o(t);y=!0;for(var e=v.length;e;){for(x=v,v=[];++h<e;)x&&x[h]['run']();h=-1,e=v.length}x=null,y=!1,i(a)}}function b(a,e){this['fun']=a,this['array']=e}function d(){}var c,p,w=e['exports']={};!function(){try{c="function"==typeof setTimeout?setTimeout:l}catch(a){c=l}try{p="function"==typeof clearTimeout?clearTimeout:E}catch(a){p=E}}();var x,v=[],y=!1,h=-1;w['nextTick']=function(a){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v['push'](new b(a,e)),1!==v.length||y||o(r)},b['prototype']['run']=function(){this['fun']['apply'](null,this.array)},w['title']="browser",w['browser']=!0,w['env']={},w['argv']=[],w['version']="",w['versions']={},w['on']=d,w['addListener']=d,w['once']=d,w['off']=d,w['removeListener']=d,w['removeAllListeners']=d,w['emit']=d,w['prependListener']=d,w['prependOnceListener']=d,w['listeners']=function(a){return[]},w['binding']=function(a){throw new Error("process.binding is not supported")},w['cwd']=function(){return"/"},w['chdir']=function(a){throw new Error("process.chdir is not supported")},w['umask']=function(){return 0}},{}],'343':[function(a,e,n){"use strict";function l(a,e){if(!Array['isArray'](a))throw new Error("shuffle expect an array as parameter.");e=e||{};var n,l,E=a,o=a.length,i=e.rng||Math.random;for(e['copy']===!0&&(E=a['slice']());o;)n=Math['floor'](i()*o),o-=1,l=E[o],E[o]=E[n],E[n]=l;return E}l['pick']=function(a,e){if(!Array['isArray'](a))throw new Error("shuffle['pick']() expect an array as parameter.");e=e||{};var n=e.rng||Math.random,l=e.picks||1;if("number"==typeof l&&1!==l){for(var E,o=a.length,i=a['slice'](),t=[];l&&o;)E=Math['floor'](n()*o),t['push'](i[E]),i['splice'](E,1),o-=1,l-=1;return t}return a[Math['floor'](n()*a.length)]},e['exports']=l},{}],'344':[function(a,e,n){String.prototype.codePointAt||!function(){"use strict";var a=function(){try{var a={},e=Object.defineProperty,n=e(a,a,a)&&e}catch(l){}return n}(),e=function(a){if(null==this)throw TypeError();var e=String(this),n=e.length,l=a?Number(a):0;if(l!=l&&(l=0),0>l||l>=n)return void 0;var E,o=e['charCodeAt'](l);return o>=55296&&56319>=o&&n>l+1&&(E=e['charCodeAt'](l+1),E>=56320&&57343>=E)?1024*(o-55296)+E-56320+65536:o};a?a(String.prototype,"codePointAt",{'value':e,'configurable':!0,'writable':!0}):String['prototype']['codePointAt']=e}()},{}],'345':[function(a,e,n){String.prototype.endsWith||!function(){"use strict";var a=function(){try{var a={},e=Object.defineProperty,n=e(a,a,a)&&e}catch(l){}return n}(),e={}.toString,n=function(a){if(null==this)throw TypeError();var n=String(this);if(a&&"[object RegExp]"==e['call'](a))throw TypeError();var l=n.length,E=String(a),o=E.length,i=l;if(arguments.length>1){var t=arguments[1];void 0!==t&&(i=t?Number(t):0,i!=i&&(i=0))}var r=Math['min'](Math['max'](i,0),l),b=r-o;if(0>b)return!1;for(var d=-1;++d<o;)if(n['charCodeAt'](b+d)!=E['charCodeAt'](d))return!1;return!0};a?a(String.prototype,"endsWith",{'value':n,'configurable':!0,'writable':!0}):String['prototype']['endsWith']=n}()},{}],'346':[function(a,e,n){String.prototype.repeat||!function(){"use strict";var a=function(){try{var a={},e=Object.defineProperty,n=e(a,a,a)&&e}catch(l){}return n}(),e=function(a){if(null==this)throw TypeError();var e=String(this),n=a?Number(a):0;if(n!=n&&(n=0),0>n||n==1/0)throw RangeError();for(var l="";n;)n%2==1&&(l+=e),n>1&&(e+=e),n>>=1;return l};a?a(String.prototype,"repeat",{'value':e,'configurable':!0,'writable':!0}):String['prototype']['repeat']=e}()},{}],'347':[function(a,e,n){!function(a){var l=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,E=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,t={'buildAbsoluteURL':function(a,e,n){if(n=n||{},a=a['trim'](),e=e['trim'](),!e){if(!n.alwaysNormalize)return a;var l=t['parseURL'](a);if(!l)throw new Error("Error trying to parse base URL.");return l['path']=t['normalizePath'](l.path),t['buildURLFromParts'](l)}var o=t['parseURL'](e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o['path']=t['normalizePath'](o.path),t['buildURLFromParts'](o)):e;var i=t['parseURL'](a);if(!i)throw new Error("Error trying to parse base URL.");if(!i.netLoc&&i.path&&"/"!==i['path'][0]){var r=E['exec'](i.path);i['netLoc']=r[1],i['path']=r[2]}i.netLoc&&!i.path&&(i['path']="/");var b={'scheme':i.scheme,'netLoc':o.netLoc,'path':null,'params':o.params,'query':o.query,'fragment':o.fragment};if(!o.netLoc&&(b['netLoc']=i.netLoc,"/"!==o['path'][0]))if(o.path){var d=i.path,c=d['substring'](0,d['lastIndexOf']("/")+1)+o.path;b['path']=t['normalizePath'](c)}else b['path']=i.path,o.params||(b['params']=i.params,o.query||(b['query']=i.query));return null===b.path&&(b['path']=n.alwaysNormalize?t['normalizePath'](o.path):o.path),t['buildURLFromParts'](b)},'parseURL':function(a){var e=l['exec'](a);return e?{'scheme':e[1]||"",'netLoc':e[2]||"",'path':e[3]||"",'params':e[4]||"",'query':e[5]||"",'fragment':e[6]||""}:null},'normalizePath':function(a){for(a=a['split']("")['reverse']()['join']("")['replace'](o,"");a.length!==(a=a['replace'](i,"")).length;);return a['split']("")['reverse']()['join']("")},'buildURLFromParts':function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};"object"==typeof n&&"object"==typeof e?e['exports']=t:"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof n?n['URLToolkit']=t:a['URLToolkit']=t}(this)},{}],'348':[function(a,e,n){"use strict";a(344),a(346);var l=function(a){var e=parseInt(a)['toString'](2),n=0,l=0;e.length<=7?(n=1,l=7):e.length>7&&e.length<=11?(n=2,l=11):e.length>11&&e.length<=16?(n=3,l=16):e.length>16&&e.length<=21?(n=4,l=21):e.length>21&&e.length<=26?(n=5,l=26):e.length>26&&e.length<=31&&(n=6,l=31);for(var E=("0"['repeat'](l)+e)['slice'](-l),o="",i=0;n>i;i++)1!=n?0==i?(o+=parseInt("1"['repeat'](n)+"0"+E['slice'](0,7-n),2)['toString'](16),E=E['slice'](7-n)):(o+=parseInt("10"+E['slice'](0,6),2)['toString'](16),E=E['slice'](6)):o+=("00"+parseInt(E,2)['toString'](16))['slice'](-2);return o},E=function(a){for(var e="",n=0;n<a.length;n++)e+=l(a['codePointAt'](n));return e},o=function(a){try{var e=decodeURIComponent(a['toLowerCase']()['replace'](/\s+/g,"")['replace'](/[0-9a-f]{2}/g,"%$&"))}catch(n){throw"Not valid UTF-8 hex code!"}return e};e['exports']={'encode':E,'decode':o}},{'344':344,'346':346}],'349':[function(a,e,n){var l=arguments[3],E=arguments[4],o=arguments[5],i=JSON.stringify;e['exports']=function(a,e){function n(a){y[a]=!0;for(var e in E[a][1]){var l=E[a][1][e];y[l]||n(l)}}for(var t,r=Object['keys'](o),b=0,d=r.length;d>b;b++){var c=r[b],p=o[c].exports;if(p===a||p&&p["default"]===a){t=c;break}}if(!t){t=Math['floor'](Math['pow'](16,8)*Math['random']())['toString'](16);for(var w={},b=0,d=r.length;d>b;b++){var c=r[b];w[c]=c}E[t]=[Function(["require","module","exports"],"("+a+")(self)"),w]}var x=Math['floor'](Math['pow'](16,8)*Math['random']())['toString'](16),v={};v[t]=t,E[x]=[Function(["require"],"var f = require("+i(t)+");(f.default ? f.default : f)(self);"),v];var y={};n(x);var h="("+l+")({"+Object['keys'](y)['map'](function(a){return i(a)+":["+E[a][0]+","+i(E[a][1])+"]"})['join'](",")+"},{},["+i(x)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,D=new Blob([h],{'type':"text/javascript"});if(e&&e.bare)return D;var m=s['createObjectURL'](D),C=new Worker(m);return C['objectURL']=m,C}},{}]},{},[314]);

